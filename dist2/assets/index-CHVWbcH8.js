var IO=Object.defineProperty;var CO=(t,e,n)=>e in t?IO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wr=(t,e,n)=>CO(t,typeof e!="symbol"?e+"":e,n);function RO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const PO="modulepreload",DO=function(t){return"/"+t},zN={},NT=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=DO(u),u in zN)return;zN[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":PO,h||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jT={exports:{}},Xg={},ET={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rf=Symbol.for("react.element"),MO=Symbol.for("react.portal"),LO=Symbol.for("react.fragment"),OO=Symbol.for("react.strict_mode"),VO=Symbol.for("react.profiler"),UO=Symbol.for("react.provider"),FO=Symbol.for("react.context"),zO=Symbol.for("react.forward_ref"),BO=Symbol.for("react.suspense"),$O=Symbol.for("react.memo"),WO=Symbol.for("react.lazy"),BN=Symbol.iterator;function HO(t){return t===null||typeof t!="object"?null:(t=BN&&t[BN]||t["@@iterator"],typeof t=="function"?t:null)}var ST={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TT=Object.assign,AT={};function Eu(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||ST}Eu.prototype.isReactComponent={};Eu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IT(){}IT.prototype=Eu.prototype;function qb(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||ST}var Kb=qb.prototype=new IT;Kb.constructor=qb;TT(Kb,Eu.prototype);Kb.isPureReactComponent=!0;var $N=Array.isArray,CT=Object.prototype.hasOwnProperty,Qb={current:null},RT={key:!0,ref:!0,__self:!0,__source:!0};function PT(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)CT.call(e,r)&&!RT.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:rf,type:t,key:a,ref:o,props:s,_owner:Qb.current}}function GO(t,e){return{$$typeof:rf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xb(t){return typeof t=="object"&&t!==null&&t.$$typeof===rf}function qO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WN=/\/+/g;function yy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qO(""+t.key):e.toString(36)}function kp(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rf:case MO:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yy(o,0):r,$N(s)?(n="",t!=null&&(n=t.replace(WN,"$&/")+"/"),kp(s,e,n,"",function(h){return h})):s!=null&&(Xb(s)&&(s=GO(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WN,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$N(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+yy(a,c);o+=kp(a,e,n,u,s)}else if(u=HO(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+yy(a,c++),o+=kp(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $m(t,e,n){if(t==null)return t;var r=[],s=0;return kp(t,r,"","",function(a){return e.call(n,a,s++)}),r}function KO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cr={current:null},jp={transition:null},QO={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:jp,ReactCurrentOwner:Qb};function DT(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:$m,forEach:function(t,e,n){$m(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $m(t,function(){e++}),e},toArray:function(t){return $m(t,function(e){return e})||[]},only:function(t){if(!Xb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=Eu;Ke.Fragment=LO;Ke.Profiler=VO;Ke.PureComponent=qb;Ke.StrictMode=OO;Ke.Suspense=BO;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QO;Ke.act=DT;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Qb.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)CT.call(e,u)&&!RT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:rf,type:t.type,key:s,ref:a,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:FO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UO,_context:t},t.Consumer=t};Ke.createElement=PT;Ke.createFactory=function(t){var e=PT.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:zO,render:t}};Ke.isValidElement=Xb;Ke.lazy=function(t){return{$$typeof:WO,_payload:{_status:-1,_result:t},_init:KO}};Ke.memo=function(t,e){return{$$typeof:$O,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=jp.transition;jp.transition={};try{t()}finally{jp.transition=e}};Ke.unstable_act=DT;Ke.useCallback=function(t,e){return Cr.current.useCallback(t,e)};Ke.useContext=function(t){return Cr.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return Cr.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return Cr.current.useEffect(t,e)};Ke.useId=function(){return Cr.current.useId()};Ke.useImperativeHandle=function(t,e,n){return Cr.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return Cr.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return Cr.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return Cr.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return Cr.current.useReducer(t,e,n)};Ke.useRef=function(t){return Cr.current.useRef(t)};Ke.useState=function(t){return Cr.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return Cr.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return Cr.current.useTransition()};Ke.version="18.3.1";ET.exports=Ke;var _=ET.exports;const Do=kT(_),XO=RO({__proto__:null,default:Do},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YO=_,JO=Symbol.for("react.element"),ZO=Symbol.for("react.fragment"),eV=Object.prototype.hasOwnProperty,tV=YO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nV={key:!0,ref:!0,__self:!0,__source:!0};function MT(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eV.call(e,r)&&!nV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JO,type:t,key:a,ref:o,props:s,_owner:tV.current}}Xg.Fragment=ZO;Xg.jsx=MT;Xg.jsxs=MT;jT.exports=Xg;var i=jT.exports,Hv={},LT={exports:{}},hs={},OT={exports:{}},VT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,te){var ue=K.length;K.push(te);e:for(;0<ue;){var Re=ue-1>>>1,ge=K[Re];if(0<s(ge,te))K[Re]=te,K[ue]=ge,ue=Re;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var te=K[0],ue=K.pop();if(ue!==te){K[0]=ue;e:for(var Re=0,ge=K.length,me=ge>>>1;Re<me;){var at=2*(Re+1)-1,jt=K[at],Xt=at+1,Tn=K[Xt];if(0>s(jt,ue))Xt<ge&&0>s(Tn,jt)?(K[Re]=Tn,K[Xt]=ue,Re=Xt):(K[Re]=jt,K[at]=ue,Re=at);else if(Xt<ge&&0>s(Tn,ue))K[Re]=Tn,K[Xt]=ue,Re=Xt;else break e}}return te}function s(K,te){var ue=K.sortIndex-te.sortIndex;return ue!==0?ue:K.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,g=null,x=3,v=!1,E=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var te=n(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=K)r(h),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(h)}}function A(K){if(j=!1,k(K),!E)if(n(u)!==null)E=!0,je(D);else{var te=n(h);te!==null&&oe(A,te.startTime-K)}}function D(K,te){E=!1,j&&(j=!1,N(T),T=-1),v=!0;var ue=x;try{for(k(te),g=n(u);g!==null&&(!(g.expirationTime>te)||K&&!z());){var Re=g.callback;if(typeof Re=="function"){g.callback=null,x=g.priorityLevel;var ge=Re(g.expirationTime<=te);te=t.unstable_now(),typeof ge=="function"?g.callback=ge:g===n(u)&&r(u),k(te)}else r(u);g=n(u)}if(g!==null)var me=!0;else{var at=n(h);at!==null&&oe(A,at.startTime-te),me=!1}return me}finally{g=null,x=ue,v=!1}}var F=!1,C=null,T=-1,P=5,L=-1;function z(){return!(t.unstable_now()-L<P)}function H(){if(C!==null){var K=t.unstable_now();L=K;var te=!0;try{te=C(!0,K)}finally{te?B():(F=!1,C=null)}}else F=!1}var B;if(typeof w=="function")B=function(){w(H)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,we=Pe.port2;Pe.port1.onmessage=H,B=function(){we.postMessage(null)}}else B=function(){S(H,0)};function je(K){C=K,F||(F=!0,B())}function oe(K,te){T=S(function(){K(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){E||v||(E=!0,je(D))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var ue=x;x=te;try{return K()}finally{x=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ue=x;x=K;try{return te()}finally{x=ue}},t.unstable_scheduleCallback=function(K,te,ue){var Re=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,K){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ue+ge,K={id:m++,callback:te,priorityLevel:K,startTime:ue,expirationTime:ge,sortIndex:-1},ue>Re?(K.sortIndex=ue,e(h,K),n(u)===null&&K===n(h)&&(j?(N(T),T=-1):j=!0,oe(A,ue-Re))):(K.sortIndex=ge,e(u,K),E||v||(E=!0,je(D))),K},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(K){var te=x;return function(){var ue=x;x=te;try{return K.apply(this,arguments)}finally{x=ue}}}})(VT);OT.exports=VT;var rV=OT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sV=_,us=rV;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UT=new Set,gh={};function zl(t,e){eu(t,e),eu(t+"Capture",e)}function eu(t,e){for(gh[t]=e,t=0;t<e.length;t++)UT.add(e[t])}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gv=Object.prototype.hasOwnProperty,iV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HN={},GN={};function aV(t){return Gv.call(GN,t)?!0:Gv.call(HN,t)?!1:iV.test(t)?GN[t]=!0:(HN[t]=!0,!1)}function oV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lV(t,e,n,r){if(e===null||typeof e>"u"||oV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yb=/[\-:]([a-z])/g;function Jb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yb,Jb);qn[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yb,Jb);qn[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yb,Jb);qn[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zb(t,e,n,r){var s=qn.hasOwnProperty(e)?qn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lV(e,n,s,r)&&(n=null),r||s===null?aV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ka=sV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wm=Symbol.for("react.element"),Nc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),ew=Symbol.for("react.strict_mode"),qv=Symbol.for("react.profiler"),FT=Symbol.for("react.provider"),zT=Symbol.for("react.context"),tw=Symbol.for("react.forward_ref"),Kv=Symbol.for("react.suspense"),Qv=Symbol.for("react.suspense_list"),nw=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),BT=Symbol.for("react.offscreen"),qN=Symbol.iterator;function kd(t){return t===null||typeof t!="object"?null:(t=qN&&t[qN]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,vy;function Md(t){if(vy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vy=e&&e[1]||""}return`
`+vy+t}var by=!1;function wy(t,e){if(!t||by)return"";by=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{by=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Md(t):""}function cV(t){switch(t.tag){case 5:return Md(t.type);case 16:return Md("Lazy");case 13:return Md("Suspense");case 19:return Md("SuspenseList");case 0:case 2:case 15:return t=wy(t.type,!1),t;case 11:return t=wy(t.type.render,!1),t;case 1:return t=wy(t.type,!0),t;default:return""}}function Xv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kc:return"Fragment";case Nc:return"Portal";case qv:return"Profiler";case ew:return"StrictMode";case Kv:return"Suspense";case Qv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zT:return(t.displayName||"Context")+".Consumer";case FT:return(t._context.displayName||"Context")+".Provider";case tw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nw:return e=t.displayName||null,e!==null?e:Xv(t.type)||"Memo";case Xa:e=t._payload,t=t._init;try{return Xv(t(e))}catch{}}return null}function uV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xv(e);case 8:return e===ew?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $T(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dV(t){var e=$T(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hm(t){t._valueTracker||(t._valueTracker=dV(t))}function WT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$T(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yv(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function KN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HT(t,e){e=e.checked,e!=null&&Zb(t,"checked",e,!1)}function Jv(t,e){HT(t,e);var n=jo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zv(t,e.type,jo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zv(t,e,n){(e!=="number"||Yp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ld=Array.isArray;function Fc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function e1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Ld(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jo(n)}}function GT(t,e){var n=jo(e.value),r=jo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function YN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gm,KT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hV=["Webkit","ms","Moz","O"];Object.keys(Kd).forEach(function(t){hV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kd[e]=Kd[t]})});function QT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kd.hasOwnProperty(t)&&Kd[t]?(""+e).trim():e+"px"}function XT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=QT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fV=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function n1(t,e){if(e){if(fV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function r1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s1=null;function rw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var i1=null,zc=null,Bc=null;function JN(t){if(t=of(t)){if(typeof i1!="function")throw Error(le(280));var e=t.stateNode;e&&(e=t0(e),i1(t.stateNode,t.type,e))}}function YT(t){zc?Bc?Bc.push(t):Bc=[t]:zc=t}function JT(){if(zc){var t=zc,e=Bc;if(Bc=zc=null,JN(t),e)for(t=0;t<e.length;t++)JN(e[t])}}function ZT(t,e){return t(e)}function eA(){}var _y=!1;function tA(t,e,n){if(_y)return t(e,n);_y=!0;try{return ZT(t,e,n)}finally{_y=!1,(zc!==null||Bc!==null)&&(eA(),JT())}}function yh(t,e){var n=t.stateNode;if(n===null)return null;var r=t0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var a1=!1;if(ua)try{var jd={};Object.defineProperty(jd,"passive",{get:function(){a1=!0}}),window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{a1=!1}function mV(t,e,n,r,s,a,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Qd=!1,Jp=null,Zp=!1,o1=null,pV={onError:function(t){Qd=!0,Jp=t}};function gV(t,e,n,r,s,a,o,c,u){Qd=!1,Jp=null,mV.apply(pV,arguments)}function xV(t,e,n,r,s,a,o,c,u){if(gV.apply(this,arguments),Qd){if(Qd){var h=Jp;Qd=!1,Jp=null}else throw Error(le(198));Zp||(Zp=!0,o1=h)}}function Bl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ZN(t){if(Bl(t)!==t)throw Error(le(188))}function yV(t){var e=t.alternate;if(!e){if(e=Bl(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ZN(s),t;if(a===r)return ZN(s),e;a=a.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function rA(t){return t=yV(t),t!==null?sA(t):null}function sA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sA(t);if(e!==null)return e;t=t.sibling}return null}var iA=us.unstable_scheduleCallback,ek=us.unstable_cancelCallback,vV=us.unstable_shouldYield,bV=us.unstable_requestPaint,on=us.unstable_now,wV=us.unstable_getCurrentPriorityLevel,sw=us.unstable_ImmediatePriority,aA=us.unstable_UserBlockingPriority,eg=us.unstable_NormalPriority,_V=us.unstable_LowPriority,oA=us.unstable_IdlePriority,Yg=null,Ni=null;function NV(t){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(Yg,t,void 0,(t.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:EV,kV=Math.log,jV=Math.LN2;function EV(t){return t>>>=0,t===0?32:31-(kV(t)/jV|0)|0}var qm=64,Km=4194304;function Od(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Od(c):(a&=o,a!==0&&(r=Od(a)))}else o=n&~s,o!==0?r=Od(o):a!==0&&(r=Od(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ri(e),s=1<<n,r|=t[n],e&=~s;return r}function SV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ri(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=SV(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function l1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lA(){var t=qm;return qm<<=1,!(qm&4194240)&&(qm=64),t}function Ny(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ri(e),t[e]=n}function AV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ri(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function iw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ri(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var bt=0;function cA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uA,aw,dA,hA,fA,c1=!1,Qm=[],ho=null,fo=null,mo=null,vh=new Map,bh=new Map,Ja=[],IV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tk(t,e){switch(t){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bh.delete(e.pointerId)}}function Ed(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=of(e),e!==null&&aw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CV(t,e,n,r,s){switch(e){case"focusin":return ho=Ed(ho,t,e,n,r,s),!0;case"dragenter":return fo=Ed(fo,t,e,n,r,s),!0;case"mouseover":return mo=Ed(mo,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return vh.set(a,Ed(vh.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,bh.set(a,Ed(bh.get(a)||null,t,e,n,r,s)),!0}return!1}function mA(t){var e=yl(t.target);if(e!==null){var n=Bl(e);if(n!==null){if(e=n.tag,e===13){if(e=nA(n),e!==null){t.blockedOn=e,fA(t.priority,function(){dA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ep(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=u1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);s1=r,n.target.dispatchEvent(r),s1=null}else return e=of(n),e!==null&&aw(e),t.blockedOn=n,!1;e.shift()}return!0}function nk(t,e,n){Ep(t)&&n.delete(e)}function RV(){c1=!1,ho!==null&&Ep(ho)&&(ho=null),fo!==null&&Ep(fo)&&(fo=null),mo!==null&&Ep(mo)&&(mo=null),vh.forEach(nk),bh.forEach(nk)}function Sd(t,e){t.blockedOn===e&&(t.blockedOn=null,c1||(c1=!0,us.unstable_scheduleCallback(us.unstable_NormalPriority,RV)))}function wh(t){function e(s){return Sd(s,t)}if(0<Qm.length){Sd(Qm[0],t);for(var n=1;n<Qm.length;n++){var r=Qm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ho!==null&&Sd(ho,t),fo!==null&&Sd(fo,t),mo!==null&&Sd(mo,t),vh.forEach(e),bh.forEach(e),n=0;n<Ja.length;n++)r=Ja[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ja.length&&(n=Ja[0],n.blockedOn===null);)mA(n),n.blockedOn===null&&Ja.shift()}var $c=ka.ReactCurrentBatchConfig,ng=!0;function PV(t,e,n,r){var s=bt,a=$c.transition;$c.transition=null;try{bt=1,ow(t,e,n,r)}finally{bt=s,$c.transition=a}}function DV(t,e,n,r){var s=bt,a=$c.transition;$c.transition=null;try{bt=4,ow(t,e,n,r)}finally{bt=s,$c.transition=a}}function ow(t,e,n,r){if(ng){var s=u1(t,e,n,r);if(s===null)Py(t,e,r,rg,n),tk(t,r);else if(CV(s,t,e,n,r))r.stopPropagation();else if(tk(t,r),e&4&&-1<IV.indexOf(t)){for(;s!==null;){var a=of(s);if(a!==null&&uA(a),a=u1(t,e,n,r),a===null&&Py(t,e,r,rg,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Py(t,e,r,null,n)}}var rg=null;function u1(t,e,n,r){if(rg=null,t=rw(r),t=yl(t),t!==null)if(e=Bl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rg=t,null}function pA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wV()){case sw:return 1;case aA:return 4;case eg:case _V:return 16;case oA:return 536870912;default:return 16}default:return 16}}var so=null,lw=null,Sp=null;function gA(){if(Sp)return Sp;var t,e=lw,n=e.length,r,s="value"in so?so.value:so.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Sp=s.slice(t,1<r?1-r:void 0)}function Tp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xm(){return!0}function rk(){return!1}function fs(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Xm:rk,this.isPropagationStopped=rk,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),e}var Su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cw=fs(Su),af=Kt({},Su,{view:0,detail:0}),MV=fs(af),ky,jy,Td,Jg=Kt({},af,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Td&&(Td&&t.type==="mousemove"?(ky=t.screenX-Td.screenX,jy=t.screenY-Td.screenY):jy=ky=0,Td=t),ky)},movementY:function(t){return"movementY"in t?t.movementY:jy}}),sk=fs(Jg),LV=Kt({},Jg,{dataTransfer:0}),OV=fs(LV),VV=Kt({},af,{relatedTarget:0}),Ey=fs(VV),UV=Kt({},Su,{animationName:0,elapsedTime:0,pseudoElement:0}),FV=fs(UV),zV=Kt({},Su,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BV=fs(zV),$V=Kt({},Su,{data:0}),ik=fs($V),WV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GV[t])?!!e[t]:!1}function uw(){return qV}var KV=Kt({},af,{key:function(t){if(t.key){var e=WV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uw,charCode:function(t){return t.type==="keypress"?Tp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QV=fs(KV),XV=Kt({},Jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ak=fs(XV),YV=Kt({},af,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uw}),JV=fs(YV),ZV=Kt({},Su,{propertyName:0,elapsedTime:0,pseudoElement:0}),eU=fs(ZV),tU=Kt({},Jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nU=fs(tU),rU=[9,13,27,32],dw=ua&&"CompositionEvent"in window,Xd=null;ua&&"documentMode"in document&&(Xd=document.documentMode);var sU=ua&&"TextEvent"in window&&!Xd,xA=ua&&(!dw||Xd&&8<Xd&&11>=Xd),ok=" ",lk=!1;function yA(t,e){switch(t){case"keyup":return rU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jc=!1;function iU(t,e){switch(t){case"compositionend":return vA(e);case"keypress":return e.which!==32?null:(lk=!0,ok);case"textInput":return t=e.data,t===ok&&lk?null:t;default:return null}}function aU(t,e){if(jc)return t==="compositionend"||!dw&&yA(t,e)?(t=gA(),Sp=lw=so=null,jc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xA&&e.locale!=="ko"?null:e.data;default:return null}}var oU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ck(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oU[t.type]:e==="textarea"}function bA(t,e,n,r){YT(r),e=sg(e,"onChange"),0<e.length&&(n=new cw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yd=null,_h=null;function lU(t){CA(t,0)}function Zg(t){var e=Tc(t);if(WT(e))return t}function cU(t,e){if(t==="change")return e}var wA=!1;if(ua){var Sy;if(ua){var Ty="oninput"in document;if(!Ty){var uk=document.createElement("div");uk.setAttribute("oninput","return;"),Ty=typeof uk.oninput=="function"}Sy=Ty}else Sy=!1;wA=Sy&&(!document.documentMode||9<document.documentMode)}function dk(){Yd&&(Yd.detachEvent("onpropertychange",_A),_h=Yd=null)}function _A(t){if(t.propertyName==="value"&&Zg(_h)){var e=[];bA(e,_h,t,rw(t)),tA(lU,e)}}function uU(t,e,n){t==="focusin"?(dk(),Yd=e,_h=n,Yd.attachEvent("onpropertychange",_A)):t==="focusout"&&dk()}function dU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zg(_h)}function hU(t,e){if(t==="click")return Zg(e)}function fU(t,e){if(t==="input"||t==="change")return Zg(e)}function mU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:mU;function Nh(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gv.call(e,s)||!ai(t[s],e[s]))return!1}return!0}function hk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fk(t,e){var n=hk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hk(n)}}function NA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kA(){for(var t=window,e=Yp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yp(t.document)}return e}function hw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pU(t){var e=kA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NA(n.ownerDocument.documentElement,n)){if(r!==null&&hw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=fk(n,a);var o=fk(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gU=ua&&"documentMode"in document&&11>=document.documentMode,Ec=null,d1=null,Jd=null,h1=!1;function mk(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;h1||Ec==null||Ec!==Yp(r)||(r=Ec,"selectionStart"in r&&hw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jd&&Nh(Jd,r)||(Jd=r,r=sg(d1,"onSelect"),0<r.length&&(e=new cw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ec)))}function Ym(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sc={animationend:Ym("Animation","AnimationEnd"),animationiteration:Ym("Animation","AnimationIteration"),animationstart:Ym("Animation","AnimationStart"),transitionend:Ym("Transition","TransitionEnd")},Ay={},jA={};ua&&(jA=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function e0(t){if(Ay[t])return Ay[t];if(!Sc[t])return t;var e=Sc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jA)return Ay[t]=e[n];return t}var EA=e0("animationend"),SA=e0("animationiteration"),TA=e0("animationstart"),AA=e0("transitionend"),IA=new Map,pk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mo(t,e){IA.set(t,e),zl(e,[t])}for(var Iy=0;Iy<pk.length;Iy++){var Cy=pk[Iy],xU=Cy.toLowerCase(),yU=Cy[0].toUpperCase()+Cy.slice(1);Mo(xU,"on"+yU)}Mo(EA,"onAnimationEnd");Mo(SA,"onAnimationIteration");Mo(TA,"onAnimationStart");Mo("dblclick","onDoubleClick");Mo("focusin","onFocus");Mo("focusout","onBlur");Mo(AA,"onTransitionEnd");eu("onMouseEnter",["mouseout","mouseover"]);eu("onMouseLeave",["mouseout","mouseover"]);eu("onPointerEnter",["pointerout","pointerover"]);eu("onPointerLeave",["pointerout","pointerover"]);zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vd));function gk(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xV(r,e,void 0,t),t.currentTarget=null}function CA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;gk(s,c,h),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;gk(s,c,h),a=u}}}if(Zp)throw t=o1,Zp=!1,o1=null,t}function Ct(t,e){var n=e[x1];n===void 0&&(n=e[x1]=new Set);var r=t+"__bubble";n.has(r)||(RA(e,t,2,!1),n.add(r))}function Ry(t,e,n){var r=0;e&&(r|=4),RA(n,t,r,e)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function kh(t){if(!t[Jm]){t[Jm]=!0,UT.forEach(function(n){n!=="selectionchange"&&(vU.has(n)||Ry(n,!1,t),Ry(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jm]||(e[Jm]=!0,Ry("selectionchange",!1,e))}}function RA(t,e,n,r){switch(pA(e)){case 1:var s=PV;break;case 4:s=DV;break;default:s=ow}n=s.bind(null,e,n,t),s=void 0,!a1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Py(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=yl(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}tA(function(){var h=a,m=rw(n),g=[];e:{var x=IA.get(t);if(x!==void 0){var v=cw,E=t;switch(t){case"keypress":if(Tp(n)===0)break e;case"keydown":case"keyup":v=QV;break;case"focusin":E="focus",v=Ey;break;case"focusout":E="blur",v=Ey;break;case"beforeblur":case"afterblur":v=Ey;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=sk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=OV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=JV;break;case EA:case SA:case TA:v=FV;break;case AA:v=eU;break;case"scroll":v=MV;break;case"wheel":v=nU;break;case"copy":case"cut":case"paste":v=BV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ak}var j=(e&4)!==0,S=!j&&t==="scroll",N=j?x!==null?x+"Capture":null:x;j=[];for(var w=h,k;w!==null;){k=w;var A=k.stateNode;if(k.tag===5&&A!==null&&(k=A,N!==null&&(A=yh(w,N),A!=null&&j.push(jh(w,A,k)))),S)break;w=w.return}0<j.length&&(x=new v(x,E,null,n,m),g.push({event:x,listeners:j}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",x&&n!==s1&&(E=n.relatedTarget||n.fromElement)&&(yl(E)||E[da]))break e;if((v||x)&&(x=m.window===m?m:(x=m.ownerDocument)?x.defaultView||x.parentWindow:window,v?(E=n.relatedTarget||n.toElement,v=h,E=E?yl(E):null,E!==null&&(S=Bl(E),E!==S||E.tag!==5&&E.tag!==6)&&(E=null)):(v=null,E=h),v!==E)){if(j=sk,A="onMouseLeave",N="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(j=ak,A="onPointerLeave",N="onPointerEnter",w="pointer"),S=v==null?x:Tc(v),k=E==null?x:Tc(E),x=new j(A,w+"leave",v,n,m),x.target=S,x.relatedTarget=k,A=null,yl(m)===h&&(j=new j(N,w+"enter",E,n,m),j.target=k,j.relatedTarget=S,A=j),S=A,v&&E)t:{for(j=v,N=E,w=0,k=j;k;k=vc(k))w++;for(k=0,A=N;A;A=vc(A))k++;for(;0<w-k;)j=vc(j),w--;for(;0<k-w;)N=vc(N),k--;for(;w--;){if(j===N||N!==null&&j===N.alternate)break t;j=vc(j),N=vc(N)}j=null}else j=null;v!==null&&xk(g,x,v,j,!1),E!==null&&S!==null&&xk(g,S,E,j,!0)}}e:{if(x=h?Tc(h):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var D=cU;else if(ck(x))if(wA)D=fU;else{D=dU;var F=uU}else(v=x.nodeName)&&v.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(D=hU);if(D&&(D=D(t,h))){bA(g,D,n,m);break e}F&&F(t,x,h),t==="focusout"&&(F=x._wrapperState)&&F.controlled&&x.type==="number"&&Zv(x,"number",x.value)}switch(F=h?Tc(h):window,t){case"focusin":(ck(F)||F.contentEditable==="true")&&(Ec=F,d1=h,Jd=null);break;case"focusout":Jd=d1=Ec=null;break;case"mousedown":h1=!0;break;case"contextmenu":case"mouseup":case"dragend":h1=!1,mk(g,n,m);break;case"selectionchange":if(gU)break;case"keydown":case"keyup":mk(g,n,m)}var C;if(dw)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else jc?yA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(xA&&n.locale!=="ko"&&(jc||T!=="onCompositionStart"?T==="onCompositionEnd"&&jc&&(C=gA()):(so=m,lw="value"in so?so.value:so.textContent,jc=!0)),F=sg(h,T),0<F.length&&(T=new ik(T,t,null,n,m),g.push({event:T,listeners:F}),C?T.data=C:(C=vA(n),C!==null&&(T.data=C)))),(C=sU?iU(t,n):aU(t,n))&&(h=sg(h,"onBeforeInput"),0<h.length&&(m=new ik("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:h}),m.data=C))}CA(g,e)})}function jh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=yh(t,n),a!=null&&r.unshift(jh(t,a,s)),a=yh(t,e),a!=null&&r.push(jh(t,a,s))),t=t.return}return r}function vc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xk(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=yh(n,a),u!=null&&o.unshift(jh(n,u,c))):s||(u=yh(n,a),u!=null&&o.push(jh(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bU=/\r\n?/g,wU=/\u0000|\uFFFD/g;function yk(t){return(typeof t=="string"?t:""+t).replace(bU,`
`).replace(wU,"")}function Zm(t,e,n){if(e=yk(e),yk(t)!==e&&n)throw Error(le(425))}function ig(){}var f1=null,m1=null;function p1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var g1=typeof setTimeout=="function"?setTimeout:void 0,_U=typeof clearTimeout=="function"?clearTimeout:void 0,vk=typeof Promise=="function"?Promise:void 0,NU=typeof queueMicrotask=="function"?queueMicrotask:typeof vk<"u"?function(t){return vk.resolve(null).then(t).catch(kU)}:g1;function kU(t){setTimeout(function(){throw t})}function Dy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wh(e)}function po(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),wi="__reactFiber$"+Tu,Eh="__reactProps$"+Tu,da="__reactContainer$"+Tu,x1="__reactEvents$"+Tu,jU="__reactListeners$"+Tu,EU="__reactHandles$"+Tu;function yl(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[da]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bk(t);t!==null;){if(n=t[wi])return n;t=bk(t)}return e}t=n,n=t.parentNode}return null}function of(t){return t=t[wi]||t[da],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function t0(t){return t[Eh]||null}var y1=[],Ac=-1;function Lo(t){return{current:t}}function Dt(t){0>Ac||(t.current=y1[Ac],y1[Ac]=null,Ac--)}function Tt(t,e){Ac++,y1[Ac]=t.current,t.current=e}var Eo={},ur=Lo(Eo),$r=Lo(!1),Il=Eo;function tu(t,e){var n=t.type.contextTypes;if(!n)return Eo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function ag(){Dt($r),Dt(ur)}function wk(t,e,n){if(ur.current!==Eo)throw Error(le(168));Tt(ur,e),Tt($r,n)}function PA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,uV(t)||"Unknown",s));return Kt({},n,r)}function og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Eo,Il=ur.current,Tt(ur,t),Tt($r,$r.current),!0}function _k(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=PA(t,e,Il),r.__reactInternalMemoizedMergedChildContext=t,Dt($r),Dt(ur),Tt(ur,t)):Dt($r),Tt($r,n)}var Zi=null,n0=!1,My=!1;function DA(t){Zi===null?Zi=[t]:Zi.push(t)}function SU(t){n0=!0,DA(t)}function Oo(){if(!My&&Zi!==null){My=!0;var t=0,e=bt;try{var n=Zi;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zi=null,n0=!1}catch(s){throw Zi!==null&&(Zi=Zi.slice(t+1)),iA(sw,Oo),s}finally{bt=e,My=!1}}return null}var Ic=[],Cc=0,lg=null,cg=0,As=[],Is=0,Cl=null,ea=1,ta="";function ml(t,e){Ic[Cc++]=cg,Ic[Cc++]=lg,lg=t,cg=e}function MA(t,e,n){As[Is++]=ea,As[Is++]=ta,As[Is++]=Cl,Cl=t;var r=ea;t=ta;var s=32-ri(r)-1;r&=~(1<<s),n+=1;var a=32-ri(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ea=1<<32-ri(e)+s|n<<s|r,ta=a+t}else ea=1<<a|n<<s|r,ta=t}function fw(t){t.return!==null&&(ml(t,1),MA(t,1,0))}function mw(t){for(;t===lg;)lg=Ic[--Cc],Ic[Cc]=null,cg=Ic[--Cc],Ic[Cc]=null;for(;t===Cl;)Cl=As[--Is],As[Is]=null,ta=As[--Is],As[Is]=null,ea=As[--Is],As[Is]=null}var cs=null,ss=null,Vt=!1,ti=null;function LA(t,e){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cs=t,ss=po(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cs=t,ss=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cl!==null?{id:ea,overflow:ta}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cs=t,ss=null,!0):!1;default:return!1}}function v1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function b1(t){if(Vt){var e=ss;if(e){var n=e;if(!Nk(t,e)){if(v1(t))throw Error(le(418));e=po(n.nextSibling);var r=cs;e&&Nk(t,e)?LA(r,n):(t.flags=t.flags&-4097|2,Vt=!1,cs=t)}}else{if(v1(t))throw Error(le(418));t.flags=t.flags&-4097|2,Vt=!1,cs=t}}}function kk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cs=t}function ep(t){if(t!==cs)return!1;if(!Vt)return kk(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!p1(t.type,t.memoizedProps)),e&&(e=ss)){if(v1(t))throw OA(),Error(le(418));for(;e;)LA(t,e),e=po(e.nextSibling)}if(kk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ss=po(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ss=null}}else ss=cs?po(t.stateNode.nextSibling):null;return!0}function OA(){for(var t=ss;t;)t=po(t.nextSibling)}function nu(){ss=cs=null,Vt=!1}function pw(t){ti===null?ti=[t]:ti.push(t)}var TU=ka.ReactCurrentBatchConfig;function Ad(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function tp(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jk(t){var e=t._init;return e(t._payload)}function VA(t){function e(N,w){if(t){var k=N.deletions;k===null?(N.deletions=[w],N.flags|=16):k.push(w)}}function n(N,w){if(!t)return null;for(;w!==null;)e(N,w),w=w.sibling;return null}function r(N,w){for(N=new Map;w!==null;)w.key!==null?N.set(w.key,w):N.set(w.index,w),w=w.sibling;return N}function s(N,w){return N=vo(N,w),N.index=0,N.sibling=null,N}function a(N,w,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<w?(N.flags|=2,w):k):(N.flags|=2,w)):(N.flags|=1048576,w)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,w,k,A){return w===null||w.tag!==6?(w=By(k,N.mode,A),w.return=N,w):(w=s(w,k),w.return=N,w)}function u(N,w,k,A){var D=k.type;return D===kc?m(N,w,k.props.children,A,k.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xa&&jk(D)===w.type)?(A=s(w,k.props),A.ref=Ad(N,w,k),A.return=N,A):(A=Mp(k.type,k.key,k.props,null,N.mode,A),A.ref=Ad(N,w,k),A.return=N,A)}function h(N,w,k,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=$y(k,N.mode,A),w.return=N,w):(w=s(w,k.children||[]),w.return=N,w)}function m(N,w,k,A,D){return w===null||w.tag!==7?(w=jl(k,N.mode,A,D),w.return=N,w):(w=s(w,k),w.return=N,w)}function g(N,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=By(""+w,N.mode,k),w.return=N,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wm:return k=Mp(w.type,w.key,w.props,null,N.mode,k),k.ref=Ad(N,null,w),k.return=N,k;case Nc:return w=$y(w,N.mode,k),w.return=N,w;case Xa:var A=w._init;return g(N,A(w._payload),k)}if(Ld(w)||kd(w))return w=jl(w,N.mode,k,null),w.return=N,w;tp(N,w)}return null}function x(N,w,k,A){var D=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return D!==null?null:c(N,w,""+k,A);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Wm:return k.key===D?u(N,w,k,A):null;case Nc:return k.key===D?h(N,w,k,A):null;case Xa:return D=k._init,x(N,w,D(k._payload),A)}if(Ld(k)||kd(k))return D!==null?null:m(N,w,k,A,null);tp(N,k)}return null}function v(N,w,k,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return N=N.get(k)||null,c(w,N,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wm:return N=N.get(A.key===null?k:A.key)||null,u(w,N,A,D);case Nc:return N=N.get(A.key===null?k:A.key)||null,h(w,N,A,D);case Xa:var F=A._init;return v(N,w,k,F(A._payload),D)}if(Ld(A)||kd(A))return N=N.get(k)||null,m(w,N,A,D,null);tp(w,A)}return null}function E(N,w,k,A){for(var D=null,F=null,C=w,T=w=0,P=null;C!==null&&T<k.length;T++){C.index>T?(P=C,C=null):P=C.sibling;var L=x(N,C,k[T],A);if(L===null){C===null&&(C=P);break}t&&C&&L.alternate===null&&e(N,C),w=a(L,w,T),F===null?D=L:F.sibling=L,F=L,C=P}if(T===k.length)return n(N,C),Vt&&ml(N,T),D;if(C===null){for(;T<k.length;T++)C=g(N,k[T],A),C!==null&&(w=a(C,w,T),F===null?D=C:F.sibling=C,F=C);return Vt&&ml(N,T),D}for(C=r(N,C);T<k.length;T++)P=v(C,N,T,k[T],A),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?T:P.key),w=a(P,w,T),F===null?D=P:F.sibling=P,F=P);return t&&C.forEach(function(z){return e(N,z)}),Vt&&ml(N,T),D}function j(N,w,k,A){var D=kd(k);if(typeof D!="function")throw Error(le(150));if(k=D.call(k),k==null)throw Error(le(151));for(var F=D=null,C=w,T=w=0,P=null,L=k.next();C!==null&&!L.done;T++,L=k.next()){C.index>T?(P=C,C=null):P=C.sibling;var z=x(N,C,L.value,A);if(z===null){C===null&&(C=P);break}t&&C&&z.alternate===null&&e(N,C),w=a(z,w,T),F===null?D=z:F.sibling=z,F=z,C=P}if(L.done)return n(N,C),Vt&&ml(N,T),D;if(C===null){for(;!L.done;T++,L=k.next())L=g(N,L.value,A),L!==null&&(w=a(L,w,T),F===null?D=L:F.sibling=L,F=L);return Vt&&ml(N,T),D}for(C=r(N,C);!L.done;T++,L=k.next())L=v(C,N,T,L.value,A),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?T:L.key),w=a(L,w,T),F===null?D=L:F.sibling=L,F=L);return t&&C.forEach(function(H){return e(N,H)}),Vt&&ml(N,T),D}function S(N,w,k,A){if(typeof k=="object"&&k!==null&&k.type===kc&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Wm:e:{for(var D=k.key,F=w;F!==null;){if(F.key===D){if(D=k.type,D===kc){if(F.tag===7){n(N,F.sibling),w=s(F,k.props.children),w.return=N,N=w;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xa&&jk(D)===F.type){n(N,F.sibling),w=s(F,k.props),w.ref=Ad(N,F,k),w.return=N,N=w;break e}n(N,F);break}else e(N,F);F=F.sibling}k.type===kc?(w=jl(k.props.children,N.mode,A,k.key),w.return=N,N=w):(A=Mp(k.type,k.key,k.props,null,N.mode,A),A.ref=Ad(N,w,k),A.return=N,N=A)}return o(N);case Nc:e:{for(F=k.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(N,w.sibling),w=s(w,k.children||[]),w.return=N,N=w;break e}else{n(N,w);break}else e(N,w);w=w.sibling}w=$y(k,N.mode,A),w.return=N,N=w}return o(N);case Xa:return F=k._init,S(N,w,F(k._payload),A)}if(Ld(k))return E(N,w,k,A);if(kd(k))return j(N,w,k,A);tp(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(N,w.sibling),w=s(w,k),w.return=N,N=w):(n(N,w),w=By(k,N.mode,A),w.return=N,N=w),o(N)):n(N,w)}return S}var ru=VA(!0),UA=VA(!1),ug=Lo(null),dg=null,Rc=null,gw=null;function xw(){gw=Rc=dg=null}function yw(t){var e=ug.current;Dt(ug),t._currentValue=e}function w1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wc(t,e){dg=t,gw=Rc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Br=!0),t.firstContext=null)}function Os(t){var e=t._currentValue;if(gw!==t)if(t={context:t,memoizedValue:e,next:null},Rc===null){if(dg===null)throw Error(le(308));Rc=t,dg.dependencies={lanes:0,firstContext:t}}else Rc=Rc.next=t;return e}var vl=null;function vw(t){vl===null?vl=[t]:vl.push(t)}function FA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vw(e)):(n.next=s.next,s.next=n),e.interleaved=n,ha(t,r)}function ha(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ya=!1;function bw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function go(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ha(t,n)}return s=r.interleaved,s===null?(e.next=e,vw(r)):(e.next=s.next,s.next=e),r.interleaved=e,ha(t,n)}function Ap(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iw(t,n)}}function Ek(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hg(t,e,n,r){var s=t.updateQueue;Ya=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?a=h:o.next=h,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=u))}if(a!==null){var g=s.baseState;o=0,m=h=u=null,c=a;do{var x=c.lane,v=c.eventTime;if((r&x)===x){m!==null&&(m=m.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=t,j=c;switch(x=e,v=n,j.tag){case 1:if(E=j.payload,typeof E=="function"){g=E.call(v,g,x);break e}g=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=j.payload,x=typeof E=="function"?E.call(v,g,x):E,x==null)break e;g=Kt({},g,x);break e;case 2:Ya=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[c]:x.push(c))}else v={eventTime:v,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=v,u=g):m=m.next=v,o|=x;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;x=c,c=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Pl|=o,t.lanes=o,t.memoizedState=g}}function Sk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var lf={},ki=Lo(lf),Sh=Lo(lf),Th=Lo(lf);function bl(t){if(t===lf)throw Error(le(174));return t}function ww(t,e){switch(Tt(Th,e),Tt(Sh,t),Tt(ki,lf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:t1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=t1(e,t)}Dt(ki),Tt(ki,e)}function su(){Dt(ki),Dt(Sh),Dt(Th)}function BA(t){bl(Th.current);var e=bl(ki.current),n=t1(e,t.type);e!==n&&(Tt(Sh,t),Tt(ki,n))}function _w(t){Sh.current===t&&(Dt(ki),Dt(Sh))}var $t=Lo(0);function fg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ly=[];function Nw(){for(var t=0;t<Ly.length;t++)Ly[t]._workInProgressVersionPrimary=null;Ly.length=0}var Ip=ka.ReactCurrentDispatcher,Oy=ka.ReactCurrentBatchConfig,Rl=0,Ht=null,wn=null,Rn=null,mg=!1,Zd=!1,Ah=0,AU=0;function tr(){throw Error(le(321))}function kw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function jw(t,e,n,r,s,a){if(Rl=a,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ip.current=t===null||t.memoizedState===null?PU:DU,t=n(r,s),Zd){a=0;do{if(Zd=!1,Ah=0,25<=a)throw Error(le(301));a+=1,Rn=wn=null,e.updateQueue=null,Ip.current=MU,t=n(r,s)}while(Zd)}if(Ip.current=pg,e=wn!==null&&wn.next!==null,Rl=0,Rn=wn=Ht=null,mg=!1,e)throw Error(le(300));return t}function Ew(){var t=Ah!==0;return Ah=0,t}function bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Ht.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function Vs(){if(wn===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Rn===null?Ht.memoizedState:Rn.next;if(e!==null)Rn=e,wn=t;else{if(t===null)throw Error(le(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Rn===null?Ht.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function Ih(t,e){return typeof e=="function"?e(t):e}function Vy(t){var e=Vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=wn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,h=a;do{var m=h.lane;if((Rl&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Ht.lanes|=m,Pl|=m}h=h.next}while(h!==null&&h!==a);u===null?o=r:u.next=c,ai(r,e.memoizedState)||(Br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ht.lanes|=a,Pl|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uy(t){var e=Vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);ai(a,e.memoizedState)||(Br=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function $A(){}function WA(t,e){var n=Ht,r=Vs(),s=e(),a=!ai(r.memoizedState,s);if(a&&(r.memoizedState=s,Br=!0),r=r.queue,Sw(qA.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,Ch(9,GA.bind(null,n,r,s,e),void 0,null),Pn===null)throw Error(le(349));Rl&30||HA(n,e,s)}return s}function HA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GA(t,e,n,r){e.value=n,e.getSnapshot=r,KA(e)&&QA(t)}function qA(t,e,n){return n(function(){KA(e)&&QA(t)})}function KA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function QA(t){var e=ha(t,1);e!==null&&si(e,t,1,-1)}function Tk(t){var e=bi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ih,lastRenderedState:t},e.queue=t,t=t.dispatch=RU.bind(null,Ht,t),[e.memoizedState,t]}function Ch(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function XA(){return Vs().memoizedState}function Cp(t,e,n,r){var s=bi();Ht.flags|=t,s.memoizedState=Ch(1|e,n,void 0,r===void 0?null:r)}function r0(t,e,n,r){var s=Vs();r=r===void 0?null:r;var a=void 0;if(wn!==null){var o=wn.memoizedState;if(a=o.destroy,r!==null&&kw(r,o.deps)){s.memoizedState=Ch(e,n,a,r);return}}Ht.flags|=t,s.memoizedState=Ch(1|e,n,a,r)}function Ak(t,e){return Cp(8390656,8,t,e)}function Sw(t,e){return r0(2048,8,t,e)}function YA(t,e){return r0(4,2,t,e)}function JA(t,e){return r0(4,4,t,e)}function ZA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eI(t,e,n){return n=n!=null?n.concat([t]):null,r0(4,4,ZA.bind(null,e,t),n)}function Tw(){}function tI(t,e){var n=Vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nI(t,e){var n=Vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rI(t,e,n){return Rl&21?(ai(n,e)||(n=lA(),Ht.lanes|=n,Pl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Br=!0),t.memoizedState=n)}function IU(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=Oy.transition;Oy.transition={};try{t(!1),e()}finally{bt=n,Oy.transition=r}}function sI(){return Vs().memoizedState}function CU(t,e,n){var r=yo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iI(t))aI(e,n);else if(n=FA(t,e,n,r),n!==null){var s=Sr();si(n,t,r,s),oI(n,e,r)}}function RU(t,e,n){var r=yo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iI(t))aI(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,ai(c,o)){var u=e.interleaved;u===null?(s.next=s,vw(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=FA(t,e,s,r),n!==null&&(s=Sr(),si(n,t,r,s),oI(n,e,r))}}function iI(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function aI(t,e){Zd=mg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iw(t,n)}}var pg={readContext:Os,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},PU={readContext:Os,useCallback:function(t,e){return bi().memoizedState=[t,e===void 0?null:e],t},useContext:Os,useEffect:Ak,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cp(4194308,4,ZA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cp(4,2,t,e)},useMemo:function(t,e){var n=bi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CU.bind(null,Ht,t),[r.memoizedState,t]},useRef:function(t){var e=bi();return t={current:t},e.memoizedState=t},useState:Tk,useDebugValue:Tw,useDeferredValue:function(t){return bi().memoizedState=t},useTransition:function(){var t=Tk(!1),e=t[0];return t=IU.bind(null,t[1]),bi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ht,s=bi();if(Vt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Pn===null)throw Error(le(349));Rl&30||HA(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Ak(qA.bind(null,r,a,t),[t]),r.flags|=2048,Ch(9,GA.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=bi(),e=Pn.identifierPrefix;if(Vt){var n=ta,r=ea;n=(r&~(1<<32-ri(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ah++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DU={readContext:Os,useCallback:tI,useContext:Os,useEffect:Sw,useImperativeHandle:eI,useInsertionEffect:YA,useLayoutEffect:JA,useMemo:nI,useReducer:Vy,useRef:XA,useState:function(){return Vy(Ih)},useDebugValue:Tw,useDeferredValue:function(t){var e=Vs();return rI(e,wn.memoizedState,t)},useTransition:function(){var t=Vy(Ih)[0],e=Vs().memoizedState;return[t,e]},useMutableSource:$A,useSyncExternalStore:WA,useId:sI,unstable_isNewReconciler:!1},MU={readContext:Os,useCallback:tI,useContext:Os,useEffect:Sw,useImperativeHandle:eI,useInsertionEffect:YA,useLayoutEffect:JA,useMemo:nI,useReducer:Uy,useRef:XA,useState:function(){return Uy(Ih)},useDebugValue:Tw,useDeferredValue:function(t){var e=Vs();return wn===null?e.memoizedState=t:rI(e,wn.memoizedState,t)},useTransition:function(){var t=Uy(Ih)[0],e=Vs().memoizedState;return[t,e]},useMutableSource:$A,useSyncExternalStore:WA,useId:sI,unstable_isNewReconciler:!1};function Zs(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s0={isMounted:function(t){return(t=t._reactInternals)?Bl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sr(),s=yo(t),a=ia(r,s);a.payload=e,n!=null&&(a.callback=n),e=go(t,a,s),e!==null&&(si(e,t,s,r),Ap(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sr(),s=yo(t),a=ia(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=go(t,a,s),e!==null&&(si(e,t,s,r),Ap(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sr(),r=yo(t),s=ia(n,r);s.tag=2,e!=null&&(s.callback=e),e=go(t,s,r),e!==null&&(si(e,t,r,n),Ap(e,t,r))}};function Ik(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Nh(n,r)||!Nh(s,a):!0}function lI(t,e,n){var r=!1,s=Eo,a=e.contextType;return typeof a=="object"&&a!==null?a=Os(a):(s=Wr(e)?Il:ur.current,r=e.contextTypes,a=(r=r!=null)?tu(t,s):Eo),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ck(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&s0.enqueueReplaceState(e,e.state,null)}function N1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bw(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Os(a):(a=Wr(e)?Il:ur.current,s.context=tu(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(_1(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&s0.enqueueReplaceState(s,s.state,null),hg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function iu(t,e){try{var n="",r=e;do n+=cV(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function k1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LU=typeof WeakMap=="function"?WeakMap:Map;function cI(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xg||(xg=!0,D1=r),k1(t,e)},n}function uI(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){k1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){k1(t,e),typeof r!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new LU;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=XU.bind(null,t,e,n),e.then(t,t))}function Pk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dk(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,go(n,e,1))),n.lanes|=1),t)}var OU=ka.ReactCurrentOwner,Br=!1;function Nr(t,e,n,r){e.child=t===null?UA(e,null,n,r):ru(e,t.child,n,r)}function Mk(t,e,n,r,s){n=n.render;var a=e.ref;return Wc(e,s),r=jw(t,e,n,r,a,s),n=Ew(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fa(t,e,s)):(Vt&&n&&fw(e),e.flags|=1,Nr(t,e,r,s),e.child)}function Lk(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Lw(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,dI(t,e,a,r,s)):(t=Mp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Nh,n(o,r)&&t.ref===e.ref)return fa(t,e,s)}return e.flags|=1,t=vo(a,r),t.ref=e.ref,t.return=e,e.child=t}function dI(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Nh(a,r)&&t.ref===e.ref)if(Br=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Br=!0);else return e.lanes=t.lanes,fa(t,e,s)}return j1(t,e,n,r,s)}function hI(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Dc,ns),ns|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(Dc,ns),ns|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Tt(Dc,ns),ns|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Tt(Dc,ns),ns|=r;return Nr(t,e,s,n),e.child}function fI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function j1(t,e,n,r,s){var a=Wr(n)?Il:ur.current;return a=tu(e,a),Wc(e,s),n=jw(t,e,n,r,a,s),r=Ew(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fa(t,e,s)):(Vt&&r&&fw(e),e.flags|=1,Nr(t,e,n,s),e.child)}function Ok(t,e,n,r,s){if(Wr(n)){var a=!0;og(e)}else a=!1;if(Wc(e,s),e.stateNode===null)Rp(t,e),lI(e,n,r),N1(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Os(h):(h=Wr(n)?Il:ur.current,h=tu(e,h));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&Ck(e,o,r,h),Ya=!1;var x=e.memoizedState;o.state=x,hg(e,r,o,s),u=e.memoizedState,c!==r||x!==u||$r.current||Ya?(typeof m=="function"&&(_1(e,n,m,r),u=e.memoizedState),(c=Ya||Ik(e,n,c,r,x,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zA(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Zs(e.type,c),o.props=h,g=e.pendingProps,x=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Os(u):(u=Wr(n)?Il:ur.current,u=tu(e,u));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||x!==u)&&Ck(e,o,r,u),Ya=!1,x=e.memoizedState,o.state=x,hg(e,r,o,s);var E=e.memoizedState;c!==g||x!==E||$r.current||Ya?(typeof v=="function"&&(_1(e,n,v,r),E=e.memoizedState),(h=Ya||Ik(e,n,h,r,x,E,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return E1(t,e,n,r,a,s)}function E1(t,e,n,r,s,a){fI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_k(e,n,!1),fa(t,e,a);r=e.stateNode,OU.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ru(e,t.child,null,a),e.child=ru(e,null,c,a)):Nr(t,e,c,a),e.memoizedState=r.state,s&&_k(e,n,!0),e.child}function mI(t){var e=t.stateNode;e.pendingContext?wk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wk(t,e.context,!1),ww(t,e.containerInfo)}function Vk(t,e,n,r,s){return nu(),pw(s),e.flags|=256,Nr(t,e,n,r),e.child}var S1={dehydrated:null,treeContext:null,retryLane:0};function T1(t){return{baseLanes:t,cachePool:null,transitions:null}}function pI(t,e,n){var r=e.pendingProps,s=$t.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Tt($t,s&1),t===null)return b1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=o0(o,r,0,null),t=jl(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=T1(n),e.memoizedState=S1,t):Aw(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return VU(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vo(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=vo(c,a):(a=jl(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?T1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=S1,r}return a=t.child,t=a.sibling,r=vo(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Aw(t,e){return e=o0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function np(t,e,n,r){return r!==null&&pw(r),ru(e,t.child,null,n),t=Aw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VU(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Fy(Error(le(422))),np(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=o0({mode:"visible",children:r.children},s,0,null),a=jl(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ru(e,t.child,null,o),e.child.memoizedState=T1(o),e.memoizedState=S1,a);if(!(e.mode&1))return np(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(le(419)),r=Fy(a,r,void 0),np(t,e,o,r)}if(c=(o&t.childLanes)!==0,Br||c){if(r=Pn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ha(t,s),si(r,t,s,-1))}return Mw(),r=Fy(Error(le(421))),np(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YU.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,ss=po(s.nextSibling),cs=e,Vt=!0,ti=null,t!==null&&(As[Is++]=ea,As[Is++]=ta,As[Is++]=Cl,ea=t.id,ta=t.overflow,Cl=e),e=Aw(e,r.children),e.flags|=4096,e)}function Uk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),w1(t.return,e,n)}function zy(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function gI(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Nr(t,e,r.children,n),r=$t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uk(t,n,e);else if(t.tag===19)Uk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt($t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zy(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zy(e,!0,n,null,a);break;case"together":zy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=vo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UU(t,e,n){switch(e.tag){case 3:mI(e),nu();break;case 5:BA(e);break;case 1:Wr(e.type)&&og(e);break;case 4:ww(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Tt(ug,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt($t,$t.current&1),e.flags|=128,null):n&e.child.childLanes?pI(t,e,n):(Tt($t,$t.current&1),t=fa(t,e,n),t!==null?t.sibling:null);Tt($t,$t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tt($t,$t.current),r)break;return null;case 22:case 23:return e.lanes=0,hI(t,e,n)}return fa(t,e,n)}var xI,A1,yI,vI;xI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};A1=function(){};yI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bl(ki.current);var a=null;switch(n){case"input":s=Yv(t,s),r=Yv(t,r),a=[];break;case"select":s=Kt({},s,{value:void 0}),r=Kt({},r,{value:void 0}),a=[];break;case"textarea":s=e1(t,s),r=e1(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ig)}n1(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(gh.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(gh.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ct("scroll",t),a||c===u||(a=[])):(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};vI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Id(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FU(t,e,n){var r=e.pendingProps;switch(mw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(e),null;case 1:return Wr(e.type)&&ag(),nr(e),null;case 3:return r=e.stateNode,su(),Dt($r),Dt(ur),Nw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ep(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(O1(ti),ti=null))),A1(t,e),nr(e),null;case 5:_w(e);var s=bl(Th.current);if(n=e.type,t!==null&&e.stateNode!=null)yI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return nr(e),null}if(t=bl(ki.current),ep(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[wi]=e,r[Eh]=a,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(s=0;s<Vd.length;s++)Ct(Vd[s],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":KN(r,a),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ct("invalid",r);break;case"textarea":XN(r,a),Ct("invalid",r)}n1(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Zm(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Zm(r.textContent,c,t),s=["children",""+c]):gh.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ct("scroll",r)}switch(n){case"input":Hm(r),QN(r,a,!0);break;case"textarea":Hm(r),YN(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ig)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wi]=e,t[Eh]=r,xI(t,e,!1,!1),e.stateNode=t;e:{switch(o=r1(n,r),n){case"dialog":Ct("cancel",t),Ct("close",t),s=r;break;case"iframe":case"object":case"embed":Ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vd.length;s++)Ct(Vd[s],t);s=r;break;case"source":Ct("error",t),s=r;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),s=r;break;case"details":Ct("toggle",t),s=r;break;case"input":KN(t,r),s=Yv(t,r),Ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Kt({},r,{value:void 0}),Ct("invalid",t);break;case"textarea":XN(t,r),s=e1(t,r),Ct("invalid",t);break;default:s=r}n1(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?XT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&KT(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xh(t,u):typeof u=="number"&&xh(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(gh.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ct("scroll",t):u!=null&&Zb(t,a,u,o))}switch(n){case"input":Hm(t),QN(t,r,!1);break;case"textarea":Hm(t),YN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jo(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Fc(t,!!r.multiple,a,!1):r.defaultValue!=null&&Fc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ig)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nr(e),null;case 6:if(t&&e.stateNode!=null)vI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=bl(Th.current),bl(ki.current),ep(e)){if(r=e.stateNode,n=e.memoizedProps,r[wi]=e,(a=r.nodeValue!==n)&&(t=cs,t!==null))switch(t.tag){case 3:Zm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zm(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wi]=e,e.stateNode=r}return nr(e),null;case 13:if(Dt($t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&ss!==null&&e.mode&1&&!(e.flags&128))OA(),nu(),e.flags|=98560,a=!1;else if(a=ep(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(le(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(le(317));a[wi]=e}else nu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nr(e),a=!1}else ti!==null&&(O1(ti),ti=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$t.current&1?_n===0&&(_n=3):Mw())),e.updateQueue!==null&&(e.flags|=4),nr(e),null);case 4:return su(),A1(t,e),t===null&&kh(e.stateNode.containerInfo),nr(e),null;case 10:return yw(e.type._context),nr(e),null;case 17:return Wr(e.type)&&ag(),nr(e),null;case 19:if(Dt($t),a=e.memoizedState,a===null)return nr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Id(a,!1);else{if(_n!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fg(t),o!==null){for(e.flags|=128,Id(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt($t,$t.current&1|2),e.child}t=t.sibling}a.tail!==null&&on()>au&&(e.flags|=128,r=!0,Id(a,!1),e.lanes=4194304)}else{if(!r)if(t=fg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Id(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Vt)return nr(e),null}else 2*on()-a.renderingStartTime>au&&n!==1073741824&&(e.flags|=128,r=!0,Id(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=on(),e.sibling=null,n=$t.current,Tt($t,r?n&1|2:n&1),e):(nr(e),null);case 22:case 23:return Dw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ns&1073741824&&(nr(e),e.subtreeFlags&6&&(e.flags|=8192)):nr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function zU(t,e){switch(mw(e),e.tag){case 1:return Wr(e.type)&&ag(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return su(),Dt($r),Dt(ur),Nw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _w(e),null;case 13:if(Dt($t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));nu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt($t),null;case 4:return su(),null;case 10:return yw(e.type._context),null;case 22:case 23:return Dw(),null;case 24:return null;default:return null}}var rp=!1,ir=!1,BU=typeof WeakSet=="function"?WeakSet:Set,be=null;function Pc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function I1(t,e,n){try{n()}catch(r){en(t,e,r)}}var Fk=!1;function $U(t,e){if(f1=ng,t=kA(),hw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,m=0,g=t,x=null;t:for(;;){for(var v;g!==n||s!==0&&g.nodeType!==3||(c=o+s),g!==a||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(v=g.firstChild)!==null;)x=g,g=v;for(;;){if(g===t)break t;if(x===n&&++h===s&&(c=o),x===a&&++m===r&&(u=o),(v=g.nextSibling)!==null)break;g=x,x=g.parentNode}g=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(m1={focusedElem:t,selectionRange:n},ng=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var j=E.memoizedProps,S=E.memoizedState,N=e.stateNode,w=N.getSnapshotBeforeUpdate(e.elementType===e.type?j:Zs(e.type,j),S);N.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(A){en(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return E=Fk,Fk=!1,E}function eh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&I1(e,n,a)}s=s.next}while(s!==r)}}function i0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function C1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bI(t){var e=t.alternate;e!==null&&(t.alternate=null,bI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[Eh],delete e[x1],delete e[jU],delete e[EU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wI(t){return t.tag===5||t.tag===3||t.tag===4}function zk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ig));else if(r!==4&&(t=t.child,t!==null))for(R1(t,e,n),t=t.sibling;t!==null;)R1(t,e,n),t=t.sibling}function P1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(P1(t,e,n),t=t.sibling;t!==null;)P1(t,e,n),t=t.sibling}var Fn=null,ei=!1;function qa(t,e,n){for(n=n.child;n!==null;)_I(t,e,n),n=n.sibling}function _I(t,e,n){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(Yg,n)}catch{}switch(n.tag){case 5:ir||Pc(n,e);case 6:var r=Fn,s=ei;Fn=null,qa(t,e,n),Fn=r,ei=s,Fn!==null&&(ei?(t=Fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&(ei?(t=Fn,n=n.stateNode,t.nodeType===8?Dy(t.parentNode,n):t.nodeType===1&&Dy(t,n),wh(t)):Dy(Fn,n.stateNode));break;case 4:r=Fn,s=ei,Fn=n.stateNode.containerInfo,ei=!0,qa(t,e,n),Fn=r,ei=s;break;case 0:case 11:case 14:case 15:if(!ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&I1(n,e,o),s=s.next}while(s!==r)}qa(t,e,n);break;case 1:if(!ir&&(Pc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){en(n,e,c)}qa(t,e,n);break;case 21:qa(t,e,n);break;case 22:n.mode&1?(ir=(r=ir)||n.memoizedState!==null,qa(t,e,n),ir=r):qa(t,e,n);break;default:qa(t,e,n)}}function Bk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BU),e.forEach(function(r){var s=JU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Fn=c.stateNode,ei=!1;break e;case 3:Fn=c.stateNode.containerInfo,ei=!0;break e;case 4:Fn=c.stateNode.containerInfo,ei=!0;break e}c=c.return}if(Fn===null)throw Error(le(160));_I(a,o,s),Fn=null,ei=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){en(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NI(e,t),e=e.sibling}function NI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xs(e,t),yi(t),r&4){try{eh(3,t,t.return),i0(3,t)}catch(j){en(t,t.return,j)}try{eh(5,t,t.return)}catch(j){en(t,t.return,j)}}break;case 1:Xs(e,t),yi(t),r&512&&n!==null&&Pc(n,n.return);break;case 5:if(Xs(e,t),yi(t),r&512&&n!==null&&Pc(n,n.return),t.flags&32){var s=t.stateNode;try{xh(s,"")}catch(j){en(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&HT(s,a),r1(c,o);var h=r1(c,a);for(o=0;o<u.length;o+=2){var m=u[o],g=u[o+1];m==="style"?XT(s,g):m==="dangerouslySetInnerHTML"?KT(s,g):m==="children"?xh(s,g):Zb(s,m,g,h)}switch(c){case"input":Jv(s,a);break;case"textarea":GT(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Fc(s,!!a.multiple,v,!1):x!==!!a.multiple&&(a.defaultValue!=null?Fc(s,!!a.multiple,a.defaultValue,!0):Fc(s,!!a.multiple,a.multiple?[]:"",!1))}s[Eh]=a}catch(j){en(t,t.return,j)}}break;case 6:if(Xs(e,t),yi(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(j){en(t,t.return,j)}}break;case 3:if(Xs(e,t),yi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wh(e.containerInfo)}catch(j){en(t,t.return,j)}break;case 4:Xs(e,t),yi(t);break;case 13:Xs(e,t),yi(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Rw=on())),r&4&&Bk(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ir=(h=ir)||m,Xs(e,t),ir=h):Xs(e,t),yi(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(be=t,m=t.child;m!==null;){for(g=be=m;be!==null;){switch(x=be,v=x.child,x.tag){case 0:case 11:case 14:case 15:eh(4,x,x.return);break;case 1:Pc(x,x.return);var E=x.stateNode;if(typeof E.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(j){en(r,n,j)}}break;case 5:Pc(x,x.return);break;case 22:if(x.memoizedState!==null){Wk(g);continue}}v!==null?(v.return=x,be=v):Wk(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,h?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=QT("display",o))}catch(j){en(t,t.return,j)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(j){en(t,t.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xs(e,t),yi(t),r&4&&Bk(t);break;case 21:break;default:Xs(e,t),yi(t)}}function yi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wI(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xh(s,""),r.flags&=-33);var a=zk(t);P1(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=zk(t);R1(t,c,o);break;default:throw Error(le(161))}}catch(u){en(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WU(t,e,n){be=t,kI(t)}function kI(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var s=be,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||rp;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ir;c=rp;var h=ir;if(rp=o,(ir=u)&&!h)for(be=s;be!==null;)o=be,u=o.child,o.tag===22&&o.memoizedState!==null?Hk(s):u!==null?(u.return=o,be=u):Hk(s);for(;a!==null;)be=a,kI(a),a=a.sibling;be=s,rp=c,ir=h}$k(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,be=a):$k(t)}}function $k(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||i0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ir)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Sk(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sk(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&wh(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}ir||e.flags&512&&C1(e)}catch(x){en(e,e.return,x)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function Wk(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function Hk(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{i0(4,e)}catch(u){en(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){en(e,s,u)}}var a=e.return;try{C1(e)}catch(u){en(e,a,u)}break;case 5:var o=e.return;try{C1(e)}catch(u){en(e,o,u)}}}catch(u){en(e,e.return,u)}if(e===t){be=null;break}var c=e.sibling;if(c!==null){c.return=e.return,be=c;break}be=e.return}}var HU=Math.ceil,gg=ka.ReactCurrentDispatcher,Iw=ka.ReactCurrentOwner,Ps=ka.ReactCurrentBatchConfig,ot=0,Pn=null,mn=null,Hn=0,ns=0,Dc=Lo(0),_n=0,Rh=null,Pl=0,a0=0,Cw=0,th=null,Fr=null,Rw=0,au=1/0,Ji=null,xg=!1,D1=null,xo=null,sp=!1,io=null,yg=0,nh=0,M1=null,Pp=-1,Dp=0;function Sr(){return ot&6?on():Pp!==-1?Pp:Pp=on()}function yo(t){return t.mode&1?ot&2&&Hn!==0?Hn&-Hn:TU.transition!==null?(Dp===0&&(Dp=lA()),Dp):(t=bt,t!==0||(t=window.event,t=t===void 0?16:pA(t.type)),t):1}function si(t,e,n,r){if(50<nh)throw nh=0,M1=null,Error(le(185));sf(t,n,r),(!(ot&2)||t!==Pn)&&(t===Pn&&(!(ot&2)&&(a0|=n),_n===4&&Za(t,Hn)),Hr(t,r),n===1&&ot===0&&!(e.mode&1)&&(au=on()+500,n0&&Oo()))}function Hr(t,e){var n=t.callbackNode;TV(t,e);var r=tg(t,t===Pn?Hn:0);if(r===0)n!==null&&ek(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ek(n),e===1)t.tag===0?SU(Gk.bind(null,t)):DA(Gk.bind(null,t)),NU(function(){!(ot&6)&&Oo()}),n=null;else{switch(cA(r)){case 1:n=sw;break;case 4:n=aA;break;case 16:n=eg;break;case 536870912:n=oA;break;default:n=eg}n=RI(n,jI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jI(t,e){if(Pp=-1,Dp=0,ot&6)throw Error(le(327));var n=t.callbackNode;if(Hc()&&t.callbackNode!==n)return null;var r=tg(t,t===Pn?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vg(t,r);else{e=r;var s=ot;ot|=2;var a=SI();(Pn!==t||Hn!==e)&&(Ji=null,au=on()+500,kl(t,e));do try{KU();break}catch(c){EI(t,c)}while(!0);xw(),gg.current=a,ot=s,mn!==null?e=0:(Pn=null,Hn=0,e=_n)}if(e!==0){if(e===2&&(s=l1(t),s!==0&&(r=s,e=L1(t,s))),e===1)throw n=Rh,kl(t,0),Za(t,r),Hr(t,on()),n;if(e===6)Za(t,r);else{if(s=t.current.alternate,!(r&30)&&!GU(s)&&(e=vg(t,r),e===2&&(a=l1(t),a!==0&&(r=a,e=L1(t,a))),e===1))throw n=Rh,kl(t,0),Za(t,r),Hr(t,on()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:pl(t,Fr,Ji);break;case 3:if(Za(t,r),(r&130023424)===r&&(e=Rw+500-on(),10<e)){if(tg(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Sr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=g1(pl.bind(null,t,Fr,Ji),e);break}pl(t,Fr,Ji);break;case 4:if(Za(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ri(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HU(r/1960))-r,10<r){t.timeoutHandle=g1(pl.bind(null,t,Fr,Ji),r);break}pl(t,Fr,Ji);break;case 5:pl(t,Fr,Ji);break;default:throw Error(le(329))}}}return Hr(t,on()),t.callbackNode===n?jI.bind(null,t):null}function L1(t,e){var n=th;return t.current.memoizedState.isDehydrated&&(kl(t,e).flags|=256),t=vg(t,e),t!==2&&(e=Fr,Fr=n,e!==null&&O1(e)),t}function O1(t){Fr===null?Fr=t:Fr.push.apply(Fr,t)}function GU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!ai(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Za(t,e){for(e&=~Cw,e&=~a0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ri(e),r=1<<n;t[n]=-1,e&=~r}}function Gk(t){if(ot&6)throw Error(le(327));Hc();var e=tg(t,0);if(!(e&1))return Hr(t,on()),null;var n=vg(t,e);if(t.tag!==0&&n===2){var r=l1(t);r!==0&&(e=r,n=L1(t,r))}if(n===1)throw n=Rh,kl(t,0),Za(t,e),Hr(t,on()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pl(t,Fr,Ji),Hr(t,on()),null}function Pw(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(au=on()+500,n0&&Oo())}}function Dl(t){io!==null&&io.tag===0&&!(ot&6)&&Hc();var e=ot;ot|=1;var n=Ps.transition,r=bt;try{if(Ps.transition=null,bt=1,t)return t()}finally{bt=r,Ps.transition=n,ot=e,!(ot&6)&&Oo()}}function Dw(){ns=Dc.current,Dt(Dc)}function kl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_U(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(mw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ag();break;case 3:su(),Dt($r),Dt(ur),Nw();break;case 5:_w(r);break;case 4:su();break;case 13:Dt($t);break;case 19:Dt($t);break;case 10:yw(r.type._context);break;case 22:case 23:Dw()}n=n.return}if(Pn=t,mn=t=vo(t.current,null),Hn=ns=e,_n=0,Rh=null,Cw=a0=Pl=0,Fr=th=null,vl!==null){for(e=0;e<vl.length;e++)if(n=vl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}vl=null}return t}function EI(t,e){do{var n=mn;try{if(xw(),Ip.current=pg,mg){for(var r=Ht.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mg=!1}if(Rl=0,Rn=wn=Ht=null,Zd=!1,Ah=0,Iw.current=null,n===null||n.return===null){_n=1,Rh=e,mn=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=Hn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=c,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=Pk(o);if(v!==null){v.flags&=-257,Dk(v,o,c,a,e),v.mode&1&&Rk(a,h,e),e=v,u=h;var E=e.updateQueue;if(E===null){var j=new Set;j.add(u),e.updateQueue=j}else E.add(u);break e}else{if(!(e&1)){Rk(a,h,e),Mw();break e}u=Error(le(426))}}else if(Vt&&c.mode&1){var S=Pk(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Dk(S,o,c,a,e),pw(iu(u,c));break e}}a=u=iu(u,c),_n!==4&&(_n=2),th===null?th=[a]:th.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var N=cI(a,u,e);Ek(a,N);break e;case 1:c=u;var w=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(xo===null||!xo.has(k)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=uI(a,c,e);Ek(a,A);break e}}a=a.return}while(a!==null)}AI(n)}catch(D){e=D,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(!0)}function SI(){var t=gg.current;return gg.current=pg,t===null?pg:t}function Mw(){(_n===0||_n===3||_n===2)&&(_n=4),Pn===null||!(Pl&268435455)&&!(a0&268435455)||Za(Pn,Hn)}function vg(t,e){var n=ot;ot|=2;var r=SI();(Pn!==t||Hn!==e)&&(Ji=null,kl(t,e));do try{qU();break}catch(s){EI(t,s)}while(!0);if(xw(),ot=n,gg.current=r,mn!==null)throw Error(le(261));return Pn=null,Hn=0,_n}function qU(){for(;mn!==null;)TI(mn)}function KU(){for(;mn!==null&&!vV();)TI(mn)}function TI(t){var e=CI(t.alternate,t,ns);t.memoizedProps=t.pendingProps,e===null?AI(t):mn=e,Iw.current=null}function AI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zU(n,e),n!==null){n.flags&=32767,mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_n=6,mn=null;return}}else if(n=FU(n,e,ns),n!==null){mn=n;return}if(e=e.sibling,e!==null){mn=e;return}mn=e=t}while(e!==null);_n===0&&(_n=5)}function pl(t,e,n){var r=bt,s=Ps.transition;try{Ps.transition=null,bt=1,QU(t,e,n,r)}finally{Ps.transition=s,bt=r}return null}function QU(t,e,n,r){do Hc();while(io!==null);if(ot&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(AV(t,a),t===Pn&&(mn=Pn=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sp||(sp=!0,RI(eg,function(){return Hc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ps.transition,Ps.transition=null;var o=bt;bt=1;var c=ot;ot|=4,Iw.current=null,$U(t,n),NI(n,t),pU(m1),ng=!!f1,m1=f1=null,t.current=n,WU(n),bV(),ot=c,bt=o,Ps.transition=a}else t.current=n;if(sp&&(sp=!1,io=t,yg=s),a=t.pendingLanes,a===0&&(xo=null),NV(n.stateNode),Hr(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xg)throw xg=!1,t=D1,D1=null,t;return yg&1&&t.tag!==0&&Hc(),a=t.pendingLanes,a&1?t===M1?nh++:(nh=0,M1=t):nh=0,Oo(),null}function Hc(){if(io!==null){var t=cA(yg),e=Ps.transition,n=bt;try{if(Ps.transition=null,bt=16>t?16:t,io===null)var r=!1;else{if(t=io,io=null,yg=0,ot&6)throw Error(le(331));var s=ot;for(ot|=4,be=t.current;be!==null;){var a=be,o=a.child;if(be.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(be=h;be!==null;){var m=be;switch(m.tag){case 0:case 11:case 15:eh(8,m,a)}var g=m.child;if(g!==null)g.return=m,be=g;else for(;be!==null;){m=be;var x=m.sibling,v=m.return;if(bI(m),m===h){be=null;break}if(x!==null){x.return=v,be=x;break}be=v}}}var E=a.alternate;if(E!==null){var j=E.child;if(j!==null){E.child=null;do{var S=j.sibling;j.sibling=null,j=S}while(j!==null)}}be=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,be=o;else e:for(;be!==null;){if(a=be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:eh(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,be=N;break e}be=a.return}}var w=t.current;for(be=w;be!==null;){o=be;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,be=k;else e:for(o=w;be!==null;){if(c=be,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:i0(9,c)}}catch(D){en(c,c.return,D)}if(c===o){be=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,be=A;break e}be=c.return}}if(ot=s,Oo(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(Yg,t)}catch{}r=!0}return r}finally{bt=n,Ps.transition=e}}return!1}function qk(t,e,n){e=iu(n,e),e=cI(t,e,1),t=go(t,e,1),e=Sr(),t!==null&&(sf(t,1,e),Hr(t,e))}function en(t,e,n){if(t.tag===3)qk(t,t,n);else for(;e!==null;){if(e.tag===3){qk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xo===null||!xo.has(r))){t=iu(n,t),t=uI(e,t,1),e=go(e,t,1),t=Sr(),e!==null&&(sf(e,1,t),Hr(e,t));break}}e=e.return}}function XU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sr(),t.pingedLanes|=t.suspendedLanes&n,Pn===t&&(Hn&n)===n&&(_n===4||_n===3&&(Hn&130023424)===Hn&&500>on()-Rw?kl(t,0):Cw|=n),Hr(t,e)}function II(t,e){e===0&&(t.mode&1?(e=Km,Km<<=1,!(Km&130023424)&&(Km=4194304)):e=1);var n=Sr();t=ha(t,e),t!==null&&(sf(t,e,n),Hr(t,n))}function YU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),II(t,n)}function JU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),II(t,n)}var CI;CI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Br=!1,UU(t,e,n);Br=!!(t.flags&131072)}else Br=!1,Vt&&e.flags&1048576&&MA(e,cg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rp(t,e),t=e.pendingProps;var s=tu(e,ur.current);Wc(e,n),s=jw(null,e,r,t,s,n);var a=Ew();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(r)?(a=!0,og(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bw(e),s.updater=s0,e.stateNode=s,s._reactInternals=e,N1(e,r,t,n),e=E1(null,e,r,!0,a,n)):(e.tag=0,Vt&&a&&fw(e),Nr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=eF(r),t=Zs(r,t),s){case 0:e=j1(null,e,r,t,n);break e;case 1:e=Ok(null,e,r,t,n);break e;case 11:e=Mk(null,e,r,t,n);break e;case 14:e=Lk(null,e,r,Zs(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),j1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),Ok(t,e,r,s,n);case 3:e:{if(mI(e),t===null)throw Error(le(387));r=e.pendingProps,a=e.memoizedState,s=a.element,zA(t,e),hg(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=iu(Error(le(423)),e),e=Vk(t,e,r,n,s);break e}else if(r!==s){s=iu(Error(le(424)),e),e=Vk(t,e,r,n,s);break e}else for(ss=po(e.stateNode.containerInfo.firstChild),cs=e,Vt=!0,ti=null,n=UA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nu(),r===s){e=fa(t,e,n);break e}Nr(t,e,r,n)}e=e.child}return e;case 5:return BA(e),t===null&&b1(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,p1(r,s)?o=null:a!==null&&p1(r,a)&&(e.flags|=32),fI(t,e),Nr(t,e,o,n),e.child;case 6:return t===null&&b1(e),null;case 13:return pI(t,e,n);case 4:return ww(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ru(e,null,r,n):Nr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),Mk(t,e,r,s,n);case 7:return Nr(t,e,e.pendingProps,n),e.child;case 8:return Nr(t,e,e.pendingProps.children,n),e.child;case 12:return Nr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Tt(ug,r._currentValue),r._currentValue=o,a!==null)if(ai(a.value,o)){if(a.children===s.children&&!$r.current){e=fa(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=ia(-1,n&-n),u.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),w1(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(le(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),w1(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Nr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wc(e,n),s=Os(s),r=r(s),e.flags|=1,Nr(t,e,r,n),e.child;case 14:return r=e.type,s=Zs(r,e.pendingProps),s=Zs(r.type,s),Lk(t,e,r,s,n);case 15:return dI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),Rp(t,e),e.tag=1,Wr(r)?(t=!0,og(e)):t=!1,Wc(e,n),lI(e,r,s),N1(e,r,s,n),E1(null,e,r,!0,t,n);case 19:return gI(t,e,n);case 22:return hI(t,e,n)}throw Error(le(156,e.tag))};function RI(t,e){return iA(t,e)}function ZU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(t,e,n,r){return new ZU(t,e,n,r)}function Lw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eF(t){if(typeof t=="function")return Lw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tw)return 11;if(t===nw)return 14}return 2}function vo(t,e){var n=t.alternate;return n===null?(n=Cs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mp(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Lw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kc:return jl(n.children,s,a,e);case ew:o=8,s|=8;break;case qv:return t=Cs(12,n,e,s|2),t.elementType=qv,t.lanes=a,t;case Kv:return t=Cs(13,n,e,s),t.elementType=Kv,t.lanes=a,t;case Qv:return t=Cs(19,n,e,s),t.elementType=Qv,t.lanes=a,t;case BT:return o0(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FT:o=10;break e;case zT:o=9;break e;case tw:o=11;break e;case nw:o=14;break e;case Xa:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Cs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function jl(t,e,n,r){return t=Cs(7,t,r,e),t.lanes=n,t}function o0(t,e,n,r){return t=Cs(22,t,r,e),t.elementType=BT,t.lanes=n,t.stateNode={isHidden:!1},t}function By(t,e,n){return t=Cs(6,t,null,e),t.lanes=n,t}function $y(t,e,n){return e=Cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ny(0),this.expirationTimes=Ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ny(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ow(t,e,n,r,s,a,o,c,u){return t=new tF(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Cs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bw(a),t}function nF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PI(t){if(!t)return Eo;t=t._reactInternals;e:{if(Bl(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Wr(n))return PA(t,n,e)}return e}function DI(t,e,n,r,s,a,o,c,u){return t=Ow(n,r,!0,t,s,a,o,c,u),t.context=PI(null),n=t.current,r=Sr(),s=yo(n),a=ia(r,s),a.callback=e??null,go(n,a,s),t.current.lanes=s,sf(t,s,r),Hr(t,r),t}function l0(t,e,n,r){var s=e.current,a=Sr(),o=yo(s);return n=PI(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=go(s,e,o),t!==null&&(si(t,s,o,a),Ap(t,s,o)),o}function bg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vw(t,e){Kk(t,e),(t=t.alternate)&&Kk(t,e)}function rF(){return null}var MI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uw(t){this._internalRoot=t}c0.prototype.render=Uw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));l0(t,e,null,null)};c0.prototype.unmount=Uw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dl(function(){l0(null,t,null,null)}),e[da]=null}};function c0(t){this._internalRoot=t}c0.prototype.unstable_scheduleHydration=function(t){if(t){var e=hA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ja.length&&e!==0&&e<Ja[n].priority;n++);Ja.splice(n,0,t),n===0&&mA(t)}};function Fw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qk(){}function sF(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var h=bg(o);a.call(h)}}var o=DI(e,r,t,0,null,!1,!1,"",Qk);return t._reactRootContainer=o,t[da]=o.current,kh(t.nodeType===8?t.parentNode:t),Dl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=bg(u);c.call(h)}}var u=Ow(t,0,!1,null,null,!1,!1,"",Qk);return t._reactRootContainer=u,t[da]=u.current,kh(t.nodeType===8?t.parentNode:t),Dl(function(){l0(e,u,n,r)}),u}function d0(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=bg(o);c.call(u)}}l0(e,o,t,s)}else o=sF(n,e,t,s,r);return bg(o)}uA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Od(e.pendingLanes);n!==0&&(iw(e,n|1),Hr(e,on()),!(ot&6)&&(au=on()+500,Oo()))}break;case 13:Dl(function(){var r=ha(t,1);if(r!==null){var s=Sr();si(r,t,1,s)}}),Vw(t,1)}};aw=function(t){if(t.tag===13){var e=ha(t,134217728);if(e!==null){var n=Sr();si(e,t,134217728,n)}Vw(t,134217728)}};dA=function(t){if(t.tag===13){var e=yo(t),n=ha(t,e);if(n!==null){var r=Sr();si(n,t,e,r)}Vw(t,e)}};hA=function(){return bt};fA=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};i1=function(t,e,n){switch(e){case"input":if(Jv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=t0(r);if(!s)throw Error(le(90));WT(r),Jv(r,s)}}}break;case"textarea":GT(t,n);break;case"select":e=n.value,e!=null&&Fc(t,!!n.multiple,e,!1)}};ZT=Pw;eA=Dl;var iF={usingClientEntryPoint:!1,Events:[of,Tc,t0,YT,JT,Pw]},Cd={findFiberByHostInstance:yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aF={bundleType:Cd.bundleType,version:Cd.version,rendererPackageName:Cd.rendererPackageName,rendererConfig:Cd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rA(t),t===null?null:t.stateNode},findFiberByHostInstance:Cd.findFiberByHostInstance||rF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ip=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ip.isDisabled&&ip.supportsFiber)try{Yg=ip.inject(aF),Ni=ip}catch{}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iF;hs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fw(e))throw Error(le(200));return nF(t,e,null,n)};hs.createRoot=function(t,e){if(!Fw(t))throw Error(le(299));var n=!1,r="",s=MI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ow(t,1,!1,null,null,n,!1,r,s),t[da]=e.current,kh(t.nodeType===8?t.parentNode:t),new Uw(e)};hs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=rA(e),t=t===null?null:t.stateNode,t};hs.flushSync=function(t){return Dl(t)};hs.hydrate=function(t,e,n){if(!u0(e))throw Error(le(200));return d0(null,t,e,!0,n)};hs.hydrateRoot=function(t,e,n){if(!Fw(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=MI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=DI(e,null,t,1,n??null,s,!1,a,o),t[da]=e.current,kh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new c0(e)};hs.render=function(t,e,n){if(!u0(e))throw Error(le(200));return d0(null,t,e,!1,n)};hs.unmountComponentAtNode=function(t){if(!u0(t))throw Error(le(40));return t._reactRootContainer?(Dl(function(){d0(null,null,t,!1,function(){t._reactRootContainer=null,t[da]=null})}),!0):!1};hs.unstable_batchedUpdates=Pw;hs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!u0(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return d0(t,e,n,!1,r)};hs.version="18.3.1-next-f1338f8080-20240426";function LI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LI)}catch(t){console.error(t)}}LI(),LT.exports=hs;var oF=LT.exports,Xk=oF;Hv.createRoot=Xk.createRoot,Hv.hydrateRoot=Xk.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}var ao;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ao||(ao={}));const Yk="popstate";function lF(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:c}=r.location;return V1("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:wg(s)}return uF(e,n,null,t)}function Gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cF(){return Math.random().toString(36).substr(2,8)}function Jk(t,e){return{usr:t.state,key:t.key,idx:e}}function V1(t,e,n,r){return n===void 0&&(n=null),Ph({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Au(e):e,{state:n,key:e&&e.key||r||cF()})}function wg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Au(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uF(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,c=ao.Pop,u=null,h=m();h==null&&(h=0,o.replaceState(Ph({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function g(){c=ao.Pop;let S=m(),N=S==null?null:S-h;h=S,u&&u({action:c,location:j.location,delta:N})}function x(S,N){c=ao.Push;let w=V1(j.location,S,N);h=m()+1;let k=Jk(w,h),A=j.createHref(w);try{o.pushState(k,"",A)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(A)}a&&u&&u({action:c,location:j.location,delta:1})}function v(S,N){c=ao.Replace;let w=V1(j.location,S,N);h=m();let k=Jk(w,h),A=j.createHref(w);o.replaceState(k,"",A),a&&u&&u({action:c,location:j.location,delta:0})}function E(S){let N=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof S=="string"?S:wg(S);return w=w.replace(/ $/,"%20"),Gt(N,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,N)}let j={get action(){return c},get location(){return t(s,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Yk,g),u=S,()=>{s.removeEventListener(Yk,g),u=null}},createHref(S){return e(s,S)},createURL:E,encodeLocation(S){let N=E(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:v,go(S){return o.go(S)}};return j}var Zk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zk||(Zk={}));function dF(t,e,n){return n===void 0&&(n="/"),hF(t,e,n)}function hF(t,e,n,r){let s=typeof e=="string"?Au(e):e,a=ou(s.pathname||"/",n);if(a==null)return null;let o=OI(t);fF(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=kF(a);c=_F(o[u],h)}return c}function OI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Gt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=bo([r,u.relativePath]),m=n.concat(u);a.children&&a.children.length>0&&(Gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),OI(a.children,e,m,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:bF(h,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let u of VI(a.path))s(a,o,u)}),e}function VI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=VI(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function fF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mF=/^:[\w-]+$/,pF=3,gF=2,xF=1,yF=10,vF=-2,ej=t=>t==="*";function bF(t,e){let n=t.split("/"),r=n.length;return n.some(ej)&&(r+=vF),e&&(r+=gF),n.filter(s=>!ej(s)).reduce((s,a)=>s+(mF.test(a)?pF:a===""?xF:yF),r)}function wF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function _F(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=U1({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),x=u.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:bo([a,g.pathname]),pathnameBase:AF(bo([a,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(a=bo([a,g.pathnameBase]))}return o}function U1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NF(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:x,isOptional:v}=m;if(x==="*"){let j=c[g]||"";o=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const E=c[g];return v&&!E?h[x]=void 0:h[x]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function NF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ou(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const jF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EF=t=>jF.test(t);function SF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Au(t):t,a;if(n)if(EF(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),zw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=tj(n.substring(1),"/"):a=tj(n,e)}else a=e;return{pathname:a,search:IF(r),hash:CF(s)}}function tj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bw(t,e){let n=TF(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $w(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Au(t):(s=Ph({},t),Gt(!s.pathname||!s.pathname.includes("?"),Wy("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),Wy("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),Wy("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;s.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=SF(s,c),h=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}const bo=t=>t.join("/").replace(/\/\/+/g,"/"),AF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UI=["post","put","patch","delete"];new Set(UI);const PF=["get",...UI];new Set(PF);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}const h0=_.createContext(null),FI=_.createContext(null),ja=_.createContext(null),f0=_.createContext(null),Ea=_.createContext({outlet:null,matches:[],isDataRoute:!1}),zI=_.createContext(null);function DF(t,e){let{relative:n}=e===void 0?{}:e;Iu()||Gt(!1);let{basename:r,navigator:s}=_.useContext(ja),{hash:a,pathname:o,search:c}=m0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:bo([r,o])),s.createHref({pathname:u,search:c,hash:a})}function Iu(){return _.useContext(f0)!=null}function Vo(){return Iu()||Gt(!1),_.useContext(f0).location}function BI(t){_.useContext(ja).static||_.useLayoutEffect(t)}function yt(){let{isDataRoute:t}=_.useContext(Ea);return t?qF():MF()}function MF(){Iu()||Gt(!1);let t=_.useContext(h0),{basename:e,future:n,navigator:r}=_.useContext(ja),{matches:s}=_.useContext(Ea),{pathname:a}=Vo(),o=JSON.stringify(Bw(s,n.v7_relativeSplatPath)),c=_.useRef(!1);return BI(()=>{c.current=!0}),_.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let g=$w(h,JSON.parse(o),a,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:bo([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,o,a,t])}function Ww(){let{matches:t}=_.useContext(Ea),e=t[t.length-1];return e?e.params:{}}function m0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(ja),{matches:s}=_.useContext(Ea),{pathname:a}=Vo(),o=JSON.stringify(Bw(s,r.v7_relativeSplatPath));return _.useMemo(()=>$w(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function LF(t,e){return OF(t,e)}function OF(t,e,n,r){Iu()||Gt(!1);let{navigator:s}=_.useContext(ja),{matches:a}=_.useContext(Ea),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Vo(),m;if(e){var g;let S=typeof e=="string"?Au(e):e;u==="/"||(g=S.pathname)!=null&&g.startsWith(u)||Gt(!1),m=S}else m=h;let x=m.pathname||"/",v=x;if(u!=="/"){let S=u.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let E=dF(t,{pathname:v}),j=BF(E&&E.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:bo([u,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:bo([u,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&j?_.createElement(f0.Provider,{value:{location:Dh({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ao.Pop}},j):j}function VF(){let t=GF(),e=RF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const UF=_.createElement(VF,null);class FF extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Ea.Provider,{value:this.props.routeContext},_.createElement(zI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zF(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(h0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Ea.Provider,{value:e},r)}function BF(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);m>=0||Gt(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:x,errors:v}=n,E=g.route.loader&&x[g.route.id]===void 0&&(!v||v[g.route.id]===void 0);if(g.route.lazy||E){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,g,x)=>{let v,E=!1,j=null,S=null;n&&(v=c&&g.route.id?c[g.route.id]:void 0,j=g.route.errorElement||UF,u&&(h<0&&x===0?(KF("route-fallback"),E=!0,S=null):h===x&&(E=!0,S=g.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,x+1)),w=()=>{let k;return v?k=j:E?k=S:g.route.Component?k=_.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=m,_.createElement(zF,{match:g,routeContext:{outlet:m,matches:N,isDataRoute:n!=null},children:k})};return n&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?_.createElement(FF,{location:n.location,revalidation:n.revalidation,component:j,error:v,children:w(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):w()},null)}var $I=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($I||{}),WI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(WI||{});function $F(t){let e=_.useContext(h0);return e||Gt(!1),e}function WF(t){let e=_.useContext(FI);return e||Gt(!1),e}function HF(t){let e=_.useContext(Ea);return e||Gt(!1),e}function HI(t){let e=HF(),n=e.matches[e.matches.length-1];return n.route.id||Gt(!1),n.route.id}function GF(){var t;let e=_.useContext(zI),n=WF(),r=HI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qF(){let{router:t}=$F($I.UseNavigateStable),e=HI(WI.UseNavigateStable),n=_.useRef(!1);return BI(()=>{n.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dh({fromRouteId:e},a)))},[t,e])}const nj={};function KF(t,e,n){nj[t]||(nj[t]=!0)}function QF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Hy(t){let{to:e,replace:n,state:r,relative:s}=t;Iu()||Gt(!1);let{future:a,static:o}=_.useContext(ja),{matches:c}=_.useContext(Ea),{pathname:u}=Vo(),h=yt(),m=$w(e,Bw(c,a.v7_relativeSplatPath),u,s==="path"),g=JSON.stringify(m);return _.useEffect(()=>h(JSON.parse(g),{replace:n,state:r,relative:s}),[h,g,s,n,r]),null}function Le(t){Gt(!1)}function XF(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ao.Pop,navigator:a,static:o=!1,future:c}=t;Iu()&&Gt(!1);let u=e.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:u,navigator:a,static:o,future:Dh({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=Au(r));let{pathname:m="/",search:g="",hash:x="",state:v=null,key:E="default"}=r,j=_.useMemo(()=>{let S=ou(m,u);return S==null?null:{location:{pathname:S,search:g,hash:x,state:v,key:E},navigationType:s}},[u,m,g,x,v,E,s]);return j==null?null:_.createElement(ja.Provider,{value:h},_.createElement(f0.Provider,{children:n,value:j}))}function Gy(t){let{children:e,location:n}=t;return LF(F1(e),n)}new Promise(()=>{});function F1(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){n.push.apply(n,F1(r.props.children,a));return}r.type!==Le&&Gt(!1),!r.props.index||!r.props.children||Gt(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=F1(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _g(){return _g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_g.apply(this,arguments)}function GI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JF(t,e){return t.button===0&&(!e||e==="_self")&&!YF(t)}function z1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function ZF(t,e){let n=z1(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const ez=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],nz="6";try{window.__reactRouterVersion=nz}catch{}const rz=_.createContext({isTransitioning:!1}),sz="startTransition",rj=XO[sz];function iz(t){let{basename:e,children:n,future:r,window:s}=t,a=_.useRef();a.current==null&&(a.current=lF({window:s,v5Compat:!0}));let o=a.current,[c,u]=_.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},m=_.useCallback(g=>{h&&rj?rj(()=>u(g)):u(g)},[u,h]);return _.useLayoutEffect(()=>o.listen(m),[o,m]),_.useEffect(()=>QF(r),[r]),_.createElement(XF,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const az=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,is=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:g}=e,x=GI(e,ez),{basename:v}=_.useContext(ja),E,j=!1;if(typeof h=="string"&&oz.test(h)&&(E=h,az))try{let k=new URL(window.location.href),A=h.startsWith("//")?new URL(k.protocol+h):new URL(h),D=ou(A.pathname,v);A.origin===k.origin&&D!=null?h=D+A.search+A.hash:j=!0}catch{}let S=DF(h,{relative:s}),N=uz(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:g});function w(k){r&&r(k),k.defaultPrevented||N(k)}return _.createElement("a",_g({},x,{href:E||S,onClick:j||a?r:w,ref:n,target:u}))}),lz=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:c,to:u,viewTransition:h,children:m}=e,g=GI(e,tz),x=m0(u,{relative:g.relative}),v=Vo(),E=_.useContext(FI),{navigator:j,basename:S}=_.useContext(ja),N=E!=null&&dz(x)&&h===!0,w=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,k=v.pathname,A=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;s||(k=k.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&S&&(A=ou(A,S)||A);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=k===w||!o&&k.startsWith(w)&&k.charAt(D)==="/",C=A!=null&&(A===w||!o&&A.startsWith(w)&&A.charAt(w.length)==="/"),T={isActive:F,isPending:C,isTransitioning:N},P=F?r:void 0,L;typeof a=="function"?L=a(T):L=[a,F?"active":null,C?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let z=typeof c=="function"?c(T):c;return _.createElement(is,_g({},g,{"aria-current":P,className:L,ref:n,style:z,to:u,viewTransition:h}),typeof m=="function"?m(T):m)});var B1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B1||(B1={}));var sj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sj||(sj={}));function cz(t){let e=_.useContext(h0);return e||Gt(!1),e}function uz(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=yt(),h=Vo(),m=m0(t,{relative:o});return _.useCallback(g=>{if(JF(g,n)){g.preventDefault();let x=r!==void 0?r:wg(h)===wg(m);u(t,{replace:x,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[h,u,m,r,s,n,t,a,o,c])}function cf(t){let e=_.useRef(z1(t)),n=_.useRef(!1),r=Vo(),s=_.useMemo(()=>ZF(r.search,n.current?null:e.current),[r.search]),a=yt(),o=_.useCallback((c,u)=>{const h=z1(typeof c=="function"?c(s):c);n.current=!0,a("?"+h,u)},[a,s]);return[s,o]}function dz(t,e){e===void 0&&(e={});let n=_.useContext(rz);n==null&&Gt(!1);let{basename:r}=cz(B1.useViewTransitionState),s=m0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ou(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ou(n.nextLocation.pathname,r)||n.nextLocation.pathname;return U1(s.pathname,o)!=null||U1(s.pathname,a)!=null}var ij={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},KI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,m=a>>2,g=(a&3)<<4|c>>4;let x=(c&15)<<2|h>>6,v=h&63;u||(v=64,o||(x=64)),r.push(n[m],n[g],n[x],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||g==null)throw new fz;const x=a<<2|c>>4;if(r.push(x),h!==64){const v=c<<4&240|h>>2;if(r.push(v),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mz=function(t){const e=qI(t);return KI.encodeByteArray(e,!0)},Ng=function(t){return mz(t).replace(/\./g,"")},QI=function(t){try{return KI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=()=>pz().__FIREBASE_DEFAULTS__,xz=()=>{if(typeof process>"u"||typeof ij>"u")return;const t=ij.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QI(t[1]);return e&&JSON.parse(e)},p0=()=>{try{return gz()||xz()||yz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XI=t=>{var e,n;return(n=(e=p0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},YI=t=>{const e=XI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JI=()=>{var t;return(t=p0())===null||t===void 0?void 0:t.config},ZI=t=>{var e;return(e=p0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ng(JSON.stringify(n)),Ng(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function wz(){var t;const e=(t=p0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _z(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jz(){const t=dr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ez(){return!wz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sz(){try{return typeof indexedDB=="object"}catch{return!1}}function Tz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az="FirebaseError";class Pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Az,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uf.prototype.create)}}class uf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?Iz(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Pi(s,c,r)}}function Iz(t,e){return t.replace(Cz,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Cz=/\{\$([^}]+)}/g;function Rz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(aj(a)&&aj(o)){if(!Mh(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function aj(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ud(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Fd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Pz(t,e){const n=new Dz(t,e);return n.subscribe.bind(n)}class Dz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Mz(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qy),s.error===void 0&&(s.error=qy),s.complete===void 0&&(s.complete=qy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class So{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vz(e))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gl){return this.instances.has(e)}getOptions(e=gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Oz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gl){return this.component?this.component.multipleInstances?e:gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Oz(t){return t===gl?void 0:t}function Vz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const Fz={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},zz=et.INFO,Bz={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},$z=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Bz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hw{constructor(e){this.name=e,this._logLevel=zz,this._logHandler=$z,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const Wz=(t,e)=>e.some(n=>t instanceof n);let oj,lj;function Hz(){return oj||(oj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gz(){return lj||(lj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tC=new WeakMap,$1=new WeakMap,nC=new WeakMap,Ky=new WeakMap,Gw=new WeakMap;function qz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(wo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tC.set(n,t)}).catch(()=>{}),Gw.set(e,t),e}function Kz(t){if($1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});$1.set(t,e)}let W1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qz(t){W1=t(W1)}function Xz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qy(this),e,...n);return nC.set(r,e.sort?e.sort():[e]),wo(r)}:Gz().includes(t)?function(...e){return t.apply(Qy(this),e),wo(tC.get(this))}:function(...e){return wo(t.apply(Qy(this),e))}}function Yz(t){return typeof t=="function"?Xz(t):(t instanceof IDBTransaction&&Kz(t),Wz(t,Hz())?new Proxy(t,W1):t)}function wo(t){if(t instanceof IDBRequest)return qz(t);if(Ky.has(t))return Ky.get(t);const e=Yz(t);return e!==t&&(Ky.set(t,e),Gw.set(e,t)),e}const Qy=t=>Gw.get(t);function Jz(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=wo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wo(o.result),u.oldVersion,u.newVersion,wo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Zz=["get","getKey","getAll","getAllKeys","count"],eB=["put","add","delete","clear"],Xy=new Map;function cj(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xy.get(e))return Xy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zz.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Xy.set(e,a),a}Qz(t=>({...t,get:(e,n,r)=>cj(e,n)||t.get(e,n,r),has:(e,n)=>!!cj(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const H1="@firebase/app",uj="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Hw("@firebase/app"),rB="@firebase/app-compat",sB="@firebase/analytics-compat",iB="@firebase/analytics",aB="@firebase/app-check-compat",oB="@firebase/app-check",lB="@firebase/auth",cB="@firebase/auth-compat",uB="@firebase/database",dB="@firebase/data-connect",hB="@firebase/database-compat",fB="@firebase/functions",mB="@firebase/functions-compat",pB="@firebase/installations",gB="@firebase/installations-compat",xB="@firebase/messaging",yB="@firebase/messaging-compat",vB="@firebase/performance",bB="@firebase/performance-compat",wB="@firebase/remote-config",_B="@firebase/remote-config-compat",NB="@firebase/storage",kB="@firebase/storage-compat",jB="@firebase/firestore",EB="@firebase/vertexai-preview",SB="@firebase/firestore-compat",TB="firebase",AB="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="[DEFAULT]",IB={[H1]:"fire-core",[rB]:"fire-core-compat",[iB]:"fire-analytics",[sB]:"fire-analytics-compat",[oB]:"fire-app-check",[aB]:"fire-app-check-compat",[lB]:"fire-auth",[cB]:"fire-auth-compat",[uB]:"fire-rtdb",[dB]:"fire-data-connect",[hB]:"fire-rtdb-compat",[fB]:"fire-fn",[mB]:"fire-fn-compat",[pB]:"fire-iid",[gB]:"fire-iid-compat",[xB]:"fire-fcm",[yB]:"fire-fcm-compat",[vB]:"fire-perf",[bB]:"fire-perf-compat",[wB]:"fire-rc",[_B]:"fire-rc-compat",[NB]:"fire-gcs",[kB]:"fire-gcs-compat",[jB]:"fire-fst",[SB]:"fire-fst-compat",[EB]:"fire-vertex","fire-js":"fire-js",[TB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=new Map,CB=new Map,q1=new Map;function dj(t,e){try{t.container.addComponent(e)}catch(n){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ml(t){const e=t.name;if(q1.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;q1.set(e,t);for(const n of kg.values())dj(n,t);for(const n of CB.values())dj(n,t);return!0}function g0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new uf("app","Firebase",RB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=AB;function rC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:G1,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(n||(n=JI()),!n)throw _o.create("no-options");const a=kg.get(s);if(a){if(Mh(n,a.options)&&Mh(r,a.config))return a;throw _o.create("duplicate-app",{appName:s})}const o=new Uz(s);for(const u of q1.values())o.addComponent(u);const c=new PB(n,r,o);return kg.set(s,c),c}function qw(t=G1){const e=kg.get(t);if(!e&&t===G1&&JI())return rC();if(!e)throw _o.create("no-app",{appName:t});return e}function ji(t,e,n){var r;let s=(r=IB[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(c.join(" "));return}Ml(new So(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="firebase-heartbeat-database",MB=1,Lh="firebase-heartbeat-store";let Yy=null;function sC(){return Yy||(Yy=Jz(DB,MB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lh)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),Yy}async function LB(t){try{const n=(await sC()).transaction(Lh),r=await n.objectStore(Lh).get(iC(t));return await n.done,r}catch(e){if(e instanceof Pi)ma.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(n.message)}}}async function hj(t,e){try{const r=(await sC()).transaction(Lh,"readwrite");await r.objectStore(Lh).put(e,iC(t)),await r.done}catch(n){if(n instanceof Pi)ma.warn(n.message);else{const r=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ma.warn(r.message)}}}function iC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=1024,VB=30*24*60*60*1e3;class UB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=fj();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=VB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ma.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fj(),{heartbeatsToSend:r,unsentEntries:s}=FB(this._heartbeatsCache.heartbeats),a=Ng(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ma.warn(n),""}}}function fj(){return new Date().toISOString().substring(0,10)}function FB(t,e=OB){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),mj(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sz()?Tz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mj(t){return Ng(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){Ml(new So("platform-logger",e=>new tB(e),"PRIVATE")),Ml(new So("heartbeat",e=>new UB(e),"PRIVATE")),ji(H1,uj,t),ji(H1,uj,"esm2017"),ji("fire-js","")}BB("");function Kw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $B=aC,oC=new uf("auth","Firebase",aC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Hw("@firebase/auth");function WB(t,...e){jg.logLevel<=et.WARN&&jg.warn(`Auth (${$l}): ${t}`,...e)}function Lp(t,...e){jg.logLevel<=et.ERROR&&jg.error(`Auth (${$l}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t,...e){throw Xw(t,...e)}function Gr(t,...e){return Xw(t,...e)}function Qw(t,e,n){const r=Object.assign(Object.assign({},$B()),{[e]:n});return new uf("auth","Firebase",r).create(e,{appName:t.name})}function Tr(t){return Qw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x0(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ds(t,"argument-error"),Qw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oC.create(t,...e)}function pe(t,e,...n){if(!t)throw Xw(e,...n)}function na(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lp(e),new Error(e)}function pa(t,e){t||na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Yw(){return pj()==="http:"||pj()==="https:"}function pj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yw()||Nz()||"connection"in navigator)?navigator.onLine:!0}function GB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=bz()||kz()}get(){return HB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e){pa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=new df(3e4,6e4);function En(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sn(t,e,n,r,s={}){return cC(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Cu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return _z()||(h.referrerPolicy="no-referrer"),lC.fetch()(uC(t,t.config.apiHost,n,c),h)})}async function cC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qB),e);try{const s=new XB(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw zd(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw zd(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Qw(t,m,h);ds(t,m)}}catch(s){if(s instanceof Pi)throw s;ds(t,"network-request-failed",{message:String(s)})}}async function Sa(t,e,n,r,s={}){const a=await Sn(t,e,n,r,s);return"mfaPendingCredential"in a&&ds(t,"multi-factor-auth-required",{_serverResponse:a}),a}function uC(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Jw(t.config,s):`${t.config.apiScheme}://${s}`}function QB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gr(this.auth,"network-request-failed")),KB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){return t!==void 0&&t.getResponse!==void 0}function xj(t){return t!==void 0&&t.enterprise!==void 0}class YB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JB(t){return(await Sn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ZB(t,e){return Sn(t,"GET","/v2/recaptchaConfig",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(t,e){return Sn(t,"POST","/v1/accounts:delete",e)}async function t7(t,e){return Sn(t,"POST","/v1/accounts:update",e)}async function dC(t,e){return Sn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n7(t,e=!1){const n=ze(t),r=await n.getIdToken(e),s=y0(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:rh(Jy(s.auth_time)),issuedAtTime:rh(Jy(s.iat)),expirationTime:rh(Jy(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Jy(t){return Number(t)*1e3}function y0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lp("JWT malformed, contained fewer than 3 sections"),null;try{const s=QI(n);return s?JSON.parse(s):(Lp("Failed to decode base64 JWT payload"),null)}catch(s){return Lp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yj(t){const e=y0(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pi&&r7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rh(this.lastLoginAt),this.creationTime=rh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ll(t,dC(n,{idToken:r}));pe(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?hC(a.providerUserInfo):[],c=a7(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),m=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new K1(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function i7(t){const e=ze(t);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hC(t){return t.map(e=>{var{providerId:n}=e,r=Kw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(t,e){const n=await cC(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=uC(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",lC.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function l7(t,e){return Sn(t,"POST","/v2/accounts:revokeToken",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=yj(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await o7(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Gc;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(pe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gc,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ra{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Kw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new K1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n7(this,e)}reload(){return i7(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ra(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await Ll(this,e7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,c,u,h,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:k,emailVerified:A,isAnonymous:D,providerData:F,stsTokenManager:C}=n;pe(k&&C,e,"internal-error");const T=Gc.fromJSON(this.name,C);pe(typeof k=="string",e,"internal-error"),Ka(g,e.name),Ka(x,e.name),pe(typeof A=="boolean",e,"internal-error"),pe(typeof D=="boolean",e,"internal-error"),Ka(v,e.name),Ka(E,e.name),Ka(j,e.name),Ka(S,e.name),Ka(N,e.name),Ka(w,e.name);const P=new ra({uid:k,auth:e,email:x,emailVerified:A,displayName:g,isAnonymous:D,photoURL:E,phoneNumber:v,tenantId:j,stsTokenManager:T,createdAt:N,lastLoginAt:w});return F&&Array.isArray(F)&&(P.providerData=F.map(L=>Object.assign({},L))),S&&(P._redirectEventId=S),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gc;s.updateFromServerResponse(n);const a=new ra({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?hC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Gc;c.updateFromIdToken(r);const u=new ra({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Map;function sa(t){pa(t instanceof Function,"Expected a class definition");let e=vj.get(t);return e?(pa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vj.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fC.type="NONE";const bj=fC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e,n){return`firebase:${t}:${e}:${n}`}class qc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Op(this.userKey,s.apiKey,a),this.fullPersistenceKey=Op("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ra._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qc(sa(bj),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||sa(bj);const o=Op(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){const g=ra._fromJSON(e,m);h!==a&&(c=g),a=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new qc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new qc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vC(e))return"Blackberry";if(bC(e))return"Webos";if(pC(e))return"Safari";if((e.includes("chrome/")||gC(e))&&!e.includes("edge/"))return"Chrome";if(yC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mC(t=dr()){return/firefox\//i.test(t)}function pC(t=dr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gC(t=dr()){return/crios\//i.test(t)}function xC(t=dr()){return/iemobile/i.test(t)}function yC(t=dr()){return/android/i.test(t)}function vC(t=dr()){return/blackberry/i.test(t)}function bC(t=dr()){return/webos/i.test(t)}function Zw(t=dr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c7(t=dr()){var e;return Zw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u7(){return jz()&&document.documentMode===10}function wC(t=dr()){return Zw(t)||yC(t)||bC(t)||vC(t)||/windows phone/i.test(t)||xC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e=[]){let n;switch(t){case"Browser":n=wj(dr());break;case"Worker":n=`${wj(dr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(t,e={}){return Sn(t,"GET","/v2/passwordPolicy",En(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=6;class m7{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:f7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _j(this),this.idTokenSubscription=new _j(this),this.beforeStateQueue=new d7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sa(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dC(this,{idToken:e}),r=await ra._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Tr(this));const n=e?ze(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h7(this),n=new m7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await l7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sa(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await qc.create(this,[sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mn(t){return ze(t)}class _j{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pz(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g7(t){hf=t}function e2(t){return hf.loadJS(t)}function x7(){return hf.recaptchaV2Script}function y7(){return hf.recaptchaEnterpriseScript}function v7(){return hf.gapiScript}function NC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const b7="recaptcha-enterprise",w7="NO_RECAPTCHA";class _7{constructor(e){this.type=b7,this.auth=Mn(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{ZB(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new YB(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function s(a,o,c){const u=window.grecaptcha;xj(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(w7)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&xj(window.grecaptcha))s(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=y7();u.length!==0&&(u+=c),e2(u).then(()=>{s(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function Nj(t,e,n,r=!1){const s=new _7(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Nj(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Nj(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t,e){const n=g0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Mh(a,e??{}))return s;ds(s,"already-initialized")}return n.initialize({options:e})}function k7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j7(t,e,n){const r=Mn(t);pe(r._canInitEmulator,r,"emulator-config-failed"),pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=kC(e),{host:o,port:c}=E7(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),S7()}function kC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function E7(t){const e=kC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:kj(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:kj(o)}}}function kj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return na("not implemented")}_getIdTokenResponse(e){return na("not implemented")}_linkToIdToken(e,n){return na("not implemented")}_getReauthenticationResolver(e){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e){return Sn(t,"POST","/v1/accounts:resetPassword",En(t,e))}async function T7(t,e){return Sn(t,"POST","/v1/accounts:update",e)}async function A7(t,e){return Sn(t,"POST","/v1/accounts:signUp",e)}async function I7(t,e){return Sn(t,"POST","/v1/accounts:update",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(t,e){return Sa(t,"POST","/v1/accounts:signInWithPassword",En(t,e))}async function b0(t,e){return Sn(t,"POST","/v1/accounts:sendOobCode",En(t,e))}async function R7(t,e){return b0(t,e)}async function P7(t,e){return b0(t,e)}async function D7(t,e){return b0(t,e)}async function M7(t,e){return b0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L7(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",En(t,e))}async function O7(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends v0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Fh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,n,"signInWithPassword",C7);case"emailLink":return L7(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,r,"signUpPassword",A7);case"emailLink":return O7(e,{idToken:n,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t,e){return Sa(t,"POST","/v1/accounts:signInWithIdp",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7="http://localhost";class ga extends v0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Kw(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ga(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Kc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Kc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Kc(e,n)}buildRequest(){const e={requestUri:V7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U7(t,e){return Sn(t,"POST","/v1/accounts:sendVerificationCode",En(t,e))}async function F7(t,e){return Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",En(t,e))}async function z7(t,e){const n=await Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",En(t,e));if(n.temporaryProof)throw zd(t,"account-exists-with-different-credential",n);return n}const B7={USER_NOT_FOUND:"user-not-found"};async function $7(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",En(t,n),B7)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends v0{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new sh({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new sh({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return F7(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return z7(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return $7(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a}=e;return!r&&!n&&!s&&!a?null:new sh({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function H7(t){const e=Ud(Fd(t)).link,n=e?Ud(Fd(e)).deep_link_id:null,r=Ud(Fd(t)).deep_link_id;return(r?Ud(Fd(r)).link:null)||r||n||e||t}class w0{constructor(e){var n,r,s,a,o,c;const u=Ud(Fd(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,g=W7((s=u.mode)!==null&&s!==void 0?s:null);pe(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=H7(e);try{return new w0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.providerId=Wl.PROVIDER_ID}static credential(e,n){return Fh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=w0.parseLink(n);return pe(r,"argument-error"),Fh._fromEmailAndCode(e,r.code,r.tenantId)}}Wl.PROVIDER_ID="password";Wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Ru{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vp extends Pu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return pe("providerId"in n&&"signInMethod"in n,"argument-error"),ga._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return pe(e.idToken||e.accessToken,"argument-error"),ga._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Vp.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vp.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:a,nonce:o,providerId:c}=e;if(!r&&!s&&!n&&!a||!c)return null;try{return new Vp(c)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Pu{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Pu{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Pu{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return no.credential(n,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(t,e){return Sa(t,"POST","/v1/accounts:signUp",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await ra._fromIdTokenResponse(e,r,s),o=jj(r);return new Ai({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jj(r);return new Ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xse(t){var e;if(Wn(t.app))return Promise.reject(Tr(t));const n=Mn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ai({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await EC(n,{returnSecureToken:!0}),s=await Ai._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends Pi{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Eg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Eg(e,n,r,s)}}function SC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Eg._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yse(t,e){const n=ze(t);await _0(!0,n,e);const{providerUserInfo:r}=await t7(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=TC(r||[]);return n.providerData=n.providerData.filter(a=>s.has(a.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function AC(t,e,n=!1){const r=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",r)}async function _0(t,e,n){await Vh(e);const r=TC(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";pe(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(t,e,n=!1){const{auth:r}=t;if(Wn(r.app))return Promise.reject(Tr(r));const s="reauthenticate";try{const a=await Ll(t,SC(r,s,e,t),n);pe(a.idToken,r,"internal-error");const o=y0(a.idToken);pe(o,r,"internal-error");const{sub:c}=o;return pe(t.uid===c,r,"user-mismatch"),Ai._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ds(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e,n=!1){if(Wn(t.app))return Promise.reject(Tr(t));const r="signIn",s=await SC(t,r,e),a=await Ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function N0(t,e){return IC(Mn(t),e)}async function q7(t,e){const n=ze(t);return await _0(!1,n,e.providerId),AC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(t,e){return Sa(t,"POST","/v1/accounts:signInWithCustomToken",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vse(t,e){if(Wn(t.app))return Promise.reject(Tr(t));const n=Mn(t),r=await K7(n,{token:e,returnSecureToken:!0}),s=await Ai._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?n2._fromServerResponse(e,n):"totpInfo"in n?r2._fromServerResponse(e,n):ds(e,"internal-error")}}class n2 extends t2{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new n2(n)}}class r2 extends t2{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new r2(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e,n){var r;pe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),pe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(pe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t){const e=Mn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Q7(t,e,n){const r=Mn(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&k0(r,s,n),await Uh(r,s,"getOobCode",P7)}async function X7(t,e,n){await jC(ze(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s2(t),r})}async function bse(t,e){await I7(ze(t),{oobCode:e})}async function Y7(t,e){const n=ze(t),r=await jC(n,{oobCode:e}),s=r.requestType;switch(pe(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(r.mfaInfo,n,"internal-error");default:pe(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=t2._fromServerResponse(Mn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function J7(t,e){const{data:n}=await Y7(ze(t),e);return n.email}async function j0(t,e,n){if(Wn(t.app))return Promise.reject(Tr(t));const r=Mn(t),o=await Uh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&s2(t),u}),c=await Ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function CC(t,e,n){return Wn(t.app)?Promise.reject(Tr(t)):N0(ze(t),Wl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s2(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wse(t,e,n){const r=Mn(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,c){pe(c.handleCodeInApp,r,"argument-error"),c&&k0(r,o,c)}a(s,n),await Uh(r,s,"getOobCode",D7)}function _se(t,e){const n=w0.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Nse(t,e,n){if(Wn(t.app))return Promise.reject(Tr(t));const r=ze(t),s=Wl.credentialWithLink(e,n||Oh());return pe(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),N0(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){return Sn(t,"POST","/v1/accounts:createAuthUri",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kse(t,e){const n=Yw()?Oh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Z7(ze(t),r);return s||[]}async function jse(t,e){const n=ze(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&k0(n.auth,s,e);const{email:a}=await R7(n.auth,s);a!==t.email&&await t.reload()}async function Ese(t,e,n){const r=ze(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&k0(r.auth,a,n);const{email:o}=await M7(r.auth,a);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(t,e){return Sn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sse(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ze(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ll(r,e$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Tse(t,e){const n=ze(t);return Wn(n.auth.app)?Promise.reject(Tr(n.auth)):RC(n,e,null)}function Ase(t,e){return RC(ze(t),null,e)}async function RC(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Ll(t,T7(r,a));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=y0(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const c=o!=="anonymous"&&o!=="custom"?o:null;return new Qc(a,c)}}if(!r)return null;switch(r){case"facebook.com":return new n$(a,s);case"github.com":return new r$(a,s);case"google.com":return new s$(a,s);case"twitter.com":return new i$(a,s,t.screenName||null);case"custom":case"anonymous":return new Qc(a,null);default:return new Qc(a,r,s)}}class Qc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class PC extends Qc{constructor(e,n,r,s){super(e,n,r),this.username=s}}class n$ extends Qc{constructor(e,n){super(e,"facebook.com",n)}}class r$ extends PC{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class s$ extends Qc{constructor(e,n){super(e,"google.com",n)}}class i$ extends PC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Ise(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:t$(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cse(t,e){return ze(t).setPersistence(e)}function a$(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function o$(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function l$(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function DC(t){return ze(t).signOut()}function Rse(t,e){return Mn(t).revokeAccessToken(e)}async function Pse(t){return ze(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(t,e){return Sn(t,"POST","/v2/accounts/mfaEnrollment:start",En(t,e))}const Sg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sg,"1"),this.storage.removeItem(Sg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=1e3,d$=10;class LC extends MC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);u7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,d$):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LC.type="LOCAL";const h$=LC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends MC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OC.type="SESSION";const VC=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new E0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await f$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}E0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=S0("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const x=g;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(x.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function p$(t){fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function g$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function x$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function y$(){return i2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firebaseLocalStorageDb",v$=1,Tg="firebaseLocalStorage",FC="fbase_key";class ff{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function T0(t,e){return t.transaction([Tg],e?"readwrite":"readonly").objectStore(Tg)}function b$(){const t=indexedDB.deleteDatabase(UC);return new ff(t).toPromise()}function Q1(){const t=indexedDB.open(UC,v$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tg,{keyPath:FC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tg)?e(r):(r.close(),await b$(),e(await Q1()))})})}async function Ej(t,e,n){const r=T0(t,!0).put({[FC]:e,value:n});return new ff(r).toPromise()}async function w$(t,e){const n=T0(t,!1).get(e),r=await new ff(n).toPromise();return r===void 0?null:r.value}function Sj(t,e){const n=T0(t,!0).delete(e);return new ff(n).toPromise()}const _$=800,N$=3;class zC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>N$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=E0._getInstance(y$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await g$(),!this.activeServiceWorker)return;this.sender=new m$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||x$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q1();return await Ej(e,Sg,"1"),await Sj(e,Sg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ej(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>w$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=T0(s,!1).getAll();return new ff(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zC.type="LOCAL";const k$=zC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(t,e){return Sn(t,"POST","/v2/accounts/mfaSignIn:start",En(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=500,S$=6e4,ap=1e12;class T${constructor(e){this.auth=e,this.counter=ap,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new A$(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||ap;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||ap;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||ap;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class A${constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;pe(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=I$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},S$)},E$))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function I$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=NC("rcb"),C$=new df(3e4,6e4);class R${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=fn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return pe(P$(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gj(fn().grecaptcha)?Promise.resolve(fn().grecaptcha):new Promise((r,s)=>{const a=fn().setTimeout(()=>{s(Gr(e,"network-request-failed"))},C$.get());fn()[Zy]=()=>{fn().clearTimeout(a),delete fn()[Zy];const c=fn().grecaptcha;if(!c||!gj(c)){s(Gr(e,"internal-error"));return}const u=c.render;c.render=(h,m)=>{const g=u(h,m);return this.counter++,g},this.hostLanguage=n,r(c)};const o=`${x7()}?${Cu({onload:Zy,render:"explicit",hl:n})}`;e2(o).catch(()=>{clearTimeout(a),s(Gr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=fn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function P$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class D${async load(e){return new T$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="recaptcha",M$={theme:"light",type:"image"};class Dse{constructor(e,n,r=Object.assign({},M$)){this.parameters=r,this.type=BC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(e),this.isInvisible=this.parameters.size==="invisible",pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;pe(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D$:new R$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),s(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=fn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){pe(Yw()&&!i2(),this.auth,"internal-error"),await L$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await JB(this.auth);pe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function L$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=sh._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Mse(t,e,n){if(Wn(t.app))return Promise.reject(Tr(t));const r=Mn(t),s=await WC(r,e,ze(n));return new $C(s,a=>N0(r,a))}async function Lse(t,e,n){const r=ze(t);await _0(!1,r,"phone");const s=await WC(r.auth,e,ze(n));return new $C(s,a=>q7(r,a))}async function WC(t,e,n){var r;const s=await n.verify();try{pe(typeof s=="string",t,"argument-error"),pe(n.type===BC,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return pe(o.type==="enroll",t,"internal-error"),(await c$(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{pe(o.type==="signin",t,"internal-error");const c=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return pe(c,t,"missing-multi-factor-info"),(await j$(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await U7(t,{phoneNumber:a.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){return e?sa(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends v0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Kc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Kc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O$(t){return IC(t.auth,new a2(t),t.bypassAuthState)}function V$(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),G7(n,new a2(t),t.bypassAuthState)}async function U$(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),AC(n,new a2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O$;case"linkViaPopup":case"linkViaRedirect":return U$;case"reauthViaPopup":case"reauthViaRedirect":return V$;default:ds(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$=new df(2e3,1e4);async function o2(t,e,n){if(Wn(t.app))return Promise.reject(Gr(t,"operation-not-supported-in-this-environment"));const r=Mn(t);x0(t,e,Ru);const s=mf(r,n);return new oo(r,"signInViaPopup",e,s).executeNotNull()}async function Ose(t,e,n){const r=ze(t);x0(r.auth,e,Ru);const s=mf(r.auth,n);return new oo(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class oo extends HC{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=S0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F$.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$="pendingRedirect",Up=new Map;class B$ extends HC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Up.get(this.auth._key());if(!e){try{const r=await $$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Up.set(this.auth._key(),e)}return this.bypassAuthState||Up.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $$(t,e){const n=KC(e),r=qC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function GC(t,e){return qC(t)._set(KC(e),"true")}function W$(t,e){Up.set(t._key(),e)}function qC(t){return sa(t._redirectPersistence)}function KC(t){return Op(z$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t,e,n){return G$(t,e,n)}async function G$(t,e,n){if(Wn(t.app))return Promise.reject(Tr(t));const r=Mn(t);x0(t,e,Ru),await r._initializationPromise;const s=mf(r,n);return await GC(s,r),s._openRedirect(r,e,"signInViaRedirect")}function Vse(t,e,n){return q$(t,e,n)}async function q$(t,e,n){const r=ze(t);x0(r.auth,e,Ru),await r.auth._initializationPromise;const s=mf(r.auth,n);await _0(!1,r,e.providerId),await GC(s,r.auth);const a=await Q$(r);return s._openRedirect(r.auth,e,"linkViaRedirect",a)}async function K$(t,e){return await Mn(t)._initializationPromise,QC(t,e,!1)}async function QC(t,e,n=!1){if(Wn(t.app))return Promise.reject(Tr(t));const r=Mn(t),s=mf(r,e),o=await new B$(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Q$(t){const e=S0(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=10*60*1e3;class Y${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X$&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tj(e))}saveEventToCache(e){this.cachedEventUids.add(Tj(e)),this.lastProcessedEventTime=Date.now()}}function Tj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z$(t,e={}){return Sn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tW=/^https?/;async function nW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z$(t);for(const n of e)try{if(rW(n))return}catch{}ds(t,"unauthorized-domain")}function rW(t){const e=Oh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tW.test(n))return!1;if(eW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW=new df(3e4,6e4);function Aj(){const t=fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iW(t){return new Promise((e,n)=>{var r,s,a;function o(){Aj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Aj(),n(Gr(t,"network-request-failed"))},timeout:sW.get()})}if(!((s=(r=fn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=fn().gapi)===null||a===void 0)&&a.load)o();else{const c=NC("iframefcb");return fn()[c]=()=>{gapi.load?o():n(Gr(t,"network-request-failed"))},e2(`${v7()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Fp=null,e})}let Fp=null;function aW(t){return Fp=Fp||iW(t),Fp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW=new df(5e3,15e3),lW="__/auth/iframe",cW="emulator/auth/iframe",uW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hW(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jw(e,cW):`https://${t.config.authDomain}/${lW}`,r={apiKey:e.apiKey,appName:t.name,v:$l},s=dW.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Cu(r).slice(1)}`}async function fW(t){const e=await aW(t),n=fn().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:hW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uW,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Gr(t,"network-request-failed"),c=fn().setTimeout(()=>{a(o)},oW.get());function u(){fn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pW=500,gW=600,xW="_blank",yW="http://localhost";class Ij{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vW(t,e,n,r=pW,s=gW){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},mW),{width:r.toString(),height:s.toString(),top:a,left:o}),h=dr().toLowerCase();n&&(c=gC(h)?xW:n),mC(h)&&(e=e||yW,u.scrollbars="yes");const m=Object.entries(u).reduce((x,[v,E])=>`${x}${v}=${E},`,"");if(c7(h)&&c!=="_self")return bW(e||"",c),new Ij(null);const g=window.open(e||"",c,m);pe(g,t,"popup-blocked");try{g.focus()}catch{}return new Ij(g)}function bW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW="__/auth/handler",_W="emulator/auth/handler",NW=encodeURIComponent("fac");async function Cj(t,e,n,r,s,a){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$l,eventId:s};if(e instanceof Ru){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof Pu){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${NW}=${encodeURIComponent(u)}`:"";return`${kW(t)}?${Cu(c).slice(1)}${h}`}function kW({config:t}){return t.emulator?Jw(t,_W):`https://${t.authDomain}/${wW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="webStorageSupport";class jW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VC,this._completeRedirectFn=QC,this._overrideRedirectResult=W$}async _openPopup(e,n,r,s){var a;pa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Cj(e,n,r,Oh(),s);return vW(e,o,S0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await Cj(e,n,r,Oh(),s);return p$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(pa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fW(e),r=new Y$(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ev,{type:ev},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[ev];o!==void 0&&n(!!o),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wC()||pC()||Zw()}}const EW=jW;var Rj="@firebase/auth",Pj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AW(t){Ml(new So("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_C(t)},h=new p7(r,s,a,u);return k7(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ml(new So("auth-internal",e=>{const n=Mn(e.getProvider("auth").getImmediate());return(r=>new SW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(Rj,Pj,TW(t)),ji(Rj,Pj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=5*60,CW=ZI("authIdTokenMaxAge")||IW;let Dj=null;const RW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CW)return;const s=n==null?void 0:n.token;Dj!==s&&(Dj=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function PW(t=qw()){const e=g0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=N7(t,{popupRedirectResolver:EW,persistence:[k$,h$,VC]}),r=ZI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=RW(a.toString());o$(n,o,()=>o(n.currentUser)),a$(n,c=>o(c))}}const s=XI("auth");return s&&j7(n,`http://${s}`),n}function DW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Gr("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",DW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AW("Browser");var Mj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var El,YC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function P(){}P.prototype=T.prototype,C.D=T.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(L,z,H){for(var B=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)B[Pe-2]=arguments[Pe];return T.prototype[z].apply(L,B)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,P){P||(P=0);var L=Array(16);if(typeof T=="string")for(var z=0;16>z;++z)L[z]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(z=0;16>z;++z)L[z]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=C.g[0],P=C.g[1],z=C.g[2];var H=C.g[3],B=T+(H^P&(z^H))+L[0]+3614090360&4294967295;T=P+(B<<7&4294967295|B>>>25),B=H+(z^T&(P^z))+L[1]+3905402710&4294967295,H=T+(B<<12&4294967295|B>>>20),B=z+(P^H&(T^P))+L[2]+606105819&4294967295,z=H+(B<<17&4294967295|B>>>15),B=P+(T^z&(H^T))+L[3]+3250441966&4294967295,P=z+(B<<22&4294967295|B>>>10),B=T+(H^P&(z^H))+L[4]+4118548399&4294967295,T=P+(B<<7&4294967295|B>>>25),B=H+(z^T&(P^z))+L[5]+1200080426&4294967295,H=T+(B<<12&4294967295|B>>>20),B=z+(P^H&(T^P))+L[6]+2821735955&4294967295,z=H+(B<<17&4294967295|B>>>15),B=P+(T^z&(H^T))+L[7]+4249261313&4294967295,P=z+(B<<22&4294967295|B>>>10),B=T+(H^P&(z^H))+L[8]+1770035416&4294967295,T=P+(B<<7&4294967295|B>>>25),B=H+(z^T&(P^z))+L[9]+2336552879&4294967295,H=T+(B<<12&4294967295|B>>>20),B=z+(P^H&(T^P))+L[10]+4294925233&4294967295,z=H+(B<<17&4294967295|B>>>15),B=P+(T^z&(H^T))+L[11]+2304563134&4294967295,P=z+(B<<22&4294967295|B>>>10),B=T+(H^P&(z^H))+L[12]+1804603682&4294967295,T=P+(B<<7&4294967295|B>>>25),B=H+(z^T&(P^z))+L[13]+4254626195&4294967295,H=T+(B<<12&4294967295|B>>>20),B=z+(P^H&(T^P))+L[14]+2792965006&4294967295,z=H+(B<<17&4294967295|B>>>15),B=P+(T^z&(H^T))+L[15]+1236535329&4294967295,P=z+(B<<22&4294967295|B>>>10),B=T+(z^H&(P^z))+L[1]+4129170786&4294967295,T=P+(B<<5&4294967295|B>>>27),B=H+(P^z&(T^P))+L[6]+3225465664&4294967295,H=T+(B<<9&4294967295|B>>>23),B=z+(T^P&(H^T))+L[11]+643717713&4294967295,z=H+(B<<14&4294967295|B>>>18),B=P+(H^T&(z^H))+L[0]+3921069994&4294967295,P=z+(B<<20&4294967295|B>>>12),B=T+(z^H&(P^z))+L[5]+3593408605&4294967295,T=P+(B<<5&4294967295|B>>>27),B=H+(P^z&(T^P))+L[10]+38016083&4294967295,H=T+(B<<9&4294967295|B>>>23),B=z+(T^P&(H^T))+L[15]+3634488961&4294967295,z=H+(B<<14&4294967295|B>>>18),B=P+(H^T&(z^H))+L[4]+3889429448&4294967295,P=z+(B<<20&4294967295|B>>>12),B=T+(z^H&(P^z))+L[9]+568446438&4294967295,T=P+(B<<5&4294967295|B>>>27),B=H+(P^z&(T^P))+L[14]+3275163606&4294967295,H=T+(B<<9&4294967295|B>>>23),B=z+(T^P&(H^T))+L[3]+4107603335&4294967295,z=H+(B<<14&4294967295|B>>>18),B=P+(H^T&(z^H))+L[8]+1163531501&4294967295,P=z+(B<<20&4294967295|B>>>12),B=T+(z^H&(P^z))+L[13]+2850285829&4294967295,T=P+(B<<5&4294967295|B>>>27),B=H+(P^z&(T^P))+L[2]+4243563512&4294967295,H=T+(B<<9&4294967295|B>>>23),B=z+(T^P&(H^T))+L[7]+1735328473&4294967295,z=H+(B<<14&4294967295|B>>>18),B=P+(H^T&(z^H))+L[12]+2368359562&4294967295,P=z+(B<<20&4294967295|B>>>12),B=T+(P^z^H)+L[5]+4294588738&4294967295,T=P+(B<<4&4294967295|B>>>28),B=H+(T^P^z)+L[8]+2272392833&4294967295,H=T+(B<<11&4294967295|B>>>21),B=z+(H^T^P)+L[11]+1839030562&4294967295,z=H+(B<<16&4294967295|B>>>16),B=P+(z^H^T)+L[14]+4259657740&4294967295,P=z+(B<<23&4294967295|B>>>9),B=T+(P^z^H)+L[1]+2763975236&4294967295,T=P+(B<<4&4294967295|B>>>28),B=H+(T^P^z)+L[4]+1272893353&4294967295,H=T+(B<<11&4294967295|B>>>21),B=z+(H^T^P)+L[7]+4139469664&4294967295,z=H+(B<<16&4294967295|B>>>16),B=P+(z^H^T)+L[10]+3200236656&4294967295,P=z+(B<<23&4294967295|B>>>9),B=T+(P^z^H)+L[13]+681279174&4294967295,T=P+(B<<4&4294967295|B>>>28),B=H+(T^P^z)+L[0]+3936430074&4294967295,H=T+(B<<11&4294967295|B>>>21),B=z+(H^T^P)+L[3]+3572445317&4294967295,z=H+(B<<16&4294967295|B>>>16),B=P+(z^H^T)+L[6]+76029189&4294967295,P=z+(B<<23&4294967295|B>>>9),B=T+(P^z^H)+L[9]+3654602809&4294967295,T=P+(B<<4&4294967295|B>>>28),B=H+(T^P^z)+L[12]+3873151461&4294967295,H=T+(B<<11&4294967295|B>>>21),B=z+(H^T^P)+L[15]+530742520&4294967295,z=H+(B<<16&4294967295|B>>>16),B=P+(z^H^T)+L[2]+3299628645&4294967295,P=z+(B<<23&4294967295|B>>>9),B=T+(z^(P|~H))+L[0]+4096336452&4294967295,T=P+(B<<6&4294967295|B>>>26),B=H+(P^(T|~z))+L[7]+1126891415&4294967295,H=T+(B<<10&4294967295|B>>>22),B=z+(T^(H|~P))+L[14]+2878612391&4294967295,z=H+(B<<15&4294967295|B>>>17),B=P+(H^(z|~T))+L[5]+4237533241&4294967295,P=z+(B<<21&4294967295|B>>>11),B=T+(z^(P|~H))+L[12]+1700485571&4294967295,T=P+(B<<6&4294967295|B>>>26),B=H+(P^(T|~z))+L[3]+2399980690&4294967295,H=T+(B<<10&4294967295|B>>>22),B=z+(T^(H|~P))+L[10]+4293915773&4294967295,z=H+(B<<15&4294967295|B>>>17),B=P+(H^(z|~T))+L[1]+2240044497&4294967295,P=z+(B<<21&4294967295|B>>>11),B=T+(z^(P|~H))+L[8]+1873313359&4294967295,T=P+(B<<6&4294967295|B>>>26),B=H+(P^(T|~z))+L[15]+4264355552&4294967295,H=T+(B<<10&4294967295|B>>>22),B=z+(T^(H|~P))+L[6]+2734768916&4294967295,z=H+(B<<15&4294967295|B>>>17),B=P+(H^(z|~T))+L[13]+1309151649&4294967295,P=z+(B<<21&4294967295|B>>>11),B=T+(z^(P|~H))+L[4]+4149444226&4294967295,T=P+(B<<6&4294967295|B>>>26),B=H+(P^(T|~z))+L[11]+3174756917&4294967295,H=T+(B<<10&4294967295|B>>>22),B=z+(T^(H|~P))+L[2]+718787259&4294967295,z=H+(B<<15&4294967295|B>>>17),B=P+(H^(z|~T))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(z+(B<<21&4294967295|B>>>11))&4294967295,C.g[2]=C.g[2]+z&4294967295,C.g[3]=C.g[3]+H&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var P=T-this.blockSize,L=this.B,z=this.h,H=0;H<T;){if(z==0)for(;H<=P;)s(this,C,H),H+=this.blockSize;if(typeof C=="string"){for(;H<T;)if(L[z++]=C.charCodeAt(H++),z==this.blockSize){s(this,L),z=0;break}}else for(;H<T;)if(L[z++]=C[H++],z==this.blockSize){s(this,L),z=0;break}}this.h=z,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var P=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=P&255,P/=256;for(this.u(C),C=Array(16),T=P=0;4>T;++T)for(var L=0;32>L;L+=8)C[P++]=this.g[T]>>>L&255;return C};function a(C,T){var P=c;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=T(C)}function o(C,T){this.h=T;for(var P=[],L=!0,z=C.length-1;0<=z;z--){var H=C[z]|0;L&&H==T||(P[z]=H,L=!1)}this.g=P}var c={};function u(C){return-128<=C&&128>C?a(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return S(h(-C));for(var T=[],P=1,L=0;C>=P;L++)T[L]=C/P|0,P*=4294967296;return new o(T,0)}function m(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return S(m(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=h(Math.pow(T,8)),L=g,z=0;z<C.length;z+=8){var H=Math.min(8,C.length-z),B=parseInt(C.substring(z,z+H),T);8>H?(H=h(Math.pow(T,H)),L=L.j(H).add(h(B))):(L=L.j(P),L=L.add(h(B)))}return L}var g=u(0),x=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(j(this))return-S(this).m();for(var C=0,T=1,P=0;P<this.g.length;P++){var L=this.i(P);C+=(0<=L?L:4294967296+L)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(j(this))return"-"+S(this).toString(C);for(var T=h(Math.pow(C,6)),P=this,L="";;){var z=A(P,T).g;P=N(P,z.j(T));var H=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=z,E(P))return H+L;for(;6>H.length;)H="0"+H;L=H+L}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function j(C){return C.h==-1}t.l=function(C){return C=N(this,C),j(C)?-1:E(C)?0:1};function S(C){for(var T=C.g.length,P=[],L=0;L<T;L++)P[L]=~C.g[L];return new o(P,~C.h).add(x)}t.abs=function(){return j(this)?S(this):this},t.add=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],L=0,z=0;z<=T;z++){var H=L+(this.i(z)&65535)+(C.i(z)&65535),B=(H>>>16)+(this.i(z)>>>16)+(C.i(z)>>>16);L=B>>>16,H&=65535,B&=65535,P[z]=B<<16|H}return new o(P,P[P.length-1]&-2147483648?-1:0)};function N(C,T){return C.add(S(T))}t.j=function(C){if(E(this)||E(C))return g;if(j(this))return j(C)?S(this).j(S(C)):S(S(this).j(C));if(j(C))return S(this.j(S(C)));if(0>this.l(v)&&0>C.l(v))return h(this.m()*C.m());for(var T=this.g.length+C.g.length,P=[],L=0;L<2*T;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(var z=0;z<C.g.length;z++){var H=this.i(L)>>>16,B=this.i(L)&65535,Pe=C.i(z)>>>16,we=C.i(z)&65535;P[2*L+2*z]+=B*we,w(P,2*L+2*z),P[2*L+2*z+1]+=H*we,w(P,2*L+2*z+1),P[2*L+2*z+1]+=B*Pe,w(P,2*L+2*z+1),P[2*L+2*z+2]+=H*Pe,w(P,2*L+2*z+2)}for(L=0;L<T;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=T;L<2*T;L++)P[L]=0;return new o(P,0)};function w(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function k(C,T){this.g=C,this.h=T}function A(C,T){if(E(T))throw Error("division by zero");if(E(C))return new k(g,g);if(j(C))return T=A(S(C),T),new k(S(T.g),S(T.h));if(j(T))return T=A(C,S(T)),new k(S(T.g),T.h);if(30<C.g.length){if(j(C)||j(T))throw Error("slowDivide_ only works with positive integers.");for(var P=x,L=T;0>=L.l(C);)P=D(P),L=D(L);var z=F(P,1),H=F(L,1);for(L=F(L,2),P=F(P,2);!E(L);){var B=H.add(L);0>=B.l(C)&&(z=z.add(P),H=B),L=F(L,1),P=F(P,1)}return T=N(C,z.j(T)),new k(z,T)}for(z=g;0<=C.l(T);){for(P=Math.max(1,Math.floor(C.m()/T.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),H=h(P),B=H.j(T);j(B)||0<B.l(C);)P-=L,H=h(P),B=H.j(T);E(H)&&(H=x),z=z.add(H),C=N(C,B)}return new k(z,C)}t.A=function(C){return A(this,C).h},t.and=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],L=0;L<T;L++)P[L]=this.i(L)&C.i(L);return new o(P,this.h&C.h)},t.or=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],L=0;L<T;L++)P[L]=this.i(L)|C.i(L);return new o(P,this.h|C.h)},t.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],L=0;L<T;L++)P[L]=this.i(L)^C.i(L);return new o(P,this.h^C.h)};function D(C){for(var T=C.g.length+1,P=[],L=0;L<T;L++)P[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(P,C.h)}function F(C,T){var P=T>>5;T%=32;for(var L=C.g.length-P,z=[],H=0;H<L;H++)z[H]=0<T?C.i(H+P)>>>T|C.i(H+P+1)<<32-T:C.i(H+P);return new o(z,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,El=o}).apply(typeof Mj<"u"?Mj:typeof self<"u"?self:typeof window<"u"?window:{});var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JC,Bd,ZC,zp,X1,e4,t4,n4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,I){return f==Array.prototype||f==Object.prototype||(f[y]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof op=="object"&&op];for(var y=0;y<f.length;++y){var I=f[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(f,y){if(y)e:{var I=r;f=f.split(".");for(var V=0;V<f.length-1;V++){var Q=f[V];if(!(Q in I))break e;I=I[Q]}f=f[f.length-1],V=I[f],y=y(V),y!=V&&y!=null&&e(I,f,{configurable:!0,writable:!0,value:y})}}function a(f,y){f instanceof String&&(f+="");var I=0,V=!1,Q={next:function(){if(!V&&I<f.length){var Y=I++;return{value:y(Y,f[Y]),done:!1}}return V=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(f){return f||function(){return a(this,function(y,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function h(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function m(f,y,I){return f.call.apply(f.bind,arguments)}function g(f,y,I){if(!f)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,V),f.apply(y,Q)}}return function(){return f.apply(y,arguments)}}function x(f,y,I){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,x.apply(null,arguments)}function v(f,y){var I=Array.prototype.slice.call(arguments,1);return function(){var V=I.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function E(f,y){function I(){}I.prototype=y.prototype,f.aa=y.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(V,Q,Y){for(var he=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)he[dt-2]=arguments[dt];return y.prototype[Q].apply(V,he)}}function j(f){const y=f.length;if(0<y){const I=Array(y);for(let V=0;V<y;V++)I[V]=f[V];return I}return[]}function S(f,y){for(let I=1;I<arguments.length;I++){const V=arguments[I];if(u(V)){const Q=f.length||0,Y=V.length||0;f.length=Q+Y;for(let he=0;he<Y;he++)f[Q+he]=V[he]}else f.push(V)}}class N{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function w(f){return/^[\s\xa0]*$/.test(f)}function k(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function A(f){return A[" "](f),f}A[" "]=function(){};var D=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function F(f,y,I){for(const V in f)y.call(I,f[V],V,f)}function C(f,y){for(const I in f)y.call(void 0,f[I],I,f)}function T(f){const y={};for(const I in f)y[I]=f[I];return y}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(f,y){let I,V;for(let Q=1;Q<arguments.length;Q++){V=arguments[Q];for(I in V)f[I]=V[I];for(let Y=0;Y<P.length;Y++)I=P[Y],Object.prototype.hasOwnProperty.call(V,I)&&(f[I]=V[I])}}function z(f){var y=1;f=f.split(":");const I=[];for(;0<y&&f.length;)I.push(f.shift()),y--;return f.length&&I.push(f.join(":")),I}function H(f){c.setTimeout(()=>{throw f},0)}function B(){var f=te;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Pe{constructor(){this.h=this.g=null}add(y,I){const V=we.get();V.set(y,I),this.h?this.h.next=V:this.g=V,this.h=V}}var we=new N(()=>new je,f=>f.reset());class je{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,K=!1,te=new Pe,ue=()=>{const f=c.Promise.resolve(void 0);oe=()=>{f.then(Re)}};var Re=()=>{for(var f;f=B();){try{f.h.call(f.g)}catch(I){H(I)}var y=we;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}K=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var at=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};c.addEventListener("test",I,y),c.removeEventListener("test",I,y)}catch{}return f}();function jt(f,y){if(me.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(D){e:{try{A(y.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(y=null)}}else I=="mouseover"?y=f.fromElement:I=="mouseout"&&(y=f.toElement);this.relatedTarget=y,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Xt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&jt.aa.h.call(this)}}E(jt,me);var Xt={2:"touch",3:"pen",4:"mouse"};jt.prototype.h=function(){jt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),Qn=0;function Ln(f,y,I,V,Q){this.listener=f,this.proxy=null,this.src=y,this.type=I,this.capture=!!V,this.ha=Q,this.key=++Qn,this.da=this.fa=!1}function Pr(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function pr(f){this.src=f,this.g={},this.h=0}pr.prototype.add=function(f,y,I,V,Q){var Y=f.toString();f=this.g[Y],f||(f=this.g[Y]=[],this.h++);var he=Se(f,y,V,Q);return-1<he?(y=f[he],I||(y.fa=!1)):(y=new Ln(y,this.src,Y,!!V,Q),y.fa=I,f.push(y)),y};function Z(f,y){var I=y.type;if(I in f.g){var V=f.g[I],Q=Array.prototype.indexOf.call(V,y,void 0),Y;(Y=0<=Q)&&Array.prototype.splice.call(V,Q,1),Y&&(Pr(y),f.g[I].length==0&&(delete f.g[I],f.h--))}}function Se(f,y,I,V){for(var Q=0;Q<f.length;++Q){var Y=f[Q];if(!Y.da&&Y.listener==y&&Y.capture==!!I&&Y.ha==V)return Q}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),tt={};function Qr(f,y,I,V,Q){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Qr(f,y[Y],I,V,Q);return null}return I=ui(I),f&&f[Tn]?f.K(y,I,h(V)?!!V.capture:!1,Q):nt(f,y,I,!1,V,Q)}function nt(f,y,I,V,Q,Y){if(!y)throw Error("Invalid event type");var he=h(Q)?!!Q.capture:!!Q,dt=ci(f);if(dt||(f[Ee]=dt=new pr(f)),I=dt.add(y,I,V,he,Y),I.proxy)return I;if(V=Dr(),I.proxy=V,V.src=f,V.listener=I,f.addEventListener)at||(Q=he),Q===void 0&&(Q=!1),f.addEventListener(y.toString(),V,Q);else if(f.attachEvent)f.attachEvent(Xn(y.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Dr(){function f(I){return y.call(f.src,f.listener,I)}const y=Mi;return f}function ql(f,y,I,V,Q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)ql(f,y[Y],I,V,Q);else V=h(V)?!!V.capture:!!V,I=ui(I),f&&f[Tn]?(f=f.i,y=String(y).toString(),y in f.g&&(Y=f.g[y],I=Se(Y,I,V,Q),-1<I&&(Pr(Y[I]),Array.prototype.splice.call(Y,I,1),Y.length==0&&(delete f.g[y],f.h--)))):f&&(f=ci(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Se(y,I,V,Q)),(I=-1<f?y[f]:null)&&ps(I))}function ps(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Tn])Z(y.i,f);else{var I=f.type,V=f.proxy;y.removeEventListener?y.removeEventListener(I,V,f.capture):y.detachEvent?y.detachEvent(Xn(I),V):y.addListener&&y.removeListener&&y.removeListener(V),(I=ci(y))?(Z(I,f),I.h==0&&(I.src=null,y[Ee]=null)):Pr(f)}}}function Xn(f){return f in tt?tt[f]:tt[f]="on"+f}function Mi(f,y){if(f.da)f=!0;else{y=new jt(y,this);var I=f.listener,V=f.ha||f.src;f.fa&&ps(f),f=I.call(V,y)}return f}function ci(f){return f=f[Ee],f instanceof pr?f:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ui(f){return typeof f=="function"?f:(f[gs]||(f[gs]=function(y){return f.handleEvent(y)}),f[gs])}function cn(){ge.call(this),this.i=new pr(this),this.M=this,this.F=null}E(cn,ge),cn.prototype[Tn]=!0,cn.prototype.removeEventListener=function(f,y,I,V){ql(this,f,y,I,V)};function zt(f,y){var I,V=f.F;if(V)for(I=[];V;V=V.F)I.push(V);if(f=f.M,V=y.type||y,typeof y=="string")y=new me(y,f);else if(y instanceof me)y.target=y.target||f;else{var Q=y;y=new me(V,f),L(y,Q)}if(Q=!0,I)for(var Y=I.length-1;0<=Y;Y--){var he=y.g=I[Y];Q=Xr(he,V,!0,y)&&Q}if(he=y.g=f,Q=Xr(he,V,!0,y)&&Q,Q=Xr(he,V,!1,y)&&Q,I)for(Y=0;Y<I.length;Y++)he=y.g=I[Y],Q=Xr(he,V,!1,y)&&Q}cn.prototype.N=function(){if(cn.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var I=f.g[y],V=0;V<I.length;V++)Pr(I[V]);delete f.g[y],f.h--}}this.F=null},cn.prototype.K=function(f,y,I,V){return this.i.add(String(f),y,!1,I,V)},cn.prototype.L=function(f,y,I,V){return this.i.add(String(f),y,!0,I,V)};function Xr(f,y,I,V){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var Q=!0,Y=0;Y<y.length;++Y){var he=y[Y];if(he&&!he.da&&he.capture==I){var dt=he.listener,xn=he.ha||he.src;he.fa&&Z(f.i,he),Q=dt.call(xn,V)!==!1&&Q}}return Q&&!V.defaultPrevented}function Aa(f,y,I){if(typeof f=="function")I&&(f=x(f,I));else if(f&&typeof f.handleEvent=="function")f=x(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(f,y||0)}function Ia(f){f.g=Aa(()=>{f.g=null,f.i&&(f.i=!1,Ia(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class Wo extends ge{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ia(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(f){ge.call(this),this.h=f,this.g={}}E(Yr,ge);var Ca=[];function Ra(f){F(f.g,function(y,I){this.g.hasOwnProperty(I)&&ps(y)},f),f.g={}}Yr.prototype.N=function(){Yr.aa.N.call(this),Ra(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=c.JSON.stringify,Ye=c.JSON.parse,At=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function It(){}It.prototype.h=null;function gr(f){return f.h||(f.h=f.i())}function $s(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){me.call(this,"d")}E(Kl,me);function $u(){me.call(this,"c")}E($u,me);var Li={},Rf=null;function Ql(){return Rf=Rf||new cn}Li.La="serverreachability";function Wu(f){me.call(this,Li.La,f)}E(Wu,me);function Ho(f){const y=Ql();zt(y,new Wu(y))}Li.STAT_EVENT="statevent";function Pf(f,y){me.call(this,Li.STAT_EVENT,f),this.stat=y}E(Pf,me);function On(f){const y=Ql();zt(y,new Pf(y,f))}Li.Ma="timingevent";function Xl(f,y){me.call(this,Li.Ma,f),this.size=y}E(Xl,me);function Go(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},y)}function Oi(){this.g=!0}Oi.prototype.xa=function(){this.g=!1};function cx(f,y,I,V,Q,Y){f.info(function(){if(f.g)if(Y)for(var he="",dt=Y.split("&"),xn=0;xn<dt.length;xn++){var Je=dt[xn].split("=");if(1<Je.length){var pt=Je[0];Je=Je[1];var un=pt.split("_");he=2<=un.length&&un[1]=="type"?he+(pt+"="+Je+"&"):he+(pt+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+V+") [attempt "+Q+"]: "+y+`
`+I+`
`+he})}function ux(f,y,I,V,Q,Y,he){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Q+"]: "+y+`
`+I+`
`+Y+" "+he})}function Pa(f,y,I,V){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+hx(f,I)+(V?" "+V:"")})}function dx(f,y){f.info(function(){return"TIMEOUT: "+y})}Oi.prototype.info=function(){};function hx(f,y){if(!f.g)return y;if(!y)return null;try{var I=JSON.parse(y);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var V=I[f];if(!(2>V.length)){var Q=V[1];if(Array.isArray(Q)&&!(1>Q.length)){var Y=Q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<Q.length;he++)Q[he]=""}}}}return de(I)}catch{return y}}var Yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Df={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hu;function qo(){}E(qo,It),qo.prototype.g=function(){return new XMLHttpRequest},qo.prototype.i=function(){return{}},Hu=new qo;function hi(f,y,I,V){this.j=f,this.i=y,this.l=I,this.R=V||1,this.U=new Yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mf}function Mf(){this.i=null,this.g="",this.h=!1}var Lf={},Gu={};function qu(f,y,I){f.L=1,f.v=Ma(xs(y)),f.m=I,f.P=!0,Of(f,null)}function Of(f,y){f.F=Date.now(),Vi(f),f.A=xs(f.v);var I=f.A,V=f.R;Array.isArray(V)||(V=[String(V)]),td(I.i,"t",V),f.C=0,I=f.j.J,f.h=new Mf,f.g=sm(f.j,I?y:null,!f.m),0<f.O&&(f.M=new Wo(x(f.Y,f,f.g),f.O)),y=f.U,I=f.g,V=f.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ca[0]=Q.toString()),Q=Ca);for(var Y=0;Y<Q.length;Y++){var he=Qr(I,Q[Y],V||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Ho(),cx(f.i,f.u,f.A,f.l,f.R,f.m)}hi.prototype.ca=function(f){f=f.target;const y=this.M;y&&Vn(f)==3?y.j():this.Y(f)},hi.prototype.Y=function(f){try{if(f==this.g)e:{const un=Vn(this.g);var y=this.g.Ba();const ws=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||sd(this.g)))){this.J||un!=4||y==7||(y==8||0>=ws?Ho(3):Ho(2)),Ku(this);var I=this.g.Z();this.X=I;t:if(Ko(this)){var V=sd(this.g);f="";var Q=V.length,Y=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),Qo(this);var he="";break t}this.h.i=new c.TextDecoder}for(y=0;y<Q;y++)this.h.h=!0,f+=this.h.i.decode(V[y],{stream:!(Y&&y==Q-1)});V.length=0,this.h.g+=f,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=I==200,ux(this.i,this.u,this.A,this.l,this.R,un,I),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,xn=this.g;if((dt=xn.g?xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(dt)){var Je=dt;break t}}Je=null}if(I=Je)Pa(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jl(this,I);else{this.o=!1,this.s=3,On(12),fi(this),Qo(this);break e}}if(this.P){I=!0;let Mr;for(;!this.J&&this.C<he.length;)if(Mr=fx(this,he),Mr==Gu){un==4&&(this.s=4,On(14),I=!1),Pa(this.i,this.l,null,"[Incomplete Response]");break}else if(Mr==Lf){this.s=4,On(15),Pa(this.i,this.l,he,"[Invalid Chunk]"),I=!1;break}else Pa(this.i,this.l,Mr,null),Jl(this,Mr);if(Ko(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||he.length!=0||this.h.h||(this.s=1,On(16),I=!1),this.o=this.o&&I,!I)Pa(this.i,this.l,he,"[Invalid Chunked Response]"),fi(this),Qo(this);else if(0<he.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),bs(pt),pt.M=!0,On(11))}}else Pa(this.i,this.l,he,null),Jl(this,he);un==4&&fi(this),this.o&&!this.J&&(un==4?Et(this.j,this):(this.o=!1,Vi(this)))}else id(this.g),I==400&&0<he.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),fi(this),Qo(this)}}}catch{}finally{}};function Ko(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function fx(f,y){var I=f.C,V=y.indexOf(`
`,I);return V==-1?Gu:(I=Number(y.substring(I,V)),isNaN(I)?Lf:(V+=1,V+I>y.length?Gu:(y=y.slice(V,V+I),f.C=V+I,y)))}hi.prototype.cancel=function(){this.J=!0,fi(this)};function Vi(f){f.S=Date.now()+f.I,Vf(f,f.I)}function Vf(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Go(x(f.ba,f),y)}function Ku(f){f.B&&(c.clearTimeout(f.B),f.B=null)}hi.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(dx(this.i,this.A),this.L!=2&&(Ho(),On(17)),fi(this),this.s=2,Qo(this)):Vf(this,this.S-f)};function Qo(f){f.j.G==0||f.J||Et(f.j,f)}function fi(f){Ku(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Ra(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Jl(f,y){try{var I=f.j;if(I.G!=0&&(I.g==f||Qu(I.h,f))){if(!f.K&&Qu(I.h,f)&&I.G==3){try{var V=I.Da.g.parse(y)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Q=V;if(Q[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)Va(I),Jo(I);else break e;sc(I),On(18)}}else I.za=Q[1],0<I.za-I.T&&37500>Q[2]&&I.F&&I.v==0&&!I.C&&(I.C=Go(x(I.Za,I),6e3));if(1>=Bf(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Hs(I,11)}else if((f.K||I.g==f)&&Va(I),!w(y))for(Q=I.Da.g.parse(y),y=0;y<Q.length;y++){let Je=Q[y];if(I.T=Je[0],Je=Je[1],I.G==2)if(Je[0]=="c"){I.K=Je[1],I.ia=Je[2];const pt=Je[3];pt!=null&&(I.la=pt,I.j.info("VER="+I.la));const un=Je[4];un!=null&&(I.Aa=un,I.j.info("SVER="+I.Aa));const ws=Je[5];ws!=null&&typeof ws=="number"&&0<ws&&(V=1.5*ws,I.L=V,I.j.info("backChannelRequestTimeoutMs_="+V)),V=I;const Mr=f.g;if(Mr){const rl=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var Y=V.h;Y.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Zl(Y,Y.h),Y.h=null))}if(V.D){const ld=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(V.ya=ld,_t(V.I,V.D,ld))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),V=I;var he=f;if(V.qa=ic(V,V.J?V.ia:null,V.W),he.K){Xu(V.h,he);var dt=he,xn=V.L;xn&&(dt.I=xn),dt.B&&(Ku(dt),Vi(dt)),V.g=he}else nm(V);0<I.i.length&&Zo(I)}else Je[0]!="stop"&&Je[0]!="close"||Hs(I,7);else I.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Hs(I,7):rc(I):Je[0]!="noop"&&I.l&&I.l.ta(Je),I.v=0)}}Ho(4)}catch{}}var Uf=class{constructor(f,y){this.g=f,this.map=y}};function Ff(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zf(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Bf(f){return f.h?1:f.g?f.g.size:0}function Qu(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function Zl(f,y){f.g?f.g.add(y):f.h=y}function Xu(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Ff.prototype.cancel=function(){if(this.i=Yu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const I of f.g.values())y=y.concat(I.D);return y}return j(f.i)}function Ju(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var y=[],I=f.length,V=0;V<I;V++)y.push(f[V]);return y}y=[],I=0;for(V in f)y[I++]=f[V];return y}function mx(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var y=[];f=f.length;for(var I=0;I<f;I++)y.push(I);return y}y=[],I=0;for(const V in f)y[I++]=V;return y}}}function Zu(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var I=mx(f),V=Ju(f),Q=V.length,Y=0;Y<Q;Y++)y.call(void 0,V[Y],I&&I[Y],f)}var Xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $f(f,y){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var V=f[I].indexOf("="),Q=null;if(0<=V){var Y=f[I].substring(0,V);Q=f[I].substring(V+1)}else Y=f[I];y(Y,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Ui(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ui){this.h=f.h,Yo(this,f.j),this.o=f.o,this.g=f.g,Da(this,f.s),this.l=f.l;var y=f.i,I=new La;I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),Wf(this,I),this.m=f.m}else f&&(y=String(f).match(Xo))?(this.h=!1,Yo(this,y[1]||"",!0),this.o=Fi(y[2]||""),this.g=Fi(y[3]||"",!0),Da(this,y[4]),this.l=Fi(y[5]||"",!0),Wf(this,y[6]||"",!0),this.m=Fi(y[7]||"")):(this.h=!1,this.i=new La(null,this.h))}Ui.prototype.toString=function(){var f=[],y=this.j;y&&f.push(ys(y,ed,!0),":");var I=this.g;return(I||y=="file")&&(f.push("//"),(y=this.o)&&f.push(ys(y,ed,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(ys(I,I.charAt(0)=="/"?Gf:px,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",ys(I,Kf)),f.join("")};function xs(f){return new Ui(f)}function Yo(f,y,I){f.j=I?Fi(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Da(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Wf(f,y,I){y instanceof La?(f.i=y,gx(f.i,f.h)):(I||(y=ys(y,qf)),f.i=new La(y,f.h))}function _t(f,y,I){f.i.set(y,I)}function Ma(f){return _t(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Fi(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ys(f,y,I){return typeof f=="string"?(f=encodeURI(f).replace(y,Hf),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hf(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ed=/[#\/\?@]/g,px=/[#\?:]/g,Gf=/[#\?]/g,qf=/[#\?@]/g,Kf=/#/g;function La(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function mi(f){f.g||(f.g=new Map,f.h=0,f.i&&$f(f.i,function(y,I){f.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}t=La.prototype,t.add=function(f,y){mi(this),this.i=null,f=Oa(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(y),this.h+=1,this};function Qf(f,y){mi(f),y=Oa(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Xf(f,y){return mi(f),y=Oa(f,y),f.g.has(y)}t.forEach=function(f,y){mi(this),this.g.forEach(function(I,V){I.forEach(function(Q){f.call(y,Q,V,this)},this)},this)},t.na=function(){mi(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),I=[];for(let V=0;V<y.length;V++){const Q=f[V];for(let Y=0;Y<Q.length;Y++)I.push(y[V])}return I},t.V=function(f){mi(this);let y=[];if(typeof f=="string")Xf(this,f)&&(y=y.concat(this.g.get(Oa(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)y=y.concat(f[I])}return y},t.set=function(f,y){return mi(this),this.i=null,f=Oa(this,f),Xf(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},t.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function td(f,y,I){Qf(f,y),0<I.length&&(f.i=null,f.g.set(Oa(f,y),j(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var I=0;I<y.length;I++){var V=y[I];const Y=encodeURIComponent(String(V)),he=this.V(V);for(V=0;V<he.length;V++){var Q=Y;he[V]!==""&&(Q+="="+encodeURIComponent(String(he[V]))),f.push(Q)}}return this.i=f.join("&")};function Oa(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function gx(f,y){y&&!f.j&&(mi(f),f.i=null,f.g.forEach(function(I,V){var Q=V.toLowerCase();V!=Q&&(Qf(this,V),td(this,Q,I))},f)),f.j=y}function xx(f,y){const I=new Oi;if(c.Image){const V=new Image;V.onload=v(vs,I,"TestLoadImage: loaded",!0,y,V),V.onerror=v(vs,I,"TestLoadImage: error",!1,y,V),V.onabort=v(vs,I,"TestLoadImage: abort",!1,y,V),V.ontimeout=v(vs,I,"TestLoadImage: timeout",!1,y,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else y(!1)}function yx(f,y){const I=new Oi,V=new AbortController,Q=setTimeout(()=>{V.abort(),vs(I,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:V.signal}).then(Y=>{clearTimeout(Q),Y.ok?vs(I,"TestPingServer: ok",!0,y):vs(I,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),vs(I,"TestPingServer: error",!1,y)})}function vs(f,y,I,V,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),V(I)}catch{}}function vx(){this.g=new At}function bx(f,y,I){const V=I||"";try{Zu(f,function(Q,Y){let he=Q;h(Q)&&(he=de(Q)),y.push(V+Y+"="+encodeURIComponent(he))})}catch(Q){throw y.push(V+"type="+encodeURIComponent("_badmap")),Q}}function ec(f){this.l=f.Ub||null,this.j=f.eb||!1}E(ec,It),ec.prototype.g=function(){return new tc(this.l,this.j)},ec.prototype.i=function(f){return function(){return f}}({});function tc(f,y){cn.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(tc,cn),t=tc.prototype,t.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,lt(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ut(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,lt(this)),this.g&&(this.readyState=3,lt(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yf(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yf(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?ut(this):lt(this),this.readyState==3&&Yf(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ut(this))},t.Qa=function(f){this.g&&(this.response=f,ut(this))},t.ga=function(){this.g&&ut(this)};function ut(f){f.readyState=4,f.l=null,f.j=null,f.v=null,lt(f)}t.setRequestHeader=function(f,y){this.u.append(f,y)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var I=y.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=y.next();return f.join(`\r
`)};function lt(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Jf(f){let y="";return F(f,function(I,V){y+=V,y+=":",y+=I,y+=`\r
`}),y}function nd(f,y,I){e:{for(V in I){var V=!1;break e}V=!0}V||(I=Jf(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):_t(f,y,I))}function Lt(f){cn.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Lt,cn);var wx=/^https?$/i,_x=["POST","PUT"];t=Lt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,y,I,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hu.g(),this.v=this.o?gr(this.o):gr(Hu),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Y){Zf(this,Y);return}if(f=I||"",I=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Q in V)I.set(Q,V[Q]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const Y of V.keys())I.set(Y,V.get(Y));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(I.keys()).find(Y=>Y.toLowerCase()=="content-type"),Q=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_x,y,void 0))||V||Q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of I)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nc(this),this.u=!0,this.g.send(f),this.u=!1}catch(Y){Zf(this,Y)}};function Zf(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,rd(f),Yt(f)}function rd(f){f.A||(f.A=!0,zt(f,"complete"),zt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,zt(this,"complete"),zt(this,"abort"),Yt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),Lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?em(this):this.bb())},t.bb=function(){em(this)};function em(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Vn(f)!=4||f.Z()!=2)){if(f.u&&Vn(f)==4)Aa(f.Ea,0,f);else if(zt(f,"readystatechange"),Vn(f)==4){f.h=!1;try{const he=f.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var V;if(V=he===0){var Q=String(f.D).match(Xo)[1]||null;!Q&&c.self&&c.self.location&&(Q=c.self.location.protocol.slice(0,-1)),V=!wx.test(Q?Q.toLowerCase():"")}I=V}if(I)zt(f,"complete"),zt(f,"success");else{f.m=6;try{var Y=2<Vn(f)?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.Z()+"]",rd(f)}}finally{Yt(f)}}}}function Yt(f,y){if(f.g){nc(f);const I=f.g,V=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||zt(f,"ready");try{I.onreadystatechange=V}catch{}}}function nc(f){f.I&&(c.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Vn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ye(y)}};function sd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function id(f){const y={};f=(f.g&&2<=Vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(w(f[V]))continue;var I=z(f[V]);const Q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const Y=y[Q]||[];y[Q]=Y,Y.push(I)}C(y,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function An(f,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||y}function ad(f){this.Aa=0,this.i=[],this.j=new Oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=An("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=An("baseRetryDelayMs",5e3,f),this.cb=An("retryDelaySeedMs",1e4,f),this.Wa=An("forwardChannelMaxRetries",2,f),this.wa=An("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ff(f&&f.concurrentRequestLimit),this.Da=new vx,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ad.prototype,t.la=8,t.G=1,t.connect=function(f,y,I,V){On(0),this.W=f,this.H=y||{},I&&V!==void 0&&(this.H.OSID=I,this.H.OAID=V),this.F=this.X,this.I=ic(this,null,this.W),Zo(this)};function rc(f){if(od(f),f.G==3){var y=f.U++,I=xs(f.I);if(_t(I,"SID",f.K),_t(I,"RID",y),_t(I,"TYPE","terminate"),el(f,I),y=new hi(f,f.j,y),y.L=2,y.v=Ma(xs(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=y.v,I=!0),I||(y.g=sm(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Vi(y)}rm(f)}function Jo(f){f.g&&(bs(f),f.g.cancel(),f.g=null)}function od(f){Jo(f),f.u&&(c.clearTimeout(f.u),f.u=null),Va(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Zo(f){if(!zf(f.h)&&!f.s){f.s=!0;var y=f.Ga;oe||ue(),K||(oe(),K=!0),te.add(y,f),f.B=0}}function tm(f,y){return Bf(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Go(x(f.Ga,f,y),Ws(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Q=new hi(this,this.j,f);let Y=this.o;if(this.S&&(Y?(Y=T(Y),L(Y,this.S)):Y=this.S),this.m!==null||this.O||(Q.H=Y,Y=null),this.P)e:{for(var y=0,I=0;I<this.i.length;I++){t:{var V=this.i[I];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(y+=V,4096<y){y=I;break e}if(y===4096||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=xr(this,Q,y),I=xs(this.I),_t(I,"RID",f),_t(I,"CVER",22),this.D&&_t(I,"X-HTTP-Session-Id",this.D),el(this,I),Y&&(this.O?y="headers="+encodeURIComponent(String(Jf(Y)))+"&"+y:this.m&&nd(I,this.m,Y)),Zl(this.h,Q),this.Ua&&_t(I,"TYPE","init"),this.P?(_t(I,"$req",y),_t(I,"SID","null"),Q.T=!0,qu(Q,I,null)):qu(Q,I,y),this.G=2}}else this.G==3&&(f?Yn(this,f):this.i.length==0||zf(this.h)||Yn(this))};function Yn(f,y){var I;y?I=y.l:I=f.U++;const V=xs(f.I);_t(V,"SID",f.K),_t(V,"RID",I),_t(V,"AID",f.T),el(f,V),f.m&&f.o&&nd(V,f.m,f.o),I=new hi(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),y&&(f.i=y.D.concat(f.i)),y=xr(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Zl(f.h,I),qu(I,V,y)}function el(f,y){f.H&&F(f.H,function(I,V){_t(y,V,I)}),f.l&&Zu({},function(I,V){_t(y,V,I)})}function xr(f,y,I){I=Math.min(f.i.length,I);var V=f.l?x(f.l.Na,f.l,f):null;e:{var Q=f.i;let Y=-1;for(;;){const he=["count="+I];Y==-1?0<I?(Y=Q[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let dt=!0;for(let xn=0;xn<I;xn++){let Je=Q[xn].g;const pt=Q[xn].map;if(Je-=Y,0>Je)Y=Math.max(0,Q[xn].g-100),dt=!1;else try{bx(pt,he,"req"+Je+"_")}catch{V&&V(pt)}}if(dt){V=he.join("&");break e}}}return f=f.i.splice(0,I),y.D=f,V}function nm(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;oe||ue(),K||(oe(),K=!0),te.add(y,f),f.v=0}}function sc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Go(x(f.Fa,f),Ws(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,tl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Go(x(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),Jo(this),tl(this))};function bs(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function tl(f){f.g=new hi(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=xs(f.qa);_t(y,"RID","rpc"),_t(y,"SID",f.K),_t(y,"AID",f.T),_t(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&_t(y,"TO",f.ja),_t(y,"TYPE","xmlhttp"),el(f,y),f.m&&f.o&&nd(y,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=Ma(xs(y)),I.m=null,I.P=!0,Of(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Jo(this),sc(this),On(19))};function Va(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Et(f,y){var I=null;if(f.g==y){Va(f),bs(f),f.g=null;var V=2}else if(Qu(f.h,y))I=y.D,Xu(f.h,y),V=1;else return;if(f.G!=0){if(y.o)if(V==1){I=y.m?y.m.length:0,y=Date.now()-y.F;var Q=f.B;V=Ql(),zt(V,new Xl(V,I)),Zo(f)}else nm(f);else if(Q=y.s,Q==3||Q==0&&0<y.X||!(V==1&&tm(f,y)||V==2&&sc(f)))switch(I&&0<I.length&&(y=f.h,y.i=y.i.concat(I)),Q){case 1:Hs(f,5);break;case 4:Hs(f,10);break;case 3:Hs(f,6);break;default:Hs(f,2)}}}function Ws(f,y){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*y}function Hs(f,y){if(f.j.info("Error code "+y),y==2){var I=x(f.fb,f),V=f.Xa;const Q=!V;V=new Ui(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yo(V,"https"),Ma(V),Q?xx(V.toString(),I):yx(V.toString(),I)}else On(2);f.G=0,f.l&&f.l.sa(y),rm(f),od(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function rm(f){if(f.G=0,f.ka=[],f.l){const y=Yu(f.h);(y.length!=0||f.i.length!=0)&&(S(f.ka,y),S(f.ka,f.i),f.h.i.length=0,j(f.i),f.i.length=0),f.l.ra()}}function ic(f,y,I){var V=I instanceof Ui?xs(I):new Ui(I);if(V.g!="")y&&(V.g=y+"."+V.g),Da(V,V.s);else{var Q=c.location;V=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;var Y=new Ui(null);V&&Yo(Y,V),y&&(Y.g=y),Q&&Da(Y,Q),I&&(Y.l=I),V=Y}return I=f.D,y=f.ya,I&&y&&_t(V,I,y),_t(V,"VER",f.la),el(f,V),V}function sm(f,y,I){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Lt(new ec({eb:I})):new Lt(f.pa),y.Ha(f.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function im(){}t=im.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ac(){}ac.prototype.g=function(f,y){return new Jn(f,y)};function Jn(f,y){cn.call(this),this.g=new ad(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!w(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Ua(this)}E(Jn,cn),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){rc(this.g)},Jn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=de(f),f=I);y.i.push(new Uf(y.Ya++,f)),y.G==3&&Zo(y)},Jn.prototype.N=function(){this.g.l=null,delete this.j,rc(this.g),delete this.g,Jn.aa.N.call(this)};function nl(f){Kl.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const I in y){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}E(nl,Kl);function zi(){$u.call(this),this.status=1}E(zi,$u);function Ua(f){this.g=f}E(Ua,im),Ua.prototype.ua=function(){zt(this.g,"a")},Ua.prototype.ta=function(f){zt(this.g,new nl(f))},Ua.prototype.sa=function(f){zt(this.g,new zi)},Ua.prototype.ra=function(){zt(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,n4=function(){return new ac},t4=function(){return Ql()},e4=Li,X1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,zp=Yl,Df.COMPLETE="complete",ZC=Df,$s.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",cn.prototype.listen=cn.prototype.K,Bd=$s,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,JC=Lt}).apply(typeof op<"u"?op:typeof self<"u"?self:typeof window<"u"?window:{});const Lj="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sr.UNAUTHENTICATED=new sr(null),sr.GOOGLE_CREDENTIALS=new sr("google-credentials-uid"),sr.FIRST_PARTY=new sr("first-party-uid"),sr.MOCK_USER=new sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Hw("@firebase/firestore");function Rd(){return Ol.logLevel}function Ne(t,...e){if(Ol.logLevel<=et.DEBUG){const n=e.map(l2);Ol.debug(`Firestore (${Du}): ${t}`,...n)}}function xa(t,...e){if(Ol.logLevel<=et.ERROR){const n=e.map(l2);Ol.error(`Firestore (${Du}): ${t}`,...n)}}function lu(t,...e){if(Ol.logLevel<=et.WARN){const n=e.map(l2);Ol.warn(`Firestore (${Du}): ${t}`,...n)}}function l2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${Du}) INTERNAL ASSERTION FAILED: `+t;throw xa(e),new Error(e)}function wt(t,e){t||De()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sr.UNAUTHENTICATED))}shutdown(){}}class LW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OW{constructor(e){this.t=e,this.currentUser=sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new aa,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new aa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new r4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new sr(e)}}class VW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){wt(this.o===void 0);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string"),this.R=n.token,new FW(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BW(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function ct(t,e){return t<e?-1:t>e?1:0}function cu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new st(0,0))}static max(){return new Oe(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pt extends zh{construct(e,n,r){return new Pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const $W=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends zh{construct(e,n,r){return new $n(e,n,r)}static isValidIdentifier(e){return $W.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ye(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ye(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new ye(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(n)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Pt.fromString(e))}static fromName(e){return new Te(Pt.fromString(e).popFirst(5))}static empty(){return new Te(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Pt(e.slice()))}}function WW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new To(s,Te.empty(),e)}function HW(t){return new To(t.readTime,t.key,-1)}class To{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new To(Oe.min(),Te.empty(),-1)}static max(){return new To(Oe.max(),Te.empty(),-1)}}function GW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==qW)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(s=>s?ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++c,c===a&&r(o)},m=>s(m))}})}static doWhile(e,n){return new ae((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function QW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}c2.oe=-1;function A0(t){return t==null}function Ag(t){return t===0&&1/t==-1/0}function XW(t){return typeof t=="number"&&Number.isInteger(t)&&!Ag(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lp(this.root,e,this.comparator,!0)}}class lp{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Bn.RED,this.left=s??Bn.EMPTY,this.right=a??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Bn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vj(this.data.getIterator())}getIteratorFrom(e){return new Vj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gn(this.comparator);return n.data=e,n}}class Vj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new as([])}unionWith(e){let n=new Gn($n.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new as(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new a4("Invalid base64 string: "+a):a}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const YW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(t){if(wt(!!t),typeof t=="string"){let e=0;const n=YW.exec(t);if(wt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(t.seconds),nanos:an(t.nanos)}}function an(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vl(t){return typeof t=="string"?Kn.fromBase64String(t):Kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function d2(t){const e=t.mapValue.fields.__previous_value__;return u2(e)?d2(e):e}function Bh(t){const e=Ao(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e,n,r,s,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class $h{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $h("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $h&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp={mapValue:{}};function Ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u2(t)?4:eH(t)?9007199254740991:ZW(t)?10:11:De()}function Ii(t,e){if(t===e)return!0;const n=Ul(t);if(n!==Ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bh(t).isEqual(Bh(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Ao(s.timestampValue),c=Ao(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Vl(s.bytesValue).isEqual(Vl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return an(s.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(s.geoPointValue.longitude)===an(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return an(s.integerValue)===an(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=an(s.doubleValue),c=an(a.doubleValue);return o===c?Ag(o)===Ag(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return cu(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(Oj(o)!==Oj(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ii(o[u],c[u])))return!1;return!0}(t,e);default:return De()}}function Wh(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function uu(t,e){if(t===e)return 0;const n=Ul(t),r=Ul(e);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=an(a.integerValue||a.doubleValue),u=an(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Uj(t.timestampValue,e.timestampValue);case 4:return Uj(Bh(t),Bh(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Vl(a),u=Vl(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=ct(c[h],u[h]);if(m!==0)return m}return ct(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=ct(an(a.latitude),an(o.latitude));return c!==0?c:ct(an(a.longitude),an(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fj(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,h,m;const g=a.fields||{},x=o.fields||{},v=(c=g.value)===null||c===void 0?void 0:c.arrayValue,E=(u=x.value)===null||u===void 0?void 0:u.arrayValue,j=ct(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0);return j!==0?j:Fj(v,E)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===cp.mapValue&&o===cp.mapValue)return 0;if(a===cp.mapValue)return 1;if(o===cp.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const x=ct(u[g],m[g]);if(x!==0)return x;const v=uu(c[u[g]],h[m[g]]);if(v!==0)return v}return ct(u.length,m.length)}(t.mapValue,e.mapValue);default:throw De()}}function Uj(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=Ao(t),r=Ao(e),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Fj(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=uu(n[s],r[s]);if(a)return a}return ct(n.length,r.length)}function du(t){return Y1(t)}function Y1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ao(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Y1(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${Y1(n.fields[o])}`;return s+"}"}(t.mapValue):De()}function zj(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function J1(t){return!!t&&"integerValue"in t}function h2(t){return!!t&&"arrayValue"in t}function Bj(t){return!!t&&"nullValue"in t}function $j(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bp(t){return!!t&&"mapValue"in t}function ZW(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ih(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ih(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ih(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(n)}setAll(e){let n=$n.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ih(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Bp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hl(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new zr(ih(this.value))}}function o4(t){const e=[];return Hl(t.fields,(n,r)=>{const s=new $n([n]);if(Bp(r)){const a=o4(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ar(e,0,Oe.min(),Oe.min(),Oe.min(),zr.empty(),0)}static newFoundDocument(e,n,r,s){return new ar(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new ar(e,2,n,Oe.min(),Oe.min(),zr.empty(),0)}static newUnknownDocument(e,n){return new ar(e,3,n,Oe.min(),Oe.min(),zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.position=e,this.inclusive=n}}function Wj(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=Te.comparator(Te.fromName(o.referenceValue),n.key):r=uu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function tH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{}class pn extends l4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rH(e,n,r):n==="array-contains"?new aH(e,r):n==="in"?new oH(e,r):n==="not-in"?new lH(e,r):n==="array-contains-any"?new cH(e,r):new pn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sH(e,r):new iH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uu(n,this.value)):n!==null&&Ul(this.value)===Ul(n)&&this.matchesComparison(uu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends l4{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new oi(e,n)}matches(e){return c4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function c4(t){return t.op==="and"}function u4(t){return nH(t)&&c4(t)}function nH(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function Z1(t){if(t instanceof pn)return t.field.canonicalString()+t.op.toString()+du(t.value);if(u4(t))return t.filters.map(e=>Z1(e)).join(",");{const e=t.filters.map(n=>Z1(n)).join(",");return`${t.op}(${e})`}}function d4(t,e){return t instanceof pn?function(r,s){return s instanceof pn&&r.op===s.op&&r.field.isEqual(s.field)&&Ii(r.value,s.value)}(t,e):t instanceof oi?function(r,s){return s instanceof oi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&d4(o,s.filters[c]),!0):!1}(t,e):void De()}function h4(t){return t instanceof pn?function(n){return`${n.field.canonicalString()} ${n.op} ${du(n.value)}`}(t):t instanceof oi?function(n){return n.op.toString()+" {"+n.getFilters().map(h4).join(" ,")+"}"}(t):"Filter"}class rH extends pn{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class sH extends pn{constructor(e,n){super(e,"in",n),this.keys=f4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iH extends pn{constructor(e,n){super(e,"not-in",n),this.keys=f4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Te.fromName(r.referenceValue))}class aH extends pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return h2(n)&&Wh(n.arrayValue,this.value)}}class oH extends pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wh(this.value.arrayValue,n)}}class lH extends pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wh(this.value.arrayValue,n)}}class cH extends pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!h2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Gj(t,e=null,n=[],r=[],s=null,a=null,o=null){return new uH(t,e,n,r,s,a,o)}function f2(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Z1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),A0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>du(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>du(r)).join(",")),e.ue=n}return e.ue}function m2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!d4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hj(t.startAt,e.startAt)&&Hj(t.endAt,e.endAt)}function eb(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dH(t,e,n,r,s,a,o,c){return new Mu(t,e,n,r,s,a,o,c)}function I0(t){return new Mu(t)}function qj(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m4(t){return t.collectionGroup!==null}function ah(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Gn($n.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Hh(a,r))}),n.has($n.keyField().canonicalString())||e.ce.push(new Hh($n.keyField(),r))}return e.ce}function Ei(t){const e=Ue(t);return e.le||(e.le=hH(e,ah(t))),e.le}function hH(t,e){if(t.limitType==="F")return Gj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Hh(s.field,a)});const n=t.endAt?new Ig(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ig(t.startAt.position,t.startAt.inclusive):null;return Gj(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tb(t,e){const n=t.filters.concat([e]);return new Mu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cg(t,e,n){return new Mu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function C0(t,e){return m2(Ei(t),Ei(e))&&t.limitType===e.limitType}function p4(t){return`${f2(Ei(t))}|lt:${t.limitType}`}function bc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>h4(s)).join(", ")}]`),A0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>du(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>du(s)).join(",")),`Target(${r})`}(Ei(t))}; limitType=${t.limitType})`}function R0(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Te.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of ah(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=Wj(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,ah(r),s)||r.endAt&&!function(o,c,u){const h=Wj(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,ah(r),s))}(t,e)}function fH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g4(t){return(e,n)=>{let r=!1;for(const s of ah(t)){const a=mH(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function mH(t,e,n){const r=t.field.isKeyField()?Te.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?uu(u,h):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hl(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return i4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=new Qt(Te.comparator);function ya(){return pH}const x4=new Qt(Te.comparator);function $d(...t){let e=x4;for(const n of t)e=e.insert(n.key,n);return e}function y4(t){let e=x4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wl(){return oh()}function v4(){return oh()}function oh(){return new Lu(t=>t.toString(),(t,e)=>t.isEqual(e))}const gH=new Qt(Te.comparator),xH=new Gn(Te.comparator);function Xe(...t){let e=xH;for(const n of t)e=e.add(n);return e}const yH=new Gn(ct);function vH(){return yH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ag(e)?"-0":e}}function b4(t){return{integerValue:""+t}}function w4(t,e){return XW(e)?b4(e):p2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this._=void 0}}function bH(t,e,n){return t instanceof Gh?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&u2(a)&&(a=d2(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof hu?N4(t,e):t instanceof qh?k4(t,e):function(s,a){const o=_4(s,a),c=Kj(o)+Kj(s.Pe);return J1(o)&&J1(s.Pe)?b4(c):p2(s.serializer,c)}(t,e)}function wH(t,e,n){return t instanceof hu?N4(t,e):t instanceof qh?k4(t,e):n}function _4(t,e){return t instanceof Kh?function(r){return J1(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Gh extends P0{}class hu extends P0{constructor(e){super(),this.elements=e}}function N4(t,e){const n=j4(e);for(const r of t.elements)n.some(s=>Ii(s,r))||n.push(r);return{arrayValue:{values:n}}}class qh extends P0{constructor(e){super(),this.elements=e}}function k4(t,e){let n=j4(e);for(const r of t.elements)n=n.filter(s=>!Ii(s,r));return{arrayValue:{values:n}}}class Kh extends P0{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Kj(t){return an(t.integerValue||t.doubleValue)}function j4(t){return h2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.field=e,this.transform=n}}function _H(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof hu&&s instanceof hu||r instanceof qh&&s instanceof qh?cu(r.elements,s.elements,Ii):r instanceof Kh&&s instanceof Kh?Ii(r.Pe,s.Pe):r instanceof Gh&&s instanceof Gh}(t.transform,e.transform)}class NH{constructor(e,n){this.version=e,this.transformResults=n}}class Ds{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $p(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class D0{}function E4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new x2(t.key,Ds.none()):new xf(t.key,t.data,Ds.none());{const n=t.data,r=zr.empty();let s=new Gn($n.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Uo(t.key,r,new as(s.toArray()),Ds.none())}}function kH(t,e,n){t instanceof xf?function(s,a,o){const c=s.value.clone(),u=Xj(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Uo?function(s,a,o){if(!$p(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Xj(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(S4(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lh(t,e,n,r){return t instanceof xf?function(a,o,c,u){if(!$p(a.precondition,o))return c;const h=a.value.clone(),m=Yj(a.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Uo?function(a,o,c,u){if(!$p(a.precondition,o))return c;const h=Yj(a.fieldTransforms,u,o),m=o.data;return m.setAll(S4(a)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(a,o,c){return $p(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function jH(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=_4(r.transform,s||null);a!=null&&(n===null&&(n=zr.empty()),n.set(r.field,a))}return n||null}function Qj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cu(r,s,(a,o)=>_H(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xf extends D0{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uo extends D0{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function S4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xj(t,e,n){const r=new Map;wt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,wH(o,c,n[s]))}return r}function Yj(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,bH(a,o,e))}return r}class x2 extends D0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EH extends D0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&kH(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v4();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=E4(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&cu(this.mutations,e.mutations,(n,r)=>Qj(n,r))&&cu(this.baseMutations,e.baseMutations,(n,r)=>Qj(n,r))}}class y2{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){wt(e.mutations.length===r.length);let s=function(){return gH}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new y2(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,rt;function IH(t){switch(t){default:return De();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function T4(t){if(t===void 0)return xa("GRPC error has no .code"),se.UNKNOWN;switch(t){case dn.OK:return se.OK;case dn.CANCELLED:return se.CANCELLED;case dn.UNKNOWN:return se.UNKNOWN;case dn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case dn.INTERNAL:return se.INTERNAL;case dn.UNAVAILABLE:return se.UNAVAILABLE;case dn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case dn.NOT_FOUND:return se.NOT_FOUND;case dn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case dn.ABORTED:return se.ABORTED;case dn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case dn.DATA_LOSS:return se.DATA_LOSS;default:return De()}}(rt=dn||(dn={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=new El([4294967295,4294967295],0);function Jj(t){const e=CH().encode(t),n=new YC;return n.update(e),new Uint8Array(n.digest())}function Zj(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new El([n,r],0),new El([s,a],0)]}class v2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wd(`Invalid padding: ${n}`);if(r<0)throw new Wd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=El.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(El.fromNumber(r)));return s.compare(RH)===1&&(s=new El([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Jj(e),[r,s]=Zj(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new v2(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Jj(e),[r,s]=Zj(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new M0(Oe.min(),s,new Qt(ct),ya(),Xe())}}class yf{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yf(r,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class A4{constructor(e,n){this.targetId=e,this.me=n}}class I4{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class eE{constructor(){this.fe=0,this.ge=nE(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),n=Xe(),r=Xe();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:De()}}),new yf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PH{constructor(e){this.Le=e,this.Be=new Map,this.ke=ya(),this.qe=tE(),this.Qe=new Qt(ct)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(eb(a))if(r===0){const o=new Te(a.path);this.Ue(n,o,ar.newNoDocument(o,Oe.min()))}else wt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=Vl(r).toUint8Array()}catch(u){if(u instanceof a4)return lu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new v2(o,s,a)}catch(u){return lu(u instanceof Wd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&eb(c.target)){const u=new Te(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ar.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=Xe();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new M0(e,n,this.Qe,this.ke,r);return this.ke=ya(),this.qe=tE(),this.Qe=new Qt(ct),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new eE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Gn(ct),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tE(){return new Qt(Te.comparator)}function nE(){return new Qt(Te.comparator)}const DH={asc:"ASCENDING",desc:"DESCENDING"},MH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LH={and:"AND",or:"OR"};class OH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nb(t,e){return t.useProto3Json||A0(e)?e:{value:e}}function Rg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VH(t,e){return Rg(t,e.toTimestamp())}function Si(t){return wt(!!t),Oe.fromTimestamp(function(n){const r=Ao(n);return new st(r.seconds,r.nanos)}(t))}function b2(t,e){return rb(t,e).canonicalString()}function rb(t,e){const n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function R4(t){const e=Pt.fromString(t);return wt(O4(e)),e}function sb(t,e){return b2(t.databaseId,e.path)}function tv(t,e){const n=R4(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(D4(n))}function P4(t,e){return b2(t.databaseId,e)}function UH(t){const e=R4(t);return e.length===4?Pt.emptyPath():D4(e)}function ib(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D4(t){return wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rE(t,e,n){return{name:sb(t,e),fields:n.value.mapValue.fields}}function FH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(h,m){return h.useProto3Json?(wt(m===void 0||typeof m=="string"),Kn.fromBase64String(m||"")):(wt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Kn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const m=h.code===void 0?se.UNKNOWN:T4(h.code);return new ye(m,h.message||"")}(o);n=new I4(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=tv(t,r.document.name),a=Si(r.document.updateTime),o=r.document.createTime?Si(r.document.createTime):Oe.min(),c=new zr({mapValue:{fields:r.document.fields}}),u=ar.newFoundDocument(s,a,o,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Wp(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=tv(t,r.document),a=r.readTime?Si(r.readTime):Oe.min(),o=ar.newNoDocument(s,a),c=r.removedTargetIds||[];n=new Wp([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=tv(t,r.document),a=r.removedTargetIds||[];n=new Wp([],a,s,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new AH(s,a),c=r.targetId;n=new A4(c,o)}}return n}function zH(t,e){let n;if(e instanceof xf)n={update:rE(t,e.key,e.value)};else if(e instanceof x2)n={delete:sb(t,e.key)};else if(e instanceof Uo)n={update:rE(t,e.key,e.data),updateMask:XH(e.fieldMask)};else{if(!(e instanceof EH))return De();n={verify:sb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof Gh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Kh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:VH(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De()}(t,e.precondition)),n}function BH(t,e){return t&&t.length>0?(wt(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?Si(s.updateTime):Si(a);return o.isEqual(Oe.min())&&(o=Si(a)),new NH(o,s.transformResults||[])}(n,e))):[]}function $H(t,e){return{documents:[P4(t,e.path)]}}function WH(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=P4(t,s);const a=function(h){if(h.length!==0)return L4(oi.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(h){if(h.length!==0)return h.map(m=>function(x){return{field:wc(x.field),direction:qH(x.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=nb(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function HH(t){let e=UH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){wt(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=function(g){const x=M4(g);return x instanceof oi&&u4(x)?x.getFilters():[x]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(x=>function(E){return new Hh(_c(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(x))}(n.orderBy));let c=null;n.limit&&(c=function(g){let x;return x=typeof g=="object"?g.value:g,A0(x)?null:x}(n.limit));let u=null;n.startAt&&(u=function(g){const x=!!g.before,v=g.values||[];return new Ig(v,x)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const x=!g.before,v=g.values||[];return new Ig(v,x)}(n.endAt)),dH(e,s,o,a,c,"F",u,h)}function GH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_c(n.unaryFilter.field);return pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_c(n.unaryFilter.field);return pn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_c(n.unaryFilter.field);return pn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_c(n.unaryFilter.field);return pn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return pn.create(_c(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return oi.create(n.compositeFilter.filters.map(r=>M4(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function qH(t){return DH[t]}function KH(t){return MH[t]}function QH(t){return LH[t]}function wc(t){return{fieldPath:t.canonicalString()}}function _c(t){return $n.fromServerFormat(t.fieldPath)}function L4(t){return t instanceof pn?function(n){if(n.op==="=="){if($j(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NAN"}};if(Bj(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($j(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NOT_NAN"}};if(Bj(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wc(n.field),op:KH(n.op),value:n.value}}}(t):t instanceof oi?function(n){const r=n.getFilters().map(s=>L4(s));return r.length===1?r[0]:{compositeFilter:{op:QH(n.op),filters:r}}}(t):De()}function XH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function O4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,r,s,a=Oe.min(),o=Oe.min(),c=Kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e){this.ct=e}}function JH(t){const e=HH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.un=new eG}addToCollectionParentIndex(e,n){return this.un.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(To.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(To.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class eG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Gn(Pt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fu(0)}static kn(){return new fu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(){this.changes=new Lu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lh(r.mutation,s,as.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Xe()){const s=wl();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=$d();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=wl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=ya();const o=oh(),c=function(){return oh()}();return n.forEach((u,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Uo)?a=a.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),lh(m.mutation,h,m.mutation.getFieldMask(),st.now())):o.set(h.key,as.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var g;return c.set(h,new nG(m,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=oh();let s=new Qt((o,c)=>o-c),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||as.empty();m=c.applyToLocalView(h,m),r.set(u,m);const g=(s.get(c.batchId)||Xe()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,g=v4();m.forEach(x=>{if(!a.has(x)){const v=E4(n.get(x),r.get(x));v!==null&&g.set(x,v),a=a.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ae.resolve(wl());let c=-1,u=a;return o.next(h=>ae.forEach(h,(m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(m)?ae.resolve():this.remoteDocumentCache.getEntry(e,m).next(x=>{u=u.insert(m,x)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,u,h,Xe())).next(m=>({batchId:c,changes:y4(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(r=>{let s=$d();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=$d();return this.indexManager.getCollectionParents(e,a).next(c=>ae.forEach(c,u=>{const h=function(g,x){return new Mu(x,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((g,x)=>{o=o.insert(g,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,ar.newInvalidDocument(m)))});let c=$d();return o.forEach((u,h)=>{const m=a.get(u);m!==void 0&&lh(m.mutation,h,as.empty(),st.now()),R0(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ae.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Si(s.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:JH(s.bundledQuery),readTime:Si(s.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(){this.overlays=new Qt(Te.comparator),this.Ir=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wl();return ae.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const s=wl(),a=n.length+1,o=new Te(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Qt((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=wl(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=wl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=s)););return ae.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TH(n,r));let a=this.Ir.get(n);a===void 0&&(a=Xe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Tr=new Gn(Cn.Er),this.dr=new Gn(Cn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Cn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Cn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Te(new Pt([])),r=new Cn(n,e),s=new Cn(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Te(new Pt([])),r=new Cn(n,e),s=new Cn(n,e+1);let a=Xe();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Cn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Te.comparator(e.key,n.key)||ct(e.wr,n.wr)}static Ar(e,n){return ct(e.wr,n.wr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Gn(Cn.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SH(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Cn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,n){return ae.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cn(n,0),s=new Cn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);a.push(c)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gn(ct);return n.forEach(s=>{const a=new Cn(s,0),o=new Cn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),ae.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Te.isDocumentKey(a)||(a=a.child(""));const o=new Cn(new Te(a),0);let c=new Gn(ct);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.wr)),!0)},o),ae.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){wt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ae.forEach(n.mutations,s=>{const a=new Cn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Cn(n,0),s=this.br.firstAfterOrEqual(r);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e){this.Mr=e,this.docs=function(){return new Qt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(n))}getEntries(e,n){let r=ya();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ar.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=ya();const o=n.path,c=new Te(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||GW(HW(m),r)<=0||(s.has(m.key)||R0(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,n,r,s){De()}Or(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cG(this)}getSize(e){return ae.resolve(this.size)}}class cG extends tG{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e){this.persistence=e,this.Nr=new Lu(n=>f2(n),m2),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new w2,this.targetCount=0,this.kr=fu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Kn(n),ae.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ae.waitFor(a).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,n){this.qr={},this.overlays={},this.Qr=new c2(0),this.Kr=!1,this.Kr=!0,this.$r=new aG,this.referenceDelegate=e(this),this.Ur=new uG(this),this.indexManager=new ZH,this.remoteDocumentCache=function(s){return new lG(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YH(n),this.Gr=new sG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new oG(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const s=new hG(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return ae.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hG extends KW{constructor(e){super(),this.currentSequenceNumber=e}}class _2{constructor(e){this.persistence=e,this.Jr=new w2,this.Yr=null}static Zr(e){return new _2(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,r=>{const s=Te.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,Oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ae.or([()=>ae.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Xe(),s=Xe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new N2(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ez()?8:QW(dr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new fG;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Rd()<=et.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",bc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):(Rd()<=et.DEBUG&&Ne("QueryEngine","Query:",bc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Rd()<=et.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",bc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):ae.resolve())}Yi(e,n){if(qj(n))return ae.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cg(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Xe(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,Cg(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return qj(n)||s.isEqual(Oe.min())?ae.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?ae.resolve(null):(Rd()<=et.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bc(n)),this.rs(e,o,n,WW(s,-1)).next(c=>c))})}ts(e,n){let r=new Gn(g4(e));return n.forEach((s,a)=>{R0(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Rd()<=et.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",bc(n)),this.Ji.getDocumentsMatchingQuery(e,n,To.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qt(ct),this._s=new Lu(a=>f2(a),m2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rG(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gG(t,e,n,r){return new pG(t,e,n,r)}async function V4(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=Xe();for(const h of s){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function xG(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,m){const g=h.batch,x=g.keys();let v=ae.resolve();return x.forEach(E=>{v=v.next(()=>m.getEntry(u,E)).next(j=>{const S=h.docVersions.get(E);wt(S!==null),j.version.compareTo(S)<0&&(g.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),m.addEntry(j)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Xe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function U4(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yG(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((m,g)=>{const x=s.get(g);if(!x)return;c.push(n.Ur.removeMatchingKeys(a,m.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(a,m.addedDocuments,g)));let v=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(Kn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,r)),s=s.insert(g,v),function(j,S,N){return j.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(x,v,m)&&c.push(n.Ur.updateTargetData(a,v))});let u=ya(),h=Xe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))}),c.push(vG(a,o,e.documentUpdates).next(m=>{u=m.Ps,h=m.Is})),!r.isEqual(Oe.min())){const m=n.Ur.getLastRemoteSnapshotVersion(a).next(g=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(m)}return ae.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,h)).next(()=>u)}).then(a=>(n.os=s,a))}function vG(t,e,n){let r=Xe(),s=Xe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=ya();return n.forEach((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Oe.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ne("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function bG(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wG(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,ae.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new lo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ab(t,e,n){const r=Ue(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gf(o))throw o;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function sE(t,e,n){const r=Ue(t);let s=Oe.min(),a=Xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const g=Ue(u),x=g._s.get(m);return x!==void 0?ae.resolve(g.os.get(x)):g.Ur.getTargetData(h,m)}(r,o,Ei(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Oe.min(),n?a:Xe())).next(c=>(_G(r,fH(e),c),{documents:c,Ts:a})))}function _G(t,e,n){let r=t.us.get(e)||Oe.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class iE{constructor(){this.activeTargetIds=vH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NG{constructor(){this.so=new iE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up=null;function nv(){return up===null?up=function(){return 268435456+Math.round(2147483648*Math.random())}():up++,"0x"+up.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="WebChannelConnection";class SG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const c=nv(),u=this.xo(n,r.toUriEncodedString());Ne("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,s).then(m=>(Ne("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw lu("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,a,o,c){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Du}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=jG[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=nv();return new Promise((o,c)=>{const u=new JC;u.setWithCredentials(!0),u.listenOnce(ZC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zp.NO_ERROR:const m=u.getResponseJson();Ne(rr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),o(m);break;case zp.TIMEOUT:Ne(rr,`RPC '${e}' ${a} timed out`),c(new ye(se.DEADLINE_EXCEEDED,"Request time out"));break;case zp.HTTP_ERROR:const g=u.getStatus();if(Ne(rr,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const v=x==null?void 0:x.error;if(v&&v.status&&v.message){const E=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(N)>=0?N:se.UNKNOWN}(v.status);c(new ye(E,v.message))}else c(new ye(se.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(se.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{Ne(rr,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Ne(rr,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=nv(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=n4(),c=t4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Ne(rr,`Creating RPC '${e}' stream ${s}: ${m}`,u);const g=o.createWebChannel(m,u);let x=!1,v=!1;const E=new EG({Io:S=>{v?Ne(rr,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(x||(Ne(rr,`Opening RPC '${e}' stream ${s} transport.`),g.open(),x=!0),Ne(rr,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},To:()=>g.close()}),j=(S,N,w)=>{S.listen(N,k=>{try{w(k)}catch(A){setTimeout(()=>{throw A},0)}})};return j(g,Bd.EventType.OPEN,()=>{v||(Ne(rr,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),j(g,Bd.EventType.CLOSE,()=>{v||(v=!0,Ne(rr,`RPC '${e}' stream ${s} transport closed`),E.So())}),j(g,Bd.EventType.ERROR,S=>{v||(v=!0,lu(rr,`RPC '${e}' stream ${s} transport errored:`,S),E.So(new ye(se.UNAVAILABLE,"The operation could not be completed")))}),j(g,Bd.EventType.MESSAGE,S=>{var N;if(!v){const w=S.data[0];wt(!!w);const k=w,A=k.error||((N=k[0])===null||N===void 0?void 0:N.error);if(A){Ne(rr,`RPC '${e}' stream ${s} received error:`,A);const D=A.status;let F=function(P){const L=dn[P];if(L!==void 0)return T4(L)}(D),C=A.message;F===void 0&&(F=se.INTERNAL,C="Unknown error status: "+D+" with message "+A.message),v=!0,E.So(new ye(F,C)),g.close()}else Ne(rr,`RPC '${e}' stream ${s} received:`,w),E.bo(w)}}),j(c,e4.STAT_EVENT,S=>{S.stat===X1.PROXY?Ne(rr,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===X1.NOPROXY&&Ne(rr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function rv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){return new OH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,r,s,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new F4(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(xa(n.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ye(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TG extends z4{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FH(this.serializer,e),r=function(a){if(!("targetChange"in a))return Oe.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?Si(o.readTime):Oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ib(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=eb(u)?{documents:$H(a,u)}:{query:WH(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=C4(a,o.resumeToken);const h=nb(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Oe.min())>0){c.readTime=Rg(a,o.snapshotVersion.toTimestamp());const h=nb(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=GH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ib(this.serializer),n.removeTarget=e,this.a_(n)}}class AG extends z4{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return wt(!!e.streamToken),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BH(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ib(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zH(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,rb(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(se.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,rb(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(se.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xa(n),this.D_=!1):Ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Gl(this)&&(Ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Ue(u);h.L_.add(4),await vf(h),h.q_.set("Unknown"),h.L_.delete(4),await O0(h)}(this))})}),this.q_=new CG(r,s)}}async function O0(t){if(Gl(t))for(const e of t.B_)await e(!0)}async function vf(t){for(const e of t.B_)await e(!1)}function B4(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),S2(n)?E2(n):Ou(n).r_()&&j2(n,e))}function k2(t,e){const n=Ue(t),r=Ou(n);n.N_.delete(e),r.r_()&&$4(n,e),n.N_.size===0&&(r.r_()?r.o_():Gl(n)&&n.q_.set("Unknown"))}function j2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ou(t).A_(e)}function $4(t,e){t.Q_.xe(e),Ou(t).R_(e)}function E2(t){t.Q_=new PH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ou(t).start(),t.q_.v_()}function S2(t){return Gl(t)&&!Ou(t).n_()&&t.N_.size>0}function Gl(t){return Ue(t).L_.size===0}function W4(t){t.Q_=void 0}async function PG(t){t.q_.set("Online")}async function DG(t){t.N_.forEach((e,n)=>{j2(t,e)})}async function MG(t,e){W4(t),S2(t)?(t.q_.M_(e),E2(t)):t.q_.set("Unknown")}async function LG(t,e,n){if(t.q_.set("Online"),e instanceof I4&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pg(t,r)}else if(e instanceof Wp?t.Q_.Ke(e):e instanceof A4?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const r=await U4(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.N_.get(h);m&&a.N_.set(h,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const m=a.N_.get(u);if(!m)return;a.N_.set(u,m.withResumeToken(Kn.EMPTY_BYTE_STRING,m.snapshotVersion)),$4(a,u);const g=new lo(m.target,u,h,m.sequenceNumber);j2(a,g)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),await Pg(t,r)}}async function Pg(t,e,n){if(!gf(e))throw e;t.L_.add(1),await vf(t),t.q_.set("Offline"),n||(n=()=>U4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await O0(t)})}function H4(t,e){return e().catch(n=>Pg(t,n,e))}async function V0(t){const e=Ue(t),n=Io(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OG(e);)try{const s=await bG(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,VG(e,s)}catch(s){await Pg(e,s)}G4(e)&&q4(e)}function OG(t){return Gl(t)&&t.O_.length<10}function VG(t,e){t.O_.push(e);const n=Io(t);n.r_()&&n.V_&&n.m_(e.mutations)}function G4(t){return Gl(t)&&!Io(t).n_()&&t.O_.length>0}function q4(t){Io(t).start()}async function UG(t){Io(t).p_()}async function FG(t){const e=Io(t);for(const n of t.O_)e.m_(n.mutations)}async function zG(t,e,n){const r=t.O_.shift(),s=y2.from(r,e,n);await H4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await V0(t)}async function BG(t,e){e&&Io(t).V_&&await async function(r,s){if(function(o){return IH(o)&&o!==se.ABORTED}(s.code)){const a=r.O_.shift();Io(r).s_(),await H4(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await V0(r)}}(t,e),G4(t)&&q4(t)}async function oE(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Gl(n);n.L_.add(3),await vf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await O0(n)}async function $G(t,e){const n=Ue(t);e?(n.L_.delete(2),await O0(n)):e||(n.L_.add(2),await vf(n),n.q_.set("Unknown"))}function Ou(t){return t.K_||(t.K_=function(n,r,s){const a=Ue(n);return a.w_(),new TG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:PG.bind(null,t),Ro:DG.bind(null,t),mo:MG.bind(null,t),d_:LG.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),S2(t)?E2(t):t.q_.set("Unknown")):(await t.K_.stop(),W4(t))})),t.K_}function Io(t){return t.U_||(t.U_=function(n,r,s){const a=Ue(n);return a.w_(),new AG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UG.bind(null,t),mo:BG.bind(null,t),f_:FG.bind(null,t),g_:zG.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await V0(t)):(await t.U_.stop(),t.O_.length>0&&(Ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new T2(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function A2(t,e){if(xa("AsyncQueue",`${e}: ${t}`),gf(t))return new ye(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=$d(),this.sortedSet=new Qt(this.comparator)}static emptySet(e){return new Xc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.W_=new Qt(Te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mu{constructor(e,n,r,s,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new mu(e,n,Xc.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&C0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HG{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ue(n),a=s.queries;s.queries=cE(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ye(se.ABORTED,"Firestore shutting down"))}}function cE(){return new Lu(t=>p4(t),C0)}async function I2(t,e){const n=Ue(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new WG,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=A2(o,`Initialization of query '${bc(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&R2(n)}async function C2(t,e){const n=Ue(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GG(t,e){const n=Ue(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&R2(n)}function qG(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function R2(t){t.Y_.forEach(e=>{e.next()})}var ob,uE;(uE=ob||(ob={})).ea="default",uE.Cache="cache";class P2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ob.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.key=e}}class Q4{constructor(e){this.key=e}}class KG{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=g4(e),this.Ra=new Xc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new lE,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const x=s.get(m),v=R0(this.query,g)?g:null,E=!!x&&this.mutatedKeys.has(x.key),j=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;x&&v?x.data.isEqual(v.data)?E!==j&&(r.track({type:3,doc:v}),S=!0):this.ga(x,v)||(r.track({type:2,doc:v}),S=!0,(u&&this.Aa(v,u)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!x&&v?(r.track({type:0,doc:v}),S=!0):x&&!v&&(r.track({type:1,doc:x}),S=!0,(u||h)&&(c=!0)),S&&(v?(o=o.add(v),a=j?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,g)=>function(v,E){const j=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return j(v)-j(E)}(m.type,g.type)||this.Aa(m.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new mu(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Q4(r))}),this.da.forEach(r=>{e.has(r)||n.push(new K4(r))}),n}ba(e){this.Ta=e.Ts,this.da=Xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XG{constructor(e){this.key=e,this.va=!1}}class YG{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Lu(c=>p4(c),C0),this.Ma=new Map,this.xa=new Set,this.Oa=new Qt(Te.comparator),this.Na=new Map,this.La=new w2,this.Ba={},this.ka=new Map,this.qa=fu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JG(t,e,n=!0){const r=tR(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await X4(r,e,n,!0),s}async function ZG(t,e){const n=tR(t);await X4(n,e,!0,!1)}async function X4(t,e,n,r){const s=await wG(t.localStore,Ei(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await eq(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&B4(t.remoteStore,s),c}async function eq(t,e,n,r,s){t.Ka=(g,x,v)=>async function(j,S,N,w){let k=S.view.ma(N);k.ns&&(k=await sE(j.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,k)));const A=w&&w.targetChanges.get(S.targetId),D=w&&w.targetMismatches.get(S.targetId)!=null,F=S.view.applyChanges(k,j.isPrimaryClient,A,D);return hE(j,S.targetId,F.wa),F.snapshot}(t,g,x,v);const a=await sE(t.localStore,e,!0),o=new KG(e,a.Ts),c=o.ma(a.documents),u=yf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);hE(t,n,h.wa);const m=new QG(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function tq(t,e,n){const r=Ue(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!C0(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ab(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&k2(r.remoteStore,s.targetId),lb(r,s.targetId)}).catch(pf)):(lb(r,s.targetId),await ab(r.localStore,s.targetId,!0))}async function nq(t,e){const n=Ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),k2(n.remoteStore,r.targetId))}async function rq(t,e,n){const r=uq(t);try{const s=await function(o,c){const u=Ue(o),h=st.now(),m=c.reduce((v,E)=>v.add(E.key),Xe());let g,x;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=ya(),j=Xe();return u.cs.getEntries(v,m).next(S=>{E=S,E.forEach((N,w)=>{w.isValidDocument()||(j=j.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,E)).next(S=>{g=S;const N=[];for(const w of c){const k=jH(w,g.get(w.key).overlayedDocument);k!=null&&N.push(new Uo(w.key,k,o4(k.value.mapValue),Ds.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,N,c)}).next(S=>{x=S;const N=S.applyToLocalDocumentSet(g,j);return u.documentOverlayCache.saveOverlays(v,S.batchId,N)})}).then(()=>({batchId:x.batchId,changes:y4(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Qt(ct)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await bf(r,s.changes),await V0(r.remoteStore)}catch(s){const a=A2(s,"Failed to persist write");n.reject(a)}}async function Y4(t,e){const n=Ue(t);try{const r=await yG(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?wt(o.va):s.removedDocuments.size>0&&(wt(o.va),o.va=!1))}),await bf(n,r,e)}catch(r){await pf(r)}}function dE(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Ue(o);u.onlineState=c;let h=!1;u.queries.forEach((m,g)=>{for(const x of g.j_)x.Z_(c)&&(h=!0)}),h&&R2(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sq(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Qt(Te.comparator);o=o.insert(a,ar.newNoDocument(a,Oe.min()));const c=Xe().add(a),u=new M0(Oe.min(),new Map,new Qt(ct),o,c);await Y4(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),D2(r)}else await ab(r.localStore,e,!1).then(()=>lb(r,e,n)).catch(pf)}async function iq(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await xG(n.localStore,e);Z4(n,r,null),J4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bf(n,s)}catch(s){await pf(s)}}async function aq(t,e,n){const r=Ue(t);try{const s=await function(o,c){const u=Ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(wt(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);Z4(r,e,n),J4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bf(r,s)}catch(s){await pf(s)}}function J4(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Z4(t,e,n){const r=Ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||eR(t,r)})}function eR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(k2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),D2(t))}function hE(t,e,n){for(const r of n)r instanceof K4?(t.La.addReference(r.key,e),oq(t,r)):r instanceof Q4?(Ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||eR(t,r.key)):De()}function oq(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),D2(t))}function D2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Te(Pt.fromString(e)),r=t.qa.next();t.Na.set(r,new XG(n)),t.Oa=t.Oa.insert(n,r),B4(t.remoteStore,new lo(Ei(I0(n.path)),r,"TargetPurposeLimboResolution",c2.oe))}}async function bf(t,e,n){const r=Ue(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=N2.Wi(u.targetId,h);a.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const m=Ue(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ae.forEach(h,x=>ae.forEach(x.$i,v=>m.persistence.referenceDelegate.addReference(g,x.targetId,v)).next(()=>ae.forEach(x.Ui,v=>m.persistence.referenceDelegate.removeReference(g,x.targetId,v)))))}catch(g){if(!gf(g))throw g;Ne("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const x=g.targetId;if(!g.fromCache){const v=m.os.get(x),E=v.snapshotVersion,j=v.withLastLimboFreeSnapshotVersion(E);m.os=m.os.insert(x,j)}}}(r.localStore,a))}async function lq(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=await V4(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new ye(se.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bf(n,r.hs)}}function cq(t,e){const n=Ue(t),r=n.Na.get(e);if(r&&r.va)return Xe().add(r.key);{let s=Xe();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function tR(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sq.bind(null,e),e.Ca.d_=GG.bind(null,e.eventManager),e.Ca.$a=qG.bind(null,e.eventManager),e}function uq(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aq.bind(null,e),e}class Dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gG(this.persistence,new mG,e.initialUser,this.serializer)}Ga(e){return new dG(_2.Zr,this.serializer)}Wa(e){return new NG}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dg.provider={build:()=>new Dg};class cb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lq.bind(null,this.syncEngine),await $G(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HG}()}createDatastore(e){const n=L0(e.databaseInfo.databaseId),r=function(a){return new SG(a)}(e.databaseInfo);return function(a,o,c,u){return new IG(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new RG(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>dE(this.syncEngine,n,0),function(){return aE.D()?new aE:new kG}())}createSyncEngine(e,n){return function(s,a,o,c,u,h,m){const g=new YG(s,a,o,c,u,h);return m&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Ue(s);Ne("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await vf(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cb.provider={build:()=>new cb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=sr.UNAUTHENTICATED,this.clientId=s4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=A2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sv(t,e){t.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await V4(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hq(t);Ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>oE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>oE(e.remoteStore,s)),t._onlineComponents=e}async function hq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await sv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;lu("Error using user provided cache. Falling back to memory cache: "+n),await sv(t,new Dg)}}else Ne("FirestoreClient","Using default OfflineComponentProvider"),await sv(t,new Dg);return t._offlineComponents}async function nR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne("FirestoreClient","Using user provided OnlineComponentProvider"),await fE(t,t._uninitializedComponentsProvider._online)):(Ne("FirestoreClient","Using default OnlineComponentProvider"),await fE(t,new cb))),t._onlineComponents}function fq(t){return nR(t).then(e=>e.syncEngine)}async function Mg(t){const e=await nR(t),n=e.eventManager;return n.onListen=JG.bind(null,e.syncEngine),n.onUnlisten=tq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nq.bind(null,e.syncEngine),n}function mq(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const m=new M2({next:x=>{m.Za(),o.enqueueAndForget(()=>C2(a,g));const v=x.docs.has(c);!v&&x.fromCache?h.reject(new ye(se.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&x.fromCache&&u&&u.source==="server"?h.reject(new ye(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new P2(I0(c.path),m,{includeMetadataChanges:!0,_a:!0});return I2(a,g)}(await Mg(t),t.asyncQueue,e,n,r)),r.promise}function pq(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const m=new M2({next:x=>{m.Za(),o.enqueueAndForget(()=>C2(a,g)),x.fromCache&&u.source==="server"?h.reject(new ye(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new P2(c,m,{includeMetadataChanges:!0,_a:!0});return I2(a,g)}(await Mg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e,n){if(!n)throw new ye(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gq(t,e,n,r){if(e===!0&&r===!0)throw new ye(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pE(t){if(!Te.isDocumentKey(t))throw new ye(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gE(t){if(Te.isDocumentKey(t))throw new ye(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function U0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=U0(t);throw new ye(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xq(t,e){if(e<=0)throw new ye(se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MW;switch(r.type){case"firstParty":return new UW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mE.get(n);r&&(Ne("ComponentProvider","Removing Datastore"),mE.delete(n),r.terminate())}(this),Promise.resolve()}}function yq(t,e,n,r={}){var s;const a=(t=qr(t,F0))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&lu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=sr.MOCK_USER;else{c=eC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ye(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new sr(h)}t._authCredentials=new LW(new r4(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class lr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class No extends Ta{constructor(e,n,r){super(e,n,I0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new Te(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function Ve(t,e,...n){if(t=ze(t),sR("collection","path",e),t instanceof F0){const r=Pt.fromString(e,...n);return gE(r),new No(t,null,r)}{if(!(t instanceof lr||t instanceof No))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pt.fromString(e,...n));return gE(r),new No(t.firestore,null,r)}}function ce(t,e,...n){if(t=ze(t),arguments.length===1&&(e=s4.newId()),sR("doc","path",e),t instanceof F0){const r=Pt.fromString(e,...n);return pE(r),new lr(t,null,new Te(r))}{if(!(t instanceof lr||t instanceof No))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pt.fromString(e,...n));return pE(r),new lr(t.firestore,t instanceof No?t.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new F4(this,"async_queue_retry"),this.Vu=()=>{const r=rv();r&&Ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=rv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gf(e))throw e;Ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw xa("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=T2.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class va extends F0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new yE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yE(e),this._firestoreClient=void 0,await e}}}function vq(t,e){const n=typeof t=="object"?t:qw(),r=typeof t=="string"?t:"(default)",s=g0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=YI("firestore");a&&yq(s,...a)}return s}function z0(t){if(t._terminated)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bq(t),t._firestoreClient}function bq(t){var e,n,r;const s=t._freezeSettings(),a=function(c,u,h,m){return new JW(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,rR(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new dq(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(Kn.fromBase64String(e))}catch(n){throw new ye(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pu(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=/^__.*__$/;class _q{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new xf(e,this.data,n,this.fieldTransforms)}}class iR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Uo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class W0{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new W0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aR(this.Cu)&&wq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Nq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||L0(e)}Qu(e,n,r,s=!1){return new W0({Cu:e,methodName:n,qu:r,path:$n.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H0(t){const e=t._freezeSettings(),n=L0(t._databaseId);return new Nq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oR(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);F2("Data must be an object, but it was:",o,r);const c=lR(r,o);let u,h;if(a.merge)u=new as(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const x=ub(e,g,n);if(!o.contains(x))throw new ye(se.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);uR(m,x)||m.push(x)}u=new as(m),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new _q(new zr(c),u,h)}class G0 extends Vu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G0}}function kq(t,e,n){return new W0({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class O2 extends Vu{_toFieldTransform(e){return new g2(e.path,new Gh)}isEqual(e){return e instanceof O2}}class V2 extends Vu{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=kq(this,e,!0),r=this.Ku.map(a=>Uu(a,n)),s=new hu(r);return new g2(e.path,s)}isEqual(e){return e instanceof V2&&Mh(this.Ku,e.Ku)}}class U2 extends Vu{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Kh(e.serializer,w4(e.serializer,this.$u));return new g2(e.path,n)}isEqual(e){return e instanceof U2&&this.$u===e.$u}}function jq(t,e,n,r){const s=t.Qu(1,e,n);F2("Data must be an object, but it was:",s,r);const a=[],o=zr.empty();Hl(r,(u,h)=>{const m=z2(e,u,n);h=ze(h);const g=s.Nu(m);if(h instanceof G0)a.push(m);else{const x=Uu(h,g);x!=null&&(a.push(m),o.set(m,x))}});const c=new as(a);return new iR(o,c,s.fieldTransforms)}function Eq(t,e,n,r,s,a){const o=t.Qu(1,e,n),c=[ub(e,r,n)],u=[s];if(a.length%2!=0)throw new ye(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)c.push(ub(e,a[x])),u.push(a[x+1]);const h=[],m=zr.empty();for(let x=c.length-1;x>=0;--x)if(!uR(h,c[x])){const v=c[x];let E=u[x];E=ze(E);const j=o.Nu(v);if(E instanceof G0)h.push(v);else{const S=Uu(E,j);S!=null&&(h.push(v),m.set(v,S))}}const g=new as(h);return new iR(m,g,o.fieldTransforms)}function Sq(t,e,n,r=!1){return Uu(n,t.Qu(r?4:3,e))}function Uu(t,e){if(cR(t=ze(t)))return F2("Unsupported field value:",e,t),lR(t,e);if(t instanceof Vu)return function(r,s){if(!aR(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=Uu(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w4(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=st.fromDate(r);return{timestampValue:Rg(s.serializer,a)}}if(r instanceof st){const a=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rg(s.serializer,a)}}if(r instanceof $0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pu)return{bytesValue:C4(s.serializer,r._byteString)};if(r instanceof lr){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:b2(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof L2)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return p2(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${U0(r)}`)}(t,e)}function lR(t,e){const n={};return i4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hl(t,(r,s)=>{const a=Uu(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function cR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof $0||t instanceof pu||t instanceof lr||t instanceof Vu||t instanceof L2)}function F2(t,e,n){if(!cR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=U0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ub(t,e,n){if((e=ze(e))instanceof B0)return e._internalPath;if(typeof e=="string")return z2(t,e);throw Lg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Tq=new RegExp("[~\\*/\\[\\]]");function z2(t,e,n){if(e.search(Tq)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new B0(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lg(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ye(se.INVALID_ARGUMENT,c+t+u)}function uR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Aq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Aq extends dR{data(){return super.data()}}function q0(t,e){return typeof e=="string"?z2(t,e):e instanceof B0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B2{}class $2 extends B2{}function it(t,e,...n){let r=[];e instanceof B2&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof W2).length,c=a.filter(u=>u instanceof K0).length;if(o>1||o>0&&c>0)throw new ye(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class K0 extends $2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new K0(e,n,r)}_apply(e){const n=this._parse(e);return fR(e._query,n),new Ta(e.firestore,e.converter,tb(e._query,n))}_parse(e){const n=H0(e.firestore);return function(a,o,c,u,h,m,g){let x;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ye(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){wE(g,m);const v=[];for(const E of g)v.push(bE(u,a,E));x={arrayValue:{values:v}}}else x=bE(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||wE(g,m),x=Sq(c,o,g,m==="in"||m==="not-in");return pn.create(h,m,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(t,e,n){const r=e,s=q0("where",t);return K0._create(s,r,n)}class W2 extends B2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new W2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:oi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const c=a.getFlattenedFilters();for(const u of c)fR(o,u),o=tb(o,u)}(e._query,n),new Ta(e.firestore,e.converter,tb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class H2 extends $2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new H2(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hh(a,o)}(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Mu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Us(t,e="asc"){const n=e,r=q0("orderBy",t);return H2._create(r,n)}class G2 extends $2{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new G2(e,n,r)}_apply(e){return new Ta(e.firestore,e.converter,Cg(e._query,this._limit,this._limitType))}}function Kr(t){return xq("limit",t),G2._create("limit",t,"F")}function bE(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new ye(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m4(e)&&n.indexOf("/")!==-1)throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pt.fromString(n));if(!Te.isDocumentKey(r))throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zj(t,new Te(r))}if(n instanceof lr)return zj(t,n._key);throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U0(n)}.`)}function wE(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fR(t,e){const n=function(s,a){for(const o of s)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Iq{convertValue(e,n="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hl(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>an(o.doubleValue));return new L2(a)}convertGeoPoint(e){return new $0(an(e.latitude),an(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=d2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bh(e));default:return null}}convertTimestamp(e){const n=Ao(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pt.fromString(e);wt(O4(r));const s=new $h(r.get(1),r.get(3)),a=new Te(r.popFirst(5));return s.isEqual(n)||xa(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pR extends dR{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hp extends pR{data(e={}){return super.data(e)}}class gR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hp(this._firestore,this._userDataWriter,r.key,r,new Hd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Hp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Hd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Hp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Hd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:Cq(c.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Cq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){t=qr(t,lr);const e=qr(t.firestore,va);return mq(z0(e),t._key).then(n=>xR(e,t,n))}class q2 extends Iq{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,n)}}function Ft(t){t=qr(t,Ta);const e=qr(t.firestore,va),n=z0(e),r=new q2(e);return hR(t._query),pq(n,t._query).then(s=>new gR(e,r,t,s))}function hr(t,e,n){t=qr(t,lr);const r=qr(t.firestore,va),s=mR(t.converter,e,n);return Q0(r,[oR(H0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ds.none())])}function Ge(t,e,n,...r){t=qr(t,lr);const s=qr(t.firestore,va),a=H0(s);let o;return o=typeof(e=ze(e))=="string"||e instanceof B0?Eq(a,"updateDoc",t._key,e,n,r):jq(a,"updateDoc",t._key,e),Q0(s,[o.toMutation(t._key,Ds.exists(!0))])}function oa(t){return Q0(qr(t.firestore,va),[new x2(t._key,Ds.none())])}function gu(t,e){const n=qr(t.firestore,va),r=ce(t),s=mR(t.converter,e);return Q0(n,[oR(H0(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ds.exists(!1))]).then(()=>r)}function cr(t,...e){var n,r,s;t=ze(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vE(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(vE(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,m;if(t instanceof lr)h=qr(t.firestore,va),m=I0(t._key.path),u={next:g=>{e[o]&&e[o](xR(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=qr(t,Ta);h=qr(g.firestore,va),m=g._query;const x=new q2(h);u={next:v=>{e[o]&&e[o](new gR(h,x,g,v))},error:e[o+1],complete:e[o+2]},hR(t._query)}return function(x,v,E,j){const S=new M2(j),N=new P2(v,S,E);return x.asyncQueue.enqueueAndForget(async()=>I2(await Mg(x),N)),()=>{S.Za(),x.asyncQueue.enqueueAndForget(async()=>C2(await Mg(x),N))}}(z0(h),m,c,u)}function Q0(t,e){return function(r,s){const a=new aa;return r.asyncQueue.enqueueAndForget(async()=>rq(await fq(r),s,a)),a.promise}(z0(t),e)}function xR(t,e,n){const r=n.docs.get(e._key),s=new q2(t);return new pR(t,s,e._key,r,new Hd(n.hasPendingWrites,n.fromCache),e.converter)}function Ut(){return new O2("serverTimestamp")}function db(...t){return new V2("arrayUnion",t)}function kr(t){return new U2("increment",t)}(function(e,n=!0){(function(s){Du=s})($l),Ml(new So("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new va(new OW(r.getProvider("auth-internal")),new zW(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ye(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $h(h.options.projectId,m)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ji(Lj,"4.7.3",e),ji(Lj,"4.7.3","esm2017")})();var Rq="firebase",Pq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(Rq,Pq,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="firebasestorage.googleapis.com",vR="storageBucket",Dq=2*60*1e3,Mq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Pi{constructor(e,n,r=0){super(iv(e),`Firebase Storage: ${n} (${iv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tn||(tn={}));function iv(t){return"storage/"+t}function K2(){const t="An unknown error occurred, please check the error payload for server response.";return new nn(tn.UNKNOWN,t)}function Lq(t){return new nn(tn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Oq(t){return new nn(tn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Vq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(tn.UNAUTHENTICATED,t)}function Uq(){return new nn(tn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Fq(t){return new nn(tn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function zq(){return new nn(tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bq(){return new nn(tn.CANCELED,"User canceled the upload/download.")}function $q(t){return new nn(tn.INVALID_URL,"Invalid URL '"+t+"'.")}function Wq(t){return new nn(tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hq(){return new nn(tn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vR+"' property when initializing the app?")}function Gq(){return new nn(tn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qq(){return new nn(tn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kq(t){return new nn(tn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hb(t){return new nn(tn.INVALID_ARGUMENT,t)}function bR(){return new nn(tn.APP_DELETED,"The Firebase app was deleted.")}function Qq(t){return new nn(tn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ch(t,e){return new nn(tn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pd(t){throw new nn(tn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=os.makeFromUrl(e,n)}catch{return new os(e,"")}if(r.path==="")return r;throw Wq(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function h(A){A.path_=decodeURIComponent(A.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",v=new RegExp(`^https?://${g}/${m}/b/${s}/o${x}`,"i"),E={bucket:1,path:3},j=n===yR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",N=new RegExp(`^https?://${j}/${s}/${S}`,"i"),k=[{regex:c,indices:u,postModify:a},{regex:v,indices:E,postModify:h},{regex:N,indices:{bucket:1,path:2},postModify:h}];for(let A=0;A<k.length;A++){const D=k[A],F=D.regex.exec(e);if(F){const C=F[D.indices.bucket];let T=F[D.indices.path];T||(T=""),r=new os(C,T),D.postModify(r);break}}if(r==null)throw $q(e);return r}}class Xq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t,e,n){let r=1,s=null,a=null,o=!1,c=0;function u(){return c===2}let h=!1;function m(...S){h||(h=!0,e.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,t(v,u())},S)}function x(){a&&clearTimeout(a)}function v(S,...N){if(h){x();return}if(S){x(),m.call(null,S,...N);return}if(u()||o){x(),m.call(null,S,...N);return}r<64&&(r*=2);let k;c===1?(c=2,k=0):k=(r+Math.random())*1e3,g(k)}let E=!1;function j(S){E||(E=!0,x(),!h&&(s!==null?(S||(c=2),clearTimeout(s),g(0)):S||(c=1)))}return g(0),a=setTimeout(()=>{o=!0,j(!0)},n),j}function Jq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){return t!==void 0}function eK(t){return typeof t=="object"&&!Array.isArray(t)}function Q2(t){return typeof t=="string"||t instanceof String}function _E(t){return X2()&&t instanceof Blob}function X2(){return typeof Blob<"u"}function NE(t,e,n,r){if(r<e)throw hb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function wR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Sl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Sl||(Sl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e,n,r,s,a,o,c,u,h,m,g,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=g,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,E)=>{this.resolve_=v,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new dp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===Sl.NO_ERROR,u=a.getStatus();if(!c||tK(u,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===Sl.ABORT;r(!1,new dp(!1,null,m));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new dp(h,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());Zq(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=K2();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?bR():Bq();o(u)}else{const u=zq();o(u)}};this.canceled_?n(!1,new dp(!1,null,!0)):this.backoffId_=Yq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Jq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function rK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function sK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function aK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oK(t,e,n,r,s,a,o=!0){const c=wR(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return iK(h,e),rK(h,n),sK(h,a),aK(h,r),new nK(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cK(...t){const e=lK();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(X2())return new Blob(t);throw new nn(tn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t){if(typeof atob>"u")throw Kq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class av{constructor(e,n){this.data=e,this.contentType=n||null}}function hK(t,e){switch(t){case _i.RAW:return new av(_R(e));case _i.BASE64:case _i.BASE64URL:return new av(NR(t,e));case _i.DATA_URL:return new av(mK(e),pK(e))}throw K2()}function _R(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function fK(t){let e;try{e=decodeURIComponent(t)}catch{throw ch(_i.DATA_URL,"Malformed data URL.")}return _R(e)}function NR(t,e){switch(t){case _i.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw ch(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw ch(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dK(e)}catch(s){throw s.message.includes("polyfill")?s:ch(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class kR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ch(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=gK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function mK(t){const e=new kR(t);return e.base64?NR(_i.BASE64,e.rest):fK(e.rest)}function pK(t){return new kR(t).contentType}function gK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){let r=0,s="";_E(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(_E(this.data_)){const r=this.data_,s=uK(r,e,n);return s===null?null:new ro(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ro(r,!0)}}static getBlob(...e){if(X2()){const n=e.map(r=>r instanceof ro?r.data_:r);return new ro(cK.apply(null,n))}else{const n=e.map(o=>Q2(o)?hK(_i.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[a++]=o[c]}),new ro(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){let e;try{e=JSON.parse(t)}catch{return null}return eK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yK(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ER(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(t,e){return e}class _r{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||vK}}let hp=null;function bK(t){return!Q2(t)||t.length<2?t:ER(t)}function SR(){if(hp)return hp;const t=[];t.push(new _r("bucket")),t.push(new _r("generation")),t.push(new _r("metageneration")),t.push(new _r("name","fullPath",!0));function e(a,o){return bK(o)}const n=new _r("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new _r("size");return s.xform=r,t.push(s),t.push(new _r("timeCreated")),t.push(new _r("updated")),t.push(new _r("md5Hash",null,!0)),t.push(new _r("cacheControl",null,!0)),t.push(new _r("contentDisposition",null,!0)),t.push(new _r("contentEncoding",null,!0)),t.push(new _r("contentLanguage",null,!0)),t.push(new _r("contentType",null,!0)),t.push(new _r("metadata","customMetadata",!0)),hp=t,hp}function wK(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new os(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function _K(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return wK(r,t),r}function TR(t,e,n){const r=jR(e);return r===null?null:_K(t,r,n)}function NK(t,e,n,r){const s=jR(e);if(s===null||!Q2(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(h=>{const m=t.bucket,g=t.fullPath,x="/b/"+o(m)+"/o/"+o(g),v=Y2(x,n,r),E=wR({alt:"media",token:h});return v+E})[0]}function kK(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class AR{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){if(!t)throw K2()}function jK(t,e){function n(r,s){const a=TR(t,s,e);return IR(a!==null),a}return n}function EK(t,e){function n(r,s){const a=TR(t,s,e);return IR(a!==null),NK(a,s,t.host,t._protocol)}return n}function CR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Uq():s=Vq():n.getStatus()===402?s=Oq(t.bucket):n.getStatus()===403?s=Fq(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function SK(t){const e=CR(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=Lq(t.path)),a.serverResponse=s.serverResponse,a}return n}function TK(t,e,n){const r=e.fullServerUrl(),s=Y2(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new AR(s,a,EK(t,n),o);return c.errorHandler=SK(e),c}function AK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IK(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=AK(null,e)),r}function CK(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let k="";for(let A=0;A<2;A++)k=k+Math.random().toString().slice(2);return k}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const h=IK(e,r,s),m=kK(h,n),g="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+u+"--",v=ro.getBlob(g,r,x);if(v===null)throw Gq();const E={name:h.fullPath},j=Y2(a,t.host,t._protocol),S="POST",N=t.maxUploadRetryTime,w=new AR(j,S,jK(t,n),N);return w.urlParams=E,w.headers=o,w.body=v.uploadData(),w.errorHandler=CR(e),w}class RK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Pd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class PK extends RK{initXhr(){this.xhr_.responseType="text"}}function RR(){return new PK}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this._service=e,n instanceof os?this._location=n:this._location=os.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fl(e,n)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ER(this._location.path)}get storage(){return this._service}get parent(){const e=xK(this._location.path);if(e===null)return null;const n=new os(this._location.bucket,e);return new Fl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Qq(e)}}function DK(t,e,n){t._throwIfRoot("uploadBytes");const r=CK(t.storage,t._location,SR(),new ro(e,!0),n);return t.storage.makeRequestWithTokens(r,RR).then(s=>({metadata:s,ref:t}))}function MK(t){t._throwIfRoot("getDownloadURL");const e=TK(t.storage,t._location,SR());return t.storage.makeRequestWithTokens(e,RR).then(n=>{if(n===null)throw qq();return n})}function LK(t,e){const n=yK(t._location.path,e),r=new os(t._location.bucket,n);return new Fl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t){return/^[A-Za-z]+:\/\//.test(t)}function VK(t,e){return new Fl(t,e)}function PR(t,e){if(t instanceof J2){const n=t;if(n._bucket==null)throw Hq();const r=new Fl(n,n._bucket);return e!=null?PR(r,e):r}else return e!==void 0?LK(t,e):t}function UK(t,e){if(e&&OK(e)){if(t instanceof J2)return VK(t,e);throw hb("To use ref(service, url), the first argument must be a Storage instance.")}else return PR(t,e)}function kE(t,e){const n=e==null?void 0:e[vR];return n==null?null:os.makeFromBucketSpec(n,t)}function FK(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:eC(s,t.app.options.projectId))}class J2{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=yR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dq,this._maxUploadRetryTime=Mq,this._requests=new Set,s!=null?this._bucket=os.makeFromBucketSpec(s,this._host):this._bucket=kE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=os.makeFromBucketSpec(this._url,e):this._bucket=kE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fl(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new Xq(bR());{const o=oK(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const jE="@firebase/storage",EE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="storage";function SE(t,e,n){return t=ze(t),DK(t,e,n)}function TE(t){return t=ze(t),MK(t)}function AE(t,e){return t=ze(t),UK(t,e)}function zK(t=qw(),e){t=ze(t);const r=g0(t,DR).getImmediate({identifier:e}),s=YI("storage");return s&&BK(r,...s),r}function BK(t,e,n,r={}){FK(t,e,n,r)}function $K(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new J2(n,r,s,e,$l)}function WK(){Ml(new So(DR,$K,"PUBLIC").setMultipleInstances(!0)),ji(jE,EE,""),ji(jE,EE,"esm2017")}WK();const HK={apiKey:"AIzaSyCffarAiFnuo6YJrkjJRslU1mhKigHcBdQ",authDomain:"synclulu-4e6c0.firebaseapp.com",projectId:"synclulu-4e6c0",storageBucket:"synclulu-4e6c0.firebasestorage.app",messagingSenderId:"569653412196",appId:"1:569653412196:web:8b8cfb2fb650f703717a71",measurementId:"G-PFT3BVCTZ6"},Z2=rC(HK),Rt=PW(Z2),J=vq(Z2),IE=zK(Z2),GK=new rs;GK.setCustomParameters({prompt:"select_account"});const qK={},CE=t=>{let e;const n=new Set,r=(m,g)=>{const x=typeof m=="function"?m(e):m;if(!Object.is(x,e)){const v=e;e=g??(typeof x!="object"||x===null)?x:Object.assign({},e,x),n.forEach(E=>E(e,v))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(qK?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,u);return u},KK=t=>t?CE(t):CE;var MR={exports:{}},LR={},OR={exports:{}},VR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu=_;function QK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XK=typeof Object.is=="function"?Object.is:QK,YK=xu.useState,JK=xu.useEffect,ZK=xu.useLayoutEffect,eQ=xu.useDebugValue;function tQ(t,e){var n=e(),r=YK({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return ZK(function(){s.value=n,s.getSnapshot=e,ov(s)&&a({inst:s})},[t,n,e]),JK(function(){return ov(s)&&a({inst:s}),t(function(){ov(s)&&a({inst:s})})},[t]),eQ(n),n}function ov(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!XK(t,n)}catch{return!0}}function nQ(t,e){return e()}var rQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nQ:tQ;VR.useSyncExternalStore=xu.useSyncExternalStore!==void 0?xu.useSyncExternalStore:rQ;OR.exports=VR;var sQ=OR.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0=_,iQ=sQ;function aQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oQ=typeof Object.is=="function"?Object.is:aQ,lQ=iQ.useSyncExternalStore,cQ=X0.useRef,uQ=X0.useEffect,dQ=X0.useMemo,hQ=X0.useDebugValue;LR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=cQ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=dQ(function(){function u(v){if(!h){if(h=!0,m=v,v=r(v),s!==void 0&&o.hasValue){var E=o.value;if(s(E,v))return g=E}return g=v}if(E=g,oQ(m,v))return E;var j=r(v);return s!==void 0&&s(E,j)?(m=v,E):(m=v,g=j)}var h=!1,m,g,x=n===void 0?null:n;return[function(){return u(e())},x===null?void 0:function(){return u(x())}]},[e,n,r,s]);var c=lQ(t,a[0],a[1]);return uQ(function(){o.hasValue=!0,o.value=c},[c]),hQ(c),c};MR.exports=LR;var fQ=MR.exports;const mQ=kT(fQ),UR={},{useDebugValue:pQ}=Do,{useSyncExternalStoreWithSelector:gQ}=mQ;let RE=!1;const xQ=t=>t;function yQ(t,e=xQ,n){(UR?"production":void 0)!=="production"&&n&&!RE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),RE=!0);const r=gQ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return pQ(r),r}const vQ=t=>{(UR?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?KK(t):t,n=(r,s)=>yQ(e,r,s);return Object.assign(n,e),n},FR=t=>vQ,bQ={};function zR(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(s))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Qh=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Qh(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Qh(r)(n)}}}},wQ=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,N)=>({...N,...S}),...e},o=!1;const c=new Set,u=new Set;let h;try{h=a.getStorage()}catch{}if(!h)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,s);const m=Qh(a.serialize),g=()=>{const S=a.partialize({...r()});let N;const w=m({state:S,version:a.version}).then(k=>h.setItem(a.name,k)).catch(k=>{N=k});if(N)throw N;return w},x=s.setState;s.setState=(S,N)=>{x(S,N),g()};const v=t((...S)=>{n(...S),g()},r,s);let E;const j=()=>{var S;if(!h)return;o=!1,c.forEach(w=>w(r()));const N=((S=a.onRehydrateStorage)==null?void 0:S.call(a,r()))||void 0;return Qh(h.getItem.bind(h))(a.name).then(w=>{if(w)return a.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return a.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var k;return E=a.merge(w,(k=r())!=null?k:v),n(E,!0),g()}).then(()=>{N==null||N(E,void 0),o=!0,u.forEach(w=>w(E))}).catch(w=>{N==null||N(void 0,w)})};return s.persist={setOptions:S=>{a={...a,...S},S.getStorage&&(h=S.getStorage())},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:S=>(c.add(S),()=>{c.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},j(),E||v},_Q=(t,e)=>(n,r,s)=>{let a={storage:zR(()=>localStorage),partialize:j=>j,version:0,merge:(j,S)=>({...S,...j}),...e},o=!1;const c=new Set,u=new Set;let h=a.storage;if(!h)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...j)},r,s);const m=()=>{const j=a.partialize({...r()});return h.setItem(a.name,{state:j,version:a.version})},g=s.setState;s.setState=(j,S)=>{g(j,S),m()};const x=t((...j)=>{n(...j),m()},r,s);s.getInitialState=()=>x;let v;const E=()=>{var j,S;if(!h)return;o=!1,c.forEach(w=>{var k;return w((k=r())!=null?k:x)});const N=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(j=r())!=null?j:x))||void 0;return Qh(h.getItem.bind(h))(a.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return[!0,a.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var k;const[A,D]=w;if(v=a.merge(D,(k=r())!=null?k:x),n(v,!0),A)return m()}).then(()=>{N==null||N(v,void 0),v=r(),o=!0,u.forEach(w=>w(v))}).catch(w=>{N==null||N(void 0,w)})};return s.persist={setOptions:j=>{a={...a,...j},j.storage&&(h=j.storage)},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>E(),hasHydrated:()=>o,onHydrate:j=>(c.add(j),()=>{c.delete(j)}),onFinishHydration:j=>(u.add(j),()=>{u.delete(j)})},a.skipHydration||E(),v||x},NQ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((bQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),wQ(t,e)):_Q(t,e),BR=NQ,kQ=()=>{const t=localStorage.getItem("synclulu-language");if(t&&["de","en","es","fr","pt"].includes(t))return t;const e=navigator.language.split("-")[0];return["de","en","es","fr","pt"].includes(e)?e:"en"},mr=FR()(BR(t=>({user:null,isAuthenticated:!1,isLoading:!0,location:null,locationError:null,locationPermission:null,nearbyUsers:[],searchRadius:500,isDiscovering:!1,chats:[],activeChat:null,language:kQ(),showXPToast:!1,xpToastAmount:0,xpToastReason:"",starProfile:null,starApplication:null,liveStarEvents:[],newsTicker:[],isVerifiedStar:!1,setUser:e=>t({user:e,isAuthenticated:!!e}),setLocation:e=>t({location:e}),setLocationError:e=>t({locationError:e}),setLocationPermission:e=>t({locationPermission:e}),setNearbyUsers:e=>t({nearbyUsers:e}),setSearchRadius:e=>t({searchRadius:e}),setIsDiscovering:e=>t({isDiscovering:e}),setChats:e=>t({chats:e}),setActiveChat:e=>t({activeChat:e}),setIsLoading:e=>t({isLoading:e}),setLanguage:e=>{localStorage.setItem("synclulu-language",e),t({language:e})},showXPGain:(e,n)=>t({showXPToast:!0,xpToastAmount:e,xpToastReason:n}),hideXPToast:()=>t({showXPToast:!1}),logout:()=>t({user:null,isAuthenticated:!1,location:null,nearbyUsers:[],chats:[],activeChat:null,starProfile:null,starApplication:null,isVerifiedStar:!1}),setStarProfile:e=>t({starProfile:e,isVerifiedStar:!!e}),setStarApplication:e=>t({starApplication:e}),setLiveStarEvents:e=>t({liveStarEvents:e}),setNewsTicker:e=>t({newsTicker:e})}),{name:"synclulu-store",storage:zR(()=>localStorage),partialize:t=>({user:t.user,isAuthenticated:t.isAuthenticated,language:t.language,searchRadius:t.searchRadius}),onRehydrateStorage:()=>t=>{var e;(e=t==null?void 0:t.user)!=null&&e.avatarUrl&&console.log("[Store] User rehydrated with avatar:",t.user.avatarUrl.slice(0,50)+"...")}})),Yc={maintenanceMode:!1,maintenanceMessage:"Wir machen eine kurze Pause, um das System fr dich zu perfektionieren. Gleich geht's weiter! ",maintenanceStartedAt:null,maintenanceEstimatedEnd:null,features:{referralSystem:!0,premiumPurchases:!1,voiceChat:!0,anonymousMode:!0,starEvents:!0},limits:{maxUsersPerRoom:8,maxRoomsPerUser:3,maxDailyXP:1e3,maxLevel:500,referralLinksPerUser:5},levelConfig:{baseXP:100,exponent:1.5,maxLevel:500,prestigeUnlockLevel:500,communityPrestigeThreshold:400},referralConfig:{linksPerUser:5,xpPerReferral:500,premiumDaysPerReferral:7,socialMultiplierEnabled:!0},updatedAt:new Date,updatedBy:"system"},jQ="system/config",EQ=t=>{const e=ce(J,jQ);return cr(e,n=>{var r,s,a;if(n.exists()){const o=n.data();t({...Yc,...o,maintenanceStartedAt:((r=o.maintenanceStartedAt)==null?void 0:r.toDate())||null,maintenanceEstimatedEnd:((s=o.maintenanceEstimatedEnd)==null?void 0:s.toDate())||null,updatedAt:((a=o.updatedAt)==null?void 0:a.toDate())||new Date})}else t(Yc)},n=>{console.warn("System config listener error, using defaults:",n.message),t(Yc)})},PE=()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return`synclulu-${e}`},SQ=()=>`ref_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,e_=async t=>{var o;const e=ce(J,"referrals",t),n=await mt(e);if(n.exists()){const c=n.data();return{...c,links:c.links.map(u=>{var h,m;return{...u,createdAt:((h=u.createdAt)==null?void 0:h.toDate())||new Date,usedAt:((m=u.usedAt)==null?void 0:m.toDate())||null}}),createdAt:((o=c.createdAt)==null?void 0:o.toDate())||new Date}}const r=[],s=new Set;for(let c=0;c<Yc.referralConfig.linksPerUser;c++){let u=PE();for(;s.has(u);)u=PE();s.add(u),r.push({id:SQ(),code:u,createdAt:new Date,usedBy:null,usedAt:null,isActive:!0})}const a={userId:t,links:r,referredBy:null,referredByCode:null,totalReferrals:0,xpEarned:0,premiumDaysEarned:0,createdAt:new Date};return await hr(e,{...a,links:r.map(c=>({...c,createdAt:st.fromDate(c.createdAt)})),createdAt:st.fromDate(a.createdAt)}),a},$R=async t=>{var s,a;const e=t.toUpperCase().trim(),n=Ve(J,"referrals"),r=await Ft(n);for(const o of r.docs){const h=(o.data().links||[]).find(m=>m.code===e&&m.isActive&&!m.usedBy);if(h)return{ownerId:o.id,link:{...h,createdAt:((s=h.createdAt)==null?void 0:s.toDate())||new Date,usedAt:((a=h.usedAt)==null?void 0:a.toDate())||null}}}return null},WR=async(t,e,n)=>{try{const r=await $R(t);if(!r)return{success:!1,error:"Ungltiger oder bereits verwendeter Code"};if(r.ownerId===e)return{success:!1,error:"Du kannst deinen eigenen Code nicht verwenden"};const s=ce(J,"referrals",r.ownerId),a=await mt(s);if(!a.exists())return{success:!1,error:"Referrer nicht gefunden"};const o=a.data(),c=Yc.referralConfig,u=o.links.map(x=>x.code===t.toUpperCase().trim()?{...x,usedBy:e,usedAt:st.fromDate(new Date),isActive:!1}:x);await Ge(s,{links:u,totalReferrals:kr(1),xpEarned:kr(c.xpPerReferral),premiumDaysEarned:kr(c.premiumDaysPerReferral)});const h=ce(J,"users",r.ownerId);await Ge(h,{xp:kr(c.xpPerReferral),referralCount:kr(1)});const m=ce(J,"referrals",e);await e_(e),await Ge(m,{referredBy:r.ownerId,referredByCode:t.toUpperCase().trim()});const g=ce(J,"users",e);return await Ge(g,{xp:kr(c.xpPerReferral/2)}),{success:!0,referrerId:r.ownerId,xpAwarded:c.xpPerReferral,premiumDaysAwarded:c.premiumDaysPerReferral}}catch{return{success:!1,error:"Fehler beim Einlsen des Codes"}}};/*! Capacitor: https://capacitorjs.com/ - MIT License */var yu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(yu||(yu={}));class lv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const TQ=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},AQ=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:TQ(t),a=()=>s()!=="web",o=g=>{const x=h.get(g);return!!(x!=null&&x.platforms.has(s())||c(g))},c=g=>{var x;return(x=n.PluginHeaders)===null||x===void 0?void 0:x.find(v=>v.name===g)},u=g=>t.console.error(g),h=new Map,m=(g,x={})=>{const v=h.get(g);if(v)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),v.proxy;const E=s(),j=c(g);let S;const N=async()=>(!S&&E in x?S=typeof x[E]=="function"?S=await x[E]():S=x[E]:e!==null&&!S&&"web"in x&&(S=typeof x.web=="function"?S=await x.web():S=x.web),S),w=(T,P)=>{var L,z;if(j){const H=j==null?void 0:j.methods.find(B=>P===B.name);if(H)return H.rtype==="promise"?B=>n.nativePromise(g,P.toString(),B):(B,Pe)=>n.nativeCallback(g,P.toString(),B,Pe);if(T)return(L=T[P])===null||L===void 0?void 0:L.bind(T)}else{if(T)return(z=T[P])===null||z===void 0?void 0:z.bind(T);throw new lv(`"${g}" plugin is not implemented on ${E}`,yu.Unimplemented)}},k=T=>{let P;const L=(...z)=>{const H=N().then(B=>{const Pe=w(B,T);if(Pe){const we=Pe(...z);return P=we==null?void 0:we.remove,we}else throw new lv(`"${g}.${T}()" is not implemented on ${E}`,yu.Unimplemented)});return T==="addListener"&&(H.remove=async()=>P()),H};return L.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:T,writable:!1,configurable:!1}),L},A=k("addListener"),D=k("removeListener"),F=(T,P)=>{const L=A({eventName:T},P),z=async()=>{const B=await L;D({eventName:T,callbackId:B},P)},H=new Promise(B=>L.then(()=>B({remove:z})));return H.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await z()},H},C=new Proxy({},{get(T,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?F:A;case"removeListener":return D;default:return k(P)}}});return r[g]=C,h.set(g,{name:g,proxy:C,platforms:new Set([...Object.keys(x),...j?[E]:[]])}),C};return n.convertFileSrc||(n.convertFileSrc=g=>g),n.getPlatform=s,n.handleError=u,n.isNativePlatform=a,n.isPluginAvailable=o,n.registerPlugin=m,n.Exception=lv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},IQ=t=>t.Capacitor=AQ(t),Og=IQ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),t_=Og.registerPlugin;class n_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(n),this.retainedEventArguments[e]=a}return}s.forEach(a=>a(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Og.Exception(e,yu.Unimplemented)}unavailable(e="not available"){return new Og.Exception(e,yu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const DE=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ME=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class CQ extends n_{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=ME(s).trim(),a=ME(a).trim(),n[s]=a}),n}async setCookie(e){try{const n=DE(e.key),r=DE(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${a}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}t_("CapacitorCookies",{web:()=>new CQ});const RQ=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),PQ=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,a,o)=>(s[a]=t[e[o]],s),{})},DQ=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[a,o]=s;let c,u;return Array.isArray(o)?(u="",o.forEach(h=>{c=e?encodeURIComponent(h):h,u+=`${a}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(o):o,u=`${a}=${c}`),`${r}&${u}`},"").substr(1):null,MQ=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=PQ(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[o,c]of Object.entries(t.data||{}))a.set(o,c);n.body=a.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const a=new FormData;if(t.data instanceof FormData)t.data.forEach((c,u)=>{a.append(u,c)});else for(const c of Object.keys(t.data))a.append(c,t.data[c]);n.body=a;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class LQ extends n_{async request(e){const n=MQ(e,e.webFetchExtra),r=DQ(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,a=await fetch(s,n),o=a.headers.get("content-type")||"";let{responseType:c="text"}=a.ok?e:{};o.includes("application/json")&&(c="json");let u,h;switch(c){case"arraybuffer":case"blob":h=await a.blob(),u=await RQ(h);break;case"json":u=await a.json();break;case"document":case"text":default:u=await a.text()}const m={};return a.headers.forEach((g,x)=>{m[x]=g}),{data:u,headers:m,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}t_("CapacitorHttp",{web:()=>new LQ});var LE;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(LE||(LE={}));var OE;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(OE||(OE={}));class OQ extends n_{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}t_("SystemBars",{web:()=>new OQ});const Jc=()=>Og.isNativePlatform();let cv=null;const r_=async()=>{if(!Jc())return null;if(!cv)try{cv=(await NT(()=>import("./index-PdgDa5v1.js"),[])).FirebaseAuthentication}catch(t){return console.warn("FirebaseAuthentication plugin not available:",t),null}return cv},VQ=async()=>{try{const t=await r_();if(!t)return{success:!1,error:"Native auth not available"};const e=await t.signInWithGoogle();if(e.credential){const n=rs.credential(e.credential.idToken,e.credential.accessToken);return{success:!0,user:(await N0(Rt,n)).user}}return{success:!1,error:"No credential returned"}}catch(t){return console.error("Native Google sign-in error:",t),{success:!1,error:t.message||"Google sign-in failed"}}},UQ=async(t,e)=>{try{if(Jc()){const r=await r_();if(r)return{success:!0,user:(await r.signInWithEmailAndPassword({email:t,password:e})).user}}return{success:!0,user:(await CC(Rt,t,e)).user}}catch(n){return console.error("Email sign-in error:",n),{success:!1,error:n.message||"Sign-in failed"}}},FQ=async(t,e)=>{try{if(Jc()){const r=await r_();if(r)return{success:!0,user:(await r.createUserWithEmailAndPassword({email:t,password:e})).user}}return{success:!0,user:(await j0(Rt,t,e)).user}}catch(n){return console.error("Email registration error:",n),{success:!1,error:n.message||"Registration failed"}}},uv=["yunghundse@gmail.com","jan@butterbread.de","founder@synclulu.app"],Bs=()=>{const{user:t,isAuthenticated:e,isLoading:n,setUser:r,setIsLoading:s,logout:a}=mr();return _.useEffect(()=>{K$(Rt).then(x=>{x!=null&&x.user&&console.log("Google redirect login successful")}).catch(x=>{console.error("Redirect result error:",x)});const g=l$(Rt,async x=>{var v,E,j;if(x)try{const S=await mt(ce(J,"users",x.uid));if(S.exists()){const N=S.data(),w=uv.includes(((v=x.email)==null?void 0:v.toLowerCase())||"");r({...N,id:x.uid,isAdmin:w})}else{const N={email:x.email||"",username:`user_${x.uid.slice(0,8)}`,displayName:x.displayName||"Anonymous",avatarUrl:x.photoURL||null,visibilityMode:"anonymous",isActive:!0,lastSeen:new Date,createdAt:new Date},w={email:N.email,username:N.username,displayName:N.displayName,visibilityMode:N.visibilityMode,isActive:N.isActive,lastSeen:Ut(),createdAt:Ut()};x.photoURL&&(w.avatarUrl=x.photoURL),await hr(ce(J,"users",x.uid),w);const k=uv.includes(((E=x.email)==null?void 0:E.toLowerCase())||"");r({...N,id:x.uid,isAdmin:k})}}catch(S){console.error("[useAuth] Error loading user profile:",S);const N=uv.includes(((j=x.email)==null?void 0:j.toLowerCase())||"");r({id:x.uid,email:x.email||"",username:`user_${x.uid.slice(0,8)}`,displayName:x.displayName||"Anonymous",avatarUrl:x.photoURL||null,visibilityMode:"anonymous",isActive:!0,lastSeen:new Date,createdAt:new Date,isAdmin:N})}else r(null);s(!1)});return()=>g()},[r,s]),{user:t,isAuthenticated:e,isLoading:n,signIn:async(g,x)=>{try{if(Jc()){const v=await UQ(g,x);return v.success?{success:!0}:{success:!1,error:v.error||"Login fehlgeschlagen"}}return await CC(Rt,g,x),{success:!0}}catch(v){let E="Login fehlgeschlagen";return v.code==="auth/invalid-credential"||v.code==="auth/wrong-password"?E="E-Mail oder Passwort ist falsch":v.code==="auth/user-not-found"?E="Kein Account mit dieser E-Mail gefunden":v.code==="auth/invalid-email"?E="Ungltige E-Mail-Adresse":v.code==="auth/too-many-requests"?E="Zu viele Versuche. Bitte warte einen Moment.":v.code==="auth/user-disabled"&&(E="Dieser Account wurde deaktiviert"),{success:!1,error:E}}},signUp:async(g,x,v,E)=>{try{let j;if(Jc()){const N=await FQ(g,x);if(!N.success)return{success:!1,error:N.error||"Registrierung fehlgeschlagen"};j={user:Rt.currentUser}}else j=await j0(Rt,g,x);const S={email:g,username:v,displayName:v,visibilityMode:"anonymous",isActive:!0,xp:0,level:1,lastSeen:Ut(),createdAt:Ut()};if(await hr(ce(J,"users",j.user.uid),S),await e_(j.user.uid),E)try{await WR(E,j.user.uid,v)}catch(N){console.log("Referral processing failed:",N)}return{success:!0}}catch(j){let S="Registrierung fehlgeschlagen";return j.code==="auth/email-already-in-use"?S="Diese E-Mail ist bereits registriert":j.code==="auth/invalid-email"?S="Ungltige E-Mail-Adresse":j.code==="auth/weak-password"?S="Passwort muss mindestens 6 Zeichen haben":j.code==="auth/operation-not-allowed"&&(S="Registrierung ist momentan nicht mglich"),{success:!1,error:S}}},signInWithGoogle:async()=>{try{if(Jc()){const x=await VQ();return x.success?{success:!0}:{success:!1,error:x.error||"Google Login fehlgeschlagen"}}const g=new rs;g.setCustomParameters({prompt:"select_account"});try{return await o2(Rt,g),{success:!0}}catch(x){if(x.code==="auth/popup-blocked"||x.code==="auth/popup-closed-by-user"||x.code==="auth/cancelled-popup-request")return console.log("Popup blocked, using redirect..."),await H$(Rt,g),{success:!0};throw x}}catch(g){let x="Google Login fehlgeschlagen";return g.code==="auth/popup-closed-by-user"?x="Login abgebrochen":g.code==="auth/account-exists-with-different-credential"?x="Ein Account mit dieser E-Mail existiert bereits":g.code==="auth/network-request-failed"&&(x="Netzwerkfehler - bitte prfe deine Verbindung"),{success:!1,error:x}}},resetPassword:async g=>{try{return await Q7(Rt,g),{success:!0}}catch(x){let v="Fehler beim Zurcksetzen des Passworts";return x.code==="auth/user-not-found"?v="Kein Account mit dieser E-Mail gefunden":x.code==="auth/invalid-email"&&(v="Ungltige E-Mail-Adresse"),{success:!1,error:v}}},logout:async()=>{try{return await DC(Rt),a(),{success:!0}}catch(g){return{success:!1,error:g.message}}}}},zQ=()=>{const t=_.useRef(null),e=_.useCallback(()=>(t.current||(t.current=new(window.AudioContext||window.webkitAudioContext)),t.current),[]),n=_.useCallback((m,g,x="sine",v=.3)=>{try{const E=e();E.state==="suspended"&&E.resume();const j=E.createOscillator(),S=E.createGain();j.connect(S),S.connect(E.destination),j.type=x,j.frequency.setValueAtTime(m,E.currentTime),S.gain.setValueAtTime(0,E.currentTime),S.gain.linearRampToValueAtTime(v,E.currentTime+.02),S.gain.linearRampToValueAtTime(0,E.currentTime+g),j.start(E.currentTime),j.stop(E.currentTime+g)}catch{}},[e]),r=_.useCallback(()=>{n(523.25,.1,"sine",.2),setTimeout(()=>n(659.25,.1,"sine",.2),80),setTimeout(()=>n(783.99,.15,"sine",.25),160)},[n]),s=_.useCallback(()=>{n(523.25,.1,"sine",.15),setTimeout(()=>n(392,.15,"sine",.1),100)},[n]),a=_.useCallback(()=>{n(440,.15,"square",.15),setTimeout(()=>n(440,.15,"square",.15),200),setTimeout(()=>n(440,.15,"square",.15),400)},[n]),o=_.useCallback(()=>{n(880,.08,"sine",.2),setTimeout(()=>n(1108.73,.12,"sine",.25),60)},[n]),c=_.useCallback(()=>{n(220,.2,"sawtooth",.1)},[n]),u=_.useCallback(m=>{m?(n(440,.08,"sine",.15),setTimeout(()=>n(330,.1,"sine",.1),50)):(n(330,.08,"sine",.15),setTimeout(()=>n(440,.1,"sine",.15),50))},[n]),h=_.useCallback(()=>{n(587.33,.1,"sine",.2),setTimeout(()=>n(880,.15,"sine",.25),100)},[n]);return{playJoinSound:r,playLeaveSound:s,playWarningSound:a,playXPSound:o,playErrorSound:c,playMuteSound:u,playNotificationSound:h}},BQ=()=>{const[t,e]=_.useState(Yc),[n,r]=_.useState(!0);return _.useEffect(()=>{let s=!1;const a=setTimeout(()=>{n&&(console.warn("System config timeout - using defaults"),s=!0,r(!1))},3e3),o=EQ(c=>{s||(clearTimeout(a),e(c),r(!1))});return()=>{clearTimeout(a),o()}},[]),{config:t,isLoading:n,isMaintenanceMode:t.maintenanceMode,maintenanceMessage:t.maintenanceMessage,maintenanceEstimatedEnd:t.maintenanceEstimatedEnd,features:t.features,limits:t.limits,levelConfig:t.levelConfig,referralConfig:t.referralConfig}};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=_.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:u,...h},m)=>_.createElement("svg",{ref:m,...$Q,width:s,height:s,stroke:r,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${WQ(t)}`,c].join(" "),...h},[...e.map(([g,x])=>_.createElement(g,x)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=fe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=fe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=fe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=fe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=fe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=fe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=fe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=fe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=fe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=fe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=fe("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=fe("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=fe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=fe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=fe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=fe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=fe("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=fe("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=fe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=fe("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=fe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=fe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=fe("ShieldOff",[["path",{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2",key:"342pvf"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38",key:"p0ycf4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=fe("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=fe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=fe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=fe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=fe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=fe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=fe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=fe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Mc={de:{name:"German",flag:"",native:"Deutsch"},en:{name:"English",flag:"",native:"English"},es:{name:"Spanish",flag:"",native:"Espaol"},fr:{name:"French",flag:"",native:"Franais"},pt:{name:"Portuguese",flag:"",native:"Portugus"}},uX={common:{save:{de:"Speichern",en:"Save",es:"Guardar",fr:"Enregistrer",pt:"Salvar"},cancel:{de:"Abbrechen",en:"Cancel",es:"Cancelar",fr:"Annuler",pt:"Cancelar"},confirm:{de:"Besttigen",en:"Confirm",es:"Confirmar",fr:"Confirmer",pt:"Confirmar"},delete:{de:"Lschen",en:"Delete",es:"Eliminar",fr:"Supprimer",pt:"Excluir"},edit:{de:"Bearbeiten",en:"Edit",es:"Editar",fr:"Modifier",pt:"Editar"},back:{de:"Zurck",en:"Back",es:"Atrs",fr:"Retour",pt:"Voltar"},next:{de:"Weiter",en:"Next",es:"Siguiente",fr:"Suivant",pt:"Prximo"},done:{de:"Fertig",en:"Done",es:"Hecho",fr:"Termin",pt:"Concludo"},loading:{de:"Ldt...",en:"Loading...",es:"Cargando...",fr:"Chargement...",pt:"Carregando..."},retry:{de:"Erneut versuchen",en:"Retry",es:"Reintentar",fr:"Ressayer",pt:"Tentar novamente"}},nav:{home:{de:"Home",en:"Home",es:"Inicio",fr:"Accueil",pt:"Incio"},discover:{de:"Entdecken",en:"Discover",es:"Descubrir",fr:"Dcouvrir",pt:"Descobrir"},messages:{de:"Nachrichten",en:"Messages",es:"Mensajes",fr:"Messages",pt:"Mensagens"},profile:{de:"Profil",en:"Profile",es:"Perfil",fr:"Profil",pt:"Perfil"}},profile:{title:{de:"Profil",en:"Profile",es:"Perfil",fr:"Profil",pt:"Perfil"},editProfile:{de:"Profil bearbeiten",en:"Edit Profile",es:"Editar perfil",fr:"Modifier le profil",pt:"Editar perfil"},bioPlaceholder:{de:"Erzhl was ber dich...",en:"Tell us about yourself...",es:"Cuntanos sobre ti...",fr:"Parlez-nous de vous...",pt:"Conte-nos sobre voc..."},noBio:{de:"Keine Bio. Ein Mensch der Geheimnisse.",en:"No bio. A person of mystery.",es:"Sin bio. Una persona misteriosa.",fr:"Pas de bio. Une personne mystrieuse.",pt:"Sem bio. Uma pessoa misteriosa."},stats:{friends:{de:"Freunde",en:"Friends",es:"Amigos",fr:"Amis",pt:"Amigos"},trust:{de:"Trust",en:"Trust",es:"Confianza",fr:"Confiance",pt:"Confiana"},voiceMin:{de:"Voice Min",en:"Voice Min",es:"Min de Voz",fr:"Min Vocal",pt:"Min de Voz"}},logout:{de:"Abmelden",en:"Log out",es:"Cerrar sesin",fr:"Dconnexion",pt:"Sair"},loggingOut:{de:"Wird abgemeldet...",en:"Logging out...",es:"Cerrando sesin...",fr:"Dconnexion...",pt:"Saindo..."}},level:{level:{de:"Level",en:"Level",es:"Nivel",fr:"Niveau",pt:"Nvel"},xpToNext:{de:"XP zum nchsten Level",en:"XP to next level",es:"XP para el siguiente nivel",fr:"XP pour le prochain niveau",pt:"XP para o prximo nvel"},titles:{newcomer:{de:"Newcomer",en:"Newcomer",es:"Novato",fr:"Nouveau",pt:"Novato"},dreamer:{de:"Dreamer",en:"Dreamer",es:"Soador",fr:"Rveur",pt:"Sonhador"},connector:{de:"Connector",en:"Connector",es:"Conector",fr:"Connecteur",pt:"Conector"},socialite:{de:"Socialite",en:"Socialite",es:"Socialit",fr:"Mondain",pt:"Socialite"},influencer:{de:"Influencer",en:"Influencer",es:"Influencer",fr:"Influenceur",pt:"Influenciador"},legend:{de:"Legend",en:"Legend",es:"Leyenda",fr:"Lgende",pt:"Lenda"}},levelUp:{de:"Du bist jetzt offiziell weniger irrelevant. Willkommen auf Level {level}.",en:"You're officially less irrelevant now. Welcome to Level {level}.",es:"Ahora eres oficialmente menos irrelevante. Bienvenido al Nivel {level}.",fr:"Tu es officiellement moins insignifiant maintenant. Bienvenue au Niveau {level}.",pt:"Voc agora  oficialmente menos irrelevante. Bem-vindo ao Nvel {level}."}},streak:{title:{de:"Streak",en:"Streak",es:"Racha",fr:"Srie",pt:"Sequncia"},days:{de:"Tage",en:"days",es:"das",fr:"jours",pt:"dias"},xpBoost:{de:"XP Boost",en:"XP Boost",es:"Bonus de XP",fr:"Bonus XP",pt:"Bnus de XP"},lost:{de:"Streak verloren. Das war wohl nichts. Aber hey, morgen ist ein neuer Tag.",en:"Streak lost. That didn't work out. But hey, tomorrow's a new day.",es:"Racha perdida. Eso no funcion. Pero oye, maana es un nuevo da.",fr:"Srie perdue. a n'a pas march. Mais bon, demain est un autre jour.",pt:"Sequncia perdida. No deu certo. Mas ei, amanh  um novo dia."},frozen:{de:"Streak eingefroren. Ausnahmsweise.",en:"Streak frozen. Just this once.",es:"Racha congelada. Solo por esta vez.",fr:"Srie gele. Exceptionnellement.",pt:"Sequncia congelada. S desta vez."}},visibility:{title:{de:"Wer darf dich sehen?",en:"Who can see you?",es:"Quin puede verte?",fr:"Qui peut te voir?",pt:"Quem pode te ver?"},public:{title:{de:"Alle in Reichweite",en:"Everyone nearby",es:"Todos cerca",fr:"Tout le monde  proximit",pt:"Todos por perto"},description:{de:"Jeder im Radius kann dich sehen",en:"Anyone in range can see you",es:"Cualquiera en el rango puede verte",fr:"Tout le monde dans le rayon peut te voir",pt:"Qualquer um no raio pode te ver"},hint:{de:"Alle sehen dich. Kein Verstecken.",en:"Everyone sees you. No hiding.",es:"Todos te ven. Sin esconderse.",fr:"Tout le monde te voit. Pas de cachette.",pt:"Todos te veem. Sem se esconder."}},friends:{title:{de:"Nur meine Freunde",en:"Only my friends",es:"Solo mis amigos",fr:"Seulement mes amis",pt:"Apenas meus amigos"},description:{de:"Fremde sehen dich nicht",en:"Strangers can't see you",es:"Los extraos no pueden verte",fr:"Les inconnus ne te voient pas",pt:"Estranhos no podem te ver"},hint:{de:"Nur deine Freunde sehen dich. Exklusivclub.",en:"Only your friends see you. Exclusive club.",es:"Solo tus amigos te ven. Club exclusivo.",fr:"Seuls tes amis te voient. Club exclusif.",pt:"S seus amigos te veem. Clube exclusivo."}},ghost:{title:{de:"Niemand (Ghost Mode) ",en:"Nobody (Ghost Mode) ",es:"Nadie (Modo Fantasma) ",fr:"Personne (Mode Fantme) ",pt:"Ningum (Modo Fantasma) "},description:{de:"Du bist komplett unsichtbar",en:"You're completely invisible",es:"Eres completamente invisible",fr:"Tu es compltement invisible",pt:"Voc est completamente invisvel"},hint:{de:"Ghost Mode aktiv. Du existierst nicht. Sehr dramatisch.",en:"Ghost Mode active. You don't exist. Very dramatic.",es:"Modo Fantasma activo. No existes. Muy dramtico.",fr:"Mode Fantme actif. Tu n'existes pas. Trs dramatique.",pt:"Modo Fantasma ativo. Voc no existe. Muito dramtico."}}},friendRadar:{title:{de:"Friend-Radar",en:"Friend Radar",es:"Radar de Amigos",fr:"Radar Amis",pt:"Radar de Amigos"},description:{de:"Benachrichtigung im 10km Radius",en:"Notification within 10km radius",es:"Notificacin en radio de 10km",fr:"Notification dans un rayon de 10km",pt:"Notificao em raio de 10km"},notification:{de:"{name} ist im 10km-Radius. Keine Sorge, er kann dich nicht hren  es sei denn, du willst es.",en:"{name} is within 10km. Don't worry, they can't hear you  unless you want them to.",es:"{name} est a 10km. No te preocupes, no pueden orte  a menos que quieras.",fr:"{name} est  10km. T'inquite, ils ne peuvent pas t'entendre  sauf si tu le veux.",pt:"{name} est a 10km. No se preocupe, eles no podem te ouvir  a menos que voc queira."},enabled:{de:"Friend-Radar aktiv",en:"Friend Radar active",es:"Radar de Amigos activo",fr:"Radar Amis actif",pt:"Radar de Amigos ativo"},disabled:{de:"Friend-Radar aus. Du willst also berrascht werden? Mutig.",en:"Friend Radar off. So you want to be surprised? Bold.",es:"Radar de Amigos apagado. Quieres sorpresas? Valiente.",fr:"Radar Amis dsactiv. Tu veux tre surpris? Audacieux.",pt:"Radar de Amigos desligado. Quer ser surpreendido? Corajoso."}},radius:{title:{de:"Suchradius",en:"Search Radius",es:"Radio de Bsqueda",fr:"Rayon de Recherche",pt:"Raio de Busca"},description:{de:"Wie weit siehst du andere?",en:"How far can you see others?",es:"Qu tan lejos puedes ver a otros?",fr:" quelle distance peux-tu voir les autres?",pt:"At onde voc pode ver os outros?"},hint:{max:{de:"Maximale Reichweite. Viel Spa mit dem Chaos.",en:"Maximum range. Have fun with the chaos.",es:"Alcance mximo. Divirtete con el caos.",fr:"Porte maximale. Amuse-toi avec le chaos.",pt:"Alcance mximo. Divirta-se com o caos."},min:{de:"Nur die Nchsten. Sehr... intim.",en:"Only the closest. Very... intimate.",es:"Solo los ms cercanos. Muy... ntimo.",fr:"Seulement les plus proches. Trs... intime.",pt:"Apenas os mais prximos. Muito... ntimo."},default:{de:"Sollte reichen.",en:"Should be enough.",es:"Debera ser suficiente.",fr:"a devrait suffire.",pt:"Deve ser suficiente."}},error:{de:"Nett versucht, aber die Physik lsst sich nicht austricksen. Wir kalibrieren den Radius neu.",en:"Nice try, but you can't trick physics. We're recalibrating the radius.",es:"Buen intento, pero no puedes engaar a la fsica. Recalibrando el radio.",fr:"Bien essay, mais tu ne peux pas tromper la physique. On recalibre le rayon.",pt:"Boa tentativa, mas voc no pode enganar a fsica. Recalibrando o raio."}},premium:{title:{de:"CATALYST",en:"CATALYST",es:"CATALYST",fr:"CATALYST",pt:"CATALYST"},upsell:{de:"Hr auf zu schleichen. Hol dir den Catalyst und sieh genau, wer in deiner Nhe ist, bevor sie dich sehen.",en:"Stop lurking. Get Catalyst and see exactly who is near you before they see you.",es:"Deja de acechar. Obtn Catalyst y ve exactamente quin est cerca antes de que te vean.",fr:"Arrte de rder. Prends Catalyst et vois exactement qui est prs de toi avant qu'ils te voient.",pt:"Pare de espreitar. Obtenha o Catalyst e veja exatamente quem est perto antes que te vejam."},upgrade:{de:"Jetzt upgraden",en:"Upgrade now",es:"Actualizar ahora",fr:"Mettre  niveau",pt:"Atualizar agora"},features:{xpBoost:{de:"1.5x XP Boost  permanent",en:"1.5x XP Boost  permanent",es:"1.5x Bonus de XP  permanente",fr:"1.5x Bonus XP  permanent",pt:"1.5x Bnus de XP  permanente"},exactDistance:{de:"Meter-genaue Distanzanzeige",en:"Meter-precise distance display",es:"Distancia precisa en metros",fr:"Distance prcise au mtre",pt:"Distncia precisa em metros"},profileStalker:{de:"Sieh wer dein Profil besucht",en:"See who viewed your profile",es:"Ve quin visit tu perfil",fr:"Vois qui a visit ton profil",pt:"Veja quem visitou seu perfil"},priorityListing:{de:"Immer oben in der Liste",en:"Always at the top of the list",es:"Siempre arriba en la lista",fr:"Toujours en haut de la liste",pt:"Sempre no topo da lista"}}},settings:{title:{de:"Einstellungen",en:"Settings",es:"Configuracin",fr:"Paramtres",pt:"Configuraes"},blockedUsers:{de:"Blockierte Nutzer",en:"Blocked Users",es:"Usuarios Bloqueados",fr:"Utilisateurs Bloqus",pt:"Usurios Bloqueados"},myStats:{de:"Meine Statistiken",en:"My Statistics",es:"Mis Estadsticas",fr:"Mes Statistiques",pt:"Minhas Estatsticas"},notifications:{de:"Benachrichtigungen",en:"Notifications",es:"Notificaciones",fr:"Notifications",pt:"Notificaes"},appDesign:{de:"App-Design",en:"App Design",es:"Diseo de la App",fr:"Design de l'App",pt:"Design do App"},language:{de:"Sprache",en:"Language",es:"Idioma",fr:"Langue",pt:"Idioma"},help:{de:"Hilfe & FAQ",en:"Help & FAQ",es:"Ayuda y FAQ",fr:"Aide et FAQ",pt:"Ajuda e FAQ"}},moderation:{shadowMuted:{de:"Deine Vibes sind gerade ziemlich toxic. Wir haben dich mal kurz stummgeschaltet, damit die anderen in Ruhe weiterreden knnen. Atme mal tief durch.",en:"Your vibes are pretty toxic right now. We've muted you for a bit so others can chat in peace. Take a deep breath.",es:"Tus vibes son bastante txicas ahora. Te silenciamos un rato para que otros puedan charlar en paz. Respira hondo.",fr:"Tes vibes sont assez toxiques l. On t'a mis en sourdine pour que les autres puissent discuter tranquilles. Respire un coup.",pt:"Suas vibes esto bem txicas agora. Te silenciamos um pouco para os outros conversarem em paz. Respire fundo."},tempBanned:{de:"OK, das war's erstmal fr dich. Du bist fr {hours}h auf Eis gelegt. Nutz die Zeit, um ber deine Lebensentscheidungen nachzudenken.",en:"OK, that's it for now. You're on ice for {hours}h. Use the time to reflect on your life choices.",es:"OK, eso es todo por ahora. Ests en hielo por {hours}h. Usa el tiempo para reflexionar sobre tus decisiones de vida.",fr:"OK, c'est fini pour l'instant. Tu es sur glace pour {hours}h. Profite pour rflchir  tes choix de vie.",pt:"OK,  isso por agora. Voc est no gelo por {hours}h. Use o tempo para refletir sobre suas escolhas de vida."},warning:{de:"Heads up: Noch ein Ausrutscher und du landest auf der Bank. Deine Entscheidung.",en:"Heads up: One more slip and you're benched. Your call.",es:"Aviso: Un error ms y ests en la banca. Tu decisin.",fr:"Attention: Un faux pas de plus et tu es sur le banc.  toi de voir.",pt:"Aviso: Mais um deslize e voc vai pro banco. Sua deciso."}},errors:{generic:{de:"Irgendwas ist schiefgelaufen. Wahrscheinlich nicht deine Schuld. Wahrscheinlich.",en:"Something went wrong. Probably not your fault. Probably.",es:"Algo sali mal. Probablemente no es tu culpa. Probablemente.",fr:"Quelque chose s'est mal pass. Probablement pas ta faute. Probablement.",pt:"Algo deu errado. Provavelmente no  sua culpa. Provavelmente."},network:{de:"Keine Verbindung. Das Internet hat dich verlassen, nicht wir.",en:"No connection. The internet left you, not us.",es:"Sin conexin. Internet te dej, no nosotros.",fr:"Pas de connexion. Internet t'a quitt, pas nous.",pt:"Sem conexo. A internet te deixou, no ns."},location:{de:"GPS-Signal verloren. Vielleicht stehst du in einem Bunker?",en:"GPS signal lost. Maybe you're in a bunker?",es:"Seal GPS perdida. Quizs ests en un bnker?",fr:"Signal GPS perdu. T'es peut-tre dans un bunker?",pt:"Sinal GPS perdido. Talvez voc esteja em um bunker?"}},empty:{friends:{de:"Noch keine Freunde. Das lsst sich ndern  geh raus und quatsch Leute an.",en:"No friends yet. That can change  go out and talk to people.",es:"An sin amigos. Eso puede cambiar  sal y habla con la gente.",fr:"Pas encore d'amis. a peut changer  sors et parle aux gens.",pt:"Ainda sem amigos. Isso pode mudar  saia e fale com as pessoas."},nearbyUsers:{de:"Niemand in Reichweite. Entweder bist du allein, oder alle verstecken sich vor dir.",en:"No one in range. Either you're alone, or everyone's hiding from you.",es:"Nadie en rango. O ests solo, o todos se esconden de ti.",fr:"Personne  porte. Soit t'es seul, soit tout le monde se cache de toi.",pt:"Ningum no alcance. Ou voc est sozinho, ou todos esto se escondendo de voc."},messages:{de:"Keine Nachrichten. Die Stille ist ohrenbetubend.",en:"No messages. The silence is deafening.",es:"Sin mensajes. El silencio es ensordecedor.",fr:"Pas de messages. Le silence est assourdissant.",pt:"Sem mensagens. O silncio  ensurdecedor."}},avatar:{title:{de:"Whle deinen Avatar",en:"Choose your avatar",es:"Elige tu avatar",fr:"Choisis ton avatar",pt:"Escolha seu avatar"},subtitle:{de:"Dein Avatar wird anderen angezeigt",en:"Your avatar will be shown to others",es:"Tu avatar se mostrar a otros",fr:"Ton avatar sera montr aux autres",pt:"Seu avatar ser mostrado aos outros"},selected:{de:"Ausgewhlt",en:"Selected",es:"Seleccionado",fr:"Slectionn",pt:"Selecionado"}},trust:{trusted:{de:"TRUSTED",en:"TRUSTED",es:"CONFIABLE",fr:"FIABLE",pt:"CONFIVEL"},reliable:{de:"RELIABLE",en:"RELIABLE",es:"FIABLE",fr:"SRIEUX",pt:"CONFIVEL"},neutral:{de:"NEUTRAL",en:"NEUTRAL",es:"NEUTRAL",fr:"NEUTRE",pt:"NEUTRO"},caution:{de:"VORSICHT",en:"CAUTION",es:"PRECAUCIN",fr:"ATTENTION",pt:"CUIDADO"}}};function h_(){const{language:t,setLanguage:e}=mr(),n=_.useCallback((s,a)=>{const o=s.split(".");let c=uX;for(const u of o)if(c&&typeof c=="object"&&u in c)c=c[u];else return console.warn(`Translation not found: ${s}`),s;if(c&&typeof c=="object"&&t in c){let u=c[t];return a&&Object.entries(a).forEach(([h,m])=>{u=u.replace(new RegExp(`{${h}}`,"g"),String(m))}),u}return console.warn(`Translation not found for language ${t}: ${s}`),s},[t]),r=_.useCallback(s=>{e(s),localStorage.setItem("synclulu-language",s)},[e]);return{t:n,language:t,setLanguage:r,languages:Mc,currentLanguage:Mc[t]}}const dX=({className:t="",size:e=200})=>i.jsxs("svg",{width:e,height:e*1.3,viewBox:"0 0 200 260",className:t,children:[i.jsx("ellipse",{cx:"100",cy:"20",rx:"45",ry:"8",fill:"none",stroke:"url(#haloGradient)",strokeWidth:"3",opacity:"0.8"}),i.jsx("ellipse",{cx:"100",cy:"75",rx:"40",ry:"35",fill:"url(#hairGradient)"}),i.jsx("circle",{cx:"70",cy:"60",r:"15",fill:"url(#hairGradient)"}),i.jsx("circle",{cx:"130",cy:"60",r:"15",fill:"url(#hairGradient)"}),i.jsx("circle",{cx:"60",cy:"80",r:"12",fill:"url(#hairGradient)"}),i.jsx("circle",{cx:"140",cy:"80",r:"12",fill:"url(#hairGradient)"}),i.jsx("ellipse",{cx:"100",cy:"45",rx:"35",ry:"10",fill:"white",stroke:"#2d3748",strokeWidth:"2"}),i.jsx("rect",{x:"70",y:"35",width:"60",height:"12",fill:"white",stroke:"#2d3748",strokeWidth:"2"}),i.jsx("text",{x:"100",y:"46",textAnchor:"middle",fontSize:"10",fill:"#4a5568",children:""}),i.jsx("ellipse",{cx:"100",cy:"95",rx:"35",ry:"32",fill:"#fce4c4"}),i.jsx("ellipse",{cx:"85",cy:"90",rx:"8",ry:"10",fill:"white"}),i.jsx("ellipse",{cx:"115",cy:"90",rx:"8",ry:"10",fill:"white"}),i.jsx("circle",{cx:"85",cy:"92",r:"5",fill:"#2d3748"}),i.jsx("circle",{cx:"115",cy:"92",r:"5",fill:"#2d3748"}),i.jsx("circle",{cx:"87",cy:"90",r:"2",fill:"white"}),i.jsx("circle",{cx:"117",cy:"90",r:"2",fill:"white"}),i.jsx("path",{d:"M75 82 Q85 78 92 82",fill:"none",stroke:"#2d3748",strokeWidth:"2"}),i.jsx("path",{d:"M108 82 Q115 78 125 82",fill:"none",stroke:"#2d3748",strokeWidth:"2"}),i.jsx("path",{d:"M92 108 Q100 105 108 108",fill:"none",stroke:"#2d3748",strokeWidth:"2"}),i.jsx("path",{d:"M65 130 Q60 160 65 200 L135 200 Q140 160 135 130 Z",fill:"#2d3748"}),i.jsx("path",{d:"M70 130 L100 155 L130 130",fill:"none",stroke:"#5a7fa8",strokeWidth:"3"}),i.jsx("rect",{x:"75",y:"125",width:"50",height:"15",fill:"#2d3748"}),i.jsx("path",{d:"M95 145 L100 165 L105 145 Z",fill:"#a8d5e5"}),i.jsx("circle",{cx:"100",cy:"142",r:"5",fill:"#a8d5e5"}),i.jsx("rect",{x:"60",y:"175",width:"20",height:"3",fill:"#5a7fa8"}),i.jsx("rect",{x:"60",y:"180",width:"20",height:"3",fill:"#5a7fa8"}),i.jsx("rect",{x:"120",y:"175",width:"20",height:"3",fill:"#5a7fa8"}),i.jsx("rect",{x:"120",y:"180",width:"20",height:"3",fill:"#5a7fa8"}),i.jsx("rect",{x:"50",y:"140",width:"18",height:"50",rx:"8",fill:"#2d3748"}),i.jsx("rect",{x:"132",y:"140",width:"18",height:"50",rx:"8",fill:"#2d3748"}),i.jsx("ellipse",{cx:"59",cy:"192",rx:"10",ry:"8",fill:"#fce4c4"}),i.jsx("ellipse",{cx:"141",cy:"192",rx:"10",ry:"8",fill:"#fce4c4"}),i.jsx("rect",{x:"75",y:"200",width:"20",height:"40",fill:"#2d3748"}),i.jsx("rect",{x:"105",y:"200",width:"20",height:"40",fill:"#2d3748"}),i.jsx("ellipse",{cx:"85",cy:"245",rx:"15",ry:"8",fill:"#1a202c"}),i.jsx("ellipse",{cx:"115",cy:"245",rx:"15",ry:"8",fill:"#1a202c"}),i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"haloGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#a8edea"}),i.jsx("stop",{offset:"50%",stopColor:"#e8d5f2"}),i.jsx("stop",{offset:"100%",stopColor:"#a8edea"})]}),i.jsxs("linearGradient",{id:"hairGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"#a8edea"}),i.jsx("stop",{offset:"50%",stopColor:"#d4b8e8"}),i.jsx("stop",{offset:"100%",stopColor:"#f5d0e8"})]})]})]}),gb=({className:t="",size:e=200})=>i.jsxs("svg",{width:e,height:e,viewBox:"0 0 200 200",className:t,children:[i.jsx("ellipse",{cx:"100",cy:"15",rx:"40",ry:"7",fill:"none",stroke:"url(#pegasusHalo)",strokeWidth:"3",opacity:"0.8"}),i.jsx("g",{transform:"translate(10, 80)",children:i.jsx("path",{d:"M50 30 Q30 10 10 25 Q25 20 35 30 Q20 15 5 35 Q25 25 40 40 Q30 30 20 50 Q35 35 50 50 Z",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"})}),i.jsx("g",{transform:"translate(140, 80) scale(-1, 1)",children:i.jsx("path",{d:"M50 30 Q30 10 10 25 Q25 20 35 30 Q20 15 5 35 Q25 25 40 40 Q30 30 20 50 Q35 35 50 50 Z",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"})}),i.jsx("ellipse",{cx:"100",cy:"120",rx:"35",ry:"30",fill:"white",stroke:"#e2e8f0",strokeWidth:"2"}),i.jsx("path",{d:"M70 100 Q70 130 75 145 L125 145 Q130 130 130 100 Z",fill:"#7dd3fc"}),i.jsx("ellipse",{cx:"100",cy:"65",rx:"28",ry:"25",fill:"white",stroke:"#e2e8f0",strokeWidth:"2"}),i.jsx("ellipse",{cx:"78",cy:"45",rx:"8",ry:"12",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"}),i.jsx("ellipse",{cx:"78",cy:"45",rx:"4",ry:"8",fill:"#fce7f3"}),i.jsx("ellipse",{cx:"122",cy:"45",rx:"8",ry:"12",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"}),i.jsx("ellipse",{cx:"122",cy:"45",rx:"4",ry:"8",fill:"#fce7f3"}),i.jsx("path",{d:"M85 35 Q95 25 100 35 Q105 25 115 35",fill:"none",stroke:"white",strokeWidth:"8"}),i.jsx("circle",{cx:"88",cy:"62",r:"12",fill:"none",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("circle",{cx:"112",cy:"62",r:"12",fill:"none",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("line",{x1:"100",y1:"62",x2:"100",y2:"62",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("line",{x1:"76",y1:"60",x2:"70",y2:"55",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("line",{x1:"124",y1:"60",x2:"130",y2:"55",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("circle",{cx:"88",cy:"62",r:"6",fill:"#1a202c"}),i.jsx("circle",{cx:"112",cy:"62",r:"6",fill:"#1a202c"}),i.jsx("circle",{cx:"90",cy:"60",r:"2",fill:"white"}),i.jsx("circle",{cx:"114",cy:"60",r:"2",fill:"white"}),i.jsx("ellipse",{cx:"100",cy:"75",rx:"8",ry:"5",fill:"#fce7f3"}),i.jsx("circle",{cx:"96",cy:"74",r:"2",fill:"#d1d5db"}),i.jsx("circle",{cx:"104",cy:"74",r:"2",fill:"#d1d5db"}),i.jsx("path",{d:"M92 82 Q100 88 108 82",fill:"none",stroke:"#4a5568",strokeWidth:"2"}),i.jsx("rect",{x:"80",y:"145",width:"12",height:"35",rx:"6",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"}),i.jsx("rect",{x:"108",y:"145",width:"12",height:"35",rx:"6",fill:"white",stroke:"#e2e8f0",strokeWidth:"1"}),i.jsx("ellipse",{cx:"86",cy:"182",rx:"8",ry:"5",fill:"#1a202c"}),i.jsx("ellipse",{cx:"114",cy:"182",rx:"8",ry:"5",fill:"#1a202c"}),i.jsx("path",{d:"M130 130 Q150 140 145 160 Q140 150 135 155 Q145 145 140 165",fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"pegasusHalo",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#a8edea"}),i.jsx("stop",{offset:"50%",stopColor:"#d4b8e8"}),i.jsx("stop",{offset:"100%",stopColor:"#a8edea"})]})})]}),hX=({className:t="",size:e=200})=>i.jsxs("svg",{width:e,height:e*1.3,viewBox:"0 0 200 260",className:t,children:[i.jsx("ellipse",{cx:"100",cy:"15",rx:"45",ry:"8",fill:"none",stroke:"url(#girlHalo)",strokeWidth:"3",opacity:"0.8"}),i.jsx("ellipse",{cx:"100",cy:"70",rx:"55",ry:"50",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"55",cy:"55",r:"20",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"145",cy:"55",r:"20",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"45",cy:"80",r:"18",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"155",cy:"80",r:"18",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"50",cy:"110",r:"15",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"150",cy:"110",r:"15",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"60",cy:"130",r:"12",fill:"url(#girlHairGradient)"}),i.jsx("circle",{cx:"140",cy:"130",r:"12",fill:"url(#girlHairGradient)"}),i.jsx("ellipse",{cx:"100",cy:"90",rx:"35",ry:"38",fill:"#fce4c4"}),i.jsx("ellipse",{cx:"82",cy:"85",rx:"12",ry:"14",fill:"white"}),i.jsx("ellipse",{cx:"118",cy:"85",rx:"12",ry:"14",fill:"white"}),i.jsx("circle",{cx:"82",cy:"88",r:"8",fill:"#4a5568"}),i.jsx("circle",{cx:"118",cy:"88",r:"8",fill:"#4a5568"}),i.jsx("circle",{cx:"85",cy:"85",r:"3",fill:"white"}),i.jsx("circle",{cx:"121",cy:"85",r:"3",fill:"white"}),i.jsx("path",{d:"M70 72 Q82 68 90 72",fill:"none",stroke:"#9ca3af",strokeWidth:"2"}),i.jsx("path",{d:"M110 72 Q118 68 130 72",fill:"none",stroke:"#9ca3af",strokeWidth:"2"}),i.jsx("ellipse",{cx:"100",cy:"98",rx:"3",ry:"2",fill:"#e8c4a8"}),i.jsx("ellipse",{cx:"100",cy:"110",rx:"6",ry:"4",fill:"#f5a5a5"}),i.jsx("path",{d:"M94 108 Q100 106 106 108",fill:"none",stroke:"#e88a8a",strokeWidth:"1"}),i.jsx("path",{d:"M75 140 L100 160 L125 140",fill:"white"}),i.jsx("circle",{cx:"100",cy:"148",r:"4",fill:"#a8edea"}),i.jsx("path",{d:"M88 152 L100 158 L88 164 Z",fill:"#a8edea"}),i.jsx("path",{d:"M112 152 L100 158 L112 164 Z",fill:"#a8edea"}),i.jsx("circle",{cx:"100",cy:"158",r:"3",fill:"#7dd3fc"}),i.jsx("path",{d:"M70 145 Q55 200 65 240 L135 240 Q145 200 130 145 Z",fill:"#2d3748"}),i.jsx("path",{d:"M70 145 Q100 155 130 145 L125 160 Q100 165 75 160 Z",fill:"#2d3748"}),i.jsx("path",{d:"M55 155 Q45 180 50 200",fill:"none",stroke:"#2d3748",strokeWidth:"18",strokeLinecap:"round"}),i.jsx("path",{d:"M145 155 Q155 180 150 200",fill:"none",stroke:"#2d3748",strokeWidth:"18",strokeLinecap:"round"}),i.jsx("ellipse",{cx:"50",cy:"205",rx:"10",ry:"8",fill:"#fce4c4"}),i.jsx("ellipse",{cx:"150",cy:"205",rx:"10",ry:"8",fill:"#fce4c4"}),i.jsx("rect",{x:"80",y:"235",width:"15",height:"15",fill:"#fce4c4"}),i.jsx("rect",{x:"105",y:"235",width:"15",height:"15",fill:"#fce4c4"}),i.jsx("ellipse",{cx:"87",cy:"252",rx:"12",ry:"6",fill:"#2d3748"}),i.jsx("ellipse",{cx:"113",cy:"252",rx:"12",ry:"6",fill:"#2d3748"}),i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"girlHalo",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#a8edea"}),i.jsx("stop",{offset:"50%",stopColor:"#e8d5f2"}),i.jsx("stop",{offset:"100%",stopColor:"#a8edea"})]}),i.jsxs("linearGradient",{id:"girlHairGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"#a8edea"}),i.jsx("stop",{offset:"30%",stopColor:"#c4b5e8"}),i.jsx("stop",{offset:"70%",stopColor:"#e8c5d8"}),i.jsx("stop",{offset:"100%",stopColor:"#a8edea"})]})]})]}),uh=({children:t,className:e="",delay:n=0})=>i.jsx("div",{className:`animate-bounce ${e}`,style:{animationDuration:"3s",animationDelay:`${n}s`,animationTimingFunction:"ease-in-out"},children:t}),fX=()=>{const{language:t,setLanguage:e,languages:n}=h_(),[r,s]=_.useState(!1);_.useEffect(()=>{const c=localStorage.getItem("synclulu-language");c&&["de","en","es","fr","pt"].includes(c)&&e(c)},[]);const a={de:{tagline:"Connect in the Clouds",subtitle:"Echte Begegnungen in deiner Nachbarschaft.",highlight:"Hyperlokal. Anonym. Algorithmus-frei.",start:"Jetzt starten",login:"Ich habe schon einen Account",radius:"Max 500m Radius",mode:"Anonym oder Offen",privacy:"Privacy First"},en:{tagline:"Connect in the Clouds",subtitle:"Real connections in your neighborhood.",highlight:"Hyperlocal. Anonymous. Algorithm-free.",start:"Get Started",login:"I already have an account",radius:"Max 500m Radius",mode:"Anonymous or Public",privacy:"Privacy First"},es:{tagline:"Conecta en las Nubes",subtitle:"Encuentros reales en tu vecindario.",highlight:"Hiperlocal. Annimo. Sin algoritmos.",start:"Comenzar",login:"Ya tengo una cuenta",radius:"Radio mx. 500m",mode:"Annimo o Pblico",privacy:"Privacidad Primero"},fr:{tagline:"Connectez dans les Nuages",subtitle:"De vraies rencontres dans votre quartier.",highlight:"Hyperlocal. Anonyme. Sans algorithme.",start:"Commencer",login:"J'ai dj un compte",radius:"Rayon max. 500m",mode:"Anonyme ou Public",privacy:"Confidentialit"},pt:{tagline:"Conecte nas Nuvens",subtitle:"Encontros reais no seu bairro.",highlight:"Hiperlocal. Annimo. Sem algoritmos.",start:"Comear",login:"J tenho uma conta",radius:"Raio mx. 500m",mode:"Annimo ou Pblico",privacy:"Privacidade"}},o=a[t]||a.de;return i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-b from-violet-50 via-white to-purple-50 flex flex-col items-center justify-center px-6 py-12 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-10 right-10 w-72 h-72 bg-gradient-to-br from-violet-300/30 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-20 left-5 w-64 h-64 bg-gradient-to-tr from-pink-300/25 to-violet-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/3 left-1/4 w-48 h-48 bg-gradient-to-r from-blue-200/20 to-purple-200/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}}),i.jsx("div",{className:"absolute top-20 left-10 text-4xl opacity-20 animate-bounce",style:{animationDuration:"3s"},children:""}),i.jsx("div",{className:"absolute top-40 right-20 text-3xl opacity-15 animate-bounce",style:{animationDuration:"4s",animationDelay:"0.5s"},children:""}),i.jsx("div",{className:"absolute bottom-40 left-20 text-2xl opacity-10 animate-bounce",style:{animationDuration:"3.5s",animationDelay:"1s"},children:""}),i.jsx("div",{className:"absolute bottom-10 left-4 opacity-40 hidden sm:block",children:i.jsx(uh,{delay:.5,children:i.jsx(hX,{size:100})})})]}),i.jsxs("div",{className:"absolute top-6 right-6 z-20",children:[i.jsxs("button",{onClick:()=>s(!r),className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all",children:[i.jsx("span",{className:"text-lg",children:n[t].flag}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:n[t].native}),i.jsx(o_,{size:16,className:`text-gray-400 transition-transform ${r?"rotate-180":""}`})]}),r&&i.jsx("div",{className:"absolute top-full right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden min-w-[180px] animate-fade-in",children:Object.entries(n).map(([c,u])=>i.jsxs("button",{onClick:()=>{e(c),s(!1)},className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-violet-50 transition-colors ${t===c?"bg-violet-100":""}`,children:[i.jsx("span",{className:"text-xl",children:u.flag}),i.jsx("span",{className:"font-medium text-gray-800",children:u.native}),t===c&&i.jsx("span",{className:"ml-auto text-violet-600",children:""})]},c))})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-sm",children:[i.jsxs("div",{className:"relative mb-10",children:[i.jsx("div",{className:"absolute inset-0 w-32 h-32 mx-auto bg-violet-400/40 rounded-3xl blur-2xl"}),i.jsx("div",{className:"relative w-32 h-32 mx-auto rounded-3xl bg-gradient-to-br from-violet-500 via-purple-500 to-violet-600 flex items-center justify-center shadow-2xl shadow-violet-500/30",children:i.jsx("span",{className:"text-6xl drop-shadow-lg",children:""})})]}),i.jsx("h1",{className:"font-display text-6xl font-bold mb-3 tracking-tight",children:i.jsx("span",{className:"bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 bg-clip-text text-transparent",children:"synclulu"})}),i.jsx("p",{className:"text-gray-800 text-xl font-display font-semibold mb-3",children:o.tagline}),i.jsxs("p",{className:"text-gray-500 mb-10 leading-relaxed",children:[o.subtitle,i.jsx("br",{}),i.jsx("span",{className:"font-semibold text-gray-700",children:o.highlight})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(is,{to:"/register",className:"block w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white font-display font-bold text-center rounded-2xl shadow-lg shadow-violet-500/30 hover:shadow-xl hover:shadow-violet-500/40 transition-all transform hover:scale-[1.02]",children:o.start}),i.jsx(is,{to:"/login",className:"block w-full py-4 text-violet-600 font-display font-semibold text-center border-2 border-violet-200 rounded-2xl hover:border-violet-400 hover:bg-violet-50 transition-all",children:o.login})]}),i.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-100",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("p",{className:"text-[11px] text-gray-600 font-medium leading-tight",children:o.radius})]}),i.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-100",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("p",{className:"text-[11px] text-gray-600 font-medium leading-tight",children:o.mode})]}),i.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-100",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("p",{className:"text-[11px] text-gray-600 font-medium leading-tight",children:o.privacy})]})]})]}),r&&i.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)})]})},mX=()=>{const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,a]=_.useState(!1),[o,c]=_.useState(""),[u,h]=_.useState(!1),[m,g]=_.useState(!1),[x,v]=_.useState(!1),{signIn:E,signInWithGoogle:j,resetPassword:S}=Bs(),N=yt(),w=async D=>{D.preventDefault(),c(""),h(!0);const F=await E(t,n);F.success?N("/"):c(F.error||"Login fehlgeschlagen"),h(!1)},k=async()=>{c(""),h(!0);const D=await j();D.success?N("/"):c(D.error||"Google Login fehlgeschlagen"),h(!1)},A=async D=>{if(D.preventDefault(),c(""),h(!0),!t){c("Bitte gib deine E-Mail-Adresse ein"),h(!1);return}const F=await S(t);F.success?v(!0):c(F.error||"Fehler beim Zurcksetzen"),h(!1)};return m?i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-[var(--synclulu-bg)] px-6 py-8 safe-top",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:()=>{g(!1),v(!1),c("")},className:"w-10 h-10 rounded-xl bg-[var(--synclulu-card)] flex items-center justify-center shadow-sm",children:i.jsx(gn,{size:20,className:"text-[var(--synclulu-text)]"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-[var(--synclulu-text)]",children:"Passwort vergessen"})]}),x?i.jsxs("div",{className:"glass-card p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4",children:i.jsx(a_,{size:32,className:"text-green-600 dark:text-green-400"})}),i.jsx("h2",{className:"font-display text-xl font-bold text-[var(--synclulu-text)] mb-2",children:"E-Mail gesendet!"}),i.jsxs("p",{className:"text-[var(--synclulu-muted)] mb-6",children:["Wir haben dir eine E-Mail an ",i.jsx("strong",{children:t})," gesendet. Folge dem Link in der E-Mail, um dein Passwort zurckzusetzen."]}),i.jsx("p",{className:"text-sm text-[var(--synclulu-muted)] mb-6",children:"Keine E-Mail erhalten? berprfe deinen Spam-Ordner oder versuche es erneut."}),i.jsx("button",{onClick:()=>{g(!1),v(!1)},className:"btn-primary w-full py-4 text-white font-display font-bold",children:"Zurck zum Login"})]}):i.jsxs("div",{className:"glass-card p-6",children:[i.jsx("p",{className:"text-[var(--synclulu-muted)] mb-6",children:"Gib deine E-Mail-Adresse ein und wir senden dir einen Link zum Zurcksetzen deines Passworts."}),i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[var(--synclulu-muted)] mb-2",children:"E-Mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(wa,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--synclulu-muted)]"}),i.jsx("input",{type:"email",value:t,onChange:D=>e(D.target.value),placeholder:"deine@email.de",required:!0,className:"w-full pl-12 pr-4 py-3 bg-[var(--synclulu-card)] border-2 border-[var(--synclulu-border)] rounded-xl focus:border-[var(--synclulu-violet)] focus:outline-none transition-colors text-[var(--synclulu-text)]"})]})]}),o&&i.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),i.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full py-4 text-white font-display font-bold disabled:opacity-70",children:u?"Wird gesendet...":"Link senden"})]})]})]}):i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-[var(--synclulu-bg)] px-6 py-8 safe-top",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx(is,{to:"/",className:"w-10 h-10 rounded-xl bg-[var(--synclulu-card)] flex items-center justify-center shadow-sm",children:i.jsx(gn,{size:20,className:"text-[var(--synclulu-text)]"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-[var(--synclulu-text)]",children:"Login"})]}),i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(uh,{delay:0,children:i.jsx(gb,{size:100})})}),i.jsx("div",{className:"glass-card p-6 mb-6",children:i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[var(--synclulu-muted)] mb-2",children:"E-Mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(wa,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--synclulu-muted)]"}),i.jsx("input",{type:"email",value:t,onChange:D=>e(D.target.value),placeholder:"deine@email.de",required:!0,className:"w-full pl-12 pr-4 py-3 bg-[var(--synclulu-card)] border-2 border-[var(--synclulu-border)] rounded-xl focus:border-[var(--synclulu-violet)] focus:outline-none transition-colors text-[var(--synclulu-text)]"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-[var(--synclulu-muted)]",children:"Passwort"}),i.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-[var(--synclulu-violet)] font-medium hover:underline",children:"Passwort vergessen?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--synclulu-muted)]"}),i.jsx("input",{type:s?"text":"password",value:n,onChange:D=>r(D.target.value),placeholder:"",required:!0,className:"w-full pl-12 pr-12 py-3 bg-[var(--synclulu-card)] border-2 border-[var(--synclulu-border)] rounded-xl focus:border-[var(--synclulu-violet)] focus:outline-none transition-colors text-[var(--synclulu-text)]"}),i.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--synclulu-muted)]",children:s?i.jsx(ba,{size:18}):i.jsx(Fs,{size:18})})]})]}),o&&i.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),i.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full py-4 text-white font-display font-bold disabled:opacity-70",children:u?"Wird eingeloggt...":"Login"})]})}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 h-px bg-[var(--synclulu-border)]"}),i.jsx("span",{className:"text-sm text-[var(--synclulu-muted)]",children:"oder"}),i.jsx("div",{className:"flex-1 h-px bg-[var(--synclulu-border)]"})]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("button",{onClick:k,disabled:u,className:"w-full py-4 bg-[var(--synclulu-card)] border-2 border-[var(--synclulu-border)] rounded-xl font-medium flex items-center justify-center gap-3 hover:border-[var(--synclulu-violet)] transition-colors disabled:opacity-70 text-[var(--synclulu-text)]",children:[i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Mit Google anmelden"]})}),i.jsxs("p",{className:"text-center text-[var(--synclulu-muted)] mt-8",children:["Noch kein Account?"," ",i.jsx(is,{to:"/register",className:"text-[var(--synclulu-violet)] font-semibold",children:"Registrieren"})]})]})};var Ug={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ug.exports;(function(t,e){(function(){var n,r="4.17.23",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",g=1,x=2,v=4,E=1,j=2,S=1,N=2,w=4,k=8,A=16,D=32,F=64,C=128,T=256,P=512,L=30,z="...",H=800,B=16,Pe=1,we=2,je=3,oe=1/0,K=9007199254740991,te=17976931348623157e292,ue=NaN,Re=4294967295,ge=Re-1,me=Re>>>1,at=[["ary",C],["bind",S],["bindKey",N],["curry",k],["curryRight",A],["flip",P],["partial",D],["partialRight",F],["rearg",T]],jt="[object Arguments]",Xt="[object Array]",Tn="[object AsyncFunction]",Qn="[object Boolean]",Ln="[object Date]",Pr="[object DOMException]",pr="[object Error]",Z="[object Function]",Se="[object GeneratorFunction]",Ee="[object Map]",tt="[object Number]",Qr="[object Null]",nt="[object Object]",Dr="[object Promise]",ql="[object Proxy]",ps="[object RegExp]",Xn="[object Set]",Mi="[object String]",ci="[object Symbol]",gs="[object Undefined]",ui="[object WeakMap]",cn="[object WeakSet]",zt="[object ArrayBuffer]",Xr="[object DataView]",Aa="[object Float32Array]",Ia="[object Float64Array]",Wo="[object Int8Array]",Yr="[object Int16Array]",Ca="[object Int32Array]",Ra="[object Uint8Array]",de="[object Uint8ClampedArray]",Ye="[object Uint16Array]",At="[object Uint32Array]",It=/\b__p \+= '';/g,gr=/\b(__p \+=) '' \+/g,$s=/(__e\(.*?\)|\b__t\)) \+\n'';/g,di=/&(?:amp|lt|gt|quot|#39);/g,Kl=/[&<>"']/g,$u=RegExp(di.source),Li=RegExp(Kl.source),Rf=/<%-([\s\S]+?)%>/g,Ql=/<%([\s\S]+?)%>/g,Wu=/<%=([\s\S]+?)%>/g,Ho=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pf=/^\w*$/,On=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xl=/[\\^$.*+?()[\]{}|]/g,Go=RegExp(Xl.source),Oi=/^\s+/,cx=/\s/,ux=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pa=/\{\n\/\* \[wrapped with (.+)\] \*/,dx=/,? & /,hx=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yl=/[()=,{}\[\]\/\s]/,Df=/\\(\\)?/g,Hu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qo=/\w*$/,hi=/^[-+]0x[0-9a-f]+$/i,Mf=/^0b[01]+$/i,Lf=/^\[object .+?Constructor\]$/,Gu=/^0o[0-7]+$/i,qu=/^(?:0|[1-9]\d*)$/,Of=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ko=/($^)/,fx=/['\n\r\u2028\u2029\\]/g,Vi="\\ud800-\\udfff",Vf="\\u0300-\\u036f",Ku="\\ufe20-\\ufe2f",Qo="\\u20d0-\\u20ff",fi=Vf+Ku+Qo,Jl="\\u2700-\\u27bf",Uf="a-z\\xdf-\\xf6\\xf8-\\xff",Ff="\\xac\\xb1\\xd7\\xf7",zf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bf="\\u2000-\\u206f",Qu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zl="A-Z\\xc0-\\xd6\\xd8-\\xde",Xu="\\ufe0e\\ufe0f",Yu=Ff+zf+Bf+Qu,Ju="[']",mx="["+Vi+"]",Zu="["+Yu+"]",Xo="["+fi+"]",$f="\\d+",Ui="["+Jl+"]",xs="["+Uf+"]",Yo="[^"+Vi+Yu+$f+Jl+Uf+Zl+"]",Da="\\ud83c[\\udffb-\\udfff]",Wf="(?:"+Xo+"|"+Da+")",_t="[^"+Vi+"]",Ma="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",ys="["+Zl+"]",Hf="\\u200d",ed="(?:"+xs+"|"+Yo+")",px="(?:"+ys+"|"+Yo+")",Gf="(?:"+Ju+"(?:d|ll|m|re|s|t|ve))?",qf="(?:"+Ju+"(?:D|LL|M|RE|S|T|VE))?",Kf=Wf+"?",La="["+Xu+"]?",mi="(?:"+Hf+"(?:"+[_t,Ma,Fi].join("|")+")"+La+Kf+")*",Qf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",td=La+Kf+mi,Oa="(?:"+[Ui,Ma,Fi].join("|")+")"+td,gx="(?:"+[_t+Xo+"?",Xo,Ma,Fi,mx].join("|")+")",xx=RegExp(Ju,"g"),yx=RegExp(Xo,"g"),vs=RegExp(Da+"(?="+Da+")|"+gx+td,"g"),vx=RegExp([ys+"?"+xs+"+"+Gf+"(?="+[Zu,ys,"$"].join("|")+")",px+"+"+qf+"(?="+[Zu,ys+ed,"$"].join("|")+")",ys+"?"+ed+"+"+Gf,ys+"+"+qf,Xf,Qf,$f,Oa].join("|"),"g"),bx=RegExp("["+Hf+Vi+fi+Xu+"]"),ec=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yf=-1,ut={};ut[Aa]=ut[Ia]=ut[Wo]=ut[Yr]=ut[Ca]=ut[Ra]=ut[de]=ut[Ye]=ut[At]=!0,ut[jt]=ut[Xt]=ut[zt]=ut[Qn]=ut[Xr]=ut[Ln]=ut[pr]=ut[Z]=ut[Ee]=ut[tt]=ut[nt]=ut[ps]=ut[Xn]=ut[Mi]=ut[ui]=!1;var lt={};lt[jt]=lt[Xt]=lt[zt]=lt[Xr]=lt[Qn]=lt[Ln]=lt[Aa]=lt[Ia]=lt[Wo]=lt[Yr]=lt[Ca]=lt[Ee]=lt[tt]=lt[nt]=lt[ps]=lt[Xn]=lt[Mi]=lt[ci]=lt[Ra]=lt[de]=lt[Ye]=lt[At]=!0,lt[pr]=lt[Z]=lt[ui]=!1;var Jf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},nd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_x=parseFloat,Zf=parseInt,rd=typeof Nd=="object"&&Nd&&Nd.Object===Object&&Nd,em=typeof self=="object"&&self&&self.Object===Object&&self,Yt=rd||em||Function("return this")(),nc=e&&!e.nodeType&&e,Vn=nc&&!0&&t&&!t.nodeType&&t,sd=Vn&&Vn.exports===nc,id=sd&&rd.process,An=function(){try{var G=Vn&&Vn.require&&Vn.require("util").types;return G||id&&id.binding&&id.binding("util")}catch{}}(),ad=An&&An.isArrayBuffer,rc=An&&An.isDate,Jo=An&&An.isMap,od=An&&An.isRegExp,Zo=An&&An.isSet,tm=An&&An.isTypedArray;function Yn(G,ee,X){switch(X.length){case 0:return G.call(ee);case 1:return G.call(ee,X[0]);case 2:return G.call(ee,X[0],X[1]);case 3:return G.call(ee,X[0],X[1],X[2])}return G.apply(ee,X)}function el(G,ee,X,ve){for(var Me=-1,ht=G==null?0:G.length;++Me<ht;){var yn=G[Me];ee(ve,yn,X(yn),G)}return ve}function xr(G,ee){for(var X=-1,ve=G==null?0:G.length;++X<ve&&ee(G[X],X,G)!==!1;);return G}function nm(G,ee){for(var X=G==null?0:G.length;X--&&ee(G[X],X,G)!==!1;);return G}function sc(G,ee){for(var X=-1,ve=G==null?0:G.length;++X<ve;)if(!ee(G[X],X,G))return!1;return!0}function bs(G,ee){for(var X=-1,ve=G==null?0:G.length,Me=0,ht=[];++X<ve;){var yn=G[X];ee(yn,X,G)&&(ht[Me++]=yn)}return ht}function tl(G,ee){var X=G==null?0:G.length;return!!X&&zi(G,ee,0)>-1}function Va(G,ee,X){for(var ve=-1,Me=G==null?0:G.length;++ve<Me;)if(X(ee,G[ve]))return!0;return!1}function Et(G,ee){for(var X=-1,ve=G==null?0:G.length,Me=Array(ve);++X<ve;)Me[X]=ee(G[X],X,G);return Me}function Ws(G,ee){for(var X=-1,ve=ee.length,Me=G.length;++X<ve;)G[Me+X]=ee[X];return G}function Hs(G,ee,X,ve){var Me=-1,ht=G==null?0:G.length;for(ve&&ht&&(X=G[++Me]);++Me<ht;)X=ee(X,G[Me],Me,G);return X}function rm(G,ee,X,ve){var Me=G==null?0:G.length;for(ve&&Me&&(X=G[--Me]);Me--;)X=ee(X,G[Me],Me,G);return X}function ic(G,ee){for(var X=-1,ve=G==null?0:G.length;++X<ve;)if(ee(G[X],X,G))return!0;return!1}var sm=I("length");function im(G){return G.split("")}function ac(G){return G.match(hx)||[]}function Jn(G,ee,X){var ve;return X(G,function(Me,ht,yn){if(ee(Me,ht,yn))return ve=ht,!1}),ve}function nl(G,ee,X,ve){for(var Me=G.length,ht=X+(ve?1:-1);ve?ht--:++ht<Me;)if(ee(G[ht],ht,G))return ht;return-1}function zi(G,ee,X){return ee===ee?gD(G,ee,X):nl(G,f,X)}function Ua(G,ee,X,ve){for(var Me=X-1,ht=G.length;++Me<ht;)if(ve(G[Me],ee))return Me;return-1}function f(G){return G!==G}function y(G,ee){var X=G==null?0:G.length;return X?he(G,ee)/X:ue}function I(G){return function(ee){return ee==null?n:ee[G]}}function V(G){return function(ee){return G==null?n:G[ee]}}function Q(G,ee,X,ve,Me){return Me(G,function(ht,yn,St){X=ve?(ve=!1,ht):ee(X,ht,yn,St)}),X}function Y(G,ee){var X=G.length;for(G.sort(ee);X--;)G[X]=G[X].value;return G}function he(G,ee){for(var X,ve=-1,Me=G.length;++ve<Me;){var ht=ee(G[ve]);ht!==n&&(X=X===n?ht:X+ht)}return X}function dt(G,ee){for(var X=-1,ve=Array(G);++X<G;)ve[X]=ee(X);return ve}function xn(G,ee){return Et(ee,function(X){return[X,G[X]]})}function Je(G){return G&&G.slice(0,Y_(G)+1).replace(Oi,"")}function pt(G){return function(ee){return G(ee)}}function un(G,ee){return Et(ee,function(X){return G[X]})}function ws(G,ee){return G.has(ee)}function Mr(G,ee){for(var X=-1,ve=G.length;++X<ve&&zi(ee,G[X],0)>-1;);return X}function rl(G,ee){for(var X=G.length;X--&&zi(ee,G[X],0)>-1;);return X}function ld(G,ee){for(var X=G.length,ve=0;X--;)G[X]===ee&&++ve;return ve}var cD=V(Jf),uD=V(nd);function dD(G){return"\\"+wx[G]}function hD(G,ee){return G==null?n:G[ee]}function oc(G){return bx.test(G)}function fD(G){return ec.test(G)}function mD(G){for(var ee,X=[];!(ee=G.next()).done;)X.push(ee.value);return X}function Nx(G){var ee=-1,X=Array(G.size);return G.forEach(function(ve,Me){X[++ee]=[Me,ve]}),X}function X_(G,ee){return function(X){return G(ee(X))}}function Fa(G,ee){for(var X=-1,ve=G.length,Me=0,ht=[];++X<ve;){var yn=G[X];(yn===ee||yn===m)&&(G[X]=m,ht[Me++]=X)}return ht}function am(G){var ee=-1,X=Array(G.size);return G.forEach(function(ve){X[++ee]=ve}),X}function pD(G){var ee=-1,X=Array(G.size);return G.forEach(function(ve){X[++ee]=[ve,ve]}),X}function gD(G,ee,X){for(var ve=X-1,Me=G.length;++ve<Me;)if(G[ve]===ee)return ve;return-1}function xD(G,ee,X){for(var ve=X+1;ve--;)if(G[ve]===ee)return ve;return ve}function lc(G){return oc(G)?vD(G):sm(G)}function Gs(G){return oc(G)?bD(G):im(G)}function Y_(G){for(var ee=G.length;ee--&&cx.test(G.charAt(ee)););return ee}var yD=V(Lt);function vD(G){for(var ee=vs.lastIndex=0;vs.test(G);)++ee;return ee}function bD(G){return G.match(vs)||[]}function wD(G){return G.match(vx)||[]}var _D=function G(ee){ee=ee==null?Yt:cc.defaults(Yt.Object(),ee,cc.pick(Yt,tc));var X=ee.Array,ve=ee.Date,Me=ee.Error,ht=ee.Function,yn=ee.Math,St=ee.Object,kx=ee.RegExp,ND=ee.String,_s=ee.TypeError,om=X.prototype,kD=ht.prototype,uc=St.prototype,lm=ee["__core-js_shared__"],cm=kD.toString,gt=uc.hasOwnProperty,jD=0,J_=function(){var l=/[^.]+$/.exec(lm&&lm.keys&&lm.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),um=uc.toString,ED=cm.call(St),SD=Yt._,TD=kx("^"+cm.call(gt).replace(Xl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dm=sd?ee.Buffer:n,za=ee.Symbol,hm=ee.Uint8Array,Z_=dm?dm.allocUnsafe:n,fm=X_(St.getPrototypeOf,St),e5=St.create,t5=uc.propertyIsEnumerable,mm=om.splice,n5=za?za.isConcatSpreadable:n,cd=za?za.iterator:n,sl=za?za.toStringTag:n,pm=function(){try{var l=cl(St,"defineProperty");return l({},"",{}),l}catch{}}(),AD=ee.clearTimeout!==Yt.clearTimeout&&ee.clearTimeout,ID=ve&&ve.now!==Yt.Date.now&&ve.now,CD=ee.setTimeout!==Yt.setTimeout&&ee.setTimeout,gm=yn.ceil,xm=yn.floor,jx=St.getOwnPropertySymbols,RD=dm?dm.isBuffer:n,r5=ee.isFinite,PD=om.join,DD=X_(St.keys,St),vn=yn.max,Zn=yn.min,MD=ve.now,LD=ee.parseInt,s5=yn.random,OD=om.reverse,Ex=cl(ee,"DataView"),ud=cl(ee,"Map"),Sx=cl(ee,"Promise"),dc=cl(ee,"Set"),dd=cl(ee,"WeakMap"),hd=cl(St,"create"),ym=dd&&new dd,hc={},VD=ul(Ex),UD=ul(ud),FD=ul(Sx),zD=ul(dc),BD=ul(dd),vm=za?za.prototype:n,fd=vm?vm.valueOf:n,i5=vm?vm.toString:n;function M(l){if(Jt(l)&&!Fe(l)&&!(l instanceof Qe)){if(l instanceof Ns)return l;if(gt.call(l,"__wrapped__"))return aN(l)}return new Ns(l)}var fc=function(){function l(){}return function(d){if(!Bt(d))return{};if(e5)return e5(d);l.prototype=d;var p=new l;return l.prototype=n,p}}();function bm(){}function Ns(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}M.templateSettings={escape:Rf,evaluate:Ql,interpolate:Wu,variable:"",imports:{_:M}},M.prototype=bm.prototype,M.prototype.constructor=M,Ns.prototype=fc(bm.prototype),Ns.prototype.constructor=Ns;function Qe(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function $D(){var l=new Qe(this.__wrapped__);return l.__actions__=Lr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Lr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Lr(this.__views__),l}function WD(){if(this.__filtered__){var l=new Qe(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function HD(){var l=this.__wrapped__.value(),d=this.__dir__,p=Fe(l),b=d<0,R=p?l.length:0,O=rM(0,R,this.__views__),$=O.start,W=O.end,q=W-$,ne=b?W:$-1,re=this.__iteratees__,ie=re.length,xe=0,ke=Zn(q,this.__takeCount__);if(!p||!b&&R==q&&ke==q)return A5(l,this.__actions__);var Ie=[];e:for(;q--&&xe<ke;){ne+=d;for(var We=-1,Ce=l[ne];++We<ie;){var qe=re[We],Ze=qe.iteratee,es=qe.type,br=Ze(Ce);if(es==we)Ce=br;else if(!br){if(es==Pe)continue e;break e}}Ie[xe++]=Ce}return Ie}Qe.prototype=fc(bm.prototype),Qe.prototype.constructor=Qe;function il(l){var d=-1,p=l==null?0:l.length;for(this.clear();++d<p;){var b=l[d];this.set(b[0],b[1])}}function GD(){this.__data__=hd?hd(null):{},this.size=0}function qD(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function KD(l){var d=this.__data__;if(hd){var p=d[l];return p===u?n:p}return gt.call(d,l)?d[l]:n}function QD(l){var d=this.__data__;return hd?d[l]!==n:gt.call(d,l)}function XD(l,d){var p=this.__data__;return this.size+=this.has(l)?0:1,p[l]=hd&&d===n?u:d,this}il.prototype.clear=GD,il.prototype.delete=qD,il.prototype.get=KD,il.prototype.has=QD,il.prototype.set=XD;function Bi(l){var d=-1,p=l==null?0:l.length;for(this.clear();++d<p;){var b=l[d];this.set(b[0],b[1])}}function YD(){this.__data__=[],this.size=0}function JD(l){var d=this.__data__,p=wm(d,l);if(p<0)return!1;var b=d.length-1;return p==b?d.pop():mm.call(d,p,1),--this.size,!0}function ZD(l){var d=this.__data__,p=wm(d,l);return p<0?n:d[p][1]}function e6(l){return wm(this.__data__,l)>-1}function t6(l,d){var p=this.__data__,b=wm(p,l);return b<0?(++this.size,p.push([l,d])):p[b][1]=d,this}Bi.prototype.clear=YD,Bi.prototype.delete=JD,Bi.prototype.get=ZD,Bi.prototype.has=e6,Bi.prototype.set=t6;function $i(l){var d=-1,p=l==null?0:l.length;for(this.clear();++d<p;){var b=l[d];this.set(b[0],b[1])}}function n6(){this.size=0,this.__data__={hash:new il,map:new(ud||Bi),string:new il}}function r6(l){var d=Pm(this,l).delete(l);return this.size-=d?1:0,d}function s6(l){return Pm(this,l).get(l)}function i6(l){return Pm(this,l).has(l)}function a6(l,d){var p=Pm(this,l),b=p.size;return p.set(l,d),this.size+=p.size==b?0:1,this}$i.prototype.clear=n6,$i.prototype.delete=r6,$i.prototype.get=s6,$i.prototype.has=i6,$i.prototype.set=a6;function al(l){var d=-1,p=l==null?0:l.length;for(this.__data__=new $i;++d<p;)this.add(l[d])}function o6(l){return this.__data__.set(l,u),this}function l6(l){return this.__data__.has(l)}al.prototype.add=al.prototype.push=o6,al.prototype.has=l6;function qs(l){var d=this.__data__=new Bi(l);this.size=d.size}function c6(){this.__data__=new Bi,this.size=0}function u6(l){var d=this.__data__,p=d.delete(l);return this.size=d.size,p}function d6(l){return this.__data__.get(l)}function h6(l){return this.__data__.has(l)}function f6(l,d){var p=this.__data__;if(p instanceof Bi){var b=p.__data__;if(!ud||b.length<s-1)return b.push([l,d]),this.size=++p.size,this;p=this.__data__=new $i(b)}return p.set(l,d),this.size=p.size,this}qs.prototype.clear=c6,qs.prototype.delete=u6,qs.prototype.get=d6,qs.prototype.has=h6,qs.prototype.set=f6;function a5(l,d){var p=Fe(l),b=!p&&dl(l),R=!p&&!b&&Ga(l),O=!p&&!b&&!R&&xc(l),$=p||b||R||O,W=$?dt(l.length,ND):[],q=W.length;for(var ne in l)(d||gt.call(l,ne))&&!($&&(ne=="length"||R&&(ne=="offset"||ne=="parent")||O&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||qi(ne,q)))&&W.push(ne);return W}function o5(l){var d=l.length;return d?l[Vx(0,d-1)]:n}function m6(l,d){return Dm(Lr(l),ol(d,0,l.length))}function p6(l){return Dm(Lr(l))}function Tx(l,d,p){(p!==n&&!Ks(l[d],p)||p===n&&!(d in l))&&Wi(l,d,p)}function md(l,d,p){var b=l[d];(!(gt.call(l,d)&&Ks(b,p))||p===n&&!(d in l))&&Wi(l,d,p)}function wm(l,d){for(var p=l.length;p--;)if(Ks(l[p][0],d))return p;return-1}function g6(l,d,p,b){return Ba(l,function(R,O,$){d(b,R,p(R),$)}),b}function l5(l,d){return l&&gi(d,In(d),l)}function x6(l,d){return l&&gi(d,Vr(d),l)}function Wi(l,d,p){d=="__proto__"&&pm?pm(l,d,{configurable:!0,enumerable:!0,value:p,writable:!0}):l[d]=p}function Ax(l,d){for(var p=-1,b=d.length,R=X(b),O=l==null;++p<b;)R[p]=O?n:cy(l,d[p]);return R}function ol(l,d,p){return l===l&&(p!==n&&(l=l<=p?l:p),d!==n&&(l=l>=d?l:d)),l}function ks(l,d,p,b,R,O){var $,W=d&g,q=d&x,ne=d&v;if(p&&($=R?p(l,b,R,O):p(l)),$!==n)return $;if(!Bt(l))return l;var re=Fe(l);if(re){if($=iM(l),!W)return Lr(l,$)}else{var ie=er(l),xe=ie==Z||ie==Se;if(Ga(l))return R5(l,W);if(ie==nt||ie==jt||xe&&!R){if($=q||xe?{}:Y5(l),!W)return q?K6(l,x6($,l)):q6(l,l5($,l))}else{if(!lt[ie])return R?l:{};$=aM(l,ie,W)}}O||(O=new qs);var ke=O.get(l);if(ke)return ke;O.set(l,$),EN(l)?l.forEach(function(Ce){$.add(ks(Ce,d,p,Ce,l,O))}):kN(l)&&l.forEach(function(Ce,qe){$.set(qe,ks(Ce,d,p,qe,l,O))});var Ie=ne?q?Qx:Kx:q?Vr:In,We=re?n:Ie(l);return xr(We||l,function(Ce,qe){We&&(qe=Ce,Ce=l[qe]),md($,qe,ks(Ce,d,p,qe,l,O))}),$}function y6(l){var d=In(l);return function(p){return c5(p,l,d)}}function c5(l,d,p){var b=p.length;if(l==null)return!b;for(l=St(l);b--;){var R=p[b],O=d[R],$=l[R];if($===n&&!(R in l)||!O($))return!1}return!0}function u5(l,d,p){if(typeof l!="function")throw new _s(o);return wd(function(){l.apply(n,p)},d)}function pd(l,d,p,b){var R=-1,O=tl,$=!0,W=l.length,q=[],ne=d.length;if(!W)return q;p&&(d=Et(d,pt(p))),b?(O=Va,$=!1):d.length>=s&&(O=ws,$=!1,d=new al(d));e:for(;++R<W;){var re=l[R],ie=p==null?re:p(re);if(re=b||re!==0?re:0,$&&ie===ie){for(var xe=ne;xe--;)if(d[xe]===ie)continue e;q.push(re)}else O(d,ie,b)||q.push(re)}return q}var Ba=O5(pi),d5=O5(Cx,!0);function v6(l,d){var p=!0;return Ba(l,function(b,R,O){return p=!!d(b,R,O),p}),p}function _m(l,d,p){for(var b=-1,R=l.length;++b<R;){var O=l[b],$=d(O);if($!=null&&(W===n?$===$&&!Zr($):p($,W)))var W=$,q=O}return q}function b6(l,d,p,b){var R=l.length;for(p=Be(p),p<0&&(p=-p>R?0:R+p),b=b===n||b>R?R:Be(b),b<0&&(b+=R),b=p>b?0:TN(b);p<b;)l[p++]=d;return l}function h5(l,d){var p=[];return Ba(l,function(b,R,O){d(b,R,O)&&p.push(b)}),p}function Un(l,d,p,b,R){var O=-1,$=l.length;for(p||(p=lM),R||(R=[]);++O<$;){var W=l[O];d>0&&p(W)?d>1?Un(W,d-1,p,b,R):Ws(R,W):b||(R[R.length]=W)}return R}var Ix=V5(),f5=V5(!0);function pi(l,d){return l&&Ix(l,d,In)}function Cx(l,d){return l&&f5(l,d,In)}function Nm(l,d){return bs(d,function(p){return Ki(l[p])})}function ll(l,d){d=Wa(d,l);for(var p=0,b=d.length;l!=null&&p<b;)l=l[xi(d[p++])];return p&&p==b?l:n}function m5(l,d,p){var b=d(l);return Fe(l)?b:Ws(b,p(l))}function yr(l){return l==null?l===n?gs:Qr:sl&&sl in St(l)?nM(l):pM(l)}function Rx(l,d){return l>d}function w6(l,d){return l!=null&&gt.call(l,d)}function _6(l,d){return l!=null&&d in St(l)}function N6(l,d,p){return l>=Zn(d,p)&&l<vn(d,p)}function Px(l,d,p){for(var b=p?Va:tl,R=l[0].length,O=l.length,$=O,W=X(O),q=1/0,ne=[];$--;){var re=l[$];$&&d&&(re=Et(re,pt(d))),q=Zn(re.length,q),W[$]=!p&&(d||R>=120&&re.length>=120)?new al($&&re):n}re=l[0];var ie=-1,xe=W[0];e:for(;++ie<R&&ne.length<q;){var ke=re[ie],Ie=d?d(ke):ke;if(ke=p||ke!==0?ke:0,!(xe?ws(xe,Ie):b(ne,Ie,p))){for($=O;--$;){var We=W[$];if(!(We?ws(We,Ie):b(l[$],Ie,p)))continue e}xe&&xe.push(Ie),ne.push(ke)}}return ne}function k6(l,d,p,b){return pi(l,function(R,O,$){d(b,p(R),O,$)}),b}function gd(l,d,p){d=Wa(d,l),l=tN(l,d);var b=l==null?l:l[xi(Es(d))];return b==null?n:Yn(b,l,p)}function p5(l){return Jt(l)&&yr(l)==jt}function j6(l){return Jt(l)&&yr(l)==zt}function E6(l){return Jt(l)&&yr(l)==Ln}function xd(l,d,p,b,R){return l===d?!0:l==null||d==null||!Jt(l)&&!Jt(d)?l!==l&&d!==d:S6(l,d,p,b,xd,R)}function S6(l,d,p,b,R,O){var $=Fe(l),W=Fe(d),q=$?Xt:er(l),ne=W?Xt:er(d);q=q==jt?nt:q,ne=ne==jt?nt:ne;var re=q==nt,ie=ne==nt,xe=q==ne;if(xe&&Ga(l)){if(!Ga(d))return!1;$=!0,re=!1}if(xe&&!re)return O||(O=new qs),$||xc(l)?K5(l,d,p,b,R,O):eM(l,d,q,p,b,R,O);if(!(p&E)){var ke=re&&gt.call(l,"__wrapped__"),Ie=ie&&gt.call(d,"__wrapped__");if(ke||Ie){var We=ke?l.value():l,Ce=Ie?d.value():d;return O||(O=new qs),R(We,Ce,p,b,O)}}return xe?(O||(O=new qs),tM(l,d,p,b,R,O)):!1}function T6(l){return Jt(l)&&er(l)==Ee}function Dx(l,d,p,b){var R=p.length,O=R,$=!b;if(l==null)return!O;for(l=St(l);R--;){var W=p[R];if($&&W[2]?W[1]!==l[W[0]]:!(W[0]in l))return!1}for(;++R<O;){W=p[R];var q=W[0],ne=l[q],re=W[1];if($&&W[2]){if(ne===n&&!(q in l))return!1}else{var ie=new qs;if(b)var xe=b(ne,re,q,l,d,ie);if(!(xe===n?xd(re,ne,E|j,b,ie):xe))return!1}}return!0}function g5(l){if(!Bt(l)||uM(l))return!1;var d=Ki(l)?TD:Lf;return d.test(ul(l))}function A6(l){return Jt(l)&&yr(l)==ps}function I6(l){return Jt(l)&&er(l)==Xn}function C6(l){return Jt(l)&&Fm(l.length)&&!!ut[yr(l)]}function x5(l){return typeof l=="function"?l:l==null?Ur:typeof l=="object"?Fe(l)?b5(l[0],l[1]):v5(l):UN(l)}function Mx(l){if(!bd(l))return DD(l);var d=[];for(var p in St(l))gt.call(l,p)&&p!="constructor"&&d.push(p);return d}function R6(l){if(!Bt(l))return mM(l);var d=bd(l),p=[];for(var b in l)b=="constructor"&&(d||!gt.call(l,b))||p.push(b);return p}function Lx(l,d){return l<d}function y5(l,d){var p=-1,b=Or(l)?X(l.length):[];return Ba(l,function(R,O,$){b[++p]=d(R,O,$)}),b}function v5(l){var d=Yx(l);return d.length==1&&d[0][2]?Z5(d[0][0],d[0][1]):function(p){return p===l||Dx(p,l,d)}}function b5(l,d){return Zx(l)&&J5(d)?Z5(xi(l),d):function(p){var b=cy(p,l);return b===n&&b===d?uy(p,l):xd(d,b,E|j)}}function km(l,d,p,b,R){l!==d&&Ix(d,function(O,$){if(R||(R=new qs),Bt(O))P6(l,d,$,p,km,b,R);else{var W=b?b(ty(l,$),O,$+"",l,d,R):n;W===n&&(W=O),Tx(l,$,W)}},Vr)}function P6(l,d,p,b,R,O,$){var W=ty(l,p),q=ty(d,p),ne=$.get(q);if(ne){Tx(l,p,ne);return}var re=O?O(W,q,p+"",l,d,$):n,ie=re===n;if(ie){var xe=Fe(q),ke=!xe&&Ga(q),Ie=!xe&&!ke&&xc(q);re=q,xe||ke||Ie?Fe(W)?re=W:rn(W)?re=Lr(W):ke?(ie=!1,re=R5(q,!0)):Ie?(ie=!1,re=P5(q,!0)):re=[]:_d(q)||dl(q)?(re=W,dl(W)?re=AN(W):(!Bt(W)||Ki(W))&&(re=Y5(q))):ie=!1}ie&&($.set(q,re),R(re,q,b,O,$),$.delete(q)),Tx(l,p,re)}function w5(l,d){var p=l.length;if(p)return d+=d<0?p:0,qi(d,p)?l[d]:n}function _5(l,d,p){d.length?d=Et(d,function(O){return Fe(O)?function($){return ll($,O.length===1?O[0]:O)}:O}):d=[Ur];var b=-1;d=Et(d,pt(Ae()));var R=y5(l,function(O,$,W){var q=Et(d,function(ne){return ne(O)});return{criteria:q,index:++b,value:O}});return Y(R,function(O,$){return G6(O,$,p)})}function D6(l,d){return N5(l,d,function(p,b){return uy(l,b)})}function N5(l,d,p){for(var b=-1,R=d.length,O={};++b<R;){var $=d[b],W=ll(l,$);p(W,$)&&yd(O,Wa($,l),W)}return O}function M6(l){return function(d){return ll(d,l)}}function Ox(l,d,p,b){var R=b?Ua:zi,O=-1,$=d.length,W=l;for(l===d&&(d=Lr(d)),p&&(W=Et(l,pt(p)));++O<$;)for(var q=0,ne=d[O],re=p?p(ne):ne;(q=R(W,re,q,b))>-1;)W!==l&&mm.call(W,q,1),mm.call(l,q,1);return l}function k5(l,d){for(var p=l?d.length:0,b=p-1;p--;){var R=d[p];if(p==b||R!==O){var O=R;qi(R)?mm.call(l,R,1):zx(l,R)}}return l}function Vx(l,d){return l+xm(s5()*(d-l+1))}function L6(l,d,p,b){for(var R=-1,O=vn(gm((d-l)/(p||1)),0),$=X(O);O--;)$[b?O:++R]=l,l+=p;return $}function Ux(l,d){var p="";if(!l||d<1||d>K)return p;do d%2&&(p+=l),d=xm(d/2),d&&(l+=l);while(d);return p}function He(l,d){return ny(eN(l,d,Ur),l+"")}function O6(l){return o5(yc(l))}function V6(l,d){var p=yc(l);return Dm(p,ol(d,0,p.length))}function yd(l,d,p,b){if(!Bt(l))return l;d=Wa(d,l);for(var R=-1,O=d.length,$=O-1,W=l;W!=null&&++R<O;){var q=xi(d[R]),ne=p;if(q==="__proto__"||q==="constructor"||q==="prototype")return l;if(R!=$){var re=W[q];ne=b?b(re,q,W):n,ne===n&&(ne=Bt(re)?re:qi(d[R+1])?[]:{})}md(W,q,ne),W=W[q]}return l}var j5=ym?function(l,d){return ym.set(l,d),l}:Ur,U6=pm?function(l,d){return pm(l,"toString",{configurable:!0,enumerable:!1,value:hy(d),writable:!0})}:Ur;function F6(l){return Dm(yc(l))}function js(l,d,p){var b=-1,R=l.length;d<0&&(d=-d>R?0:R+d),p=p>R?R:p,p<0&&(p+=R),R=d>p?0:p-d>>>0,d>>>=0;for(var O=X(R);++b<R;)O[b]=l[b+d];return O}function z6(l,d){var p;return Ba(l,function(b,R,O){return p=d(b,R,O),!p}),!!p}function jm(l,d,p){var b=0,R=l==null?b:l.length;if(typeof d=="number"&&d===d&&R<=me){for(;b<R;){var O=b+R>>>1,$=l[O];$!==null&&!Zr($)&&(p?$<=d:$<d)?b=O+1:R=O}return R}return Fx(l,d,Ur,p)}function Fx(l,d,p,b){var R=0,O=l==null?0:l.length;if(O===0)return 0;d=p(d);for(var $=d!==d,W=d===null,q=Zr(d),ne=d===n;R<O;){var re=xm((R+O)/2),ie=p(l[re]),xe=ie!==n,ke=ie===null,Ie=ie===ie,We=Zr(ie);if($)var Ce=b||Ie;else ne?Ce=Ie&&(b||xe):W?Ce=Ie&&xe&&(b||!ke):q?Ce=Ie&&xe&&!ke&&(b||!We):ke||We?Ce=!1:Ce=b?ie<=d:ie<d;Ce?R=re+1:O=re}return Zn(O,ge)}function E5(l,d){for(var p=-1,b=l.length,R=0,O=[];++p<b;){var $=l[p],W=d?d($):$;if(!p||!Ks(W,q)){var q=W;O[R++]=$===0?0:$}}return O}function S5(l){return typeof l=="number"?l:Zr(l)?ue:+l}function Jr(l){if(typeof l=="string")return l;if(Fe(l))return Et(l,Jr)+"";if(Zr(l))return i5?i5.call(l):"";var d=l+"";return d=="0"&&1/l==-oe?"-0":d}function $a(l,d,p){var b=-1,R=tl,O=l.length,$=!0,W=[],q=W;if(p)$=!1,R=Va;else if(O>=s){var ne=d?null:J6(l);if(ne)return am(ne);$=!1,R=ws,q=new al}else q=d?[]:W;e:for(;++b<O;){var re=l[b],ie=d?d(re):re;if(re=p||re!==0?re:0,$&&ie===ie){for(var xe=q.length;xe--;)if(q[xe]===ie)continue e;d&&q.push(ie),W.push(re)}else R(q,ie,p)||(q!==W&&q.push(ie),W.push(re))}return W}function zx(l,d){d=Wa(d,l);var p=-1,b=d.length;if(!b)return!0;for(var R=l==null||typeof l!="object"&&typeof l!="function";++p<b;){var O=d[p];if(typeof O=="string"){if(O==="__proto__"&&!gt.call(l,"__proto__"))return!1;if(O==="constructor"&&p+1<b&&typeof d[p+1]=="string"&&d[p+1]==="prototype"){if(R&&p===0)continue;return!1}}}var $=tN(l,d);return $==null||delete $[xi(Es(d))]}function T5(l,d,p,b){return yd(l,d,p(ll(l,d)),b)}function Em(l,d,p,b){for(var R=l.length,O=b?R:-1;(b?O--:++O<R)&&d(l[O],O,l););return p?js(l,b?0:O,b?O+1:R):js(l,b?O+1:0,b?R:O)}function A5(l,d){var p=l;return p instanceof Qe&&(p=p.value()),Hs(d,function(b,R){return R.func.apply(R.thisArg,Ws([b],R.args))},p)}function Bx(l,d,p){var b=l.length;if(b<2)return b?$a(l[0]):[];for(var R=-1,O=X(b);++R<b;)for(var $=l[R],W=-1;++W<b;)W!=R&&(O[R]=pd(O[R]||$,l[W],d,p));return $a(Un(O,1),d,p)}function I5(l,d,p){for(var b=-1,R=l.length,O=d.length,$={};++b<R;){var W=b<O?d[b]:n;p($,l[b],W)}return $}function $x(l){return rn(l)?l:[]}function Wx(l){return typeof l=="function"?l:Ur}function Wa(l,d){return Fe(l)?l:Zx(l,d)?[l]:iN(xt(l))}var B6=He;function Ha(l,d,p){var b=l.length;return p=p===n?b:p,!d&&p>=b?l:js(l,d,p)}var C5=AD||function(l){return Yt.clearTimeout(l)};function R5(l,d){if(d)return l.slice();var p=l.length,b=Z_?Z_(p):new l.constructor(p);return l.copy(b),b}function Hx(l){var d=new l.constructor(l.byteLength);return new hm(d).set(new hm(l)),d}function $6(l,d){var p=d?Hx(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.byteLength)}function W6(l){var d=new l.constructor(l.source,qo.exec(l));return d.lastIndex=l.lastIndex,d}function H6(l){return fd?St(fd.call(l)):{}}function P5(l,d){var p=d?Hx(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.length)}function D5(l,d){if(l!==d){var p=l!==n,b=l===null,R=l===l,O=Zr(l),$=d!==n,W=d===null,q=d===d,ne=Zr(d);if(!W&&!ne&&!O&&l>d||O&&$&&q&&!W&&!ne||b&&$&&q||!p&&q||!R)return 1;if(!b&&!O&&!ne&&l<d||ne&&p&&R&&!b&&!O||W&&p&&R||!$&&R||!q)return-1}return 0}function G6(l,d,p){for(var b=-1,R=l.criteria,O=d.criteria,$=R.length,W=p.length;++b<$;){var q=D5(R[b],O[b]);if(q){if(b>=W)return q;var ne=p[b];return q*(ne=="desc"?-1:1)}}return l.index-d.index}function M5(l,d,p,b){for(var R=-1,O=l.length,$=p.length,W=-1,q=d.length,ne=vn(O-$,0),re=X(q+ne),ie=!b;++W<q;)re[W]=d[W];for(;++R<$;)(ie||R<O)&&(re[p[R]]=l[R]);for(;ne--;)re[W++]=l[R++];return re}function L5(l,d,p,b){for(var R=-1,O=l.length,$=-1,W=p.length,q=-1,ne=d.length,re=vn(O-W,0),ie=X(re+ne),xe=!b;++R<re;)ie[R]=l[R];for(var ke=R;++q<ne;)ie[ke+q]=d[q];for(;++$<W;)(xe||R<O)&&(ie[ke+p[$]]=l[R++]);return ie}function Lr(l,d){var p=-1,b=l.length;for(d||(d=X(b));++p<b;)d[p]=l[p];return d}function gi(l,d,p,b){var R=!p;p||(p={});for(var O=-1,$=d.length;++O<$;){var W=d[O],q=b?b(p[W],l[W],W,p,l):n;q===n&&(q=l[W]),R?Wi(p,W,q):md(p,W,q)}return p}function q6(l,d){return gi(l,Jx(l),d)}function K6(l,d){return gi(l,Q5(l),d)}function Sm(l,d){return function(p,b){var R=Fe(p)?el:g6,O=d?d():{};return R(p,l,Ae(b,2),O)}}function mc(l){return He(function(d,p){var b=-1,R=p.length,O=R>1?p[R-1]:n,$=R>2?p[2]:n;for(O=l.length>3&&typeof O=="function"?(R--,O):n,$&&vr(p[0],p[1],$)&&(O=R<3?n:O,R=1),d=St(d);++b<R;){var W=p[b];W&&l(d,W,b,O)}return d})}function O5(l,d){return function(p,b){if(p==null)return p;if(!Or(p))return l(p,b);for(var R=p.length,O=d?R:-1,$=St(p);(d?O--:++O<R)&&b($[O],O,$)!==!1;);return p}}function V5(l){return function(d,p,b){for(var R=-1,O=St(d),$=b(d),W=$.length;W--;){var q=$[l?W:++R];if(p(O[q],q,O)===!1)break}return d}}function Q6(l,d,p){var b=d&S,R=vd(l);function O(){var $=this&&this!==Yt&&this instanceof O?R:l;return $.apply(b?p:this,arguments)}return O}function U5(l){return function(d){d=xt(d);var p=oc(d)?Gs(d):n,b=p?p[0]:d.charAt(0),R=p?Ha(p,1).join(""):d.slice(1);return b[l]()+R}}function pc(l){return function(d){return Hs(ON(LN(d).replace(xx,"")),l,"")}}function vd(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var p=fc(l.prototype),b=l.apply(p,d);return Bt(b)?b:p}}function X6(l,d,p){var b=vd(l);function R(){for(var O=arguments.length,$=X(O),W=O,q=gc(R);W--;)$[W]=arguments[W];var ne=O<3&&$[0]!==q&&$[O-1]!==q?[]:Fa($,q);if(O-=ne.length,O<p)return W5(l,d,Tm,R.placeholder,n,$,ne,n,n,p-O);var re=this&&this!==Yt&&this instanceof R?b:l;return Yn(re,this,$)}return R}function F5(l){return function(d,p,b){var R=St(d);if(!Or(d)){var O=Ae(p,3);d=In(d),p=function(W){return O(R[W],W,R)}}var $=l(d,p,b);return $>-1?R[O?d[$]:$]:n}}function z5(l){return Gi(function(d){var p=d.length,b=p,R=Ns.prototype.thru;for(l&&d.reverse();b--;){var O=d[b];if(typeof O!="function")throw new _s(o);if(R&&!$&&Rm(O)=="wrapper")var $=new Ns([],!0)}for(b=$?b:p;++b<p;){O=d[b];var W=Rm(O),q=W=="wrapper"?Xx(O):n;q&&ey(q[0])&&q[1]==(C|k|D|T)&&!q[4].length&&q[9]==1?$=$[Rm(q[0])].apply($,q[3]):$=O.length==1&&ey(O)?$[W]():$.thru(O)}return function(){var ne=arguments,re=ne[0];if($&&ne.length==1&&Fe(re))return $.plant(re).value();for(var ie=0,xe=p?d[ie].apply(this,ne):re;++ie<p;)xe=d[ie].call(this,xe);return xe}})}function Tm(l,d,p,b,R,O,$,W,q,ne){var re=d&C,ie=d&S,xe=d&N,ke=d&(k|A),Ie=d&P,We=xe?n:vd(l);function Ce(){for(var qe=arguments.length,Ze=X(qe),es=qe;es--;)Ze[es]=arguments[es];if(ke)var br=gc(Ce),ts=ld(Ze,br);if(b&&(Ze=M5(Ze,b,R,ke)),O&&(Ze=L5(Ze,O,$,ke)),qe-=ts,ke&&qe<ne){var sn=Fa(Ze,br);return W5(l,d,Tm,Ce.placeholder,p,Ze,sn,W,q,ne-qe)}var Qs=ie?p:this,Xi=xe?Qs[l]:l;return qe=Ze.length,W?Ze=gM(Ze,W):Ie&&qe>1&&Ze.reverse(),re&&q<qe&&(Ze.length=q),this&&this!==Yt&&this instanceof Ce&&(Xi=We||vd(Xi)),Xi.apply(Qs,Ze)}return Ce}function B5(l,d){return function(p,b){return k6(p,l,d(b),{})}}function Am(l,d){return function(p,b){var R;if(p===n&&b===n)return d;if(p!==n&&(R=p),b!==n){if(R===n)return b;typeof p=="string"||typeof b=="string"?(p=Jr(p),b=Jr(b)):(p=S5(p),b=S5(b)),R=l(p,b)}return R}}function Gx(l){return Gi(function(d){return d=Et(d,pt(Ae())),He(function(p){var b=this;return l(d,function(R){return Yn(R,b,p)})})})}function Im(l,d){d=d===n?" ":Jr(d);var p=d.length;if(p<2)return p?Ux(d,l):d;var b=Ux(d,gm(l/lc(d)));return oc(d)?Ha(Gs(b),0,l).join(""):b.slice(0,l)}function Y6(l,d,p,b){var R=d&S,O=vd(l);function $(){for(var W=-1,q=arguments.length,ne=-1,re=b.length,ie=X(re+q),xe=this&&this!==Yt&&this instanceof $?O:l;++ne<re;)ie[ne]=b[ne];for(;q--;)ie[ne++]=arguments[++W];return Yn(xe,R?p:this,ie)}return $}function $5(l){return function(d,p,b){return b&&typeof b!="number"&&vr(d,p,b)&&(p=b=n),d=Qi(d),p===n?(p=d,d=0):p=Qi(p),b=b===n?d<p?1:-1:Qi(b),L6(d,p,b,l)}}function Cm(l){return function(d,p){return typeof d=="string"&&typeof p=="string"||(d=Ss(d),p=Ss(p)),l(d,p)}}function W5(l,d,p,b,R,O,$,W,q,ne){var re=d&k,ie=re?$:n,xe=re?n:$,ke=re?O:n,Ie=re?n:O;d|=re?D:F,d&=~(re?F:D),d&w||(d&=-4);var We=[l,d,R,ke,ie,Ie,xe,W,q,ne],Ce=p.apply(n,We);return ey(l)&&nN(Ce,We),Ce.placeholder=b,rN(Ce,l,d)}function qx(l){var d=yn[l];return function(p,b){if(p=Ss(p),b=b==null?0:Zn(Be(b),292),b&&r5(p)){var R=(xt(p)+"e").split("e"),O=d(R[0]+"e"+(+R[1]+b));return R=(xt(O)+"e").split("e"),+(R[0]+"e"+(+R[1]-b))}return d(p)}}var J6=dc&&1/am(new dc([,-0]))[1]==oe?function(l){return new dc(l)}:py;function H5(l){return function(d){var p=er(d);return p==Ee?Nx(d):p==Xn?pD(d):xn(d,l(d))}}function Hi(l,d,p,b,R,O,$,W){var q=d&N;if(!q&&typeof l!="function")throw new _s(o);var ne=b?b.length:0;if(ne||(d&=-97,b=R=n),$=$===n?$:vn(Be($),0),W=W===n?W:Be(W),ne-=R?R.length:0,d&F){var re=b,ie=R;b=R=n}var xe=q?n:Xx(l),ke=[l,d,p,b,R,re,ie,O,$,W];if(xe&&fM(ke,xe),l=ke[0],d=ke[1],p=ke[2],b=ke[3],R=ke[4],W=ke[9]=ke[9]===n?q?0:l.length:vn(ke[9]-ne,0),!W&&d&(k|A)&&(d&=-25),!d||d==S)var Ie=Q6(l,d,p);else d==k||d==A?Ie=X6(l,d,W):(d==D||d==(S|D))&&!R.length?Ie=Y6(l,d,p,b):Ie=Tm.apply(n,ke);var We=xe?j5:nN;return rN(We(Ie,ke),l,d)}function G5(l,d,p,b){return l===n||Ks(l,uc[p])&&!gt.call(b,p)?d:l}function q5(l,d,p,b,R,O){return Bt(l)&&Bt(d)&&(O.set(d,l),km(l,d,n,q5,O),O.delete(d)),l}function Z6(l){return _d(l)?n:l}function K5(l,d,p,b,R,O){var $=p&E,W=l.length,q=d.length;if(W!=q&&!($&&q>W))return!1;var ne=O.get(l),re=O.get(d);if(ne&&re)return ne==d&&re==l;var ie=-1,xe=!0,ke=p&j?new al:n;for(O.set(l,d),O.set(d,l);++ie<W;){var Ie=l[ie],We=d[ie];if(b)var Ce=$?b(We,Ie,ie,d,l,O):b(Ie,We,ie,l,d,O);if(Ce!==n){if(Ce)continue;xe=!1;break}if(ke){if(!ic(d,function(qe,Ze){if(!ws(ke,Ze)&&(Ie===qe||R(Ie,qe,p,b,O)))return ke.push(Ze)})){xe=!1;break}}else if(!(Ie===We||R(Ie,We,p,b,O))){xe=!1;break}}return O.delete(l),O.delete(d),xe}function eM(l,d,p,b,R,O,$){switch(p){case Xr:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case zt:return!(l.byteLength!=d.byteLength||!O(new hm(l),new hm(d)));case Qn:case Ln:case tt:return Ks(+l,+d);case pr:return l.name==d.name&&l.message==d.message;case ps:case Mi:return l==d+"";case Ee:var W=Nx;case Xn:var q=b&E;if(W||(W=am),l.size!=d.size&&!q)return!1;var ne=$.get(l);if(ne)return ne==d;b|=j,$.set(l,d);var re=K5(W(l),W(d),b,R,O,$);return $.delete(l),re;case ci:if(fd)return fd.call(l)==fd.call(d)}return!1}function tM(l,d,p,b,R,O){var $=p&E,W=Kx(l),q=W.length,ne=Kx(d),re=ne.length;if(q!=re&&!$)return!1;for(var ie=q;ie--;){var xe=W[ie];if(!($?xe in d:gt.call(d,xe)))return!1}var ke=O.get(l),Ie=O.get(d);if(ke&&Ie)return ke==d&&Ie==l;var We=!0;O.set(l,d),O.set(d,l);for(var Ce=$;++ie<q;){xe=W[ie];var qe=l[xe],Ze=d[xe];if(b)var es=$?b(Ze,qe,xe,d,l,O):b(qe,Ze,xe,l,d,O);if(!(es===n?qe===Ze||R(qe,Ze,p,b,O):es)){We=!1;break}Ce||(Ce=xe=="constructor")}if(We&&!Ce){var br=l.constructor,ts=d.constructor;br!=ts&&"constructor"in l&&"constructor"in d&&!(typeof br=="function"&&br instanceof br&&typeof ts=="function"&&ts instanceof ts)&&(We=!1)}return O.delete(l),O.delete(d),We}function Gi(l){return ny(eN(l,n,cN),l+"")}function Kx(l){return m5(l,In,Jx)}function Qx(l){return m5(l,Vr,Q5)}var Xx=ym?function(l){return ym.get(l)}:py;function Rm(l){for(var d=l.name+"",p=hc[d],b=gt.call(hc,d)?p.length:0;b--;){var R=p[b],O=R.func;if(O==null||O==l)return R.name}return d}function gc(l){var d=gt.call(M,"placeholder")?M:l;return d.placeholder}function Ae(){var l=M.iteratee||fy;return l=l===fy?x5:l,arguments.length?l(arguments[0],arguments[1]):l}function Pm(l,d){var p=l.__data__;return cM(d)?p[typeof d=="string"?"string":"hash"]:p.map}function Yx(l){for(var d=In(l),p=d.length;p--;){var b=d[p],R=l[b];d[p]=[b,R,J5(R)]}return d}function cl(l,d){var p=hD(l,d);return g5(p)?p:n}function nM(l){var d=gt.call(l,sl),p=l[sl];try{l[sl]=n;var b=!0}catch{}var R=um.call(l);return b&&(d?l[sl]=p:delete l[sl]),R}var Jx=jx?function(l){return l==null?[]:(l=St(l),bs(jx(l),function(d){return t5.call(l,d)}))}:gy,Q5=jx?function(l){for(var d=[];l;)Ws(d,Jx(l)),l=fm(l);return d}:gy,er=yr;(Ex&&er(new Ex(new ArrayBuffer(1)))!=Xr||ud&&er(new ud)!=Ee||Sx&&er(Sx.resolve())!=Dr||dc&&er(new dc)!=Xn||dd&&er(new dd)!=ui)&&(er=function(l){var d=yr(l),p=d==nt?l.constructor:n,b=p?ul(p):"";if(b)switch(b){case VD:return Xr;case UD:return Ee;case FD:return Dr;case zD:return Xn;case BD:return ui}return d});function rM(l,d,p){for(var b=-1,R=p.length;++b<R;){var O=p[b],$=O.size;switch(O.type){case"drop":l+=$;break;case"dropRight":d-=$;break;case"take":d=Zn(d,l+$);break;case"takeRight":l=vn(l,d-$);break}}return{start:l,end:d}}function sM(l){var d=l.match(Pa);return d?d[1].split(dx):[]}function X5(l,d,p){d=Wa(d,l);for(var b=-1,R=d.length,O=!1;++b<R;){var $=xi(d[b]);if(!(O=l!=null&&p(l,$)))break;l=l[$]}return O||++b!=R?O:(R=l==null?0:l.length,!!R&&Fm(R)&&qi($,R)&&(Fe(l)||dl(l)))}function iM(l){var d=l.length,p=new l.constructor(d);return d&&typeof l[0]=="string"&&gt.call(l,"index")&&(p.index=l.index,p.input=l.input),p}function Y5(l){return typeof l.constructor=="function"&&!bd(l)?fc(fm(l)):{}}function aM(l,d,p){var b=l.constructor;switch(d){case zt:return Hx(l);case Qn:case Ln:return new b(+l);case Xr:return $6(l,p);case Aa:case Ia:case Wo:case Yr:case Ca:case Ra:case de:case Ye:case At:return P5(l,p);case Ee:return new b;case tt:case Mi:return new b(l);case ps:return W6(l);case Xn:return new b;case ci:return H6(l)}}function oM(l,d){var p=d.length;if(!p)return l;var b=p-1;return d[b]=(p>1?"& ":"")+d[b],d=d.join(p>2?", ":" "),l.replace(ux,`{
/* [wrapped with `+d+`] */
`)}function lM(l){return Fe(l)||dl(l)||!!(n5&&l&&l[n5])}function qi(l,d){var p=typeof l;return d=d??K,!!d&&(p=="number"||p!="symbol"&&qu.test(l))&&l>-1&&l%1==0&&l<d}function vr(l,d,p){if(!Bt(p))return!1;var b=typeof d;return(b=="number"?Or(p)&&qi(d,p.length):b=="string"&&d in p)?Ks(p[d],l):!1}function Zx(l,d){if(Fe(l))return!1;var p=typeof l;return p=="number"||p=="symbol"||p=="boolean"||l==null||Zr(l)?!0:Pf.test(l)||!Ho.test(l)||d!=null&&l in St(d)}function cM(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function ey(l){var d=Rm(l),p=M[d];if(typeof p!="function"||!(d in Qe.prototype))return!1;if(l===p)return!0;var b=Xx(p);return!!b&&l===b[0]}function uM(l){return!!J_&&J_ in l}var dM=lm?Ki:xy;function bd(l){var d=l&&l.constructor,p=typeof d=="function"&&d.prototype||uc;return l===p}function J5(l){return l===l&&!Bt(l)}function Z5(l,d){return function(p){return p==null?!1:p[l]===d&&(d!==n||l in St(p))}}function hM(l){var d=Vm(l,function(b){return p.size===h&&p.clear(),b}),p=d.cache;return d}function fM(l,d){var p=l[1],b=d[1],R=p|b,O=R<(S|N|C),$=b==C&&p==k||b==C&&p==T&&l[7].length<=d[8]||b==(C|T)&&d[7].length<=d[8]&&p==k;if(!(O||$))return l;b&S&&(l[2]=d[2],R|=p&S?0:w);var W=d[3];if(W){var q=l[3];l[3]=q?M5(q,W,d[4]):W,l[4]=q?Fa(l[3],m):d[4]}return W=d[5],W&&(q=l[5],l[5]=q?L5(q,W,d[6]):W,l[6]=q?Fa(l[5],m):d[6]),W=d[7],W&&(l[7]=W),b&C&&(l[8]=l[8]==null?d[8]:Zn(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=R,l}function mM(l){var d=[];if(l!=null)for(var p in St(l))d.push(p);return d}function pM(l){return um.call(l)}function eN(l,d,p){return d=vn(d===n?l.length-1:d,0),function(){for(var b=arguments,R=-1,O=vn(b.length-d,0),$=X(O);++R<O;)$[R]=b[d+R];R=-1;for(var W=X(d+1);++R<d;)W[R]=b[R];return W[d]=p($),Yn(l,this,W)}}function tN(l,d){return d.length<2?l:ll(l,js(d,0,-1))}function gM(l,d){for(var p=l.length,b=Zn(d.length,p),R=Lr(l);b--;){var O=d[b];l[b]=qi(O,p)?R[O]:n}return l}function ty(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var nN=sN(j5),wd=CD||function(l,d){return Yt.setTimeout(l,d)},ny=sN(U6);function rN(l,d,p){var b=d+"";return ny(l,oM(b,xM(sM(b),p)))}function sN(l){var d=0,p=0;return function(){var b=MD(),R=B-(b-p);if(p=b,R>0){if(++d>=H)return arguments[0]}else d=0;return l.apply(n,arguments)}}function Dm(l,d){var p=-1,b=l.length,R=b-1;for(d=d===n?b:d;++p<d;){var O=Vx(p,R),$=l[O];l[O]=l[p],l[p]=$}return l.length=d,l}var iN=hM(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(On,function(p,b,R,O){d.push(R?O.replace(Df,"$1"):b||p)}),d});function xi(l){if(typeof l=="string"||Zr(l))return l;var d=l+"";return d=="0"&&1/l==-oe?"-0":d}function ul(l){if(l!=null){try{return cm.call(l)}catch{}try{return l+""}catch{}}return""}function xM(l,d){return xr(at,function(p){var b="_."+p[0];d&p[1]&&!tl(l,b)&&l.push(b)}),l.sort()}function aN(l){if(l instanceof Qe)return l.clone();var d=new Ns(l.__wrapped__,l.__chain__);return d.__actions__=Lr(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function yM(l,d,p){(p?vr(l,d,p):d===n)?d=1:d=vn(Be(d),0);var b=l==null?0:l.length;if(!b||d<1)return[];for(var R=0,O=0,$=X(gm(b/d));R<b;)$[O++]=js(l,R,R+=d);return $}function vM(l){for(var d=-1,p=l==null?0:l.length,b=0,R=[];++d<p;){var O=l[d];O&&(R[b++]=O)}return R}function bM(){var l=arguments.length;if(!l)return[];for(var d=X(l-1),p=arguments[0],b=l;b--;)d[b-1]=arguments[b];return Ws(Fe(p)?Lr(p):[p],Un(d,1))}var wM=He(function(l,d){return rn(l)?pd(l,Un(d,1,rn,!0)):[]}),_M=He(function(l,d){var p=Es(d);return rn(p)&&(p=n),rn(l)?pd(l,Un(d,1,rn,!0),Ae(p,2)):[]}),NM=He(function(l,d){var p=Es(d);return rn(p)&&(p=n),rn(l)?pd(l,Un(d,1,rn,!0),n,p):[]});function kM(l,d,p){var b=l==null?0:l.length;return b?(d=p||d===n?1:Be(d),js(l,d<0?0:d,b)):[]}function jM(l,d,p){var b=l==null?0:l.length;return b?(d=p||d===n?1:Be(d),d=b-d,js(l,0,d<0?0:d)):[]}function EM(l,d){return l&&l.length?Em(l,Ae(d,3),!0,!0):[]}function SM(l,d){return l&&l.length?Em(l,Ae(d,3),!0):[]}function TM(l,d,p,b){var R=l==null?0:l.length;return R?(p&&typeof p!="number"&&vr(l,d,p)&&(p=0,b=R),b6(l,d,p,b)):[]}function oN(l,d,p){var b=l==null?0:l.length;if(!b)return-1;var R=p==null?0:Be(p);return R<0&&(R=vn(b+R,0)),nl(l,Ae(d,3),R)}function lN(l,d,p){var b=l==null?0:l.length;if(!b)return-1;var R=b-1;return p!==n&&(R=Be(p),R=p<0?vn(b+R,0):Zn(R,b-1)),nl(l,Ae(d,3),R,!0)}function cN(l){var d=l==null?0:l.length;return d?Un(l,1):[]}function AM(l){var d=l==null?0:l.length;return d?Un(l,oe):[]}function IM(l,d){var p=l==null?0:l.length;return p?(d=d===n?1:Be(d),Un(l,d)):[]}function CM(l){for(var d=-1,p=l==null?0:l.length,b={};++d<p;){var R=l[d];b[R[0]]=R[1]}return b}function uN(l){return l&&l.length?l[0]:n}function RM(l,d,p){var b=l==null?0:l.length;if(!b)return-1;var R=p==null?0:Be(p);return R<0&&(R=vn(b+R,0)),zi(l,d,R)}function PM(l){var d=l==null?0:l.length;return d?js(l,0,-1):[]}var DM=He(function(l){var d=Et(l,$x);return d.length&&d[0]===l[0]?Px(d):[]}),MM=He(function(l){var d=Es(l),p=Et(l,$x);return d===Es(p)?d=n:p.pop(),p.length&&p[0]===l[0]?Px(p,Ae(d,2)):[]}),LM=He(function(l){var d=Es(l),p=Et(l,$x);return d=typeof d=="function"?d:n,d&&p.pop(),p.length&&p[0]===l[0]?Px(p,n,d):[]});function OM(l,d){return l==null?"":PD.call(l,d)}function Es(l){var d=l==null?0:l.length;return d?l[d-1]:n}function VM(l,d,p){var b=l==null?0:l.length;if(!b)return-1;var R=b;return p!==n&&(R=Be(p),R=R<0?vn(b+R,0):Zn(R,b-1)),d===d?xD(l,d,R):nl(l,f,R,!0)}function UM(l,d){return l&&l.length?w5(l,Be(d)):n}var FM=He(dN);function dN(l,d){return l&&l.length&&d&&d.length?Ox(l,d):l}function zM(l,d,p){return l&&l.length&&d&&d.length?Ox(l,d,Ae(p,2)):l}function BM(l,d,p){return l&&l.length&&d&&d.length?Ox(l,d,n,p):l}var $M=Gi(function(l,d){var p=l==null?0:l.length,b=Ax(l,d);return k5(l,Et(d,function(R){return qi(R,p)?+R:R}).sort(D5)),b});function WM(l,d){var p=[];if(!(l&&l.length))return p;var b=-1,R=[],O=l.length;for(d=Ae(d,3);++b<O;){var $=l[b];d($,b,l)&&(p.push($),R.push(b))}return k5(l,R),p}function ry(l){return l==null?l:OD.call(l)}function HM(l,d,p){var b=l==null?0:l.length;return b?(p&&typeof p!="number"&&vr(l,d,p)?(d=0,p=b):(d=d==null?0:Be(d),p=p===n?b:Be(p)),js(l,d,p)):[]}function GM(l,d){return jm(l,d)}function qM(l,d,p){return Fx(l,d,Ae(p,2))}function KM(l,d){var p=l==null?0:l.length;if(p){var b=jm(l,d);if(b<p&&Ks(l[b],d))return b}return-1}function QM(l,d){return jm(l,d,!0)}function XM(l,d,p){return Fx(l,d,Ae(p,2),!0)}function YM(l,d){var p=l==null?0:l.length;if(p){var b=jm(l,d,!0)-1;if(Ks(l[b],d))return b}return-1}function JM(l){return l&&l.length?E5(l):[]}function ZM(l,d){return l&&l.length?E5(l,Ae(d,2)):[]}function eL(l){var d=l==null?0:l.length;return d?js(l,1,d):[]}function tL(l,d,p){return l&&l.length?(d=p||d===n?1:Be(d),js(l,0,d<0?0:d)):[]}function nL(l,d,p){var b=l==null?0:l.length;return b?(d=p||d===n?1:Be(d),d=b-d,js(l,d<0?0:d,b)):[]}function rL(l,d){return l&&l.length?Em(l,Ae(d,3),!1,!0):[]}function sL(l,d){return l&&l.length?Em(l,Ae(d,3)):[]}var iL=He(function(l){return $a(Un(l,1,rn,!0))}),aL=He(function(l){var d=Es(l);return rn(d)&&(d=n),$a(Un(l,1,rn,!0),Ae(d,2))}),oL=He(function(l){var d=Es(l);return d=typeof d=="function"?d:n,$a(Un(l,1,rn,!0),n,d)});function lL(l){return l&&l.length?$a(l):[]}function cL(l,d){return l&&l.length?$a(l,Ae(d,2)):[]}function uL(l,d){return d=typeof d=="function"?d:n,l&&l.length?$a(l,n,d):[]}function sy(l){if(!(l&&l.length))return[];var d=0;return l=bs(l,function(p){if(rn(p))return d=vn(p.length,d),!0}),dt(d,function(p){return Et(l,I(p))})}function hN(l,d){if(!(l&&l.length))return[];var p=sy(l);return d==null?p:Et(p,function(b){return Yn(d,n,b)})}var dL=He(function(l,d){return rn(l)?pd(l,d):[]}),hL=He(function(l){return Bx(bs(l,rn))}),fL=He(function(l){var d=Es(l);return rn(d)&&(d=n),Bx(bs(l,rn),Ae(d,2))}),mL=He(function(l){var d=Es(l);return d=typeof d=="function"?d:n,Bx(bs(l,rn),n,d)}),pL=He(sy);function gL(l,d){return I5(l||[],d||[],md)}function xL(l,d){return I5(l||[],d||[],yd)}var yL=He(function(l){var d=l.length,p=d>1?l[d-1]:n;return p=typeof p=="function"?(l.pop(),p):n,hN(l,p)});function fN(l){var d=M(l);return d.__chain__=!0,d}function vL(l,d){return d(l),l}function Mm(l,d){return d(l)}var bL=Gi(function(l){var d=l.length,p=d?l[0]:0,b=this.__wrapped__,R=function(O){return Ax(O,l)};return d>1||this.__actions__.length||!(b instanceof Qe)||!qi(p)?this.thru(R):(b=b.slice(p,+p+(d?1:0)),b.__actions__.push({func:Mm,args:[R],thisArg:n}),new Ns(b,this.__chain__).thru(function(O){return d&&!O.length&&O.push(n),O}))});function wL(){return fN(this)}function _L(){return new Ns(this.value(),this.__chain__)}function NL(){this.__values__===n&&(this.__values__=SN(this.value()));var l=this.__index__>=this.__values__.length,d=l?n:this.__values__[this.__index__++];return{done:l,value:d}}function kL(){return this}function jL(l){for(var d,p=this;p instanceof bm;){var b=aN(p);b.__index__=0,b.__values__=n,d?R.__wrapped__=b:d=b;var R=b;p=p.__wrapped__}return R.__wrapped__=l,d}function EL(){var l=this.__wrapped__;if(l instanceof Qe){var d=l;return this.__actions__.length&&(d=new Qe(this)),d=d.reverse(),d.__actions__.push({func:Mm,args:[ry],thisArg:n}),new Ns(d,this.__chain__)}return this.thru(ry)}function SL(){return A5(this.__wrapped__,this.__actions__)}var TL=Sm(function(l,d,p){gt.call(l,p)?++l[p]:Wi(l,p,1)});function AL(l,d,p){var b=Fe(l)?sc:v6;return p&&vr(l,d,p)&&(d=n),b(l,Ae(d,3))}function IL(l,d){var p=Fe(l)?bs:h5;return p(l,Ae(d,3))}var CL=F5(oN),RL=F5(lN);function PL(l,d){return Un(Lm(l,d),1)}function DL(l,d){return Un(Lm(l,d),oe)}function ML(l,d,p){return p=p===n?1:Be(p),Un(Lm(l,d),p)}function mN(l,d){var p=Fe(l)?xr:Ba;return p(l,Ae(d,3))}function pN(l,d){var p=Fe(l)?nm:d5;return p(l,Ae(d,3))}var LL=Sm(function(l,d,p){gt.call(l,p)?l[p].push(d):Wi(l,p,[d])});function OL(l,d,p,b){l=Or(l)?l:yc(l),p=p&&!b?Be(p):0;var R=l.length;return p<0&&(p=vn(R+p,0)),zm(l)?p<=R&&l.indexOf(d,p)>-1:!!R&&zi(l,d,p)>-1}var VL=He(function(l,d,p){var b=-1,R=typeof d=="function",O=Or(l)?X(l.length):[];return Ba(l,function($){O[++b]=R?Yn(d,$,p):gd($,d,p)}),O}),UL=Sm(function(l,d,p){Wi(l,p,d)});function Lm(l,d){var p=Fe(l)?Et:y5;return p(l,Ae(d,3))}function FL(l,d,p,b){return l==null?[]:(Fe(d)||(d=d==null?[]:[d]),p=b?n:p,Fe(p)||(p=p==null?[]:[p]),_5(l,d,p))}var zL=Sm(function(l,d,p){l[p?0:1].push(d)},function(){return[[],[]]});function BL(l,d,p){var b=Fe(l)?Hs:Q,R=arguments.length<3;return b(l,Ae(d,4),p,R,Ba)}function $L(l,d,p){var b=Fe(l)?rm:Q,R=arguments.length<3;return b(l,Ae(d,4),p,R,d5)}function WL(l,d){var p=Fe(l)?bs:h5;return p(l,Um(Ae(d,3)))}function HL(l){var d=Fe(l)?o5:O6;return d(l)}function GL(l,d,p){(p?vr(l,d,p):d===n)?d=1:d=Be(d);var b=Fe(l)?m6:V6;return b(l,d)}function qL(l){var d=Fe(l)?p6:F6;return d(l)}function KL(l){if(l==null)return 0;if(Or(l))return zm(l)?lc(l):l.length;var d=er(l);return d==Ee||d==Xn?l.size:Mx(l).length}function QL(l,d,p){var b=Fe(l)?ic:z6;return p&&vr(l,d,p)&&(d=n),b(l,Ae(d,3))}var XL=He(function(l,d){if(l==null)return[];var p=d.length;return p>1&&vr(l,d[0],d[1])?d=[]:p>2&&vr(d[0],d[1],d[2])&&(d=[d[0]]),_5(l,Un(d,1),[])}),Om=ID||function(){return Yt.Date.now()};function YL(l,d){if(typeof d!="function")throw new _s(o);return l=Be(l),function(){if(--l<1)return d.apply(this,arguments)}}function gN(l,d,p){return d=p?n:d,d=l&&d==null?l.length:d,Hi(l,C,n,n,n,n,d)}function xN(l,d){var p;if(typeof d!="function")throw new _s(o);return l=Be(l),function(){return--l>0&&(p=d.apply(this,arguments)),l<=1&&(d=n),p}}var iy=He(function(l,d,p){var b=S;if(p.length){var R=Fa(p,gc(iy));b|=D}return Hi(l,b,d,p,R)}),yN=He(function(l,d,p){var b=S|N;if(p.length){var R=Fa(p,gc(yN));b|=D}return Hi(d,b,l,p,R)});function vN(l,d,p){d=p?n:d;var b=Hi(l,k,n,n,n,n,n,d);return b.placeholder=vN.placeholder,b}function bN(l,d,p){d=p?n:d;var b=Hi(l,A,n,n,n,n,n,d);return b.placeholder=bN.placeholder,b}function wN(l,d,p){var b,R,O,$,W,q,ne=0,re=!1,ie=!1,xe=!0;if(typeof l!="function")throw new _s(o);d=Ss(d)||0,Bt(p)&&(re=!!p.leading,ie="maxWait"in p,O=ie?vn(Ss(p.maxWait)||0,d):O,xe="trailing"in p?!!p.trailing:xe);function ke(sn){var Qs=b,Xi=R;return b=R=n,ne=sn,$=l.apply(Xi,Qs),$}function Ie(sn){return ne=sn,W=wd(qe,d),re?ke(sn):$}function We(sn){var Qs=sn-q,Xi=sn-ne,FN=d-Qs;return ie?Zn(FN,O-Xi):FN}function Ce(sn){var Qs=sn-q,Xi=sn-ne;return q===n||Qs>=d||Qs<0||ie&&Xi>=O}function qe(){var sn=Om();if(Ce(sn))return Ze(sn);W=wd(qe,We(sn))}function Ze(sn){return W=n,xe&&b?ke(sn):(b=R=n,$)}function es(){W!==n&&C5(W),ne=0,b=q=R=W=n}function br(){return W===n?$:Ze(Om())}function ts(){var sn=Om(),Qs=Ce(sn);if(b=arguments,R=this,q=sn,Qs){if(W===n)return Ie(q);if(ie)return C5(W),W=wd(qe,d),ke(q)}return W===n&&(W=wd(qe,d)),$}return ts.cancel=es,ts.flush=br,ts}var JL=He(function(l,d){return u5(l,1,d)}),ZL=He(function(l,d,p){return u5(l,Ss(d)||0,p)});function e8(l){return Hi(l,P)}function Vm(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new _s(o);var p=function(){var b=arguments,R=d?d.apply(this,b):b[0],O=p.cache;if(O.has(R))return O.get(R);var $=l.apply(this,b);return p.cache=O.set(R,$)||O,$};return p.cache=new(Vm.Cache||$i),p}Vm.Cache=$i;function Um(l){if(typeof l!="function")throw new _s(o);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function t8(l){return xN(2,l)}var n8=B6(function(l,d){d=d.length==1&&Fe(d[0])?Et(d[0],pt(Ae())):Et(Un(d,1),pt(Ae()));var p=d.length;return He(function(b){for(var R=-1,O=Zn(b.length,p);++R<O;)b[R]=d[R].call(this,b[R]);return Yn(l,this,b)})}),ay=He(function(l,d){var p=Fa(d,gc(ay));return Hi(l,D,n,d,p)}),_N=He(function(l,d){var p=Fa(d,gc(_N));return Hi(l,F,n,d,p)}),r8=Gi(function(l,d){return Hi(l,T,n,n,n,d)});function s8(l,d){if(typeof l!="function")throw new _s(o);return d=d===n?d:Be(d),He(l,d)}function i8(l,d){if(typeof l!="function")throw new _s(o);return d=d==null?0:vn(Be(d),0),He(function(p){var b=p[d],R=Ha(p,0,d);return b&&Ws(R,b),Yn(l,this,R)})}function a8(l,d,p){var b=!0,R=!0;if(typeof l!="function")throw new _s(o);return Bt(p)&&(b="leading"in p?!!p.leading:b,R="trailing"in p?!!p.trailing:R),wN(l,d,{leading:b,maxWait:d,trailing:R})}function o8(l){return gN(l,1)}function l8(l,d){return ay(Wx(d),l)}function c8(){if(!arguments.length)return[];var l=arguments[0];return Fe(l)?l:[l]}function u8(l){return ks(l,v)}function d8(l,d){return d=typeof d=="function"?d:n,ks(l,v,d)}function h8(l){return ks(l,g|v)}function f8(l,d){return d=typeof d=="function"?d:n,ks(l,g|v,d)}function m8(l,d){return d==null||c5(l,d,In(d))}function Ks(l,d){return l===d||l!==l&&d!==d}var p8=Cm(Rx),g8=Cm(function(l,d){return l>=d}),dl=p5(function(){return arguments}())?p5:function(l){return Jt(l)&&gt.call(l,"callee")&&!t5.call(l,"callee")},Fe=X.isArray,x8=ad?pt(ad):j6;function Or(l){return l!=null&&Fm(l.length)&&!Ki(l)}function rn(l){return Jt(l)&&Or(l)}function y8(l){return l===!0||l===!1||Jt(l)&&yr(l)==Qn}var Ga=RD||xy,v8=rc?pt(rc):E6;function b8(l){return Jt(l)&&l.nodeType===1&&!_d(l)}function w8(l){if(l==null)return!0;if(Or(l)&&(Fe(l)||typeof l=="string"||typeof l.splice=="function"||Ga(l)||xc(l)||dl(l)))return!l.length;var d=er(l);if(d==Ee||d==Xn)return!l.size;if(bd(l))return!Mx(l).length;for(var p in l)if(gt.call(l,p))return!1;return!0}function _8(l,d){return xd(l,d)}function N8(l,d,p){p=typeof p=="function"?p:n;var b=p?p(l,d):n;return b===n?xd(l,d,n,p):!!b}function oy(l){if(!Jt(l))return!1;var d=yr(l);return d==pr||d==Pr||typeof l.message=="string"&&typeof l.name=="string"&&!_d(l)}function k8(l){return typeof l=="number"&&r5(l)}function Ki(l){if(!Bt(l))return!1;var d=yr(l);return d==Z||d==Se||d==Tn||d==ql}function NN(l){return typeof l=="number"&&l==Be(l)}function Fm(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=K}function Bt(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function Jt(l){return l!=null&&typeof l=="object"}var kN=Jo?pt(Jo):T6;function j8(l,d){return l===d||Dx(l,d,Yx(d))}function E8(l,d,p){return p=typeof p=="function"?p:n,Dx(l,d,Yx(d),p)}function S8(l){return jN(l)&&l!=+l}function T8(l){if(dM(l))throw new Me(a);return g5(l)}function A8(l){return l===null}function I8(l){return l==null}function jN(l){return typeof l=="number"||Jt(l)&&yr(l)==tt}function _d(l){if(!Jt(l)||yr(l)!=nt)return!1;var d=fm(l);if(d===null)return!0;var p=gt.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&cm.call(p)==ED}var ly=od?pt(od):A6;function C8(l){return NN(l)&&l>=-K&&l<=K}var EN=Zo?pt(Zo):I6;function zm(l){return typeof l=="string"||!Fe(l)&&Jt(l)&&yr(l)==Mi}function Zr(l){return typeof l=="symbol"||Jt(l)&&yr(l)==ci}var xc=tm?pt(tm):C6;function R8(l){return l===n}function P8(l){return Jt(l)&&er(l)==ui}function D8(l){return Jt(l)&&yr(l)==cn}var M8=Cm(Lx),L8=Cm(function(l,d){return l<=d});function SN(l){if(!l)return[];if(Or(l))return zm(l)?Gs(l):Lr(l);if(cd&&l[cd])return mD(l[cd]());var d=er(l),p=d==Ee?Nx:d==Xn?am:yc;return p(l)}function Qi(l){if(!l)return l===0?l:0;if(l=Ss(l),l===oe||l===-oe){var d=l<0?-1:1;return d*te}return l===l?l:0}function Be(l){var d=Qi(l),p=d%1;return d===d?p?d-p:d:0}function TN(l){return l?ol(Be(l),0,Re):0}function Ss(l){if(typeof l=="number")return l;if(Zr(l))return ue;if(Bt(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=Bt(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=Je(l);var p=Mf.test(l);return p||Gu.test(l)?Zf(l.slice(2),p?2:8):hi.test(l)?ue:+l}function AN(l){return gi(l,Vr(l))}function O8(l){return l?ol(Be(l),-K,K):l===0?l:0}function xt(l){return l==null?"":Jr(l)}var V8=mc(function(l,d){if(bd(d)||Or(d)){gi(d,In(d),l);return}for(var p in d)gt.call(d,p)&&md(l,p,d[p])}),IN=mc(function(l,d){gi(d,Vr(d),l)}),Bm=mc(function(l,d,p,b){gi(d,Vr(d),l,b)}),U8=mc(function(l,d,p,b){gi(d,In(d),l,b)}),F8=Gi(Ax);function z8(l,d){var p=fc(l);return d==null?p:l5(p,d)}var B8=He(function(l,d){l=St(l);var p=-1,b=d.length,R=b>2?d[2]:n;for(R&&vr(d[0],d[1],R)&&(b=1);++p<b;)for(var O=d[p],$=Vr(O),W=-1,q=$.length;++W<q;){var ne=$[W],re=l[ne];(re===n||Ks(re,uc[ne])&&!gt.call(l,ne))&&(l[ne]=O[ne])}return l}),$8=He(function(l){return l.push(n,q5),Yn(CN,n,l)});function W8(l,d){return Jn(l,Ae(d,3),pi)}function H8(l,d){return Jn(l,Ae(d,3),Cx)}function G8(l,d){return l==null?l:Ix(l,Ae(d,3),Vr)}function q8(l,d){return l==null?l:f5(l,Ae(d,3),Vr)}function K8(l,d){return l&&pi(l,Ae(d,3))}function Q8(l,d){return l&&Cx(l,Ae(d,3))}function X8(l){return l==null?[]:Nm(l,In(l))}function Y8(l){return l==null?[]:Nm(l,Vr(l))}function cy(l,d,p){var b=l==null?n:ll(l,d);return b===n?p:b}function J8(l,d){return l!=null&&X5(l,d,w6)}function uy(l,d){return l!=null&&X5(l,d,_6)}var Z8=B5(function(l,d,p){d!=null&&typeof d.toString!="function"&&(d=um.call(d)),l[d]=p},hy(Ur)),e9=B5(function(l,d,p){d!=null&&typeof d.toString!="function"&&(d=um.call(d)),gt.call(l,d)?l[d].push(p):l[d]=[p]},Ae),t9=He(gd);function In(l){return Or(l)?a5(l):Mx(l)}function Vr(l){return Or(l)?a5(l,!0):R6(l)}function n9(l,d){var p={};return d=Ae(d,3),pi(l,function(b,R,O){Wi(p,d(b,R,O),b)}),p}function r9(l,d){var p={};return d=Ae(d,3),pi(l,function(b,R,O){Wi(p,R,d(b,R,O))}),p}var s9=mc(function(l,d,p){km(l,d,p)}),CN=mc(function(l,d,p,b){km(l,d,p,b)}),i9=Gi(function(l,d){var p={};if(l==null)return p;var b=!1;d=Et(d,function(O){return O=Wa(O,l),b||(b=O.length>1),O}),gi(l,Qx(l),p),b&&(p=ks(p,g|x|v,Z6));for(var R=d.length;R--;)zx(p,d[R]);return p});function a9(l,d){return RN(l,Um(Ae(d)))}var o9=Gi(function(l,d){return l==null?{}:D6(l,d)});function RN(l,d){if(l==null)return{};var p=Et(Qx(l),function(b){return[b]});return d=Ae(d),N5(l,p,function(b,R){return d(b,R[0])})}function l9(l,d,p){d=Wa(d,l);var b=-1,R=d.length;for(R||(R=1,l=n);++b<R;){var O=l==null?n:l[xi(d[b])];O===n&&(b=R,O=p),l=Ki(O)?O.call(l):O}return l}function c9(l,d,p){return l==null?l:yd(l,d,p)}function u9(l,d,p,b){return b=typeof b=="function"?b:n,l==null?l:yd(l,d,p,b)}var PN=H5(In),DN=H5(Vr);function d9(l,d,p){var b=Fe(l),R=b||Ga(l)||xc(l);if(d=Ae(d,4),p==null){var O=l&&l.constructor;R?p=b?new O:[]:Bt(l)?p=Ki(O)?fc(fm(l)):{}:p={}}return(R?xr:pi)(l,function($,W,q){return d(p,$,W,q)}),p}function h9(l,d){return l==null?!0:zx(l,d)}function f9(l,d,p){return l==null?l:T5(l,d,Wx(p))}function m9(l,d,p,b){return b=typeof b=="function"?b:n,l==null?l:T5(l,d,Wx(p),b)}function yc(l){return l==null?[]:un(l,In(l))}function p9(l){return l==null?[]:un(l,Vr(l))}function g9(l,d,p){return p===n&&(p=d,d=n),p!==n&&(p=Ss(p),p=p===p?p:0),d!==n&&(d=Ss(d),d=d===d?d:0),ol(Ss(l),d,p)}function x9(l,d,p){return d=Qi(d),p===n?(p=d,d=0):p=Qi(p),l=Ss(l),N6(l,d,p)}function y9(l,d,p){if(p&&typeof p!="boolean"&&vr(l,d,p)&&(d=p=n),p===n&&(typeof d=="boolean"?(p=d,d=n):typeof l=="boolean"&&(p=l,l=n)),l===n&&d===n?(l=0,d=1):(l=Qi(l),d===n?(d=l,l=0):d=Qi(d)),l>d){var b=l;l=d,d=b}if(p||l%1||d%1){var R=s5();return Zn(l+R*(d-l+_x("1e-"+((R+"").length-1))),d)}return Vx(l,d)}var v9=pc(function(l,d,p){return d=d.toLowerCase(),l+(p?MN(d):d)});function MN(l){return dy(xt(l).toLowerCase())}function LN(l){return l=xt(l),l&&l.replace(Of,cD).replace(yx,"")}function b9(l,d,p){l=xt(l),d=Jr(d);var b=l.length;p=p===n?b:ol(Be(p),0,b);var R=p;return p-=d.length,p>=0&&l.slice(p,R)==d}function w9(l){return l=xt(l),l&&Li.test(l)?l.replace(Kl,uD):l}function _9(l){return l=xt(l),l&&Go.test(l)?l.replace(Xl,"\\$&"):l}var N9=pc(function(l,d,p){return l+(p?"-":"")+d.toLowerCase()}),k9=pc(function(l,d,p){return l+(p?" ":"")+d.toLowerCase()}),j9=U5("toLowerCase");function E9(l,d,p){l=xt(l),d=Be(d);var b=d?lc(l):0;if(!d||b>=d)return l;var R=(d-b)/2;return Im(xm(R),p)+l+Im(gm(R),p)}function S9(l,d,p){l=xt(l),d=Be(d);var b=d?lc(l):0;return d&&b<d?l+Im(d-b,p):l}function T9(l,d,p){l=xt(l),d=Be(d);var b=d?lc(l):0;return d&&b<d?Im(d-b,p)+l:l}function A9(l,d,p){return p||d==null?d=0:d&&(d=+d),LD(xt(l).replace(Oi,""),d||0)}function I9(l,d,p){return(p?vr(l,d,p):d===n)?d=1:d=Be(d),Ux(xt(l),d)}function C9(){var l=arguments,d=xt(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var R9=pc(function(l,d,p){return l+(p?"_":"")+d.toLowerCase()});function P9(l,d,p){return p&&typeof p!="number"&&vr(l,d,p)&&(d=p=n),p=p===n?Re:p>>>0,p?(l=xt(l),l&&(typeof d=="string"||d!=null&&!ly(d))&&(d=Jr(d),!d&&oc(l))?Ha(Gs(l),0,p):l.split(d,p)):[]}var D9=pc(function(l,d,p){return l+(p?" ":"")+dy(d)});function M9(l,d,p){return l=xt(l),p=p==null?0:ol(Be(p),0,l.length),d=Jr(d),l.slice(p,p+d.length)==d}function L9(l,d,p){var b=M.templateSettings;p&&vr(l,d,p)&&(d=n),l=xt(l),d=Bm({},d,b,G5);var R=Bm({},d.imports,b.imports,G5),O=In(R),$=un(R,O),W,q,ne=0,re=d.interpolate||Ko,ie="__p += '",xe=kx((d.escape||Ko).source+"|"+re.source+"|"+(re===Wu?Hu:Ko).source+"|"+(d.evaluate||Ko).source+"|$","g"),ke="//# sourceURL="+(gt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yf+"]")+`
`;l.replace(xe,function(Ce,qe,Ze,es,br,ts){return Ze||(Ze=es),ie+=l.slice(ne,ts).replace(fx,dD),qe&&(W=!0,ie+=`' +
__e(`+qe+`) +
'`),br&&(q=!0,ie+=`';
`+br+`;
__p += '`),Ze&&(ie+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ne=ts+Ce.length,Ce}),ie+=`';
`;var Ie=gt.call(d,"variable")&&d.variable;if(!Ie)ie=`with (obj) {
`+ie+`
}
`;else if(Yl.test(Ie))throw new Me(c);ie=(q?ie.replace(It,""):ie).replace(gr,"$1").replace($s,"$1;"),ie="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var We=VN(function(){return ht(O,ke+"return "+ie).apply(n,$)});if(We.source=ie,oy(We))throw We;return We}function O9(l){return xt(l).toLowerCase()}function V9(l){return xt(l).toUpperCase()}function U9(l,d,p){if(l=xt(l),l&&(p||d===n))return Je(l);if(!l||!(d=Jr(d)))return l;var b=Gs(l),R=Gs(d),O=Mr(b,R),$=rl(b,R)+1;return Ha(b,O,$).join("")}function F9(l,d,p){if(l=xt(l),l&&(p||d===n))return l.slice(0,Y_(l)+1);if(!l||!(d=Jr(d)))return l;var b=Gs(l),R=rl(b,Gs(d))+1;return Ha(b,0,R).join("")}function z9(l,d,p){if(l=xt(l),l&&(p||d===n))return l.replace(Oi,"");if(!l||!(d=Jr(d)))return l;var b=Gs(l),R=Mr(b,Gs(d));return Ha(b,R).join("")}function B9(l,d){var p=L,b=z;if(Bt(d)){var R="separator"in d?d.separator:R;p="length"in d?Be(d.length):p,b="omission"in d?Jr(d.omission):b}l=xt(l);var O=l.length;if(oc(l)){var $=Gs(l);O=$.length}if(p>=O)return l;var W=p-lc(b);if(W<1)return b;var q=$?Ha($,0,W).join(""):l.slice(0,W);if(R===n)return q+b;if($&&(W+=q.length-W),ly(R)){if(l.slice(W).search(R)){var ne,re=q;for(R.global||(R=kx(R.source,xt(qo.exec(R))+"g")),R.lastIndex=0;ne=R.exec(re);)var ie=ne.index;q=q.slice(0,ie===n?W:ie)}}else if(l.indexOf(Jr(R),W)!=W){var xe=q.lastIndexOf(R);xe>-1&&(q=q.slice(0,xe))}return q+b}function $9(l){return l=xt(l),l&&$u.test(l)?l.replace(di,yD):l}var W9=pc(function(l,d,p){return l+(p?" ":"")+d.toUpperCase()}),dy=U5("toUpperCase");function ON(l,d,p){return l=xt(l),d=p?n:d,d===n?fD(l)?wD(l):ac(l):l.match(d)||[]}var VN=He(function(l,d){try{return Yn(l,n,d)}catch(p){return oy(p)?p:new Me(p)}}),H9=Gi(function(l,d){return xr(d,function(p){p=xi(p),Wi(l,p,iy(l[p],l))}),l});function G9(l){var d=l==null?0:l.length,p=Ae();return l=d?Et(l,function(b){if(typeof b[1]!="function")throw new _s(o);return[p(b[0]),b[1]]}):[],He(function(b){for(var R=-1;++R<d;){var O=l[R];if(Yn(O[0],this,b))return Yn(O[1],this,b)}})}function q9(l){return y6(ks(l,g))}function hy(l){return function(){return l}}function K9(l,d){return l==null||l!==l?d:l}var Q9=z5(),X9=z5(!0);function Ur(l){return l}function fy(l){return x5(typeof l=="function"?l:ks(l,g))}function Y9(l){return v5(ks(l,g))}function J9(l,d){return b5(l,ks(d,g))}var Z9=He(function(l,d){return function(p){return gd(p,l,d)}}),eO=He(function(l,d){return function(p){return gd(l,p,d)}});function my(l,d,p){var b=In(d),R=Nm(d,b);p==null&&!(Bt(d)&&(R.length||!b.length))&&(p=d,d=l,l=this,R=Nm(d,In(d)));var O=!(Bt(p)&&"chain"in p)||!!p.chain,$=Ki(l);return xr(R,function(W){var q=d[W];l[W]=q,$&&(l.prototype[W]=function(){var ne=this.__chain__;if(O||ne){var re=l(this.__wrapped__),ie=re.__actions__=Lr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:l}),re.__chain__=ne,re}return q.apply(l,Ws([this.value()],arguments))})}),l}function tO(){return Yt._===this&&(Yt._=SD),this}function py(){}function nO(l){return l=Be(l),He(function(d){return w5(d,l)})}var rO=Gx(Et),sO=Gx(sc),iO=Gx(ic);function UN(l){return Zx(l)?I(xi(l)):M6(l)}function aO(l){return function(d){return l==null?n:ll(l,d)}}var oO=$5(),lO=$5(!0);function gy(){return[]}function xy(){return!1}function cO(){return{}}function uO(){return""}function dO(){return!0}function hO(l,d){if(l=Be(l),l<1||l>K)return[];var p=Re,b=Zn(l,Re);d=Ae(d),l-=Re;for(var R=dt(b,d);++p<l;)d(p);return R}function fO(l){return Fe(l)?Et(l,xi):Zr(l)?[l]:Lr(iN(xt(l)))}function mO(l){var d=++jD;return xt(l)+d}var pO=Am(function(l,d){return l+d},0),gO=qx("ceil"),xO=Am(function(l,d){return l/d},1),yO=qx("floor");function vO(l){return l&&l.length?_m(l,Ur,Rx):n}function bO(l,d){return l&&l.length?_m(l,Ae(d,2),Rx):n}function wO(l){return y(l,Ur)}function _O(l,d){return y(l,Ae(d,2))}function NO(l){return l&&l.length?_m(l,Ur,Lx):n}function kO(l,d){return l&&l.length?_m(l,Ae(d,2),Lx):n}var jO=Am(function(l,d){return l*d},1),EO=qx("round"),SO=Am(function(l,d){return l-d},0);function TO(l){return l&&l.length?he(l,Ur):0}function AO(l,d){return l&&l.length?he(l,Ae(d,2)):0}return M.after=YL,M.ary=gN,M.assign=V8,M.assignIn=IN,M.assignInWith=Bm,M.assignWith=U8,M.at=F8,M.before=xN,M.bind=iy,M.bindAll=H9,M.bindKey=yN,M.castArray=c8,M.chain=fN,M.chunk=yM,M.compact=vM,M.concat=bM,M.cond=G9,M.conforms=q9,M.constant=hy,M.countBy=TL,M.create=z8,M.curry=vN,M.curryRight=bN,M.debounce=wN,M.defaults=B8,M.defaultsDeep=$8,M.defer=JL,M.delay=ZL,M.difference=wM,M.differenceBy=_M,M.differenceWith=NM,M.drop=kM,M.dropRight=jM,M.dropRightWhile=EM,M.dropWhile=SM,M.fill=TM,M.filter=IL,M.flatMap=PL,M.flatMapDeep=DL,M.flatMapDepth=ML,M.flatten=cN,M.flattenDeep=AM,M.flattenDepth=IM,M.flip=e8,M.flow=Q9,M.flowRight=X9,M.fromPairs=CM,M.functions=X8,M.functionsIn=Y8,M.groupBy=LL,M.initial=PM,M.intersection=DM,M.intersectionBy=MM,M.intersectionWith=LM,M.invert=Z8,M.invertBy=e9,M.invokeMap=VL,M.iteratee=fy,M.keyBy=UL,M.keys=In,M.keysIn=Vr,M.map=Lm,M.mapKeys=n9,M.mapValues=r9,M.matches=Y9,M.matchesProperty=J9,M.memoize=Vm,M.merge=s9,M.mergeWith=CN,M.method=Z9,M.methodOf=eO,M.mixin=my,M.negate=Um,M.nthArg=nO,M.omit=i9,M.omitBy=a9,M.once=t8,M.orderBy=FL,M.over=rO,M.overArgs=n8,M.overEvery=sO,M.overSome=iO,M.partial=ay,M.partialRight=_N,M.partition=zL,M.pick=o9,M.pickBy=RN,M.property=UN,M.propertyOf=aO,M.pull=FM,M.pullAll=dN,M.pullAllBy=zM,M.pullAllWith=BM,M.pullAt=$M,M.range=oO,M.rangeRight=lO,M.rearg=r8,M.reject=WL,M.remove=WM,M.rest=s8,M.reverse=ry,M.sampleSize=GL,M.set=c9,M.setWith=u9,M.shuffle=qL,M.slice=HM,M.sortBy=XL,M.sortedUniq=JM,M.sortedUniqBy=ZM,M.split=P9,M.spread=i8,M.tail=eL,M.take=tL,M.takeRight=nL,M.takeRightWhile=rL,M.takeWhile=sL,M.tap=vL,M.throttle=a8,M.thru=Mm,M.toArray=SN,M.toPairs=PN,M.toPairsIn=DN,M.toPath=fO,M.toPlainObject=AN,M.transform=d9,M.unary=o8,M.union=iL,M.unionBy=aL,M.unionWith=oL,M.uniq=lL,M.uniqBy=cL,M.uniqWith=uL,M.unset=h9,M.unzip=sy,M.unzipWith=hN,M.update=f9,M.updateWith=m9,M.values=yc,M.valuesIn=p9,M.without=dL,M.words=ON,M.wrap=l8,M.xor=hL,M.xorBy=fL,M.xorWith=mL,M.zip=pL,M.zipObject=gL,M.zipObjectDeep=xL,M.zipWith=yL,M.entries=PN,M.entriesIn=DN,M.extend=IN,M.extendWith=Bm,my(M,M),M.add=pO,M.attempt=VN,M.camelCase=v9,M.capitalize=MN,M.ceil=gO,M.clamp=g9,M.clone=u8,M.cloneDeep=h8,M.cloneDeepWith=f8,M.cloneWith=d8,M.conformsTo=m8,M.deburr=LN,M.defaultTo=K9,M.divide=xO,M.endsWith=b9,M.eq=Ks,M.escape=w9,M.escapeRegExp=_9,M.every=AL,M.find=CL,M.findIndex=oN,M.findKey=W8,M.findLast=RL,M.findLastIndex=lN,M.findLastKey=H8,M.floor=yO,M.forEach=mN,M.forEachRight=pN,M.forIn=G8,M.forInRight=q8,M.forOwn=K8,M.forOwnRight=Q8,M.get=cy,M.gt=p8,M.gte=g8,M.has=J8,M.hasIn=uy,M.head=uN,M.identity=Ur,M.includes=OL,M.indexOf=RM,M.inRange=x9,M.invoke=t9,M.isArguments=dl,M.isArray=Fe,M.isArrayBuffer=x8,M.isArrayLike=Or,M.isArrayLikeObject=rn,M.isBoolean=y8,M.isBuffer=Ga,M.isDate=v8,M.isElement=b8,M.isEmpty=w8,M.isEqual=_8,M.isEqualWith=N8,M.isError=oy,M.isFinite=k8,M.isFunction=Ki,M.isInteger=NN,M.isLength=Fm,M.isMap=kN,M.isMatch=j8,M.isMatchWith=E8,M.isNaN=S8,M.isNative=T8,M.isNil=I8,M.isNull=A8,M.isNumber=jN,M.isObject=Bt,M.isObjectLike=Jt,M.isPlainObject=_d,M.isRegExp=ly,M.isSafeInteger=C8,M.isSet=EN,M.isString=zm,M.isSymbol=Zr,M.isTypedArray=xc,M.isUndefined=R8,M.isWeakMap=P8,M.isWeakSet=D8,M.join=OM,M.kebabCase=N9,M.last=Es,M.lastIndexOf=VM,M.lowerCase=k9,M.lowerFirst=j9,M.lt=M8,M.lte=L8,M.max=vO,M.maxBy=bO,M.mean=wO,M.meanBy=_O,M.min=NO,M.minBy=kO,M.stubArray=gy,M.stubFalse=xy,M.stubObject=cO,M.stubString=uO,M.stubTrue=dO,M.multiply=jO,M.nth=UM,M.noConflict=tO,M.noop=py,M.now=Om,M.pad=E9,M.padEnd=S9,M.padStart=T9,M.parseInt=A9,M.random=y9,M.reduce=BL,M.reduceRight=$L,M.repeat=I9,M.replace=C9,M.result=l9,M.round=EO,M.runInContext=G,M.sample=HL,M.size=KL,M.snakeCase=R9,M.some=QL,M.sortedIndex=GM,M.sortedIndexBy=qM,M.sortedIndexOf=KM,M.sortedLastIndex=QM,M.sortedLastIndexBy=XM,M.sortedLastIndexOf=YM,M.startCase=D9,M.startsWith=M9,M.subtract=SO,M.sum=TO,M.sumBy=AO,M.template=L9,M.times=hO,M.toFinite=Qi,M.toInteger=Be,M.toLength=TN,M.toLower=O9,M.toNumber=Ss,M.toSafeInteger=O8,M.toString=xt,M.toUpper=V9,M.trim=U9,M.trimEnd=F9,M.trimStart=z9,M.truncate=B9,M.unescape=$9,M.uniqueId=mO,M.upperCase=W9,M.upperFirst=dy,M.each=mN,M.eachRight=pN,M.first=uN,my(M,function(){var l={};return pi(M,function(d,p){gt.call(M.prototype,p)||(l[p]=d)}),l}(),{chain:!1}),M.VERSION=r,xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){M[l].placeholder=M}),xr(["drop","take"],function(l,d){Qe.prototype[l]=function(p){p=p===n?1:vn(Be(p),0);var b=this.__filtered__&&!d?new Qe(this):this.clone();return b.__filtered__?b.__takeCount__=Zn(p,b.__takeCount__):b.__views__.push({size:Zn(p,Re),type:l+(b.__dir__<0?"Right":"")}),b},Qe.prototype[l+"Right"]=function(p){return this.reverse()[l](p).reverse()}}),xr(["filter","map","takeWhile"],function(l,d){var p=d+1,b=p==Pe||p==je;Qe.prototype[l]=function(R){var O=this.clone();return O.__iteratees__.push({iteratee:Ae(R,3),type:p}),O.__filtered__=O.__filtered__||b,O}}),xr(["head","last"],function(l,d){var p="take"+(d?"Right":"");Qe.prototype[l]=function(){return this[p](1).value()[0]}}),xr(["initial","tail"],function(l,d){var p="drop"+(d?"":"Right");Qe.prototype[l]=function(){return this.__filtered__?new Qe(this):this[p](1)}}),Qe.prototype.compact=function(){return this.filter(Ur)},Qe.prototype.find=function(l){return this.filter(l).head()},Qe.prototype.findLast=function(l){return this.reverse().find(l)},Qe.prototype.invokeMap=He(function(l,d){return typeof l=="function"?new Qe(this):this.map(function(p){return gd(p,l,d)})}),Qe.prototype.reject=function(l){return this.filter(Um(Ae(l)))},Qe.prototype.slice=function(l,d){l=Be(l);var p=this;return p.__filtered__&&(l>0||d<0)?new Qe(p):(l<0?p=p.takeRight(-l):l&&(p=p.drop(l)),d!==n&&(d=Be(d),p=d<0?p.dropRight(-d):p.take(d-l)),p)},Qe.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Qe.prototype.toArray=function(){return this.take(Re)},pi(Qe.prototype,function(l,d){var p=/^(?:filter|find|map|reject)|While$/.test(d),b=/^(?:head|last)$/.test(d),R=M[b?"take"+(d=="last"?"Right":""):d],O=b||/^find/.test(d);R&&(M.prototype[d]=function(){var $=this.__wrapped__,W=b?[1]:arguments,q=$ instanceof Qe,ne=W[0],re=q||Fe($),ie=function(qe){var Ze=R.apply(M,Ws([qe],W));return b&&xe?Ze[0]:Ze};re&&p&&typeof ne=="function"&&ne.length!=1&&(q=re=!1);var xe=this.__chain__,ke=!!this.__actions__.length,Ie=O&&!xe,We=q&&!ke;if(!O&&re){$=We?$:new Qe(this);var Ce=l.apply($,W);return Ce.__actions__.push({func:Mm,args:[ie],thisArg:n}),new Ns(Ce,xe)}return Ie&&We?l.apply(this,W):(Ce=this.thru(ie),Ie?b?Ce.value()[0]:Ce.value():Ce)})}),xr(["pop","push","shift","sort","splice","unshift"],function(l){var d=om[l],p=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);M.prototype[l]=function(){var R=arguments;if(b&&!this.__chain__){var O=this.value();return d.apply(Fe(O)?O:[],R)}return this[p](function($){return d.apply(Fe($)?$:[],R)})}}),pi(Qe.prototype,function(l,d){var p=M[d];if(p){var b=p.name+"";gt.call(hc,b)||(hc[b]=[]),hc[b].push({name:d,func:p})}}),hc[Tm(n,N).name]=[{name:"wrapper",func:n}],Qe.prototype.clone=$D,Qe.prototype.reverse=WD,Qe.prototype.value=HD,M.prototype.at=bL,M.prototype.chain=wL,M.prototype.commit=_L,M.prototype.next=NL,M.prototype.plant=jL,M.prototype.reverse=EL,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=SL,M.prototype.first=M.prototype.head,cd&&(M.prototype[cd]=kL),M},cc=_D();Vn?((Vn.exports=cc)._=cc,nc._=cc):Yt._=cc}).call(Nd)})(Ug,Ug.exports);var pX=Ug.exports;const gX=()=>{const t=yt(),[e]=cf(),{user:n,setUser:r,language:s,setLanguage:a}=mr();h_();const[o,c]=_.useState("language"),[u,h]=_.useState(!1),[m,g]=_.useState(!1),[x,v]=_.useState(!1),[E,j]=_.useState(!1),[S,N]=_.useState(!0),[w,k]=_.useState(0),[A,D]=_.useState(""),[F,C]=_.useState(!1),[T,P]=_.useState("idle"),[L,z]=_.useState(null),[H,B]=_.useState(null),[Pe,we]=_.useState((n==null?void 0:n.username)||""),[je,oe]=_.useState((n==null?void 0:n.displayName)||""),[K,te]=_.useState(""),[ue,Re]=_.useState(""),[ge,me]=_.useState(""),[at,jt]=_.useState(""),[Xt,Tn]=_.useState(""),[Qn,Ln]=_.useState(!1),[Pr,pr]=_.useState(!1),[Z,Se]=_.useState(null),[Ee,tt]=_.useState(null),Qr=new Date().getFullYear(),nt=Array.from({length:80},(de,Ye)=>Qr-18-Ye),Dr=Array.from({length:31},(de,Ye)=>Ye+1),ql=[{value:1,label:"Januar"},{value:2,label:"Februar"},{value:3,label:"Mrz"},{value:4,label:"April"},{value:5,label:"Mai"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Dezember"}];_.useEffect(()=>{const de=e.get("ref")||e.get("code")||e.get("invite");if(de){const Ye=de.trim().toUpperCase().replace(/\s+/g,"");D(Ye),ps(Ye)}},[e]);const ps=async de=>{var At;const Ye=de.trim().toUpperCase().replace(/\s+/g,"");if(!Ye||Ye.length<5){P("idle"),z(null);return}C(!0),z(null);try{const It=await $R(Ye);if(It){const{ownerId:gr,link:$s}=It;gr===(n==null?void 0:n.id)?(P("invalid"),z(" Du kannst deinen eigenen Code nicht verwenden")):$s.usedBy?(P("invalid"),z(" Dieser Code wurde bereits eingelst")):$s.isActive===!1?(P("invalid"),z(" Dieser Code wurde deaktiviert")):(P("valid"),B(gr),z(null))}else P("invalid"),z(" Code nicht gefunden oder bereits vollstndig eingelst")}catch(It){console.error("Error checking invite code:",It),P("invalid"),(It==null?void 0:It.code)==="unavailable"||(At=It==null?void 0:It.message)!=null&&At.includes("network")?z(" Server nicht erreichbar - bitte spter erneut versuchen"):(It==null?void 0:It.code)==="permission-denied"?z(" Zugriff verweigert - Code konnte nicht geprft werden"):z(" Verbindungsfehler - bitte erneut versuchen")}finally{C(!1)}},Xn=de=>{const At=de.trim().toUpperCase().replace(/[^A-Z0-9-\s]/g,"").replace(/\s+/g,"");D(At),P("idle"),z(null),At.length>=5&&ps(At)},Mi=_.useCallback(pX.debounce(async de=>{if(!de||de.length<3){Se(null),tt(de.length>0?"Mindestens 3 Zeichen":null);return}if(de.length>20){Se(!1),tt("Maximal 20 Zeichen");return}if(!/^[a-z0-9_]+$/.test(de)){Se(!1),tt("Nur Kleinbuchstaben, Zahlen & Unterstriche");return}if(["admin","synclulu","support","help","system","mod","moderator"].includes(de)){Se(!1),tt("Dieser Username ist reserviert");return}pr(!0),tt(null);try{const At=Ve(J,"users"),It=it(At,$e("username","==",de)),gr=await Ft(It),$s=gr.empty||gr.docs.every(di=>di.id===(n==null?void 0:n.id));Se($s),$s||tt("Username bereits vergeben")}catch(At){console.error("Error checking username:",At),tt("Prfung fehlgeschlagen"),Se(null)}finally{pr(!1)}},500),[n==null?void 0:n.id]),ci=de=>{const Ye=de.toLowerCase().replace(/[^a-z0-9_]/g,"");we(Ye),Se(null),tt(null),Ye&&Mi(Ye)},gs=[{icon:i.jsx(Xh,{size:64,className:"text-synclulu-violet"}),title:"Willkommen in der Wolke",description:"synclulu verbindet dich mit Menschen in deiner Nhe ber Voice-Chat. Tippe auf die Wolke um loszulegen."},{icon:i.jsx(_a,{size:64,className:"text-green-500"}),title:"Hyperlokal",description:"Du siehst nur Menschen im Umkreis von max. 500m. Echte Nachbarn, echte Gesprche."},{icon:i.jsx(Fs,{size:64,className:"text-purple-500"}),title:"Anonym oder Offen",description:'Du entscheidest bei jedem Chat ob du als du selbst oder als "Wanderer" anonym bleibst.'},{icon:i.jsx(Ir,{size:64,className:"text-blue-500"}),title:"Privacy First",description:"Deine Daten gehren dir. Kein Tracking, keine Algorithmen. Du hast die volle Kontrolle."},{icon:i.jsx(kt,{size:64,className:"text-amber-500"}),title:"Community Regeln",description:"Respekt ist Pflicht. Belstigung, Hate Speech und unangemessenes Verhalten fhren zum Ausschluss."}],ui=de=>{a(de),localStorage.setItem("synclulu-language",de)},cn=()=>{c("invite")},zt=()=>{c("age")},Xr=()=>{u&&c("terms")},Aa=()=>{m&&x&&E&&c(S?"tutorial":"profile")},Ia=()=>{w<gs.length-1?k(w+1):c("profile")},Wo=()=>{c("profile")},Yr=()=>{if(!ue||!ge||!at)return!1;const de=parseInt(ue),Ye=parseInt(ge),At=parseInt(at),It=new Date(At,Ye-1,de);if(It.getDate()!==de||It.getMonth()!==Ye-1||It.getFullYear()!==At)return!1;const gr=new Date;return gr.getFullYear()-At-(gr.getMonth()<Ye-1||gr.getMonth()===Ye-1&&gr.getDate()<de?1:0)>=18},Ca=async()=>{if(!(!n||!Pe.trim()||!Z||!Yr())){Ln(!0);try{const de=new Date(parseInt(at),parseInt(ge)-1,parseInt(ue)),Ye={username:Pe.trim().toLowerCase().replace(/\s+/g,"_"),displayName:je.trim()||Pe.trim(),bio:K.trim(),birthDate:de,birthDay:parseInt(ue),birthMonth:parseInt(ge),birthYear:parseInt(at),showBirthdateOnProfile:!0,city:Xt.trim(),language:s,onboardingCompleted:!0,onboardingCompletedAt:new Date,isOver18Verified:!0,termsAcceptedAt:new Date,privacyAcceptedAt:new Date,communityGuidelinesAcceptedAt:new Date,usernameLastChanged:new Date,usernameChangeCount:0};if(await Ge(ce(J,"users",n.id),Ye),T==="valid"&&A&&H)try{(await WR(A,n.id,Pe)).success&&console.log("Referral code applied successfully")}catch(At){console.error("Error applying referral code:",At)}else try{await e_(n.id)}catch(At){console.error("Error initializing referrals:",At)}r({...n,...Ye}),t("/")}catch(de){console.error("Error saving profile:",de)}finally{Ln(!1)}}},Ra=Pe.trim()&&Z&&!Pr&&Yr();return i.jsxs("div",{className:"min-h-screen page-gradient theme-transition flex flex-col",children:[i.jsx("div",{className:"px-6 pt-6",children:i.jsx("div",{className:"flex gap-2",children:["language","invite","age","terms","tutorial","profile"].map((de,Ye)=>i.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${["language","invite","age","terms","tutorial","profile"].indexOf(o)>=Ye?"bg-synclulu-violet":"bg-[var(--synclulu-surface)]"}`},de))})}),o==="language"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-center justify-center gap-3 mb-6",children:i.jsx("div",{className:"w-16 h-16 rounded-full bg-synclulu-violet/10 flex items-center justify-center",children:i.jsx(_f,{size:32,className:"text-synclulu-violet"})})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text text-center mb-2",children:"Whle deine Sprache"}),i.jsx("p",{className:"text-synclulu-muted text-center mb-6",children:"Choose your language"}),i.jsx("div",{className:"space-y-3",children:Object.keys(Mc).map(de=>i.jsxs("button",{onClick:()=>ui(de),className:`w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all ${s===de?"border-synclulu-violet bg-synclulu-violet/5":"border-[var(--synclulu-border)] hover:border-[var(--synclulu-border)]"}`,children:[i.jsx("span",{className:"text-2xl",children:Mc[de].flag}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:Mc[de].native}),i.jsx("p",{className:"text-xs text-synclulu-muted",children:Mc[de].name})]}),s===de&&i.jsx(ft,{size:20,className:"text-synclulu-violet"})]},de))})]}),i.jsx("button",{onClick:cn,className:"w-full py-4 bg-synclulu-violet text-white font-bold rounded-xl transition-opacity",children:"Weiter"})]}),o==="invite"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("button",{onClick:()=>c("language"),className:"p-2 -m-2",children:i.jsx(ni,{size:24,className:"text-synclulu-muted"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text",children:"Einladungscode"})]}),i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/30",children:i.jsx(Ci,{size:40,className:"text-white"})})}),i.jsx("p",{className:"text-synclulu-muted text-center mb-6",children:"Hast du einen Einladungscode von einem Freund erhalten? Gib ihn hier ein um Bonus-XP zu erhalten!"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"Einladungscode (optional)"}),i.jsxs("div",{className:"relative",children:[i.jsx(aX,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-synclulu-muted"}),i.jsx("input",{type:"text",value:A,onChange:de=>Xn(de.target.value),placeholder:"z.B. synclulu-ABC12",maxLength:15,className:`w-full pl-12 pr-12 py-4 border-2 rounded-xl focus:outline-none transition-colors font-mono text-lg tracking-wider ${T==="valid"?"border-green-400 bg-green-50 focus:border-green-500":T==="invalid"?"border-red-300 bg-red-50 focus:border-red-500":"border-[var(--synclulu-border)] focus:border-synclulu-violet"}`}),i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:F?i.jsx(Nn,{size:20,className:"text-[var(--synclulu-muted)] animate-spin"}):T==="valid"?i.jsx(ft,{size:20,className:"text-green-500"}):T==="invalid"?i.jsx(ln,{size:20,className:"text-red-500"}):null})]}),L&&i.jsx("p",{className:"text-red-500 text-sm mt-2",children:L}),T==="valid"&&i.jsx("div",{className:"mt-3 p-3 bg-green-100 rounded-xl border border-green-200",children:i.jsxs("p",{className:"text-green-800 text-sm font-medium flex items-center gap-2",children:[i.jsx(fr,{size:16}),"Code gltig! Du erhltst 125 Bonus-XP bei der Registrierung."]})})]}),i.jsx("div",{className:"p-4 bg-purple-50 rounded-2xl",children:i.jsxs("p",{className:"text-sm text-purple-800",children:[i.jsx("strong",{children:" Tipp:"})," Ohne Einladungscode kannst du dich trotzdem registrieren. Nach der Registrierung erhltst du eigene Einladungscodes zum Teilen!"]})})]}),i.jsx("button",{onClick:zt,className:"w-full py-4 bg-synclulu-violet text-white font-bold rounded-xl transition-opacity flex items-center justify-center gap-2",children:T==="valid"?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:20}),"Weiter mit Code"]}):"Weiter ohne Code"})]}),o==="age"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8",children:[i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-amber-100 flex items-center justify-center mb-6",children:i.jsx(wf,{size:40,className:"text-amber-600"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text mb-4",children:"Altersverifikation"}),i.jsx("p",{className:"text-synclulu-muted mb-8 max-w-sm",children:"synclulu ist eine Plattform fr Erwachsene. Du musst mindestens 18 Jahre alt sein um die App zu nutzen."}),i.jsxs("label",{className:"flex items-start gap-3 p-4 bg-[var(--synclulu-card)] rounded-xl border-2 border-[var(--synclulu-border)] cursor-pointer mb-6 text-left max-w-sm",children:[i.jsx("input",{type:"checkbox",checked:u,onChange:de=>h(de.target.checked),className:"mt-1 w-5 h-5 rounded border-[var(--synclulu-border)] text-synclulu-violet focus:ring-synclulu-violet"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:"Ich besttige, dass ich 18 Jahre oder lter bin"}),i.jsx("p",{className:"text-sm text-synclulu-muted mt-1",children:"Falsche Angaben fhren zur sofortigen Sperrung des Accounts."})]})]}),i.jsx("p",{className:"text-xs text-synclulu-muted max-w-sm",children:"Bei Verdacht auf Minderjhrigkeit kann eine ID-Verifikation angefordert werden."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>c("invite"),className:"py-4 px-6 border-2 border-[var(--synclulu-border)] text-synclulu-muted font-semibold rounded-xl",children:i.jsx(ni,{size:20})}),i.jsx("button",{onClick:Xr,disabled:!u,className:"flex-1 py-4 bg-synclulu-violet text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:"Weiter"})]})]}),o==="terms"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("button",{onClick:()=>c("age"),className:"p-2 -m-2",children:i.jsx(ni,{size:24,className:"text-synclulu-muted"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text",children:"Nutzungsbedingungen"})]}),i.jsx("p",{className:"text-synclulu-muted mb-6",children:"Bitte lies und akzeptiere unsere Richtlinien um fortzufahren."}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("label",{className:"flex items-start gap-3 p-4 bg-[var(--synclulu-card)] rounded-xl border-2 border-[var(--synclulu-border)] cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:de=>g(de.target.checked),className:"mt-1 w-5 h-5 rounded border-[var(--synclulu-border)] text-synclulu-violet focus:ring-synclulu-violet"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:"AGB akzeptieren"}),i.jsxs("p",{className:"text-sm text-synclulu-muted",children:["Ich habe die"," ",i.jsx("a",{href:"/impressum",className:"text-synclulu-violet underline",children:"Allgemeinen Geschftsbedingungen"})," ","gelesen und akzeptiere diese."]})]})]}),i.jsxs("label",{className:"flex items-start gap-3 p-4 bg-[var(--synclulu-card)] rounded-xl border-2 border-[var(--synclulu-border)] cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:de=>v(de.target.checked),className:"mt-1 w-5 h-5 rounded border-[var(--synclulu-border)] text-synclulu-violet focus:ring-synclulu-violet"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:"Datenschutz akzeptieren"}),i.jsxs("p",{className:"text-sm text-synclulu-muted",children:["Ich habe die"," ",i.jsx("a",{href:"/datenschutz",className:"text-synclulu-violet underline",children:"Datenschutzerklrung"})," ","gelesen und akzeptiere diese."]})]})]}),i.jsxs("label",{className:"flex items-start gap-3 p-4 bg-[var(--synclulu-card)] rounded-xl border-2 border-[var(--synclulu-border)] cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:E,onChange:de=>j(de.target.checked),className:"mt-1 w-5 h-5 rounded border-[var(--synclulu-border)] text-synclulu-violet focus:ring-synclulu-violet"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:"Community-Regeln akzeptieren"}),i.jsx("p",{className:"text-sm text-synclulu-muted",children:"Ich verpflichte mich zu respektvollem Umgang. Belstigung, Hate Speech und unangemessenes Verhalten sind verboten."})]})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-xl cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:S,onChange:de=>N(de.target.checked),className:"w-5 h-5 rounded border-[var(--synclulu-border)] text-synclulu-violet focus:ring-synclulu-violet"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-synclulu-text",children:"App-Einfhrung anzeigen"}),i.jsx("p",{className:"text-sm text-synclulu-muted",children:"Kurze Erklrung wie synclulu funktioniert"})]})]})]}),i.jsx("button",{onClick:Aa,disabled:!m||!x||!E,className:"w-full py-4 bg-synclulu-violet text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:"Weiter"})]}),o==="tutorial"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8",children:[i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"mb-8",children:gs[w].icon}),i.jsx("h2",{className:"font-display text-2xl font-bold text-synclulu-text mb-4",children:gs[w].title}),i.jsx("p",{className:"text-synclulu-muted max-w-sm mb-8",children:gs[w].description}),i.jsx("div",{className:"flex gap-2",children:gs.map((de,Ye)=>i.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${Ye===w?"bg-synclulu-violet w-6":"bg-[var(--synclulu-border)]"}`},Ye))})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Wo,className:"flex-1 py-4 border-2 border-[var(--synclulu-border)] text-synclulu-muted font-semibold rounded-xl",children:"berspringen"}),i.jsx("button",{onClick:Ia,className:"flex-1 py-4 bg-synclulu-violet text-white font-bold rounded-xl flex items-center justify-center gap-2",children:w<gs.length-1?i.jsxs(i.Fragment,{children:["Weiter ",i.jsx(Ms,{size:20})]}):i.jsxs(i.Fragment,{children:["Los geht's ",i.jsx(fr,{size:20})]})})]})]}),o==="profile"&&i.jsxs("div",{className:"flex-1 flex flex-col px-6 py-8 overflow-y-auto",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("button",{onClick:()=>c("tutorial"),className:"p-2 -m-2",children:i.jsx(ni,{size:24,className:"text-synclulu-muted"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text",children:"Dein Profil"})]}),i.jsx("p",{className:"text-synclulu-muted mb-6",children:"Richte dein Profil ein. Du kannst diese Angaben spter jederzeit ndern."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"Benutzername *"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-synclulu-muted",children:"@"}),i.jsx("input",{type:"text",value:Pe,onChange:de=>ci(de.target.value),placeholder:"dein_name",maxLength:20,className:`w-full pl-8 pr-12 py-3 border-2 rounded-xl focus:outline-none transition-colors ${Ee?"border-red-300 focus:border-red-500":Z?"border-green-300 focus:border-green-500":"border-[var(--synclulu-border)] focus:border-synclulu-violet"}`}),i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:Pr?i.jsx(Nn,{size:20,className:"text-[var(--synclulu-muted)] animate-spin"}):Z===!0?i.jsx(ft,{size:20,className:"text-green-500"}):Z===!1?i.jsx(ln,{size:20,className:"text-red-500"}):null})]}),Ee&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:Ee}),Z&&i.jsxs("p",{className:"text-green-600 text-xs mt-1",children:[" @",Pe," ist verfgbar"]}),i.jsx("p",{className:"text-xs text-synclulu-muted mt-1",children:"Einzigartig, nur Kleinbuchstaben, Zahlen & Unterstriche"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"Anzeigename"}),i.jsx("input",{type:"text",value:je,onChange:de=>oe(de.target.value),placeholder:"Wie sollen dich andere sehen?",maxLength:30,className:"w-full px-4 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"Geburtsdatum *"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("select",{value:ue,onChange:de=>Re(de.target.value),className:"px-3 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none bg-[var(--synclulu-card)]",children:[i.jsx("option",{value:"",children:"Tag"}),Dr.map(de=>i.jsx("option",{value:de,children:de},de))]}),i.jsxs("select",{value:ge,onChange:de=>me(de.target.value),className:"px-3 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none bg-[var(--synclulu-card)]",children:[i.jsx("option",{value:"",children:"Monat"}),ql.map(de=>i.jsx("option",{value:de.value,children:de.label},de.value))]}),i.jsxs("select",{value:at,onChange:de=>jt(de.target.value),className:"px-3 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none bg-[var(--synclulu-card)]",children:[i.jsx("option",{value:"",children:"Jahr"}),nt.map(de=>i.jsx("option",{value:de,children:de},de))]})]}),ue&&ge&&at&&!Yr()&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Du musst mindestens 18 Jahre alt sein"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"Stadt / Region"}),i.jsx("input",{type:"text",value:Xt,onChange:de=>Tn(de.target.value),placeholder:"z.B. Berlin, Mnchen...",maxLength:50,className:"w-full px-4 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-synclulu-text mb-2",children:"ber dich"}),i.jsx("textarea",{value:K,onChange:de=>te(de.target.value),placeholder:"Erzhl etwas ber dich... (optional)",maxLength:200,rows:3,className:"w-full px-4 py-3 border-2 border-[var(--synclulu-border)] rounded-xl focus:border-synclulu-violet focus:outline-none resize-none"}),i.jsxs("p",{className:"text-xs text-synclulu-muted mt-1 text-right",children:[K.length,"/200"]})]})]})]}),i.jsx("button",{onClick:Ca,disabled:!Ra||Qn,className:"w-full py-4 bg-synclulu-violet text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-opacity flex items-center justify-center gap-2 mt-6",children:Qn?i.jsxs(i.Fragment,{children:[i.jsx(Nn,{size:20,className:"animate-spin"}),"Speichern..."]}):i.jsxs(i.Fragment,{children:[i.jsx(a_,{size:20}),"Profil speichern & starten"]})})]})]})},f_=_.createContext({});function m_(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const eP=typeof window<"u",tP=eP?_.useLayoutEffect:_.useEffect,tx=_.createContext(null);function p_(t,e){t.indexOf(e)===-1&&t.push(e)}function g_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ri=(t,e,n)=>n>e?e:n<t?t:n;let x_=()=>{};const Na={},nP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function rP(t){return typeof t=="object"&&t!==null}const sP=t=>/^0[^.\s]+$/u.test(t);function y_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ls=t=>t,xX=(t,e)=>n=>e(t(n)),Ef=(...t)=>t.reduce(xX),Yh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class v_{constructor(){this.subscriptions=[]}add(e){return p_(this.subscriptions,e),()=>g_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ca=t=>t*1e3,Rs=t=>t/1e3;function iP(t,e){return e?t*(1e3/e):0}const aP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yX=1e-7,vX=12;function bX(t,e,n,r,s){let a,o,c=0;do o=e+(n-e)/2,a=aP(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>yX&&++c<vX);return o}function Sf(t,e,n,r){if(t===e&&n===r)return Ls;const s=a=>bX(a,0,1,t,n);return a=>a===0||a===1?a:aP(s(a),e,r)}const oP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lP=t=>e=>1-t(1-e),cP=Sf(.33,1.53,.69,.99),b_=lP(cP),uP=oP(b_),dP=t=>(t*=2)<1?.5*b_(t):.5*(2-Math.pow(2,-10*(t-1))),w_=t=>1-Math.sin(Math.acos(t)),hP=lP(w_),fP=oP(w_),wX=Sf(.42,0,1,1),_X=Sf(0,0,.58,1),mP=Sf(.42,0,.58,1),NX=t=>Array.isArray(t)&&typeof t[0]!="number",pP=t=>Array.isArray(t)&&typeof t[0]=="number",kX={linear:Ls,easeIn:wX,easeInOut:mP,easeOut:_X,circIn:w_,circInOut:fP,circOut:hP,backIn:b_,backInOut:uP,backOut:cP,anticipate:dP},jX=t=>typeof t=="string",FE=t=>{if(pP(t)){x_(t.length===4);const[e,n,r,s]=t;return Sf(e,n,r,s)}else if(jX(t))return kX[t];return t},fp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function EX(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,g=!1,x=!1)=>{const E=x&&s?n:r;return g&&o.add(m),E.has(m)||E.add(m),m},cancel:m=>{r.delete(m),o.delete(m)},process:m=>{if(c=m,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),n.clear(),s=!1,a&&(a=!1,h.process(m))}};return h}const SX=40;function gP(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=fp.reduce((k,A)=>(k[A]=EX(a),k),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:m,update:g,preRender:x,render:v,postRender:E}=o,j=()=>{const k=Na.useManualTiming?s.timestamp:performance.now();n=!1,Na.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(k-s.timestamp,SX),1)),s.timestamp=k,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),m.process(s),g.process(s),x.process(s),v.process(s),E.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(j))},S=()=>{n=!0,r=!0,s.isProcessing||t(j)};return{schedule:fp.reduce((k,A)=>{const D=o[A];return k[A]=(F,C=!1,T=!1)=>(n||S(),D.schedule(F,C,T)),k},{}),cancel:k=>{for(let A=0;A<fp.length;A++)o[fp[A]].cancel(k)},state:s,steps:o}}const{schedule:Mt,cancel:Ro,state:zn,steps:hv}=gP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ls,!0);let qp;function TX(){qp=void 0}const jr={now:()=>(qp===void 0&&jr.set(zn.isProcessing||Na.useManualTiming?zn.timestamp:performance.now()),qp),set:t=>{qp=t,queueMicrotask(TX)}},xP=t=>e=>typeof e=="string"&&e.startsWith(t),yP=xP("--"),AX=xP("var(--"),__=t=>AX(t)?IX.test(t.split("/*")[0].trim()):!1,IX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function zE(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Fu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jh={...Fu,transform:t=>Ri(0,1,t)},mp={...Fu,default:1},dh=t=>Math.round(t*1e5)/1e5,N_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CX(t){return t==null}const RX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,k_=(t,e)=>n=>!!(typeof n=="string"&&RX.test(n)&&n.startsWith(t)||e&&!CX(n)&&Object.prototype.hasOwnProperty.call(n,e)),vP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,c]=r.match(N_);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},PX=t=>Ri(0,255,t),fv={...Fu,transform:t=>Math.round(PX(t))},_l={test:k_("rgb","red"),parse:vP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+fv.transform(t)+", "+fv.transform(e)+", "+fv.transform(n)+", "+dh(Jh.transform(r))+")"};function DX(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const xb={test:k_("#"),parse:DX,transform:_l.transform},Tf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qa=Tf("deg"),Ti=Tf("%"),_e=Tf("px"),MX=Tf("vh"),LX=Tf("vw"),BE={...Ti,parse:t=>Ti.parse(t)/100,transform:t=>Ti.transform(t*100)},Lc={test:k_("hsl","hue"),parse:vP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ti.transform(dh(e))+", "+Ti.transform(dh(n))+", "+dh(Jh.transform(r))+")"},hn={test:t=>_l.test(t)||xb.test(t)||Lc.test(t),parse:t=>_l.test(t)?_l.parse(t):Lc.test(t)?Lc.parse(t):xb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_l.transform(t):Lc.transform(t),getAnimatableNone:t=>{const e=hn.parse(t);return e.alpha=0,hn.transform(e)}},OX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(N_))==null?void 0:e.length)||0)+(((n=t.match(OX))==null?void 0:n.length)||0)>0}const bP="number",wP="color",UX="var",FX="var(",$E="${}",zX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const c=e.replace(zX,u=>(hn.test(u)?(r.color.push(a),s.push(wP),n.push(hn.parse(u))):u.startsWith(FX)?(r.var.push(a),s.push(UX),n.push(u)):(r.number.push(a),s.push(bP),n.push(parseFloat(u))),++a,$E)).split($E);return{values:n,split:c,indexes:r,types:s}}function _P(t){return Zh(t).values}function NP(t){const{split:e,types:n}=Zh(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const c=n[o];c===bP?a+=dh(s[o]):c===wP?a+=hn.transform(s[o]):a+=s[o]}return a}}const BX=t=>typeof t=="number"?0:hn.test(t)?hn.getAnimatableNone(t):t;function $X(t){const e=_P(t);return NP(t)(e.map(BX))}const Po={test:VX,parse:_P,createTransformer:NP,getAnimatableNone:$X};function mv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WX({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;s=mv(u,c,t+1/3),a=mv(u,c,t),o=mv(u,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Fg(t,e){return n=>n>0?e:t}const Wt=(t,e,n)=>t+(e-t)*n,pv=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},HX=[xb,_l,Lc],GX=t=>HX.find(e=>e.test(t));function WE(t){const e=GX(t);if(!e)return!1;let n=e.parse(t);return e===Lc&&(n=WX(n)),n}const HE=(t,e)=>{const n=WE(t),r=WE(e);if(!n||!r)return Fg(t,e);const s={...n};return a=>(s.red=pv(n.red,r.red,a),s.green=pv(n.green,r.green,a),s.blue=pv(n.blue,r.blue,a),s.alpha=Wt(n.alpha,r.alpha,a),_l.transform(s))},yb=new Set(["none","hidden"]);function qX(t,e){return yb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function KX(t,e){return n=>Wt(t,e,n)}function j_(t){return typeof t=="number"?KX:typeof t=="string"?__(t)?Fg:hn.test(t)?HE:YX:Array.isArray(t)?kP:typeof t=="object"?hn.test(t)?HE:QX:Fg}function kP(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>j_(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function QX(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=j_(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function XX(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],c=t.values[o]??0;n[s]=c,r[a]++}return n}const YX=(t,e)=>{const n=Po.createTransformer(e),r=Zh(t),s=Zh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?yb.has(t)&&!s.values.length||yb.has(e)&&!r.values.length?qX(t,e):Ef(kP(XX(r,s),s.values),n):Fg(t,e)};function jP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wt(t,e,n):j_(t)(t,e)}const JX=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Mt.update(e,n),stop:()=>Ro(e),now:()=>zn.isProcessing?zn.timestamp:jr.now()}},EP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},zg=2e4;function E_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<zg;)e+=n,r=t.next(e);return e>=zg?1/0:e}function ZX(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(E_(r),zg);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Rs(s)}}const eY=5;function SP(t,e,n){const r=Math.max(e-eY,0);return iP(n-t(r),e-r)}const Zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gv=.001;function tY({duration:t=Zt.duration,bounce:e=Zt.bounce,velocity:n=Zt.velocity,mass:r=Zt.mass}){let s,a,o=1-e;o=Ri(Zt.minDamping,Zt.maxDamping,o),t=Ri(Zt.minDuration,Zt.maxDuration,Rs(t)),o<1?(s=h=>{const m=h*o,g=m*t,x=m-n,v=vb(h,o),E=Math.exp(-g);return gv-x/v*E},a=h=>{const g=h*o*t,x=g*n+n,v=Math.pow(o,2)*Math.pow(h,2)*t,E=Math.exp(-g),j=vb(Math.pow(h,2),o);return(-s(h)+gv>0?-1:1)*((x-v)*E)/j}):(s=h=>{const m=Math.exp(-h*t),g=(h-n)*t+1;return-gv+m*g},a=h=>{const m=Math.exp(-h*t),g=(n-h)*(t*t);return m*g});const c=5/t,u=rY(s,a,c);if(t=ca(t),isNaN(u))return{stiffness:Zt.stiffness,damping:Zt.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const nY=12;function rY(t,e,n){let r=n;for(let s=1;s<nY;s++)r=r-t(r)/e(r);return r}function vb(t,e){return t*Math.sqrt(1-e*e)}const sY=["duration","bounce"],iY=["stiffness","damping","mass"];function GE(t,e){return e.some(n=>t[n]!==void 0)}function aY(t){let e={velocity:Zt.velocity,stiffness:Zt.stiffness,damping:Zt.damping,mass:Zt.mass,isResolvedFromDuration:!1,...t};if(!GE(t,iY)&&GE(t,sY))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Ri(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Zt.mass,stiffness:s,damping:a}}else{const n=tY(t);e={...e,...n,mass:Zt.mass},e.isResolvedFromDuration=!0}return e}function Bg(t=Zt.visualDuration,e=Zt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:m,duration:g,velocity:x,isResolvedFromDuration:v}=aY({...n,velocity:-Rs(n.velocity||0)}),E=x||0,j=h/(2*Math.sqrt(u*m)),S=o-a,N=Rs(Math.sqrt(u/m)),w=Math.abs(S)<5;r||(r=w?Zt.restSpeed.granular:Zt.restSpeed.default),s||(s=w?Zt.restDelta.granular:Zt.restDelta.default);let k;if(j<1){const D=vb(N,j);k=F=>{const C=Math.exp(-j*N*F);return o-C*((E+j*N*S)/D*Math.sin(D*F)+S*Math.cos(D*F))}}else if(j===1)k=D=>o-Math.exp(-N*D)*(S+(E+N*S)*D);else{const D=N*Math.sqrt(j*j-1);k=F=>{const C=Math.exp(-j*N*F),T=Math.min(D*F,300);return o-C*((E+j*N*S)*Math.sinh(T)+D*S*Math.cosh(T))/D}}const A={calculatedDuration:v&&g||null,next:D=>{const F=k(D);if(v)c.done=D>=g;else{let C=D===0?E:0;j<1&&(C=D===0?ca(E):SP(k,D,F));const T=Math.abs(C)<=r,P=Math.abs(o-F)<=s;c.done=T&&P}return c.value=c.done?o:F,c},toString:()=>{const D=Math.min(E_(A),zg),F=EP(C=>A.next(D*C).value,D,30);return D+"ms "+F},toTransition:()=>{}};return A}Bg.applyToOptions=t=>{const e=ZX(t,100,Bg);return t.ease=e.ease,t.duration=ca(e.duration),t.type="keyframes",t};function bb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:m}){const g=t[0],x={done:!1,value:g},v=T=>c!==void 0&&T<c||u!==void 0&&T>u,E=T=>c===void 0?u:u===void 0||Math.abs(c-T)<Math.abs(u-T)?c:u;let j=n*e;const S=g+j,N=o===void 0?S:o(S);N!==S&&(j=N-g);const w=T=>-j*Math.exp(-T/r),k=T=>N+w(T),A=T=>{const P=w(T),L=k(T);x.done=Math.abs(P)<=h,x.value=x.done?N:L};let D,F;const C=T=>{v(x.value)&&(D=T,F=Bg({keyframes:[x.value,E(x.value)],velocity:SP(k,T,x.value),damping:s,stiffness:a,restDelta:h,restSpeed:m}))};return C(0),{calculatedDuration:null,next:T=>{let P=!1;return!F&&D===void 0&&(P=!0,A(T),C(T)),D!==void 0&&T>=D?F.next(T-D):(!P&&A(T),x)}}}function oY(t,e,n){const r=[],s=n||Na.mix||jP,a=t.length-1;for(let o=0;o<a;o++){let c=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ls:e;c=Ef(u,c)}r.push(c)}return r}function lY(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(x_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=oY(e,r,s),u=c.length,h=m=>{if(o&&m<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const x=Yh(t[g],t[g+1],m);return c[g](x)};return n?m=>h(Ri(t[0],t[a-1],m)):h}function cY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Yh(0,e,r);t.push(Wt(n,1,s))}}function uY(t){const e=[0];return cY(e,t.length-1),e}function dY(t,e){return t.map(n=>n*e)}function hY(t,e){return t.map(()=>e||mP).splice(0,t.length-1)}function hh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=NX(r)?r.map(FE):FE(r),a={done:!1,value:e[0]},o=dY(n&&n.length===e.length?n:uY(e),t),c=lY(o,e,{ease:Array.isArray(s)?s:hY(e,s)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const fY=t=>t!==null;function S_(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(fY),c=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const mY={decay:bb,inertia:bb,tween:hh,keyframes:hh,spring:Bg};function TP(t){typeof t.type=="string"&&(t.type=mY[t.type])}class T_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const pY=t=>t/100;class A_ extends T_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==jr.now()&&this.tick(jr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;TP(e);const{type:n=hh,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||hh;u!==hh&&typeof c[0]!="number"&&(this.mixKeyframes=Ef(pY,jP(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=E_(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:g,repeatType:x,repeatDelay:v,type:E,onUpdate:j,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const N=this.currentTime-h*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let k=this.currentTime,A=r;if(g){const T=Math.min(this.currentTime,s)/c;let P=Math.floor(T),L=T%1;!L&&T>=1&&(L=1),L===1&&P--,P=Math.min(P,g+1),!!(P%2)&&(x==="reverse"?(L=1-L,v&&(L-=v/c)):x==="mirror"&&(A=o)),k=Ri(0,1,L)*c}const D=w?{done:!1,value:m[0]}:A.next(k);a&&(D.value=a(D.value));let{done:F}=D;!w&&u!==null&&(F=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return C&&E!==bb&&(D.value=S_(m,this.options,S,this.speed)),j&&j(D.value),C&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Rs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rs(e)}get time(){return Rs(this.currentTime)}set time(e){var n;e=ca(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(jr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Rs(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=JX,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function gY(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Nl=t=>t*180/Math.PI,wb=t=>{const e=Nl(Math.atan2(t[1],t[0]));return _b(e)},xY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:wb,rotateZ:wb,skewX:t=>Nl(Math.atan(t[1])),skewY:t=>Nl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_b=t=>(t=t%360,t<0&&(t+=360),t),qE=wb,KE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),QE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),yY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KE,scaleY:QE,scale:t=>(KE(t)+QE(t))/2,rotateX:t=>_b(Nl(Math.atan2(t[6],t[5]))),rotateY:t=>_b(Nl(Math.atan2(-t[2],t[0]))),rotateZ:qE,rotate:qE,skewX:t=>Nl(Math.atan(t[4])),skewY:t=>Nl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nb(t){return t.includes("scale")?1:0}function kb(t,e){if(!t||t==="none")return Nb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=yY,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=xY,s=c}if(!s)return Nb(e);const a=r[e],o=s[1].split(",").map(bY);return typeof a=="function"?a(o):o[a]}const vY=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return kb(n,e)};function bY(t){return parseFloat(t.trim())}const zu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bu=new Set(zu),XE=t=>t===Fu||t===_e,wY=new Set(["x","y","z"]),_Y=zu.filter(t=>!wY.has(t));function NY(t){const e=[];return _Y.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const co={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>kb(e,"x"),y:(t,{transform:e})=>kb(e,"y")};co.translateX=co.x;co.translateY=co.y;const Al=new Set;let jb=!1,Eb=!1,Sb=!1;function AP(){if(Eb){const t=Array.from(Al).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=NY(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var c;(c=r.getValue(a))==null||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Eb=!1,jb=!1,Al.forEach(t=>t.complete(Sb)),Al.clear()}function IP(){Al.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Eb=!0)})}function kY(){Sb=!0,IP(),AP(),Sb=!1}class I_{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Al.add(this),jb||(jb=!0,Mt.read(IP),Mt.resolveKeyframes(AP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}gY(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Al.delete(this)}cancel(){this.state==="scheduled"&&(Al.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jY=t=>t.startsWith("--");function EY(t,e,n){jY(e)?t.style.setProperty(e,n):t.style[e]=n}const SY=y_(()=>window.ScrollTimeline!==void 0),TY={};function AY(t,e){const n=y_(t);return()=>TY[e]??n()}const CP=AY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,YE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gd([0,.65,.55,1]),circOut:Gd([.55,0,1,.45]),backIn:Gd([.31,.01,.66,-.59]),backOut:Gd([.33,1.53,.69,.99])};function RP(t,e){if(t)return typeof t=="function"?CP()?EP(t,e):"ease-out":pP(t)?Gd(t):Array.isArray(t)?t.map(n=>RP(n,e)||YE.easeOut):YE[t]}function IY(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const m={[e]:n};u&&(m.offset=u);const g=RP(c,s);Array.isArray(g)&&(m.easing=g);const x={delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(m,x)}function PP(t){return typeof t=="function"&&"applyToOptions"in t}function CY({type:t,...e}){return PP(t)&&CP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class RY extends T_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,x_(typeof e.type!="string");const h=CY(e);this.animation=IY(n,r,s,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=S_(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):EY(n,r,m),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Rs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rs(e)}get time(){return Rs(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ca(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&SY()?(this.animation.timeline=e,Ls):n(this)}}const DP={anticipate:dP,backInOut:uP,circInOut:fP};function PY(t){return t in DP}function DY(t){typeof t.ease=="string"&&PY(t.ease)&&(t.ease=DP[t.ease])}const xv=10;class MY extends RY{constructor(e){DY(e),TP(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new A_({...o,autoplay:!1}),u=Math.max(xv,jr.now()-this.startTime),h=Ri(0,xv,u-xv);n.setWithVelocity(c.sample(Math.max(0,u-h)).value,c.sample(u).value,h),c.stop()}}const JE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Po.test(t)||t==="0")&&!t.startsWith("url("));function LY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function OY(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=JE(s,e),c=JE(a,e);return!o||!c?!1:LY(t)||(n==="spring"||PP(n))&&r}function Tb(t){t.duration=0,t.type="keyframes"}const VY=new Set(["opacity","clipPath","filter","transform"]),UY=y_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function FY(t){var m;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(((m=e==null?void 0:e.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return UY()&&n&&VY.has(n)&&(n!=="transform"||!h)&&!u&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const zY=40;class BY extends T_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:m,...g}){var E;super(),this.stop=()=>{var j,S;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=jr.now();const x={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:u,motionValue:h,element:m,...g},v=(m==null?void 0:m.KeyframeResolver)||I_;this.keyframeResolver=new v(c,(j,S,N)=>this.onKeyframesResolved(j,S,x,!N),u,h,m),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,r,s){var S,N;this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:m}=r;this.resolvedAt=jr.now(),OY(e,a,o,c)||((Na.instantAnimations||!u)&&(m==null||m(S_(e,r,n))),e[0]=e[e.length-1],Tb(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>zY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!h&&FY(x),E=(N=(S=x.motionValue)==null?void 0:S.owner)==null?void 0:N.current,j=v?new MY({...x,element:E}):new A_(x);j.finished.then(()=>{this.notifyFinished()}).catch(Ls),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),kY()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function MP(t,e,n,r=0,s=1){const a=Array.from(t).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:c-a*r}const $Y=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WY(t){const e=$Y.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function LP(t,e,n=1){const[r,s]=WY(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return nP(o)?parseFloat(o):o}return __(s)?LP(s,e,n+1):s}const HY={type:"spring",stiffness:500,damping:25,restSpeed:10},GY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qY={type:"keyframes",duration:.8},KY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QY=(t,{keyframes:e})=>e.length>2?qY:Bu.has(t)?t.startsWith("scale")?GY(e[1]):HY:KY,XY=t=>t!==null;function YY(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(XY),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}function C_(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function JY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const R_=(t,e,n,r={},s,a)=>o=>{const c=C_(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ca(u);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:s};JY(c)||Object.assign(m,QY(t,m)),m.duration&&(m.duration=ca(m.duration)),m.repeatDelay&&(m.repeatDelay=ca(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Tb(m),m.delay===0&&(g=!0)),(Na.instantAnimations||Na.skipAnimations)&&(g=!0,Tb(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const x=YY(m.keyframes,c);if(x!==void 0){Mt.update(()=>{m.onUpdate(x),m.onComplete()});return}}return c.isSync?new A_(m):new BY(m)};function ZE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function P_(t,e,n,r){if(typeof e=="function"){const[s,a]=ZE(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=ZE(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function Zc(t,e,n){const r=t.getProps();return P_(r,e,n!==void 0?n:r.custom,t)}const OP=new Set(["width","height","top","left","right","bottom",...zu]),eS=30,ZY=t=>!isNaN(parseFloat(t));class eJ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=jr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=jr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new v_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Mt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>eS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,eS);return iP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vu(t,e){return new eJ(t,e)}const Ab=t=>Array.isArray(t);function tJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vu(n))}function nJ(t){return Ab(t)?t[t.length-1]||0:t}function rJ(t,e){const n=Zc(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const c=nJ(a[o]);tJ(t,o,c)}}const or=t=>!!(t&&t.getVelocity);function sJ(t){return!!(or(t)&&t.add)}function Ib(t,e){const n=t.getValue("willChange");if(sJ(n))return n.add(e);if(!n&&Na.WillChange){const r=new Na.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function D_(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const iJ="framerAppearId",VP="data-"+D_(iJ);function UP(t){return t.props[VP]}function aJ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function FP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const h=[],m=s&&t.animationState&&t.animationState.getState()[s];for(const g in c){const x=t.getValue(g,t.latestValues[g]??null),v=c[g];if(v===void 0||m&&aJ(m,g))continue;const E={delay:n,...C_(a||{},g)},j=x.get();if(j!==void 0&&!x.isAnimating&&!Array.isArray(v)&&v===j&&!E.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const k=UP(t);if(k){const A=window.MotionHandoffAnimation(k,g,Mt);A!==null&&(E.startTime=A,S=!0)}}Ib(t,g);const N=u??t.shouldReduceMotion;x.start(R_(g,x,v,N&&OP.has(g)?{type:!1}:E,t,S));const w=x.animation;w&&h.push(w)}return o&&Promise.all(h).then(()=>{Mt.update(()=>{o&&rJ(t,o)})}),h}function Cb(t,e,n={}){var u;const r=Zc(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(FP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:x}=s;return oJ(t,e,h,m,g,x,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,m]=c==="beforeChildren"?[a,o]:[o,a];return h().then(()=>m())}else return Promise.all([a(),o(n.delay)])}function oJ(t,e,n=0,r=0,s=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Cb(u,e,{...o,delay:n+(typeof r=="function"?0:r)+MP(t.variantChildren,u,r,s,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function lJ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Cb(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=Cb(t,e,n);else{const s=typeof e=="function"?Zc(t,e,n.custom):e;r=Promise.all(FP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const cJ={test:t=>t==="auto",parse:t=>t},zP=t=>e=>e.test(t),BP=[Fu,_e,Ti,Qa,LX,MX,cJ],tS=t=>BP.find(zP(t));function uJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sP(t):!0}const dJ=new Set(["brightness","contrast","saturate","opacity"]);function hJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(N_)||[];if(!r)return t;const s=n.replace(r,"");let a=dJ.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const fJ=/\b([a-z-]*)\(.*?\)/gu,Rb={...Po,getAnimatableNone:t=>{const e=t.match(fJ);return e?e.map(hJ).join(" "):t}},nS={...Fu,transform:Math.round},mJ={rotate:Qa,rotateX:Qa,rotateY:Qa,rotateZ:Qa,scale:mp,scaleX:mp,scaleY:mp,scaleZ:mp,skew:Qa,skewX:Qa,skewY:Qa,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:Jh,originX:BE,originY:BE,originZ:_e},M_={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,top:_e,right:_e,bottom:_e,left:_e,inset:_e,insetBlock:_e,insetBlockStart:_e,insetBlockEnd:_e,insetInline:_e,insetInlineStart:_e,insetInlineEnd:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,paddingBlock:_e,paddingBlockStart:_e,paddingBlockEnd:_e,paddingInline:_e,paddingInlineStart:_e,paddingInlineEnd:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,marginBlock:_e,marginBlockStart:_e,marginBlockEnd:_e,marginInline:_e,marginInlineStart:_e,marginInlineEnd:_e,fontSize:_e,backgroundPositionX:_e,backgroundPositionY:_e,...mJ,zIndex:nS,fillOpacity:Jh,strokeOpacity:Jh,numOctaves:nS},pJ={...M_,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:Rb,WebkitFilter:Rb},$P=t=>pJ[t];function WP(t,e){let n=$P(t);return n!==Rb&&(n=Po),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gJ=new Set(["auto","none","0"]);function xJ(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!gJ.has(a)&&Zh(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=WP(n,s)}class yJ extends I_{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),__(g))){const x=LP(g,n.current);x!==void 0&&(e[m]=x),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!OP.has(r)||e.length!==2)return;const[s,a]=e,o=tS(s),c=tS(a),u=zE(s),h=zE(a);if(u!==h&&co[r]){this.needsMeasurement=!0;return}if(o!==c)if(XE(o)&&XE(c))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else co[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||uJ(e[s]))&&r.push(s);r.length&&xJ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=co[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=co[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function vJ(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const HP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Pb(t){return rP(t)&&"offsetHeight"in t}const{schedule:L_}=gP(queueMicrotask,!1),Js={x:!1,y:!1};function GP(){return Js.x||Js.y}function bJ(t){return t==="x"||t==="y"?Js[t]?null:(Js[t]=!0,()=>{Js[t]=!1}):Js.x||Js.y?null:(Js.x=Js.y=!0,()=>{Js.x=Js.y=!1})}function qP(t,e){const n=vJ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function rS(t){return!(t.pointerType==="touch"||GP())}function wJ(t,e,n={}){const[r,s,a]=qP(t,n),o=c=>{if(!rS(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const m=g=>{rS(g)&&(h(g),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,s)};return r.forEach(c=>{c.addEventListener("pointerenter",o,s)}),a}const KP=(t,e)=>e?t===e?!0:KP(t,e.parentElement):!1,O_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_J=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QP(t){return _J.has(t.tagName)||t.isContentEditable===!0}const Kp=new WeakSet;function sS(t){return e=>{e.key==="Enter"&&t(e)}}function yv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NJ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=sS(()=>{if(Kp.has(n))return;yv(n,"down");const s=sS(()=>{yv(n,"up")}),a=()=>yv(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function iS(t){return O_(t)&&!GP()}function kJ(t,e,n={}){const[r,s,a]=qP(t,n),o=c=>{const u=c.currentTarget;if(!iS(c))return;Kp.add(u);const h=e(u,c),m=(v,E)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),Kp.has(u)&&Kp.delete(u),iS(v)&&typeof h=="function"&&h(v,{success:E})},g=v=>{m(v,u===window||u===document||n.useGlobalTarget||KP(u,v.target))},x=v=>{m(v,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",x,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,s),Pb(c)&&(c.addEventListener("focus",h=>NJ(h,s)),!QP(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function XP(t){return rP(t)&&"ownerSVGElement"in t}function jJ(t){return XP(t)&&t.tagName==="svg"}const EJ=[...BP,hn,Po],SJ=t=>EJ.find(zP(t)),aS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oc=()=>({x:aS(),y:aS()}),oS=()=>({min:0,max:0}),bn=()=>({x:oS(),y:oS()}),Db={current:null},YP={current:!1},TJ=typeof window<"u";function AJ(){if(YP.current=!0,!!TJ)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Db.current=t.matches;t.addEventListener("change",e),e()}else Db.current=!1}const IJ=new WeakMap;function nx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ef(t){return typeof t=="string"||Array.isArray(t)}const V_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],U_=["initial",...V_];function rx(t){return nx(t.animate)||U_.some(e=>ef(t[e]))}function JP(t){return!!(rx(t)||t.variants)}function CJ(t,e,n){for(const r in e){const s=e[r],a=n[r];if(or(s))t.addValue(r,s);else if(or(a))t.addValue(r,vu(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,vu(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const lS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let $g={};function ZP(t){$g=t}function RJ(){return $g}class PJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=I_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=jr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Mt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=rx(n),this.isVariantNode=JP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in g){const v=g[x];u[x]!==void 0&&or(v)&&v.set(u[x])}}mount(e){var n;this.current=e,IJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(YP.current||AJ(),this.shouldReduceMotion=Db.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ro(this.notifyUpdate),Ro(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bu.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Mt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $g){const n=$g[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lS.length;r++){const s=lS[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=CJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(nP(r)||sP(r))?r=parseFloat(r):!SJ(r)&&Po.test(n)&&(r=WP(e,n)),this.setBaseTarget(e,or(r)?r.get():r)),or(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=P_(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!or(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new v_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){L_.render(this.render)}}class e3 extends PJ{constructor(){super(...arguments),this.KeyframeResolver=yJ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;or(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function t3({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vv(t){return t===void 0||t===1}function Mb({scale:t,scaleX:e,scaleY:n}){return!vv(t)||!vv(e)||!vv(n)}function xl(t){return Mb(t)||n3(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function n3(t){return cS(t.x)||cS(t.y)}function cS(t){return t&&t!=="0%"}function Wg(t,e,n){const r=t-n,s=e*r;return n+s}function uS(t,e,n,r,s){return s!==void 0&&(t=Wg(t,s,r)),Wg(t,n,r)+e}function Lb(t,e=0,n=1,r,s){t.min=uS(t.min,e,n,r,s),t.max=uS(t.max,e,n,r,s)}function r3(t,{x:e,y:n}){Lb(t.x,e.translate,e.scale,e.originPoint),Lb(t.y,n.translate,n.scale,n.originPoint)}const dS=.999999999999,hS=1.0000000000001;function LJ(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let c=0;c<s;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Uc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,r3(t,o)),r&&xl(a.latestValues)&&Uc(t,a.latestValues))}e.x<hS&&e.x>dS&&(e.x=1),e.y<hS&&e.y>dS&&(e.y=1)}function Vc(t,e){t.min=t.min+e,t.max=t.max+e}function fS(t,e,n,r,s=.5){const a=Wt(t.min,t.max,s);Lb(t,e,n,a,r)}function Uc(t,e){fS(t.x,e.x,e.scaleX,e.scale,e.originX),fS(t.y,e.y,e.scaleY,e.scale,e.originY)}function s3(t,e){return t3(MJ(t.getBoundingClientRect(),e))}function OJ(t,e,n){const r=s3(t,n),{scroll:s}=e;return s&&(Vc(r.x,s.offset.x),Vc(r.y,s.offset.y)),r}const VJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UJ=zu.length;function FJ(t,e,n){let r="",s=!0;for(let a=0;a<UJ;a++){const o=zu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number")u=c===(o.startsWith("scale")?1:0);else{const h=parseFloat(c);u=o.startsWith("scale")?h===1:h===0}if(!u||n){const h=HP(c,M_[o]);if(!u){s=!1;const m=VJ[o]||o;r+=`${m}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function F_(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const h=e[u];if(Bu.has(u)){o=!0;continue}else if(yP(u)){s[u]=h;continue}else{const m=HP(h,M_[u]);u.startsWith("origin")?(c=!0,a[u]=m):r[u]=m}}if(e.transform||(o||n?r.transform=FJ(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${h} ${m}`}}function i3(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s==null||s.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function mS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Dd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(_e.test(t))t=parseFloat(t);else return t;const n=mS(t,e.target.x),r=mS(t,e.target.y);return`${n}% ${r}%`}},zJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Po.parse(t);if(s.length>5)return r;const a=Po.createTransformer(t),o=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=c,s[1+o]/=u;const h=Wt(c,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=h),typeof s[3+o]=="number"&&(s[3+o]/=h),a(s)}},Ob={borderRadius:{...Dd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dd,borderTopRightRadius:Dd,borderBottomLeftRadius:Dd,borderBottomRightRadius:Dd,boxShadow:zJ};function a3(t,{layout:e,layoutId:n}){return Bu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ob[t]||t==="opacity")}function z_(t,e,n){var o;const r=t.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const c in r)(or(r[c])||s&&or(s[c])||a3(c,t)||((o=n==null?void 0:n.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(a[c]=r[c]);return a}function BJ(t){return window.getComputedStyle(t)}class $J extends e3{constructor(){super(...arguments),this.type="html",this.renderInstance=i3}readValueFromInstance(e,n){var r;if(Bu.has(n))return(r=this.projection)!=null&&r.isProjecting?Nb(n):vY(e,n);{const s=BJ(e),a=(yP(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return s3(e,n)}build(e,n,r){F_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return z_(e,n,r)}}const WJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},HJ={offset:"strokeDashoffset",array:"strokeDasharray"};function GJ(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?WJ:HJ;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const qJ=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function o3(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...c},u,h,m){if(F_(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x}=t;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete g.transformBox);for(const v of qJ)g[v]!==void 0&&(x[v]=g[v],delete g[v]);e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),s!==void 0&&GJ(g,s,a,o,!1)}const l3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),c3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function KJ(t,e,n,r){i3(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(l3.has(s)?s:D_(s),e.attrs[s])}function u3(t,e,n){const r=z_(t,e,n);for(const s in t)if(or(t[s])||or(e[s])){const a=zu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}class QJ extends e3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bu.has(n)){const r=$P(n);return r&&r.default||0}return n=l3.has(n)?n:D_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return u3(e,n,r)}build(e,n,r){o3(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){KJ(e,n,r,s)}mount(e){this.isSVGTag=c3(e.tagName),super.mount(e)}}const XJ=U_.length;function d3(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?d3(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<XJ;n++){const r=U_[n],s=t.props[r];(ef(s)||s===!1)&&(e[r]=s)}return e}function h3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const YJ=[...V_].reverse(),JJ=V_.length;function ZJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>lJ(t,n,r)))}function eZ(t){let e=ZJ(t),n=pS(),r=!0;const s=u=>(h,m)=>{var x;const g=Zc(t,m,u==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(g){const{transition:v,transitionEnd:E,...j}=g;h={...h,...j,...E}}return h};function a(u){e=u(t)}function o(u){const{props:h}=t,m=d3(t.parent)||{},g=[],x=new Set;let v={},E=1/0;for(let S=0;S<JJ;S++){const N=YJ[S],w=n[N],k=h[N]!==void 0?h[N]:m[N],A=ef(k),D=N===u?w.isActive:null;D===!1&&(E=S);let F=k===m[N]&&k!==h[N]&&A;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),w.protectedKeys={...v},!w.isActive&&D===null||!k&&!w.prevProp||nx(k)||typeof k=="boolean")continue;const C=tZ(w.prevProp,k);let T=C||N===u&&w.isActive&&!F&&A||S>E&&A,P=!1;const L=Array.isArray(k)?k:[k];let z=L.reduce(s(N),{});D===!1&&(z={});const{prevResolvedValues:H={}}=w,B={...H,...z},Pe=oe=>{T=!0,x.has(oe)&&(P=!0,x.delete(oe)),w.needsAnimating[oe]=!0;const K=t.getValue(oe);K&&(K.liveStyle=!1)};for(const oe in B){const K=z[oe],te=H[oe];if(v.hasOwnProperty(oe))continue;let ue=!1;Ab(K)&&Ab(te)?ue=!h3(K,te):ue=K!==te,ue?K!=null?Pe(oe):x.add(oe):K!==void 0&&x.has(oe)?Pe(oe):w.protectedKeys[oe]=!0}w.prevProp=k,w.prevResolvedValues=z,w.isActive&&(v={...v,...z}),r&&t.blockInitialAnimation&&(T=!1);const we=F&&C;T&&(!we||P)&&g.push(...L.map(oe=>{const K={type:N};if(typeof oe=="string"&&r&&!we&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,ue=Zc(te,oe);if(te.enteringChildren&&ue){const{delayChildren:Re}=ue.transition||{};K.delay=MP(te.enteringChildren,t,Re)}}return{animation:oe,options:K}}))}if(x.size){const S={};if(typeof h.initial!="boolean"){const N=Zc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);N&&N.transition&&(S.transition=N.transition)}x.forEach(N=>{const w=t.getBaseTarget(N),k=t.getValue(N);k&&(k.liveStyle=!0),S[N]=w??null}),g.push({animation:S})}let j=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(g):Promise.resolve()}function c(u,h){var g;if(n[u].isActive===h)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(x=>{var v;return(v=x.animationState)==null?void 0:v.setActive(u,h)}),n[u].isActive=h;const m=o(u);for(const x in n)n[x].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pS()}}}function tZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!h3(e,t):!1}function hl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pS(){return{animate:hl(!0),whileInView:hl(),whileHover:hl(),whileTap:hl(),whileDrag:hl(),whileFocus:hl(),exit:hl()}}function gS(t,e){t.min=e.min,t.max=e.max}function Ys(t,e){gS(t.x,e.x),gS(t.y,e.y)}function xS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const f3=1e-4,nZ=1-f3,rZ=1+f3,m3=.01,sZ=0-m3,iZ=0+m3;function Er(t){return t.max-t.min}function aZ(t,e,n){return Math.abs(t-e)<=n}function yS(t,e,n,r=.5){t.origin=r,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=Er(n)/Er(e),t.translate=Wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nZ&&t.scale<=rZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=sZ&&t.translate<=iZ||isNaN(t.translate))&&(t.translate=0)}function fh(t,e,n,r){yS(t.x,e.x,n.x,r?r.originX:void 0),yS(t.y,e.y,n.y,r?r.originY:void 0)}function vS(t,e,n){t.min=n.min+e.min,t.max=t.min+Er(e)}function oZ(t,e,n){vS(t.x,e.x,n.x),vS(t.y,e.y,n.y)}function bS(t,e,n){t.min=e.min-n.min,t.max=t.min+Er(e)}function Hg(t,e,n){bS(t.x,e.x,n.x),bS(t.y,e.y,n.y)}function wS(t,e,n,r,s){return t-=e,t=Wg(t,1/n,r),s!==void 0&&(t=Wg(t,1/s,r)),t}function lZ(t,e=0,n=1,r=.5,s,a=t,o=t){if(Ti.test(e)&&(e=parseFloat(e),e=Wt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Wt(a.min,a.max,r);t===a&&(c-=e),t.min=wS(t.min,e,n,c,s),t.max=wS(t.max,e,n,c,s)}function _S(t,e,[n,r,s],a,o){lZ(t,e[n],e[r],e[s],e.scale,a,o)}const cZ=["x","scaleX","originX"],uZ=["y","scaleY","originY"];function NS(t,e,n,r){_S(t.x,e,cZ,n?n.x:void 0,r?r.x:void 0),_S(t.y,e,uZ,n?n.y:void 0,r?r.y:void 0)}function kS(t){return t.translate===0&&t.scale===1}function p3(t){return kS(t.x)&&kS(t.y)}function jS(t,e){return t.min===e.min&&t.max===e.max}function dZ(t,e){return jS(t.x,e.x)&&jS(t.y,e.y)}function ES(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function g3(t,e){return ES(t.x,e.x)&&ES(t.y,e.y)}function SS(t){return Er(t.x)/Er(t.y)}function TS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Ts(t){return[t("x"),t("y")]}function hZ(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:x,skewX:v,skewY:E}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),x&&(r+=`rotateY(${x}deg) `),v&&(r+=`skewX(${v}deg) `),E&&(r+=`skewY(${E}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const x3=["TopLeft","TopRight","BottomLeft","BottomRight"],fZ=x3.length,AS=t=>typeof t=="string"?parseFloat(t):t,IS=t=>typeof t=="number"||_e.test(t);function mZ(t,e,n,r,s,a){s?(t.opacity=Wt(0,n.opacity??1,pZ(r)),t.opacityExit=Wt(e.opacity??1,0,gZ(r))):a&&(t.opacity=Wt(e.opacity??1,n.opacity??1,r));for(let o=0;o<fZ;o++){const c=`border${x3[o]}Radius`;let u=CS(e,c),h=CS(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||IS(u)===IS(h)?(t[c]=Math.max(Wt(AS(u),AS(h),r),0),(Ti.test(h)||Ti.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=Wt(e.rotate||0,n.rotate||0,r))}function CS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pZ=y3(0,.5,hP),gZ=y3(.5,.95,Ls);function y3(t,e,n){return r=>r<t?0:r>e?1:n(Yh(t,e,r))}function xZ(t,e,n){const r=or(t)?t:vu(t);return r.start(R_("",r,e,n)),r.animation}function tf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const yZ=(t,e)=>t.depth-e.depth;class vZ{constructor(){this.children=[],this.isDirty=!1}add(e){p_(this.children,e),this.isDirty=!0}remove(e){g_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yZ),this.isDirty=!1,this.children.forEach(e)}}function bZ(t,e){const n=jr.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Ro(r),t(a-e))};return Mt.setup(r,!0),()=>Ro(r)}function Qp(t){return or(t)?t.get():t}class wZ{constructor(){this.members=[]}add(e){p_(this.members,e),e.scheduleRender()}remove(e){if(g_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,a=e.options.layoutDependency;s!==void 0&&a!==void 0&&s===a||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:c}=e.options;c===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Xp={hasAnimatedSinceResize:!0,hasEverUpdated:!1},bv=["","X","Y","Z"],_Z=1e3;let NZ=0;function wv(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function v3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=UP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Mt,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&v3(r)}function b3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},c=e==null?void 0:e()){this.id=NZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(EZ),this.nodes.forEach(IZ),this.nodes.forEach(CZ),this.nodes.forEach(SZ)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new vZ)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new v_),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=XP(o)&&!jJ(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let m,g=0;const x=()=>this.root.updateBlockedByResize=!1;Mt.read(()=>{g=window.innerWidth}),t(o,()=>{const v=window.innerWidth;v!==g&&(g=v,this.root.updateBlockedByResize=!0,m&&m(),m=bZ(x,250),Xp.hasAnimatedSinceResize&&(Xp.hasAnimatedSinceResize=!1,this.nodes.forEach(DS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||LZ,{onLayoutAnimationStart:j,onLayoutAnimationComplete:S}=h.getProps(),N=!this.targetLayout||!g3(this.targetLayout,v),w=!g&&x;if(this.options.layoutRoot||this.resumeFrom||w||g&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...C_(E,"layout"),onPlay:j,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,w)}else g||DS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&v3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(RS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(PS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(AZ),this.nodes.forEach(kZ),this.nodes.forEach(jZ)):this.nodes.forEach(PS),this.clearAllSnapshots();const c=jr.now();zn.delta=Ri(0,1e3/60,c-zn.timestamp),zn.timestamp=c,zn.isProcessing=!0,hv.update.process(zn),hv.preRender.process(zn),hv.render.process(zn),zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,L_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TZ),this.sharedNodes.forEach(PZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Er(this.snapshot.measuredBox.x)&&!Er(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!p3(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||xl(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),OZ(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return bn();const c=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(VZ))){const{scroll:m}=this.root;m&&(Vc(c.x,m.offset.x),Vc(c.y,m.offset.y))}return c}removeElementScroll(o){var u;const c=bn();if(Ys(c,o),(u=this.scroll)!=null&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:x}=m;m!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&Ys(c,o),Vc(c.x,g.offset.x),Vc(c.y,g.offset.y))}return c}applyTransform(o,c=!1){const u=bn();Ys(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Uc(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),xl(m.latestValues)&&Uc(u,m.latestValues)}return xl(this.latestValues)&&Uc(u,this.latestValues),u}removeTransform(o){const c=bn();Ys(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!xl(h.latestValues))continue;Mb(h.latestValues)&&h.updateSnapshot();const m=bn(),g=h.measurePageBox();Ys(m,g),NS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return xl(this.latestValues)&&NS(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!this.layout||!(m||g))return;this.resolvedRelativeTargetAt=zn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ys(this.target,this.layout.layoutBox),r3(this.target,this.targetDelta)):Ys(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Mb(this.parent.latestValues)||n3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Hg(this.relativeTargetOrigin,c,u),Ys(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var E;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===zn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Ys(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;LJ(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bn());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xS(this.prevProjectionDelta.x,this.projectionDelta.x),xS(this.prevProjectionDelta.y,this.projectionDelta.y)),fh(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!TS(this.projectionDelta.x,this.prevProjectionDelta.x)||!TS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oc(),this.projectionDelta=Oc(),this.projectionDeltaWithTransform=Oc()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=Oc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=bn(),v=u?u.source:void 0,E=this.layout?this.layout.source:void 0,j=v!==E,S=this.getStack(),N=!S||S.members.length<=1,w=!!(j&&!N&&this.options.crossfade===!0&&!this.path.some(MZ));this.animationProgress=0;let k;this.mixTargetDelta=A=>{const D=A/1e3;MS(g.x,o.x,D),MS(g.y,o.y,D),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hg(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DZ(this.relativeTarget,this.relativeTargetOrigin,x,D),k&&dZ(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=bn()),Ys(k,this.relativeTarget)),j&&(this.animationValues=m,mZ(m,h,this.latestValues,D,w,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,u,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mt.update(()=>{Xp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vu(0)),this.currentAnimation=xZ(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_Z),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:m}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&w3(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||bn();const g=Er(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const x=Er(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}Ys(c,u),Uc(c,m),fh(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wZ),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&wv("z",o,h,this.animationValues);for(let m=0;m<bv.length;m++)wv(`rotate${bv[m]}`,o,h,this.animationValues),wv(`skew${bv[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Qp(c==null?void 0:c.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Qp(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!xl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=hZ(this.projectionDeltaWithTransform,this.treeScale,m);u&&(g=u(m,g)),o.transform=g;const{x,y:v}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,h.animationValues?o.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const E in Ob){if(m[E]===void 0)continue;const{correct:j,applyTo:S,isCSSVariable:N}=Ob[E],w=g==="none"?m[E]:j(m[E],h);if(S){const k=S.length;for(let A=0;A<k;A++)o[S[A]]=w}else N?this.options.visualElement.renderState.vars[E]=w:o[E]=w}this.options.layoutId&&(o.pointerEvents=h===this?Qp(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(RS),this.root.sharedNodes.clear()}}}function kZ(t){t.updateLayout()}function jZ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?Ts(g=>{const x=o?e.measuredBox[g]:e.layoutBox[g],v=Er(x);x.min=r[g].min,x.max=x.min+v}):w3(a,e.layoutBox,r)&&Ts(g=>{const x=o?e.measuredBox[g]:e.layoutBox[g],v=Er(r[g]);x.max=x.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+v)});const c=Oc();fh(c,r,e.layoutBox);const u=Oc();o?fh(u,t.applyTransform(s,!0),e.measuredBox):fh(u,r,e.layoutBox);const h=!p3(c);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:v}=g;if(x&&v){const E=bn();Hg(E,e.layoutBox,x.layoutBox);const j=bn();Hg(j,r,v.layoutBox),g3(E,j)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function EZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function TZ(t){t.clearSnapshot()}function RS(t){t.clearMeasurements()}function PS(t){t.isLayoutDirty=!1}function AZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IZ(t){t.resolveTargetDelta()}function CZ(t){t.calcProjection()}function RZ(t){t.resetSkewAndRotation()}function PZ(t){t.removeLeadSnapshot()}function MS(t,e,n){t.translate=Wt(e.translate,0,n),t.scale=Wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function LS(t,e,n,r){t.min=Wt(e.min,n.min,r),t.max=Wt(e.max,n.max,r)}function DZ(t,e,n,r){LS(t.x,e.x,n.x,r),LS(t.y,e.y,n.y,r)}function MZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LZ={duration:.45,ease:[.4,0,.1,1]},OS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),VS=OS("applewebkit/")&&!OS("chrome/")?Math.round:Ls;function US(t){t.min=VS(t.min),t.max=VS(t.max)}function OZ(t){US(t.x),US(t.y)}function w3(t,e,n){return t==="position"||t==="preserve-aspect"&&!aZ(SS(e),SS(n),.2)}function VZ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const UZ=b3({attachResizeListener:(t,e)=>tf(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),_v={current:void 0},_3=b3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_v.current){const t=new UZ({});t.mount(window),t.setOptions({layoutScroll:!0}),_v.current=t}return _v.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),B_=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function FS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function FZ(...t){return e=>{let n=!1;const r=t.map(s=>{const a=FS(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():FS(t[s],null)}}}}function zZ(...t){return _.useCallback(FZ(...t),t)}class BZ extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Pb(r)&&r.offsetWidth||0,a=Pb(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function $Z({children:t,isPresent:e,anchorX:n,anchorY:r,root:s}){var g;const a=_.useId(),o=_.useRef(null),c=_.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=_.useContext(B_),h=((g=t.props)==null?void 0:g.ref)??(t==null?void 0:t.ref),m=zZ(o,h);return _.useInsertionEffect(()=>{const{width:x,height:v,top:E,left:j,right:S,bottom:N}=c.current;if(e||!o.current||!x||!v)return;const w=n==="left"?`left: ${j}`:`right: ${S}`,k=r==="bottom"?`bottom: ${N}`:`top: ${E}`;o.current.dataset.motionPopId=a;const A=document.createElement("style");u&&(A.nonce=u);const D=s??document.head;return D.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${v}px !important;
            ${w}px !important;
            ${k}px !important;
          }
        `),()=>{D.contains(A)&&D.removeChild(A)}},[e]),i.jsx(BZ,{isPresent:e,childRef:o,sizeRef:c,children:_.cloneElement(t,{ref:m})})}const WZ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:c,anchorY:u,root:h})=>{const m=m_(HZ),g=_.useId();let x=!0,v=_.useMemo(()=>(x=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:E=>{m.set(E,!0);for(const j of m.values())if(!j)return;r&&r()},register:E=>(m.set(E,!1),()=>m.delete(E))}),[n,m,r]);return a&&x&&(v={...v}),_.useMemo(()=>{m.forEach((E,j)=>m.set(j,!1))},[n]),_.useEffect(()=>{!n&&!m.size&&r&&r()},[n]),o==="popLayout"&&(t=i.jsx($Z,{isPresent:n,anchorX:c,anchorY:u,root:h,children:t})),i.jsx(tx.Provider,{value:v,children:t})};function HZ(){return new Map}function N3(t=!0){const e=_.useContext(tx);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=_.useId();_.useEffect(()=>{if(t)return s(a)},[t]);const o=_.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const pp=t=>t.key||"";function zS(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const qt=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",anchorY:u="top",root:h})=>{const[m,g]=N3(o),x=_.useMemo(()=>zS(t),[t]),v=o&&!m?[]:x.map(pp),E=_.useRef(!0),j=_.useRef(x),S=m_(()=>new Map),N=_.useRef(new Set),[w,k]=_.useState(x),[A,D]=_.useState(x);tP(()=>{E.current=!1,j.current=x;for(let T=0;T<A.length;T++){const P=pp(A[T]);v.includes(P)?(S.delete(P),N.current.delete(P)):S.get(P)!==!0&&S.set(P,!1)}},[A,v.length,v.join("-")]);const F=[];if(x!==w){let T=[...x];for(let P=0;P<A.length;P++){const L=A[P],z=pp(L);v.includes(z)||(T.splice(P,0,L),F.push(L))}return a==="wait"&&F.length&&(T=F),D(zS(T)),k(x),null}const{forceRender:C}=_.useContext(f_);return i.jsx(i.Fragment,{children:A.map(T=>{const P=pp(T),L=o&&!m?!1:x===A||v.includes(P),z=()=>{if(N.current.has(P))return;if(N.current.add(P),S.has(P))S.set(P,!0);else return;let H=!0;S.forEach(B=>{B||(H=!1)}),H&&(C==null||C(),D(j.current),o&&(g==null||g()),r&&r())};return i.jsx(WZ,{isPresent:L,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:h,onExitComplete:L?void 0:z,anchorX:c,anchorY:u,children:T},P)})})},k3=_.createContext({strict:!1}),BS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $S=!1;function GZ(){if($S)return;const t={};for(const e in BS)t[e]={isEnabled:n=>BS[e].some(r=>!!n[r])};ZP(t),$S=!0}function j3(){return GZ(),RJ()}function qZ(t){const e=j3();for(const n in t)e[n]={...e[n],...t[n]};ZP(e)}const KZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||KZ.has(t)}let E3=t=>!Gg(t);function QZ(t){typeof t=="function"&&(E3=e=>e.startsWith("on")?!Gg(e):t(e))}try{QZ(require("@emotion/is-prop-valid").default)}catch{}function XZ(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(E3(s)||n===!0&&Gg(s)||!e&&!Gg(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const sx=_.createContext({});function YZ(t,e){if(rx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ef(n)?n:void 0,animate:ef(r)?r:void 0}}return t.inherit!==!1?e:{}}function JZ(t){const{initial:e,animate:n}=YZ(t,_.useContext(sx));return _.useMemo(()=>({initial:e,animate:n}),[WS(e),WS(n)])}function WS(t){return Array.isArray(t)?t.join(" "):t}const $_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S3(t,e,n){for(const r in e)!or(e[r])&&!a3(r,n)&&(t[r]=e[r])}function ZZ({transformTemplate:t},e){return _.useMemo(()=>{const n=$_();return F_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function eee(t,e){const n=t.style||{},r={};return S3(r,n,t),Object.assign(r,ZZ(t,e)),r}function tee(t,e){const n={},r=eee(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const T3=()=>({...$_(),attrs:{}});function nee(t,e,n,r){const s=_.useMemo(()=>{const a=T3();return o3(a,e,c3(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};S3(a,t.style,t),s.style={...a,...s.style}}return s}const ree=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function W_(t){return typeof t!="string"||t.includes("-")?!1:!!(ree.indexOf(t)>-1||/[A-Z]/u.test(t))}function see(t,e,n,{latestValues:r},s,a=!1,o){const u=(o??W_(t)?nee:tee)(e,r,s,t),h=XZ(e,typeof t=="string",a),m=t!==_.Fragment?{...h,...u,ref:n}:{},{children:g}=e,x=_.useMemo(()=>or(g)?g.get():g,[g]);return _.createElement(t,{...m,children:x})}function iee({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:aee(n,r,s,t),renderState:e()}}function aee(t,e,n,r){const s={},a=r(t,{});for(const x in a)s[x]=Qp(a[x]);let{initial:o,animate:c}=t;const u=rx(t),h=JP(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||o===!1;const g=m?c:o;if(g&&typeof g!="boolean"&&!nx(g)){const x=Array.isArray(g)?g:[g];for(let v=0;v<x.length;v++){const E=P_(t,x[v]);if(E){const{transitionEnd:j,transition:S,...N}=E;for(const w in N){let k=N[w];if(Array.isArray(k)){const A=m?k.length-1:0;k=k[A]}k!==null&&(s[w]=k)}for(const w in j)s[w]=j[w]}}}return s}const A3=t=>(e,n)=>{const r=_.useContext(sx),s=_.useContext(tx),a=()=>iee(t,e,r,s);return n?a():m_(a)},oee=A3({scrapeMotionValuesFromProps:z_,createRenderState:$_}),lee=A3({scrapeMotionValuesFromProps:u3,createRenderState:T3}),cee=Symbol.for("motionComponentSymbol");function uee(t,e,n){const r=_.useRef(n);_.useInsertionEffect(()=>{r.current=n});const s=_.useRef(null);return _.useCallback(a=>{var c;a&&((c=t.onMount)==null||c.call(t,a)),e&&(a?e.mount(a):e.unmount());const o=r.current;if(typeof o=="function")if(a){const u=o(a);typeof u=="function"&&(s.current=u)}else s.current?(s.current(),s.current=null):o(a);else o&&(o.current=a)},[e])}const I3=_.createContext({});function qd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dee(t,e,n,r,s,a){var N,w;const{visualElement:o}=_.useContext(sx),c=_.useContext(k3),u=_.useContext(tx),h=_.useContext(B_).reducedMotion,m=_.useRef(null),g=_.useRef(!1);r=r||c.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h,isSVG:a}),g.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const x=m.current,v=_.useContext(I3);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&hee(m.current,n,s,v);const E=_.useRef(!1);_.useInsertionEffect(()=>{x&&E.current&&x.update(n,u)});const j=n[VP],S=_.useRef(!!j&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,j))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,j)));return tP(()=>{g.current=!0,x&&(E.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),S.current&&x.animationState&&x.animationState.animateChanges())}),_.useEffect(()=>{x&&(!S.current&&x.animationState&&x.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)==null||k.call(window,j)}),S.current=!1),x.enteringChildren=void 0)}),x}function hee(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:C3(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||c&&qd(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:u,layoutRoot:h})}function C3(t){if(t)return t.options.allowProjection!==!1?t.projection:C3(t.parent)}function Nv(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&qZ(r);const a=n?n==="svg":W_(t),o=a?lee:oee;function c(h,m){let g;const x={..._.useContext(B_),...h,layoutId:fee(h)},{isStatic:v}=x,E=JZ(h),j=o(h,v);if(!v&&eP){mee();const S=pee(x);g=S.MeasureLayout,E.visualElement=dee(t,j,x,s,S.ProjectionNode,a)}return i.jsxs(sx.Provider,{value:E,children:[g&&E.visualElement?i.jsx(g,{visualElement:E.visualElement,...x}):null,see(t,h,uee(j,E.visualElement,m),j,v,e,a)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=_.forwardRef(c);return u[cee]=t,u}function fee({layoutId:t}){const e=_.useContext(f_).id;return e&&t!==void 0?e+"-"+t:t}function mee(t,e){_.useContext(k3).strict}function pee(t){const e=j3(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function gee(t,e){if(typeof Proxy>"u")return Nv;const n=new Map,r=(a,o)=>Nv(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,Nv(o,void 0,t,e)),n.get(o))})}const xee=(t,e)=>e.isSVG??W_(t)?new QJ(e):new $J(e,{allowProjection:t!==_.Fragment});class yee extends Bo{constructor(e){super(e),e.animationState||(e.animationState=eZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let vee=0;class bee extends Bo{constructor(){super(...arguments),this.id=vee++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const wee={animation:{Feature:yee},exit:{Feature:bee}};function Af(t){return{point:{x:t.pageX,y:t.pageY}}}const _ee=t=>e=>O_(e)&&t(e,Af(e));function mh(t,e,n,r){return tf(t,e,_ee(n),r)}const R3=({current:t})=>t?t.ownerDocument.defaultView:null,HS=(t,e)=>Math.abs(t-e);function Nee(t,e){const n=HS(t.x,e.x),r=HS(t.y,e.y);return Math.sqrt(n**2+r**2)}const GS=new Set(["auto","scroll"]);class P3{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=jv(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,j=Nee(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!j)return;const{point:S}=v,{timestamp:N}=zn;this.history.push({...S,timestamp:N});const{onStart:w,onMove:k}=this.handlers;E||(w&&w(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,v)},this.handlePointerMove=(v,E)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=kv(E,this.transformPagePoint),Mt.update(this.updatePoint,!0)},this.handlePointerUp=(v,E)=>{this.end();const{onEnd:j,onSessionEnd:S,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=jv(v.type==="pointercancel"?this.lastMoveEventInfo:kv(E,this.transformPagePoint),this.history);this.startEvent&&j&&j(v,w),S&&S(v,w)},!O_(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const u=Af(e),h=kv(u,this.transformPagePoint),{point:m}=h,{timestamp:g}=zn;this.history=[{...m,timestamp:g}];const{onSessionStart:x}=n;x&&x(e,jv(h,this.history)),this.removeListeners=Ef(mh(this.contextWindow,"pointermove",this.handlePointerMove),mh(this.contextWindow,"pointerup",this.handlePointerUp),mh(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(GS.has(r.overflowX)||GS.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),Mt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ro(this.updatePoint)}}function kv(t,e){return e?{point:e(t.point)}:t}function qS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jv({point:t},e){return{point:t,delta:qS(t,D3(e)),offset:qS(t,kee(e)),velocity:jee(e,.1)}}function kee(t){return t[0]}function D3(t){return t[t.length-1]}function jee(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=D3(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ca(e)));)n--;if(!r)return{x:0,y:0};const a=Rs(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Eee(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Wt(n,t,r.max):Math.min(t,n)),t}function KS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function See(t,{top:e,left:n,bottom:r,right:s}){return{x:KS(t.x,n,s),y:KS(t.y,e,r)}}function QS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Tee(t,e){return{x:QS(t.x,e.x),y:QS(t.y,e.y)}}function Aee(t,e){let n=.5;const r=Er(t),s=Er(e);return s>r?n=Yh(e.min,e.max-r,t.min):r>s&&(n=Yh(t.min,t.max-s,e.min)),Ri(0,1,n)}function Iee(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vb=.35;function Cee(t=Vb){return t===!1?t=0:t===!0&&(t=Vb),{x:XS(t,"left","right"),y:XS(t,"top","bottom")}}function XS(t,e,n){return{min:YS(t,e),max:YS(t,n)}}function YS(t,e){return typeof t=="number"?t:t[e]||0}const Ree=new WeakMap;class Pee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{n?(this.stopAnimation(),this.snapToCursor(Af(g).point)):this.pauseAnimation()},o=(g,x)=>{this.stopAnimation();const{drag:v,dragPropagation:E,onDragStart:j}=this.getProps();if(v&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bJ(v),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ts(N=>{let w=this.getAxisMotionValue(N).get()||0;if(Ti.test(w)){const{projection:k}=this.visualElement;if(k&&k.layout){const A=k.layout.layoutBox[N];A&&(w=Er(A)*(parseFloat(w)/100))}}this.originPoint[N]=w}),j&&Mt.postRender(()=>j(g,x)),Ib(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x;const{dragPropagation:v,dragDirectionLock:E,onDirectionLock:j,onDrag:S}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:N}=x;if(E&&this.currentDirection===null){this.currentDirection=Dee(N),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),S&&S(g,x)},u=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x,this.stop(g,x),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ts(g=>{var x;return this.getAnimationState(g)==="paused"&&((x=this.getAxisMotionValue(g).animation)==null?void 0:x.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new P3(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:R3(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Mt.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!gp(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Eee(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&qd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=See(r.layoutBox,e):this.constraints=!1,this.elastic=Cee(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ts(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Iee(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!qd(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=OJ(r,s.root,this.visualElement.getTransformPagePoint());let o=Tee(s.layout.layoutBox,a);if(n){const c=n(DJ(o));this.hasMutatedConstraints=!!c,c&&(o=t3(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Ts(m=>{if(!gp(m,n,this.currentDirection))return;let g=u&&u[m]||{};o&&(g={min:0,max:0});const x=s?200:1e6,v=s?40:1e7,E={type:"inertia",velocity:r?e[m]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,E)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Ib(this.visualElement,e),r.start(R_(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ts(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ts(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ts(n=>{const{drag:r}=this.getProps();if(!gp(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[n],u=a.get()||0;a.set(e[n]-Wt(o,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!qd(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ts(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();s[o]=Aee({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ts(o=>{if(!gp(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(Wt(u,h,s[o]))})}addListeners(){if(!this.visualElement.current)return;Ree.set(this.visualElement,this);const e=this.visualElement.current,n=mh(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps(),g=u.target,x=g!==e&&QP(g);h&&m&&!x&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();qd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Mt.read(r);const o=tf(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ts(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=Vb,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function gp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Dee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Mee extends Bo{constructor(e){super(e),this.removeGroupControls=Ls,this.removeListeners=Ls,this.controls=new Pee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ls}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const JS=t=>(e,n)=>{t&&Mt.postRender(()=>t(e,n))};class Lee extends Bo{constructor(){super(...arguments),this.removePointerDownListener=Ls}onPointerDown(e){this.session=new P3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:JS(e),onStart:JS(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&Mt.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=mh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Ev=!1;class Oee extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),Ev&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Xp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),Ev=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Mt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),L_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Ev=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function M3(t){const[e,n]=N3(),r=_.useContext(f_);return i.jsx(Oee,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(I3),isPresent:e,safeToRemove:n})}const Vee={pan:{Feature:Lee},drag:{Feature:Mee,ProjectionNode:_3,MeasureLayout:M3}};function ZS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Mt.postRender(()=>a(e,Af(e)))}class Uee extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=wJ(e,(n,r)=>(ZS(this.node,r,"Start"),s=>ZS(this.node,s,"End"))))}unmount(){}}class Fee extends Bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ef(tf(this.node.current,"focus",()=>this.onFocus()),tf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Mt.postRender(()=>a(e,Af(e)))}class zee extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=kJ(e,(n,r)=>(eT(this.node,r,"Start"),(s,{success:a})=>eT(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ub=new WeakMap,Sv=new WeakMap,Bee=t=>{const e=Ub.get(t.target);e&&e(t)},$ee=t=>{t.forEach(Bee)};function Wee({root:t,...e}){const n=t||document;Sv.has(n)||Sv.set(n,{});const r=Sv.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver($ee,{root:t,...e})),r[s]}function Hee(t,e,n){const r=Wee(e);return Ub.set(t,n),r.observe(t),()=>{Ub.delete(t),r.unobserve(t)}}const Gee={some:0,all:1};class qee extends Bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Gee[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),x=h?m:g;x&&x(u)};return Hee(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Kee(e,n))&&this.startObserver()}unmount(){}}function Kee({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Qee={inView:{Feature:qee},tap:{Feature:zee},focus:{Feature:Fee},hover:{Feature:Uee}},Xee={layout:{ProjectionNode:_3,MeasureLayout:M3}},Yee={...wee,...Qee,...Vee,...Xee},U=gee(Yee,xee),Tv=[{rank:"SPARK",minLevel:0,maxLevel:10,title:"Spark",titleDE:"Funke",color:"#60a5fa",gradient:"linear-gradient(135deg, #60a5fa, #3b82f6)",glowColor:"rgba(96, 165, 250, 0.5)",description:"Der Beginn deiner Reise",perks:["Basic Aura-Glow","Zugang zur Nebula Map","Kann an Wlkchen teilnehmen"],shaderEffect:"basic-glow"},{rank:"FLAME",minLevel:11,maxLevel:30,title:"Flame",titleDE:"Flamme",color:"#f97316",gradient:"linear-gradient(135deg, #f97316, #ea580c)",glowColor:"rgba(249, 115, 22, 0.5)",description:"Deine Prsenz wird bemerkt",perks:["Erweiterte Aura mit Partikel-Effekt","Kann eigene Wlkchen erstellen","Sichtbar auf grerer Distanz","Flame-Badge im Profil"],shaderEffect:"flame-aura"},{rank:"NOVA",minLevel:31,maxLevel:50,title:"Nova",titleDE:"Nova",color:"#a855f7",gradient:"linear-gradient(135deg, #a855f7, #9333ea)",glowColor:"rgba(168, 85, 247, 0.6)",description:"Du strahlst wie ein Stern",perks:["Nebula-Puls Aura-Effekt","Priority Matching","Exklusive Nova-Lounges","Nova-Badge & Custom Farben","Kann andere User einladen"],shaderEffect:"nebula-pulse"},{rank:"SOVEREIGN",minLevel:51,maxLevel:100,title:"Sovereign",titleDE:"Souvern",color:"#fbbf24",gradient:"linear-gradient(135deg, #fbbf24, #f59e0b, #eab308)",glowColor:"rgba(251, 191, 36, 0.6)",description:"Die Krone der Prsenz",perks:["Sovereign God-Ray Effekt","VIP Zugang zu allen Lounges","Kann Private Rume hosten","Gold Crown Badge","Early Access zu Features","Founder-Interaktion"],shaderEffect:"sovereign-rays"}];function Av(t){return Math.floor(100*Math.pow(1.15,t-1))}function bu(t){if(!t||t<=0)return{level:0,currentXP:0,neededXP:Av(1)};let e=1,n=t;for(;e<100;){const r=Av(e);if(n<r)return{level:e,currentXP:n,neededXP:r};n-=r,e++}return{level:100,currentXP:n,neededXP:Av(100)}}function wu(t){for(const e of Tv)if(t>=e.minLevel&&t<=e.maxLevel)return e;return Tv[Tv.length-1]}const Jee=(t,e=50)=>{const n=it(Ve(J,"rooms"),$e("isActive","==",!0),Us("createdAt","desc"),Kr(e));return cr(n,r=>{const s=r.docs.map(a=>{const o=a.data();return{id:a.id,name:o.name||"Unnamed Room",description:o.description,type:o.type||"public",participants:o.participants||[],maxParticipants:o.maxParticipants||8,isActive:o.isActive!==!1,createdAt:o.createdAt,createdBy:o.createdBy,hostId:o.hostId||o.createdBy,userCount:o.userCount||(o.participants||[]).length,location:o.location,tags:o.tags}});s.sort((a,o)=>o.participants.length-a.participants.length),t(s)},r=>{console.error("[RoomService] Subscription error:",r),t([])})},Zee=t=>t>=6?"hot":t>=4?"busy":t>=2?"active":"quiet",ete=t=>{switch(t){case"hot":return"#ef4444";case"busy":return"#f97316";case"active":return"#22c55e";default:return"#6b7280"}},tT={light:{pattern:[10],description:"Subtle tap for minor interactions"},medium:{pattern:[20,10,20],description:"Standard feedback for buttons and selections"},heavy:{pattern:[50,20,50],description:"Strong feedback for important actions"},success:{pattern:[10,30,10,30,50],description:"Positive confirmation pattern"},error:{pattern:[100,50,100],description:"Error or rejection feedback"},warning:{pattern:[30,20,30,20,30],description:"Alert or warning pattern"}};function tte(){return typeof navigator<"u"&&"vibrate"in navigator}function Nt(t="medium"){var e;if(!tte())return!1;try{const n=((e=tT[t])==null?void 0:e.pattern)||tT.medium.pattern;return navigator.vibrate(n)}catch(n){return console.warn("[Haptics] Failed to trigger haptic:",n),!1}}const nte="MIbamchs82Ve7y0ecX2TpPyymbw1",L3=({children:t,className:e="",onClick:n,glow:r})=>i.jsx("div",{onClick:n,className:`rounded-2xl ${n?"cursor-pointer active:scale-[0.98] transition-transform":""} ${e}`,style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.12)",boxShadow:r?`0 0 30px ${r}`:void 0},children:t}),rte=_.memo(function({profile:e,isLoading:n,onProfileClick:r,onNotificationsClick:s,onSettingsClick:a,unreadCount:o}){var g;const c=_.useMemo(()=>e!=null&&e.xp?bu(e.xp):{level:1,currentXP:0,neededXP:100},[e==null?void 0:e.xp]),u=_.useMemo(()=>wu(c.level),[c.level]),h=_.useMemo(()=>Math.min(100,c.currentXP/c.neededXP*100),[c]),m=e!=null&&e.isFounder?"#fbbf24":"#a855f7";return i.jsxs("div",{className:"px-5 pt-6 pb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("light"),r()},className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl overflow-hidden relative flex-shrink-0",style:{background:`linear-gradient(135deg, ${m}40, ${m}20)`,border:`2px solid ${m}60`,boxShadow:`0 0 25px ${m}40`},children:[e!=null&&e.photoURL?i.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("span",{className:"text-xl font-black text-white",children:((g=e==null?void 0:e.displayName)==null?void 0:g.charAt(0).toUpperCase())||"?"})}),(e==null?void 0:e.isFounder)&&i.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.5)"},children:i.jsx(kn,{size:12,className:"text-black"})})]}),i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-lg font-bold text-white",children:n?"Laden...":(e==null?void 0:e.displayName)||"Willkommen"}),(e==null?void 0:e.isFounder)&&i.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] font-black bg-amber-500/30 text-amber-400",children:"FOUNDER"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("span",{className:"text-xs font-medium text-white/50",children:["Level ",c.level]}),i.jsx("span",{className:"text-white/30",children:""}),i.jsxs("span",{className:"text-xs font-semibold",style:{color:m},children:[u.rank," ",u.title]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(U.button,{whileTap:{scale:.9},onClick:()=>{Nt("light"),a()},className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.5)"},children:i.jsx(J0,{size:22,className:"text-white"})}),i.jsxs(U.button,{whileTap:{scale:.9},onClick:()=>{Nt("light"),s()},className:"relative w-11 h-11 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.25), rgba(245, 158, 11, 0.15))",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 2px 10px rgba(251, 191, 36, 0.2)"},children:[i.jsx(Tl,{size:20,className:"text-white"}),o>0&&i.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white bg-red-500",children:o>9?"9+":o})]})]})]}),i.jsxs(L3,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`${m}30`},children:i.jsx(zo,{size:16,style:{color:m}})}),i.jsx("span",{className:"text-sm font-semibold text-white",children:"Level Fortschritt"})]}),i.jsxs("span",{className:"text-sm font-bold",style:{color:m},children:[c.currentXP," / ",c.neededXP," XP"]})]}),i.jsx("div",{className:"h-3 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:`linear-gradient(90deg, ${m}, ${m}cc)`},initial:{width:0},animate:{width:`${h}%`},transition:{duration:.8,ease:"easeOut"}})}),i.jsxs("p",{className:"text-xs text-white/40 mt-2 text-center",children:["Noch ",c.neededXP-c.currentXP," XP bis Level ",c.level+1]})]})]})}),ste=_.memo(function({friendsCount:e,streakDays:n,onFriendsClick:r,onStreaksClick:s}){return i.jsx("div",{className:"px-5 py-3",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("light"),r()},className:"p-5 rounded-2xl text-center",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(59, 130, 246, 0.15))",border:"2px solid rgba(59, 130, 246, 0.5)",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.3)"},children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.5), rgba(59, 130, 246, 0.3))",boxShadow:"0 2px 10px rgba(59, 130, 246, 0.3)"},children:i.jsx(kt,{size:24,className:"text-white"})}),i.jsx("p",{className:"text-3xl font-black text-white",children:e||0}),i.jsx("p",{className:"text-sm text-blue-200/80 font-medium mt-1",children:"Freunde"})]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("light"),s()},className:"p-5 rounded-2xl text-center",style:{background:"linear-gradient(135deg, rgba(249, 115, 22, 0.35), rgba(249, 115, 22, 0.15))",border:"2px solid rgba(249, 115, 22, 0.5)",boxShadow:"0 4px 20px rgba(249, 115, 22, 0.3)"},children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(249, 115, 22, 0.5), rgba(249, 115, 22, 0.3))",boxShadow:"0 2px 10px rgba(249, 115, 22, 0.3)"},children:i.jsx(la,{size:24,className:"text-white"})}),i.jsx("p",{className:"text-3xl font-black text-white",children:n||0}),i.jsx("p",{className:"text-sm text-orange-200/80 font-medium mt-1",children:"Tage Streak "})]})]})})}),ite=_.memo(function({room:e,onJoin:n}){var a,o,c,u;const r=Zee(((a=e.participants)==null?void 0:a.length)||0),s=ete(r);return i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("light"),n()},className:"w-full p-4 rounded-2xl flex items-center gap-4",style:{background:"rgba(255, 255, 255, 0.06)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center relative flex-shrink-0",style:{background:`${s}25`,border:`2px solid ${s}50`},children:[i.jsx(Ar,{size:20,style:{color:s}}),(((o=e.participants)==null?void 0:o.length)||0)>0&&i.jsx(U.div,{className:"absolute inset-0 rounded-xl",style:{border:`2px solid ${s}`},animate:{scale:[1,1.2,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]}),i.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i.jsx("p",{className:"text-base font-bold text-white truncate",children:e.name}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(kt,{size:12,className:"text-white/50"}),i.jsxs("span",{className:"text-xs font-medium text-white/50",children:[((c=e.participants)==null?void 0:c.length)||0,"/",e.maxParticipants||8]})]}),((u=e.participants)==null?void 0:u.some(h=>h.isSpeaking))&&i.jsxs("span",{className:"text-xs font-bold text-emerald-400 flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),"Live"]})]})]}),i.jsx("div",{className:"px-4 py-2 rounded-xl",style:{background:`${s}20`,border:`1px solid ${s}40`},children:i.jsx("span",{className:"text-xs font-bold",style:{color:s},children:"Join"})})]})}),ate=_.memo(function({rooms:e,isLoading:n,onRoomJoin:r,onViewAll:s,onCreateRoom:a}){return i.jsxs("div",{className:"px-5 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:i.jsx(Ar,{size:20,className:"text-violet-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Aktive Rooms"}),e.length>0&&i.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[e.length," live"]})]})]}),e.length>0&&i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("light"),s()},className:"px-3 py-1.5 rounded-lg text-xs text-violet-400 font-bold flex items-center gap-1",style:{background:"rgba(139, 92, 246, 0.15)"},children:["Alle",i.jsx(Ms,{size:14})]})]}),n?i.jsx("div",{className:"space-y-3",children:[1,2].map(o=>i.jsx("div",{className:"h-20 rounded-2xl animate-pulse",style:{background:"rgba(255, 255, 255, 0.05)"}},o))}):e.length===0?i.jsxs(L3,{className:"p-8 text-center",glow:"rgba(139, 92, 246, 0.1)",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(139, 92, 246, 0.4)"},children:i.jsx(fr,{size:36,className:"text-violet-400"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Die Wolken sind leer"}),i.jsx("p",{className:"text-sm text-white/50 mb-6",children:"Erffne den ersten Room und lade Freunde ein!"}),i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("medium"),a()},className:"px-8 py-4 rounded-xl inline-flex items-center gap-3 font-bold text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.5)"},children:[i.jsx(jf,{size:20}),"Room erstellen"]})]}):i.jsx("div",{className:"space-y-3",children:e.slice(0,3).map(o=>i.jsx(ite,{room:o,onJoin:()=>r(o.id)},o.id))})]})}),ote=_.memo(function({onInviteFriends:e,onCreateRoom:n}){return i.jsxs("div",{className:"px-5 py-4",children:[i.jsx("h3",{className:"text-sm font-bold text-white/60 mb-3 uppercase tracking-wider",children:"Schnellaktionen"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("light"),e()},className:"p-4 rounded-2xl text-left",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(59, 130, 246, 0.20))",border:"2px solid rgba(59, 130, 246, 0.5)",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mb-3",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.5), rgba(59, 130, 246, 0.3))",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)"},children:i.jsx(Dn,{size:20,className:"text-white"})}),i.jsx("p",{className:"text-sm font-bold text-white",children:"Freunde einladen"}),i.jsx("p",{className:"text-[11px] text-blue-300/70 mt-1",children:"+100 XP pro Einladung"})]}),i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("light"),n()},className:"p-4 rounded-2xl text-left",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.35), rgba(168, 85, 247, 0.20))",border:"2px solid rgba(139, 92, 246, 0.5)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mb-3",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.5), rgba(168, 85, 247, 0.3))",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},children:i.jsx(Ar,{size:20,className:"text-white"})}),i.jsx("p",{className:"text-sm font-bold text-white",children:"Room erstellen"}),i.jsx("p",{className:"text-[11px] text-violet-300/70 mt-1",children:"Starte eine Session"})]})]})]})});function nT(){const t=yt(),{user:e}=Bs(),[n,r]=_.useState(null),[s,a]=_.useState([]),[o,c]=_.useState(0),[u,h]=_.useState(!0),[m,g]=_.useState(!0);_.useEffect(()=>{if(!(e!=null&&e.id)){h(!1);return}const D=cr(ce(J,"users",e.id),F=>{if(F.exists()){const C=F.data();r({displayName:C.displayName||C.username||"Anonym",username:C.username||"anonym",photoURL:C.photoURL||C.avatarUrl,xp:C.xp||C.totalXP||0,isFounder:C.role==="founder"||C.isAdmin===!0||e.id===nte,friendsCount:C.friendsCount||0,streakDays:C.streakDays||C.daysActive||0})}h(!1)},F=>{console.error("Profile subscription error:",F),h(!1)});return()=>D()},[e==null?void 0:e.id]),_.useEffect(()=>{try{const D=Jee(F=>{a(F||[]),g(!1)},10);return()=>D()}catch(D){console.error("Rooms subscription error:",D),g(!1)}},[]),_.useEffect(()=>{if(e!=null&&e.id)try{const D=it(Ve(J,"users",e.id,"notifications"),$e("read","==",!1),Us("createdAt","desc"),Kr(50)),F=cr(D,C=>{c(C.size)});return()=>F()}catch(D){console.error("Notifications subscription error:",D)}},[e==null?void 0:e.id]);const x=_.useCallback(()=>t("/profile"),[t]),v=_.useCallback(()=>t("/notifications"),[t]),E=_.useCallback(()=>t("/settings"),[t]),j=_.useCallback(()=>t("/friends"),[t]),S=_.useCallback(()=>t("/streaks"),[t]),N=_.useCallback(D=>t(`/room/${D}`),[t]),w=_.useCallback(()=>t("/rooms"),[t]),k=_.useCallback(()=>t("/rooms?create=true"),[t]),A=_.useCallback(()=>t("/invites"),[t]);return i.jsxs("div",{className:"min-h-screen min-h-[100dvh] pb-32",style:{background:"#050505"},children:[i.jsx(rte,{profile:n,isLoading:u,onProfileClick:x,onNotificationsClick:v,onSettingsClick:E,unreadCount:o}),i.jsx(ste,{friendsCount:(n==null?void 0:n.friendsCount)||0,streakDays:(n==null?void 0:n.streakDays)||0,onFriendsClick:j,onStreaksClick:S}),i.jsx(ate,{rooms:s,isLoading:m,onRoomJoin:N,onViewAll:w,onCreateRoom:k}),i.jsx(ote,{onInviteFriends:A,onCreateRoom:k})]})}const lte=t=>t>=6?"hot":t>=4?"busy":t>=2?"active":"quiet",cte=t=>{switch(t){case"hot":return"#ef4444";case"busy":return"#f97316";case"active":return"#22c55e";default:return"#6b7280"}},ute=_.memo(function({user:e,isOpen:n,onClose:r,onGiveStar:s,onAddFriend:a,currentUserId:o}){if(!e)return null;const c=e.oderId===o;return i.jsx(qt,{children:n&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[300] flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.85)"},onClick:r,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-xs rounded-3xl overflow-hidden",style:{background:"linear-gradient(180deg, rgba(20, 15, 35, 0.98), rgba(10, 8, 20, 0.99))",border:"1px solid rgba(139, 92, 246, 0.2)"},onClick:u=>u.stopPropagation(),children:[i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl overflow-hidden mb-4",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1))",border:`2px solid ${e.isHost?"#fbbf24":"rgba(139, 92, 246, 0.4)"}`},children:e.photoURL?i.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl font-bold text-white/70",children:e.displayName.charAt(0).toUpperCase()})})}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:e.displayName}),e.isHost&&i.jsx(kn,{size:16,className:"text-amber-400"})]}),i.jsxs("p",{className:"text-xs text-white/40",children:["Level ",e.level]}),i.jsx("div",{className:"flex items-center justify-center gap-3 mt-3",children:e.isMuted?i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-500/20",children:[i.jsx(kf,{size:12,className:"text-red-400"}),i.jsx("span",{className:"text-[10px] text-red-400",children:"Stumm"})]}):e.isSpeaking?i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-emerald-500/20",children:[i.jsx(ex,{size:12,className:"text-emerald-400"}),i.jsx("span",{className:"text-[10px] text-emerald-400",children:"Spricht"})]}):i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/10",children:[i.jsx(li,{size:12,className:"text-white/40"}),i.jsx("span",{className:"text-[10px] text-white/40",children:"Zuhren"})]})})]}),!c&&i.jsxs("div",{className:"p-4 pt-0 space-y-2",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("medium"),s(e.oderId),r()},className:"w-full py-3 rounded-xl flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.1))",border:"1px solid rgba(251, 191, 36, 0.3)"},children:[i.jsx(jn,{size:18,className:"text-amber-400"}),i.jsx("span",{className:"text-sm font-bold text-amber-400",children:"Stern vergeben"})]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("light"),a(e.oderId),r()},className:"w-full py-3 rounded-xl flex items-center justify-center gap-2",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(Dn,{size:18,className:"text-white/60"}),i.jsx("span",{className:"text-sm font-medium text-white/60",children:"Freundschaftsanfrage"})]})]}),i.jsx("div",{className:"p-4 pt-0",children:i.jsx(U.button,{whileTap:{scale:.98},onClick:r,className:"w-full py-2 text-xs text-white/30",children:"Schlieen"})})]})})})});_.memo(function({participants:e,onUserClick:n}){return e.length===0?i.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"Noch keine Teilnehmer"}):i.jsx("div",{className:"grid grid-cols-4 gap-3 p-4",children:e.map(r=>i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{Nt("light"),n(r)},className:"flex flex-col items-center p-2 rounded-xl",style:{background:r.isSpeaking?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.03)",border:r.isSpeaking?"2px solid rgba(34, 197, 94, 0.5)":"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1))",border:r.isHost?"2px solid #fbbf24":"none"},children:r.photoURL?i.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("span",{className:"text-lg font-bold text-white/60",children:r.displayName.charAt(0).toUpperCase()})})}),r.isHost&&i.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)"},children:i.jsx(kn,{size:8,className:"text-black"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:r.isMuted?"#ef4444":r.isSpeaking?"#22c55e":"#6b7280"},children:r.isMuted?i.jsx(kf,{size:10,className:"text-white"}):r.isSpeaking?i.jsx(ex,{size:10,className:"text-white"}):i.jsx(li,{size:10,className:"text-white"})})]}),i.jsx("p",{className:"text-[10px] text-white/60 mt-2 truncate w-full text-center",children:r.displayName})]},r.oderId))})});const dte=_.memo(function({room:e,onJoin:n}){const r=lte(e.participants.length),s=cte(r),a=()=>{switch(e.type){case"anonymous":return i.jsx(Fs,{size:14,className:"text-violet-400"});case"private":return i.jsx(Ir,{size:14,className:"text-amber-400"});default:return i.jsx(_f,{size:14,className:"text-emerald-400"})}};return i.jsx(U.button,{whileTap:{scale:.98},onClick:()=>{Nt("light"),n()},className:"w-full p-5 rounded-2xl text-left",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center relative flex-shrink-0",style:{background:`${s}20`,border:`1px solid ${s}40`},children:[i.jsx(Ar,{size:24,style:{color:s}}),e.participants.length>0&&i.jsx(U.div,{className:"absolute inset-0 rounded-xl",style:{border:`2px solid ${s}`},animate:{scale:[1,1.15,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("p",{className:"text-base font-bold text-white truncate",children:e.name}),r==="hot"&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-red-500/20 text-red-400",children:" HOT"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[a(),i.jsx("span",{className:"text-[11px] text-white/50",children:e.type==="anonymous"?"Anonym":e.type==="private"?"Privat":"ffentlich"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(kt,{size:12,className:"text-white/40"}),i.jsxs("span",{className:"text-[11px] text-white/60",children:[i.jsx("span",{className:"text-white font-semibold",children:e.participants.length}),"/",e.maxParticipants]})]})]})]}),i.jsx("div",{className:"px-4 py-2 rounded-xl",style:{background:`${s}20`,border:`1px solid ${s}40`},children:i.jsx("span",{className:"text-xs font-bold",style:{color:s},children:"Join"})})]})})}),hte=_.memo(function({isOpen:e,onClose:n,onCreate:r}){const[s,a]=_.useState(""),[o,c]=_.useState("public"),[u,h]=_.useState(!1),m=async()=>{!s.trim()||u||(h(!0),await r(s.trim(),o),a(""),c("public"),h(!1),n())};return i.jsx(qt,{children:e&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-end sm:items-center justify-center",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:n,children:i.jsxs(U.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-md rounded-t-3xl sm:rounded-3xl overflow-hidden",style:{background:"linear-gradient(180deg, rgba(20, 15, 35, 0.98), rgba(10, 8, 20, 0.99))",border:"1px solid rgba(139, 92, 246, 0.2)"},onClick:g=>g.stopPropagation(),children:[i.jsx("div",{className:"flex justify-center pt-4 pb-2 sm:hidden",children:i.jsx("div",{className:"w-12 h-1.5 rounded-full bg-white/10"})}),i.jsxs("div",{className:"p-5",children:[i.jsx("h2",{className:"text-lg font-bold text-white mb-5",children:"Room erstellen"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-xs font-bold text-white/50 uppercase mb-2 block",children:"Name"}),i.jsx("input",{type:"text",value:s,onChange:g=>a(g.target.value),placeholder:"z.B. Late Night Talks",maxLength:50,className:"w-full px-4 py-3 rounded-xl text-sm text-white placeholder-white/30 bg-white/5 border border-white/10 outline-none"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("label",{className:"text-xs font-bold text-white/50 uppercase mb-3 block",children:"Typ"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"public",icon:i.jsx(_f,{size:18}),label:"ffentlich",color:"#22c55e"},{value:"private",icon:i.jsx(Ir,{size:18}),label:"Privat",color:"#fbbf24"},{value:"anonymous",icon:i.jsx(Fs,{size:18}),label:"Anonym",color:"#a855f7"}].map(g=>i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>c(g.value),className:"p-3 rounded-xl flex flex-col items-center gap-2",style:{background:o===g.value?`${g.color}15`:"rgba(255, 255, 255, 0.02)",border:o===g.value?`1px solid ${g.color}40`:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("span",{style:{color:o===g.value?g.color:"rgba(255, 255, 255, 0.4)"},children:g.icon}),i.jsx("span",{className:"text-[10px] font-medium",style:{color:o===g.value?g.color:"rgba(255, 255, 255, 0.4)"},children:g.label})]},g.value))})]}),i.jsx(U.button,{whileTap:{scale:.98},onClick:m,disabled:!s.trim()||u,className:"w-full py-4 rounded-2xl flex items-center justify-center gap-2 font-bold text-white disabled:opacity-50",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.4)"},children:u?i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):i.jsxs(i.Fragment,{children:[i.jsx(fr,{size:18}),"Room erstellen"]})})]}),i.jsx("div",{className:"h-6 sm:h-0"})]})})})});function Iv(){const t=yt(),[e]=cf(),{user:n}=Bs(),[r,s]=_.useState([]),[a,o]=_.useState(!0),[c,u]=_.useState(!1),[h,m]=_.useState(null),[g,x]=_.useState("");_.useEffect(()=>{e.get("create")==="true"&&u(!0)},[e]),_.useEffect(()=>{const w=it(Ve(J,"rooms"),$e("isActive","==",!0),Us("createdAt","desc"),Kr(50)),k=cr(w,A=>{const D=A.docs.map(F=>{const C=F.data();return{id:F.id,name:C.name||"Unnamed Room",description:C.description,type:C.type||"public",participants:C.participants||[],maxParticipants:C.maxParticipants||8,isActive:C.isActive!==!1,createdAt:C.createdAt,createdBy:C.createdBy,hostId:C.hostId||C.createdBy,userCount:C.userCount||(C.participants||[]).length}});D.sort((F,C)=>C.participants.length-F.participants.length),s(D),o(!1)});return()=>k()},[]);const v=_.useMemo(()=>{if(!g)return r;const w=g.toLowerCase();return r.filter(k=>{var A;return k.name.toLowerCase().includes(w)||((A=k.description)==null?void 0:A.toLowerCase().includes(w))})},[r,g]),E=_.useCallback(async(w,k)=>{if(n!=null&&n.id)try{const A={name:w,type:k,participants:[],maxParticipants:8,isActive:!0,createdAt:st.now(),createdBy:n.id,hostId:n.id,userCount:0},D=await gu(Ve(J,"rooms"),A);t(`/room/${D.id}`)}catch(A){console.error("Error creating room:",A)}},[n==null?void 0:n.id,t]),j=_.useCallback(w=>{t(`/room/${w}`)},[t]),S=_.useCallback(async w=>{n!=null&&n.id&&(console.log("Give star to:",w),Nt("success"))},[n==null?void 0:n.id]),N=_.useCallback(async w=>{n!=null&&n.id&&(console.log("Send friend request to:",w),Nt("success"))},[n==null?void 0:n.id]);return i.jsxs("div",{className:"min-h-screen pb-28",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-[100] pt-safe",children:i.jsxs("div",{className:"px-5 py-4",style:{background:"rgba(5, 5, 5, 0.9)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(139, 92, 246, 0.3)"},children:i.jsx(Ar,{size:20,className:"text-violet-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-black text-white",children:"Rooms"}),i.jsxs("p",{className:"text-xs text-white/40",children:[r.length," aktive Rooms"]})]})]}),i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>u(!0),className:"px-4 py-2.5 rounded-xl flex items-center gap-2",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.2))",border:"1px solid rgba(139, 92, 246, 0.4)"},children:[i.jsx(jf,{size:16,className:"text-violet-400"}),i.jsx("span",{className:"text-xs font-bold text-violet-400",children:"Erstellen"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Y0,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),i.jsx("input",{type:"text",value:g,onChange:w=>x(w.target.value),placeholder:"Rooms durchsuchen...",className:"w-full pl-11 pr-4 py-3 rounded-xl text-sm text-white placeholder-white/30 bg-white/5 border border-white/10 outline-none"})]})]})}),i.jsx("div",{className:"px-5 py-4",children:a?i.jsx("div",{className:"space-y-3",children:[1,2,3].map(w=>i.jsx("div",{className:"h-24 rounded-2xl animate-pulse bg-white/5"},w))}):v.length===0?i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(139, 92, 246, 0.3)"},children:i.jsx(fr,{size:40,className:"text-violet-400"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Die Wolken sind leer."}),i.jsx("p",{className:"text-sm text-white/40 mb-8",children:"Erffne den ersten Room!"}),i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>u(!0),className:"px-8 py-4 rounded-2xl inline-flex items-center gap-3 font-bold text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.4)"},children:[i.jsx(Ar,{size:20}),"Room erstellen"]})]}):i.jsx("div",{className:"space-y-3",children:v.map(w=>i.jsx(dte,{room:w,onJoin:()=>j(w.id)},w.id))})}),i.jsx(hte,{isOpen:c,onClose:()=>u(!1),onCreate:E}),i.jsx(ute,{user:h,isOpen:!!h,onClose:()=>m(null),onGiveStar:S,onAddFriend:N,currentUserId:(n==null?void 0:n.id)||""})]})}const qg={silent:{primary:"rgba(100, 100, 120, 0.3)",secondary:"rgba(80, 80, 100, 0.2)",glow:"rgba(100, 100, 120, 0)",intensity:0},whisper:{primary:"rgba(99, 102, 241, 0.6)",secondary:"rgba(139, 92, 246, 0.4)",glow:"rgba(99, 102, 241, 0.4)",intensity:.3},normal:{primary:"rgba(34, 197, 94, 0.7)",secondary:"rgba(74, 222, 128, 0.5)",glow:"rgba(34, 197, 94, 0.5)",intensity:.5},engaged:{primary:"rgba(234, 179, 8, 0.8)",secondary:"rgba(250, 204, 21, 0.6)",glow:"rgba(234, 179, 8, 0.6)",intensity:.7},excited:{primary:"rgba(249, 115, 22, 0.85)",secondary:"rgba(251, 146, 60, 0.7)",glow:"rgba(249, 115, 22, 0.7)",intensity:.85},loud:{primary:"rgba(239, 68, 68, 0.9)",secondary:"rgba(248, 113, 113, 0.8)",glow:"rgba(239, 68, 68, 0.8)",intensity:1}};function Fb(t){return t<5?"silent":t<20?"whisper":t<40?"normal":t<60?"engaged":t<80?"excited":"loud"}function fte(t){const e=Fb(t);return qg[e]}function mte(t,e=!1){const n=`0 0 ${20+t.intensity*30}px ${t.glow}`,r=`0 0 ${10+t.intensity*15}px ${t.primary}`;return`${n}, ${r}`}class pte{constructor(e={}){wr(this,"audioContext",null);wr(this,"analyser",null);wr(this,"microphone",null);wr(this,"stream",null);wr(this,"animationFrameId",null);wr(this,"isRunning",!1);wr(this,"config");wr(this,"smoothedLevel",0);wr(this,"smoothingFactor",.3);wr(this,"analyze",()=>{var x;if(!this.isRunning||!this.analyser)return;const e=this.analyser.frequencyBinCount,n=new Uint8Array(e);this.analyser.getByteFrequencyData(n);const s=n.reduce((v,E)=>v+E,0)/e,a=Math.min(100,s/128*100);this.smoothedLevel=this.smoothedLevel*(1-this.smoothingFactor)+a*this.smoothingFactor;let o=0,c=0;for(let v=0;v<e;v++)n[v]>c&&(c=n[v],o=v);const u=o*(((x=this.audioContext)==null?void 0:x.sampleRate)||44100)/(this.config.fftSize*2),h=Fb(this.smoothedLevel),m=qg[h],g={level:Math.round(this.smoothedLevel),frequency:Math.round(u),auraState:h,auraColor:m,isSpeaking:this.smoothedLevel>this.config.speakingThreshold,timestamp:Date.now()};this.config.onAnalysis(g),this.animationFrameId=requestAnimationFrame(this.analyze)});this.config={fftSize:e.fftSize??1024,smoothingTimeConstant:e.smoothingTimeConstant??.8,minDecibels:e.minDecibels??-90,maxDecibels:e.maxDecibels??-10,speakingThreshold:e.speakingThreshold??10,onAnalysis:e.onAnalysis??(()=>{}),onError:e.onError??console.error}}async start(){if(this.isRunning)return!0;try{return this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.analyser.smoothingTimeConstant=this.config.smoothingTimeConstant,this.analyser.minDecibels=this.config.minDecibels,this.analyser.maxDecibels=this.config.maxDecibels,this.microphone=this.audioContext.createMediaStreamSource(this.stream),this.microphone.connect(this.analyser),this.isRunning=!0,this.analyze(),!0}catch(e){return this.config.onError(e),!1}}stop(){this.isRunning=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.microphone&&(this.microphone.disconnect(),this.microphone=null),this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.smoothedLevel=0}isSpeaking(){return this.smoothedLevel>this.config.speakingThreshold}getLevel(){return Math.round(this.smoothedLevel)}getAuraState(){return Fb(this.smoothedLevel)}getAuraColor(){return fte(this.smoothedLevel)}isActive(){return this.isRunning}}function gte(t={}){const{autoStart:e=!1,onSpeakingChange:n}=t,[r,s]=_.useState(!1),[a,o]=_.useState(!1),[c,u]=_.useState(0),[h,m]=_.useState("silent"),[g,x]=_.useState(qg.silent),[v,E]=_.useState(null),j=_.useRef(null),S=_.useRef(!1),N=_.useCallback(A=>{u(A.level),m(A.auraState),x(A.auraColor),o(A.isSpeaking),A.isSpeaking!==S.current&&(S.current=A.isSpeaking,n==null||n(A.isSpeaking))},[n]),w=_.useCallback(async()=>{var D;if((D=j.current)!=null&&D.isActive())return!0;j.current=new pte({onAnalysis:N,onError:F=>E(F)});const A=await j.current.start();return s(A),A||E(new Error("Mikrofon-Zugriff verweigert")),A},[N]),k=_.useCallback(()=>{var A;(A=j.current)==null||A.stop(),j.current=null,s(!1),o(!1),u(0),m("silent"),x(qg.silent)},[]);return _.useEffect(()=>(e&&w(),()=>{var A;(A=j.current)==null||A.stop()}),[e,w]),{isActive:r,isSpeaking:a,level:c,auraState:h,auraColor:g,start:w,stop:k,error:v}}const xte=async(t,e)=>{try{const n=ce(J,"rooms",t),r=await mt(n);if(!r.exists()){console.log("[RoomManagement] Room already deleted");return}const s=r.data(),a=s.participants||[],o=a.find(g=>g.oderId===e||g.odId===e);if(!o){console.log("[RoomManagement] User not in room");return}const c=a.filter(g=>g.oderId!==e&&g.odId!==e);if(c.length===0){await oa(n),console.log("[RoomManagement] Room deleted (empty):",t);return}const u=s.hostId===e||o.isHost;let h=s.hostId,m=c;if(u){const x=[...c].sort((v,E)=>v.joinedAt.toMillis()-E.joinedAt.toMillis())[0];h=x.oderId||x.odId,m=c.map(v=>({...v,isHost:(v.oderId||v.odId)===h})),console.log("[RoomManagement] Host migrated to:",h)}await Ge(n,{participants:m,hostId:h}),console.log("[RoomManagement] User left room:",e)}catch(n){console.error("[RoomManagement] Error leaving room:",n)}},yte=async(t,e)=>{try{const n=ce(J,"users",t),r=ce(J,"users",e);return await Ge(n,{sentFriendRequests:db({userId:e,sentAt:st.now()})}),await Ge(r,{pendingFriendRequests:db({userId:t,receivedAt:st.now()})}),console.log("[RoomManagement] Friend request sent:",t,"->",e),!0}catch(n){return console.error("[RoomManagement] Error sending friend request:",n),!1}},vte=async(t,e)=>{try{const n=ce(J,"users",e),r=await mt(n);if(!r.exists())return!1;const s=r.data().stars||0;return(r.data().starGivers||[]).includes(t)?(console.log("[RoomManagement] Already gave star"),!1):(await Ge(n,{stars:s+1,starGivers:db(t)}),console.log("[RoomManagement] Star given to:",e),!0)}catch(n){return console.error("[RoomManagement] Error giving star:",n),!1}};function bte({isOpen:t,onClose:e,user:n,currentUserId:r,isAnonymousRoom:s=!1}){var k,A;const[a,o]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[g,x]=_.useState(!1),v=n.level||bu(n.xp||0).level,E=wu(v),j=()=>{if(!n.joinedAt)return"0m";const D=Math.floor((Date.now()-new Date(n.joinedAt).getTime())/6e4);return D<60?`${D}m`:`${Math.floor(D/60)}h ${D%60}m`},S=async()=>{if(a||c||n.oderId===r)return;o(!0);const D=await yte(r,n.oderId);o(!1),D&&u(!0)},N=async()=>{if(h||g||n.oderId===r)return;m(!0);const D=await vte(r,n.oderId);m(!1),D&&x(!0)},w=n.oderId===r;return i.jsx(qt,{children:t&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.85)"},onClick:e,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-sm rounded-3xl overflow-hidden",style:{background:"rgba(5, 5, 5, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:`0 0 40px ${E.glowColor}`},onClick:D=>D.stopPropagation(),children:[i.jsxs("div",{className:"relative h-24",style:{background:E.gradient,opacity:.8},children:[i.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center bg-black/30",children:i.jsx(ln,{size:16,className:"text-white"})}),n.isHost&&i.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 rounded-full bg-amber-500/20 border border-amber-500/30 flex items-center gap-1",children:[i.jsx(kn,{size:12,className:"text-amber-400"}),i.jsx("span",{className:"text-[10px] font-bold text-amber-400",children:"HOST"})]})]}),i.jsx("div",{className:"relative px-6 -mt-12",children:i.jsxs("div",{className:"w-24 h-24 rounded-2xl flex items-center justify-center text-3xl font-bold",style:{background:s?"rgba(168, 85, 247, 0.3)":n.photoURL?`url(${n.photoURL}) center/cover`:"rgba(255, 255, 255, 0.1)",border:`3px solid ${E.color}`,boxShadow:`0 0 20px ${E.glowColor}`,color:"white"},children:[!n.photoURL&&!s&&((A=(k=n.displayName)==null?void 0:k[0])==null?void 0:A.toUpperCase()),s&&"?"]})}),i.jsxs("div",{className:"px-6 pt-4 pb-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:s?"Wanderer":n.displayName}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold",style:{background:`${E.color}20`,color:E.color,border:`1px solid ${E.color}40`},children:[E.titleDE," Lvl ",v]}),n.isSpeaking&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 text-xs",children:[i.jsx(li,{size:10}),"Spricht"]}),n.isMuted&&!n.isSpeaking&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-500/20 text-red-400 text-xs",children:[i.jsx(kf,{size:10}),"Stumm"]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6",children:[i.jsxs("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(jn,{size:16,className:"text-amber-400 mx-auto mb-1"}),i.jsx("p",{className:"text-white font-bold text-sm",children:n.stars||0}),i.jsx("p",{className:"text-white/40 text-[10px]",children:"Sterne"})]}),i.jsxs("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(li,{size:16,className:"text-purple-400 mx-auto mb-1"}),i.jsxs("p",{className:"text-white font-bold text-sm",children:[n.voiceMinutes||0,"m"]}),i.jsx("p",{className:"text-white/40 text-[10px]",children:"Sprechzeit"})]}),i.jsxs("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(zo,{size:16,className:"text-cyan-400 mx-auto mb-1"}),i.jsx("p",{className:"text-white font-bold text-sm",children:n.roomsVisited||0}),i.jsx("p",{className:"text-white/40 text-[10px]",children:"Rume"})]})]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 rounded-xl mb-6",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[i.jsx(Fo,{size:14,className:"text-white/40"}),i.jsxs("span",{className:"text-sm text-white/60",children:["Im Raum seit ",i.jsx("span",{className:"text-white font-semibold",children:j()})]})]}),!w&&!s&&i.jsxs("div",{className:"flex gap-3",children:[i.jsx(U.button,{whileTap:{scale:.98},onClick:S,disabled:a||c,className:"flex-1 py-3 rounded-xl flex items-center justify-center gap-2 font-semibold text-sm text-white disabled:opacity-50",style:{background:c?"rgba(34, 197, 94, 0.2)":"rgba(168, 85, 247, 0.2)",border:c?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(168, 85, 247, 0.3)"},children:a?i.jsx(Nn,{size:16,className:"animate-spin"}):c?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:16,className:"text-green-400"}),"Gesendet"]}):i.jsxs(i.Fragment,{children:[i.jsx(Dn,{size:16,className:"text-purple-400"}),"Anfrage"]})}),i.jsx(U.button,{whileTap:{scale:.98},onClick:N,disabled:h||g,className:"flex-1 py-3 rounded-xl flex items-center justify-center gap-2 font-semibold text-sm text-white disabled:opacity-50",style:{background:g?"rgba(251, 191, 36, 0.2)":"rgba(251, 191, 36, 0.15)",border:g?"1px solid rgba(251, 191, 36, 0.4)":"1px solid rgba(251, 191, 36, 0.3)"},children:h?i.jsx(Nn,{size:16,className:"animate-spin"}):g?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:16,className:"text-amber-400"}),"Vergeben"]}):i.jsxs(i.Fragment,{children:[i.jsx(jn,{size:16,className:"text-amber-400"}),"Stern"]})})]}),w&&i.jsx("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)"},children:i.jsx("p",{className:"text-sm text-purple-400 font-medium",children:"Das bist du!"})}),s&&!w&&i.jsxs("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[i.jsx(zs,{size:16,className:"text-purple-400 mx-auto mb-1"}),i.jsx("p",{className:"text-xs text-white/50",children:"Anonymer Raum  Interaktionen sind deaktiviert"})]})]})]})})})}const wte=({participant:t,size:e,isCurrentUser:n,isActiveSpeaker:r,onTap:s})=>{const a={large:"w-full aspect-square max-w-[280px]",medium:"w-full aspect-square",small:"w-full aspect-[4/3]"},o={large:"w-28 h-28",medium:"w-20 h-20",small:"w-14 h-14"},c={large:"text-lg",medium:"text-base",small:"text-sm"},u=t.isSpeaking?{boxShadow:mte(t.auraColor,!0),transition:"box-shadow 0.3s ease"}:{},h=t.isSpeaking?{scale:[1,1.02,1],transition:{duration:.5,repeat:1/0}}:{};return i.jsxs(U.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,...h},exit:{opacity:0,scale:.9},onClick:()=>{Nt("light"),s==null||s()},className:`relative ${a[e]} rounded-3xl overflow-hidden flex flex-col items-center justify-center p-4 cursor-pointer`,style:{background:t.isSpeaking?`linear-gradient(135deg, ${t.auraColor.primary}, ${t.auraColor.secondary})`:"rgba(255, 255, 255, 0.03)",border:t.isSpeaking?`2px solid ${t.auraColor.primary}`:"1px solid rgba(255, 255, 255, 0.08)",...u},whileTap:{scale:.98},children:[t.isHost&&i.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 rounded-full flex items-center gap-1",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.1))",border:"1px solid rgba(251, 191, 36, 0.4)"},children:[i.jsx(kn,{size:10,className:"text-amber-400"}),i.jsx("span",{className:"text-[9px] font-bold text-amber-400",children:"HOST"})]}),t.isMuted&&i.jsx("div",{className:"absolute top-3 right-3 w-7 h-7 rounded-full flex items-center justify-center",style:{background:"rgba(239, 68, 68, 0.3)"},children:i.jsx(kf,{size:14,className:"text-red-400"})}),i.jsxs("div",{className:"relative mb-3",children:[t.isSpeaking&&i.jsx(U.div,{className:"absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${t.auraColor.glow} 0%, transparent 70%)`,transform:"scale(1.5)"},animate:{opacity:[.5,1,.5],scale:[1.4,1.6,1.4]},transition:{duration:1,repeat:1/0}}),i.jsx(U.div,{className:`relative ${o[e]} rounded-full overflow-hidden`,style:{border:t.isSpeaking?`3px solid ${t.auraColor.primary}`:"2px solid rgba(255, 255, 255, 0.1)",boxShadow:t.isSpeaking?`0 0 20px ${t.auraColor.glow}`:"none"},animate:t.isSpeaking?{scale:[1,1.05,1]}:{},transition:{duration:.5,repeat:1/0},children:t.photoURL?i.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #1a0a2e, #16082a)"},children:i.jsx("span",{className:"text-2xl font-black text-white/60",children:t.displayName.charAt(0).toUpperCase()})})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 px-2 py-0.5 rounded-full",style:{background:"linear-gradient(135deg, #a855f7, #7c3aed)",boxShadow:"0 2px 8px rgba(168, 85, 247, 0.4)"},children:i.jsxs("span",{className:"text-[10px] font-black text-white",children:["LV.",t.level]})})]}),i.jsxs("p",{className:`${c[e]} font-bold text-white text-center truncate max-w-full`,children:[t.displayName,n&&i.jsx("span",{className:"text-white/40 ml-1",children:"(Du)"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("span",{className:"text-xs text-white/40",children:["@",t.username]}),t.city&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-white/20",children:""}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(_a,{size:10,className:"text-white/30"}),i.jsx("span",{className:"text-xs text-white/30",children:t.city})]})]})]}),e!=="small"&&t.speakingTime>0&&i.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[i.jsx(Ar,{size:12,className:"text-purple-400"}),i.jsxs("span",{className:"text-[10px] text-purple-400",children:[Math.floor(t.speakingTime/60),":",String(t.speakingTime%60).padStart(2,"0")," gesprochen"]})]}),r&&i.jsx(U.div,{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)"},initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(U.div,{className:"w-2 h-2 rounded-full bg-green-400",animate:{scale:[1,1.3,1]},transition:{duration:.5,repeat:1/0}}),i.jsx("span",{className:"text-[10px] font-bold text-green-400",children:"SPRICHT"})]})})]})},_te=({participants:t,currentUserId:e,activeSpeakerId:n,onParticipantTap:r})=>{const s=t.length,a=()=>s<=2?"grid-cols-1 gap-6 max-w-md mx-auto":s<=4?"grid-cols-2 gap-4":s<=6?"grid-cols-2 gap-3":"grid-cols-3 gap-2",o=()=>s<=2?"large":s<=6?"medium":"small",c=_.useMemo(()=>[...t].sort((u,h)=>u.id===n?-1:h.id===n?1:u.isHost?-1:h.isHost?1:u.joinedAt-h.joinedAt),[t,n]);return i.jsx("div",{className:`grid ${a()} w-full px-4`,children:i.jsx(qt,{mode:"popLayout",children:c.map(u=>i.jsx(wte,{participant:u,size:o(),isCurrentUser:u.id===e,isActiveSpeaker:u.id===n,onTap:()=>r==null?void 0:r(u)},u.id))})})},Nte=({currentXP:t,sessionXP:e,isSpeaking:n})=>i.jsxs(U.div,{className:"absolute bottom-24 left-4 right-4 p-3 rounded-2xl",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(20px)",border:"1px solid rgba(168, 85, 247, 0.2)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zo,{size:14,className:"text-amber-400"}),i.jsx("span",{className:"text-xs font-bold text-white/70",children:"Session XP"})]}),i.jsxs(U.span,{className:"text-sm font-black text-amber-400",animate:n?{scale:[1,1.1,1]}:{},transition:{duration:.3,repeat:1/0},children:["+",e," XP"]})]}),i.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #fbbf24, #f59e0b)"},initial:{width:0},animate:{width:`${Math.min(100,e/100*100)}%`},transition:{duration:.5}})}),i.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:n?" Sprechen: +5 XP/Min":" Zuhren: +1 XP/Min"})]}),kte=({isMuted:t,isSpeakerOff:e,onToggleMute:n,onToggleSpeaker:r,onLeave:s,onSettings:a})=>i.jsxs(U.div,{className:"fixed bottom-6 left-4 right-4 flex items-center justify-center gap-4 p-4 rounded-3xl z-50",style:{background:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(30px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 -10px 40px rgba(0, 0, 0, 0.5)"},initial:{y:100},animate:{y:0},transition:{type:"spring",damping:20},children:[i.jsx(U.button,{onClick:()=>{Nt("medium"),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:t?"linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.1))":"linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.1))",border:t?"1px solid rgba(239, 68, 68, 0.4)":"1px solid rgba(34, 197, 94, 0.4)"},children:t?i.jsx(kf,{size:24,className:"text-red-400"}):i.jsx(li,{size:24,className:"text-green-400"})}),i.jsx(U.button,{onClick:()=>{Nt("light"),r()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:e?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e?i.jsx(lX,{size:24,className:"text-white/40"}):i.jsx(ex,{size:24,className:"text-white/70"})}),a&&i.jsx(U.button,{onClick:()=>{Nt("light"),a()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(J0,{size:24,className:"text-white/50"})}),i.jsx(U.button,{onClick:()=>{Nt("heavy"),s()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.4), rgba(220, 38, 38, 0.2))",border:"1px solid rgba(239, 68, 68, 0.5)"},children:i.jsx(eX,{size:24,className:"text-red-400"})})]}),jte=({roomName:t,roomId:e,onClose:n})=>{const[r,s]=_.useState(!1),a=`https://synclulu.vercel.app/room/${e}`,o=async()=>{try{await navigator.clipboard.writeText(a),s(!0),Nt("medium"),setTimeout(()=>s(!1),2e3)}catch(u){console.error("Copy failed:",u)}},c=async()=>{if(navigator.share)try{await navigator.share({title:`Join ${t} on synclulu`,text:`Hey! Komm in meinen Voice-Raum "${t}" auf synclulu!`,url:a}),Nt("success")}catch{console.log("Share cancelled")}};return i.jsx(U.div,{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,children:i.jsx(U.div,{className:"w-full max-w-sm rounded-3xl overflow-hidden",style:{background:"linear-gradient(135deg, #0a0a0f, #12121a)",border:"1px solid rgba(168, 85, 247, 0.2)"},initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:u=>u.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(168, 85, 247, 0.1))"},children:i.jsx(Dn,{size:28,className:"text-purple-400"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:"Freunde einladen"}),i.jsxs("p",{className:"text-sm text-white/50 mt-1",children:['Teile den Link zu "',t,'"']})]}),i.jsx("div",{className:"p-4 rounded-2xl mb-4",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:i.jsx("p",{className:"text-xs text-white/40 font-mono break-all",children:a})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(U.button,{onClick:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl font-bold text-sm",style:{background:r?"linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.1))":"rgba(255, 255, 255, 0.05)",border:r?"1px solid rgba(34, 197, 94, 0.4)":"1px solid rgba(255, 255, 255, 0.1)",color:r?"#22c55e":"rgba(255, 255, 255, 0.7)"},children:r?" Kopiert!":"Link kopieren"}),navigator.share&&i.jsxs(U.button,{onClick:c,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(168, 85, 247, 0.1))",border:"1px solid rgba(168, 85, 247, 0.4)",color:"#a855f7"},children:[i.jsx(c_,{size:16}),"Teilen"]})]})]})})})},rT=()=>{const t=yt(),{roomId:e}=Ww(),{user:n}=Bs(),[r,s]=_.useState(null),[a,o]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState(null),[g,x]=_.useState(!0),[v,E]=_.useState(!1),[j,S]=_.useState(!1),[N,w]=_.useState(null),[k,A]=_.useState(!1),[D,F]=_.useState(0);_.useRef(Date.now());const C=_.useRef(0),{isSpeaking:T,level:P,auraState:L,auraColor:z,start:H,stop:B}=gte({onSpeakingChange:oe=>{e&&(n!=null&&n.id)}}),Pe=_.useMemo(()=>{var K;const oe=a.filter(te=>te.isSpeaking);if(oe.length!==0)return(K=oe[0])==null?void 0:K.id},[a]),we=_.useCallback(async()=>{g?await H()&&x(!1):(B(),x(!0))},[g,H,B]),je=_.useCallback(async()=>{if(B(),Nt("heavy"),e&&(n!=null&&n.id))try{await xte(e,n.id),console.log("[VoiceRoom] Left room successfully")}catch(oe){console.error("[VoiceRoom] Error leaving room:",oe)}t("/discover")},[B,t,e,n==null?void 0:n.id]);return _.useEffect(()=>{const oe=setInterval(()=>{!g&&T?(C.current+=1,C.current%12===0&&F(K=>K+1)):g||Math.random()<.017&&F(K=>K+1)},1e3);return()=>clearInterval(oe)},[g,T]),_.useEffect(()=>{const oe=setTimeout(()=>{s({id:e||"demo",name:"Late Night Talk",description:"Chill vibes only ",hostId:"host123",isPrivate:!1,maxParticipants:10,participants:[],createdAt:Date.now(),tags:["chill","night","talk"]}),o([{id:(n==null?void 0:n.id)||"user1",displayName:(n==null?void 0:n.displayName)||"Du",username:(n==null?void 0:n.username)||"user",photoURL:n==null?void 0:n.photoURL,level:15,city:"Berlin",isHost:!1,isMuted:g,isSpeaking:T,auraState:L,auraColor:z,joinedAt:Date.now(),speakingTime:C.current},{id:"host123",displayName:"Luna",username:"luna_vibes",photoURL:void 0,level:42,city:"Mnchen",isHost:!0,isMuted:!1,isSpeaking:!0,auraState:"engaged",auraColor:{primary:"rgba(234, 179, 8, 0.8)",secondary:"rgba(250, 204, 21, 0.6)",glow:"rgba(234, 179, 8, 0.6)",intensity:.7},joinedAt:Date.now()-3e5,speakingTime:180},{id:"user2",displayName:"Max",username:"max_sync",photoURL:void 0,level:8,city:"Hamburg",isHost:!1,isMuted:!0,isSpeaking:!1,auraState:"silent",auraColor:{primary:"rgba(100, 100, 120, 0.3)",secondary:"rgba(80, 80, 100, 0.2)",glow:"rgba(100, 100, 120, 0)",intensity:0},joinedAt:Date.now()-12e4,speakingTime:45}]),u(!1)},500);return()=>clearTimeout(oe)},[e,n,g,T,L,z]),_.useEffect(()=>{o(oe=>oe.map(K=>{var te;return K.id===(n==null?void 0:n.id)?{...K,isMuted:g,isSpeaking:!g&&T,auraState:g?"silent":L,auraColor:g&&((te=oe.find(ue=>ue.id===(n==null?void 0:n.id)))==null?void 0:te.auraColor)||z,speakingTime:C.current}:K}))},[n==null?void 0:n.id,g,T,L,z]),c?i.jsx("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:i.jsx(Ar,{size:40,className:"text-purple-500"})})}):h||!r?i.jsx("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-400 mb-4",children:h||"Raum nicht gefunden"}),i.jsx("button",{onClick:()=>t("/discover"),className:"px-6 py-2 rounded-xl bg-white/10 text-white/70",children:"Zurck zur bersicht"})]})}):i.jsxs("div",{className:"min-h-screen bg-[#050505] pt-safe pb-32",children:[i.jsxs("div",{className:"sticky top-0 z-40 px-4 py-4 flex items-center justify-between",style:{background:"linear-gradient(to bottom, rgba(5, 5, 5, 1), rgba(5, 5, 5, 0.95))",backdropFilter:"blur(20px)"},children:[i.jsx(U.button,{onClick:je,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)"},children:i.jsx(gn,{size:20,className:"text-white/70"})}),i.jsxs("div",{className:"flex-1 text-center px-4",children:[i.jsx("h1",{className:"text-lg font-black text-white",children:r.name}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-0.5",children:[r.isPrivate?i.jsx(Ir,{size:12,className:"text-amber-400"}):i.jsx(_f,{size:12,className:"text-green-400"}),i.jsxs("span",{className:"text-xs text-white/40",children:[a.length," / ",r.maxParticipants," Teilnehmer"]})]})]}),i.jsx(U.button,{onClick:()=>{Nt("light"),S(!0)},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1))",border:"1px solid rgba(168, 85, 247, 0.3)"},children:i.jsx(Dn,{size:18,className:"text-purple-400"})})]}),i.jsx("div",{className:"py-6",children:i.jsx(_te,{participants:a,currentUserId:(n==null?void 0:n.id)||"",activeSpeakerId:Pe,onParticipantTap:oe=>{w(oe),A(!0)}})}),!g&&i.jsx(U.div,{className:"fixed bottom-44 left-4 right-4",initial:{opacity:0},animate:{opacity:1},children:i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(0, 0, 0, 0.6)"},children:[i.jsx("div",{className:"flex items-center gap-1",children:[...Array(10)].map((oe,K)=>i.jsx(U.div,{className:"w-1.5 rounded-full",style:{height:`${8+K*2}px`,background:K<P/10?z.primary:"rgba(255, 255, 255, 0.1)"},animate:K<P/10?{scaleY:[1,1.2,1]}:{},transition:{duration:.2,delay:K*.02}},K))}),i.jsxs("span",{className:"text-xs text-white/50",children:[L==="silent"&&" Stille",L==="whisper"&&" Flstern",L==="normal"&&" Normal",L==="engaged"&&" Engagiert",L==="excited"&&" Aufgeregt",L==="loud"&&" Laut!"]})]})}),i.jsx(Nte,{currentXP:0,sessionXP:D,isSpeaking:!g&&T}),i.jsx(kte,{isMuted:g,isSpeakerOff:v,onToggleMute:we,onToggleSpeaker:()=>E(!v),onLeave:je}),i.jsx(qt,{children:j&&i.jsx(jte,{roomName:r.name,roomId:r.id,onClose:()=>S(!1)})}),N&&i.jsx(bte,{isOpen:k,onClose:()=>{A(!1),w(null)},user:{oderId:N.id,displayName:N.displayName,photoURL:N.photoURL,level:N.level,isSpeaking:N.isSpeaking,isMuted:N.isMuted,isHost:N.isHost,joinedAt:new Date(N.joinedAt),voiceMinutes:Math.floor(N.speakingTime/60)},currentUserId:(n==null?void 0:n.id)||"",isAnonymousRoom:(r==null?void 0:r.isPrivate)||!1})]})},sT="MIbamchs82Ve7y0ecX2TpPyymbw1";function Ete({userId:t,maxFriends:e=50}={}){const[n,r]=_.useState([]),[s,a]=_.useState(!0),[o,c]=_.useState(null),[u,h]=_.useState([]);_.useEffect(()=>{if(!t){a(!1);return}(async()=>{try{const N=it(Ve(J,"friendships"),$e("userIds","array-contains",t),$e("status","==","accepted"),Kr(e)),w=await Ft(N),k=[];w.docs.forEach(A=>{const F=A.data().userIds.find(C=>C!==t);F&&k.push(F)}),h(k)}catch(N){console.error("[useFriendsRealtime] Error fetching friend IDs:",N),c(N)}})()},[t,e]),_.useEffect(()=>{if(u.length===0){a(!1);return}const S=[];return u.forEach(N=>{const w=ce(J,"users",N),k=cr(w,A=>{var D,F;if(A.exists()){const C=A.data(),T={id:N,displayName:C.displayName||C.username||"Anonym",username:C.username||"user",photoURL:C.photoURL,isOnline:C.isOnline||C.isActive||!1,lastActiveAt:((F=(D=C.lastActiveAt)==null?void 0:D.toDate)==null?void 0:F.call(D))||C.lastActiveAt,currentRoom:C.currentRoom,statusEmoji:C.statusEmoji,isFounder:N===sT||C.role==="founder",auraColor:C.auraColor||(N===sT?"#fbbf24":"#a855f7")};r(P=>{const L=P.findIndex(z=>z.id===N);if(L>=0){const z=[...P];return z[L]=T,z}return[...P,T]})}},A=>{console.error(`[useFriendsRealtime] Error watching friend ${N}:`,A)});S.push(k)}),a(!1),()=>{S.forEach(N=>N())}},[u]);const m=n.filter(S=>S.isOnline),g=m.length,x=n.length,v=[...n].sort((S,N)=>S.isOnline!==N.isOnline?S.isOnline?-1:1:S.displayName.localeCompare(N.displayName)),E=[...m].sort((S,N)=>S.displayName.localeCompare(N.displayName)),j=_.useCallback(()=>{r([]),h([]),a(!0)},[]);return{friends:v,activeFriends:E,activeCount:g,totalCount:x,isLoading:s,error:o,refreshFriends:j}}const O3=60*60*1e3,V3=30,Ste=["","","","","","","","","","","","","","","",""],Tte=t=>{if(!t)return!0;const e=V3*24*60*60*1e3,n=t+e;return Date.now()>n},Ate=t=>{if(!t)return 0;const e=V3*24*60*60*1e3,r=t+e-Date.now();return Math.max(0,Math.ceil(r/(24*60*60*1e3)))},Ite=t=>t?Date.now()-t>O3:!0,Cte=t=>{if(!t)return 0;const e=O3-(Date.now()-t);return Math.max(0,Math.ceil(e/(60*1e3)))},Rte=({bannerURL:t,isOwner:e,onUpload:n})=>{const r=_.useRef(null);return i.jsxs("div",{className:"relative h-44 w-full overflow-hidden",children:[t?i.jsx("img",{src:t,alt:"Banner",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full",style:{background:"linear-gradient(135deg, #1a0a2e 0%, #16082a 50%, #0d0518 100%)"},children:i.jsx(U.div,{className:"absolute inset-0",style:{background:"radial-gradient(ellipse at 30% 50%, rgba(168, 85, 247, 0.15) 0%, transparent 60%)"},animate:{opacity:[.5,.8,.5]},transition:{duration:4,repeat:1/0}})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24",style:{background:"linear-gradient(to top, #050505, transparent)"}}),e&&i.jsxs(i.Fragment,{children:[i.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:s=>{var a;return((a=s.target.files)==null?void 0:a[0])&&n(s.target.files[0])},className:"hidden"}),i.jsxs(U.button,{onClick:()=>{var s;return(s=r.current)==null?void 0:s.click()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"absolute top-4 right-4 p-2 rounded-xl flex items-center gap-2",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(YQ,{size:16,className:"text-white/70"}),i.jsx("span",{className:"text-xs text-white/70 font-medium",children:"Banner"})]})]})]})},Pte=({photoURL:t,displayName:e,isFounder:n,statusEmoji:r,emojiExpired:s,emojiMinutesLeft:a,isOwner:o,onAvatarUpload:c,onEmojiClick:u})=>{const h=_.useRef(null),m=n?"#fbbf24":"#a855f7";return i.jsxs("div",{className:"relative -mt-16 ml-5",children:[i.jsxs(U.div,{className:"relative w-28 h-28 rounded-full overflow-hidden",style:{border:"4px solid #050505",boxShadow:`0 0 30px ${m}40`},children:[i.jsx(U.div,{className:"absolute -inset-1 rounded-full",style:{background:`linear-gradient(135deg, ${m}, ${n?"#fde047":"#c084fc"})`},animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}}),i.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden z-10",style:{background:"#050505"},children:t?i.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${m}40, ${m}20)`},children:i.jsx("span",{className:"text-4xl font-black text-white/80",children:e.charAt(0).toUpperCase()})})}),o&&i.jsxs(i.Fragment,{children:[i.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:g=>{var x;return((x=g.target.files)==null?void 0:x[0])&&c(g.target.files[0])},className:"hidden"}),i.jsx(U.button,{onClick:()=>{var g;return(g=h.current)==null?void 0:g.click()},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute bottom-1 right-1 w-8 h-8 rounded-full flex items-center justify-center z-20",style:{background:m,boxShadow:`0 2px 10px ${m}50`},children:i.jsx(qQ,{size:14,className:"text-black"})})]})]}),n&&i.jsx(U.div,{initial:{scale:0,rotate:-45},animate:{scale:1,rotate:0},className:"absolute -top-2 -right-2 w-9 h-9 rounded-full flex items-center justify-center z-30",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.5)"},children:i.jsx(kn,{size:18,className:"text-black"})}),i.jsx(U.button,{onClick:u,whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute -bottom-1 -right-1 w-10 h-10 rounded-full flex items-center justify-center z-30",style:{background:s?"rgba(255, 255, 255, 0.1)":`${m}30`,border:`2px solid ${s?"rgba(255, 255, 255, 0.2)":m}`,opacity:s?.5:1},children:r&&!s?i.jsx("span",{className:"text-xl",children:r}):i.jsx(fr,{size:16,className:"text-white/50"})}),r&&!s&&i.jsxs("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded-full text-[9px] font-bold",style:{background:"rgba(168, 85, 247, 0.2)",color:"#a855f7"},children:[a,"m"]})]})},Dte=({isOpen:t,onClose:e,onSelect:n,currentEmoji:r})=>i.jsx(qt,{children:t&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:e,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-sm p-5 rounded-3xl",style:{background:"linear-gradient(135deg, rgba(30, 20, 50, 0.98), rgba(15, 10, 30, 0.98))",border:"1px solid rgba(168, 85, 247, 0.2)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:s=>s.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:"Deine Stimmung"}),i.jsx("button",{onClick:e,children:i.jsx(ln,{size:20,className:"text-white/40"})})]}),i.jsx("p",{className:"text-xs text-white/40 mb-4",children:"Whle einen Emoji. Er verschwindet automatisch nach 60 Minuten."}),i.jsx("div",{className:"grid grid-cols-4 gap-3",children:Ste.map(s=>i.jsx(U.button,{onClick:()=>{n(s),e()},whileHover:{scale:1.15},whileTap:{scale:.9},className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl",style:{background:s===r?"rgba(168, 85, 247, 0.3)":"rgba(255, 255, 255, 0.05)",border:s===r?"2px solid #a855f7":"1px solid rgba(255, 255, 255, 0.1)"},children:s},s))}),r&&i.jsx(U.button,{onClick:()=>{n(""),e()},whileTap:{scale:.95},className:"w-full mt-4 py-3 rounded-xl text-sm font-bold text-red-400",style:{background:"rgba(239, 68, 68, 0.1)"},children:"Status entfernen"})]})})}),Mte=({isOpen:t,onClose:e,rating:n,count:r,recentRatings:s})=>{const a=Math.floor(n);return i.jsx(qt,{children:t&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.85)"},onClick:e,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-sm rounded-3xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(30, 20, 50, 0.95), rgba(15, 10, 30, 0.98))",border:"1px solid rgba(251, 191, 36, 0.2)",boxShadow:"0 0 80px rgba(251, 191, 36, 0.15), 0 20px 60px rgba(0, 0, 0, 0.5)",backdropFilter:"blur(20px)"},onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"p-6 text-center relative overflow-hidden",style:{background:"linear-gradient(180deg, rgba(251, 191, 36, 0.1), transparent)"},children:[i.jsx(U.div,{className:"absolute top-0 left-1/2 -translate-x-1/2 w-48 h-48",style:{background:"radial-gradient(circle, rgba(251, 191, 36, 0.3) 0%, transparent 70%)",filter:"blur(30px)"},animate:{opacity:[.5,1,.5],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),i.jsxs("div",{className:"relative",children:[i.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-amber-400/60 mb-3",children:"Aura-Rating"}),i.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"text-6xl font-black text-white mb-2",style:{textShadow:"0 0 30px rgba(251, 191, 36, 0.5)"},children:n.toFixed(1)}),i.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:[...Array(5)].map((o,c)=>i.jsx(U.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3+c*.1,type:"spring"},children:i.jsx(jn,{size:28,className:c<a?"text-amber-400":"text-white/20",fill:c<a?"#fbbf24":"transparent",style:c<a?{filter:"drop-shadow(0 0 8px rgba(251, 191, 36, 0.8))"}:{}})},c))}),i.jsxs("p",{className:"text-sm text-white/50",children:["Basierend auf ",i.jsx("span",{className:"text-amber-400 font-bold",children:r})," Bewertungen"]})]})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsx("div",{className:"space-y-2 mb-4",children:[5,4,3,2,1].map(o=>{const c=o===Math.round(n)?60:o>n?10:20;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex items-center gap-0.5 w-16",children:[...Array(o)].map((u,h)=>i.jsx(jn,{size:10,className:"text-amber-400",fill:"#fbbf24"},h))}),i.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #fbbf24, #f59e0b)"},initial:{width:0},animate:{width:`${c}%`},transition:{delay:.5,duration:.5}})}),i.jsxs("span",{className:"text-[10px] text-white/30 w-8 text-right",children:[c,"%"]})]},o)})}),i.jsx("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(251, 191, 36, 0.1)",border:"1px solid rgba(251, 191, 36, 0.2)"},children:i.jsx("p",{className:"text-xs text-amber-400/80",children:" Bewertungen werden nach Voice-Calls vergeben"})}),i.jsx(U.button,{onClick:e,whileTap:{scale:.95},className:"w-full mt-4 py-3 rounded-xl text-sm font-bold text-white/60",style:{background:"rgba(255, 255, 255, 0.05)"},children:"Schlieen"})]})]})})})},Lte=({isOpen:t,onClose:e,level:n,currentXP:r,totalXP:s,neededXP:a,tier:o,accentColor:c})=>{const u=[{level:5,title:"Newcomer",reward:"Basic Aura",icon:i.jsx(fr,{size:16}),unlocked:n>=5},{level:10,title:"Rising Star",reward:"Custom Status",icon:i.jsx(jn,{size:16}),unlocked:n>=10},{level:15,title:"Connector",reward:"Priority Match",icon:i.jsx(kt,{size:16}),unlocked:n>=15},{level:25,title:"Established",reward:"Gold Badge",icon:i.jsx(GR,{size:16}),unlocked:n>=25},{level:50,title:"Elite",reward:"Elite Frame",icon:i.jsx(kn,{size:16}),unlocked:n>=50},{level:100,title:"Legendary",reward:"Mythic Aura",icon:i.jsx(Co,{size:16}),unlocked:n>=100}],h=u.find(g=>!g.unlocked)||u[u.length-1],m=Math.min(100,r/a*100);return i.jsx(qt,{children:t&&i.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex flex-col",style:{background:"rgba(5, 5, 5, 0.98)"},onClick:e,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 pt-safe",children:[i.jsx(U.button,{onClick:e,whileTap:{scale:.95},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)"},children:i.jsx(ln,{size:20,className:"text-white/70"})}),i.jsx("h1",{className:"text-lg font-black text-white",children:"Level Command"}),i.jsx("div",{className:"w-10"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-20",onClick:g=>g.stopPropagation(),children:[i.jsxs("div",{className:"text-center py-8",children:[i.jsxs(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},className:"relative inline-block",children:[i.jsx(U.div,{className:"absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${c}40 0%, transparent 70%)`,transform:"scale(2)"},animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),i.jsx("div",{className:"relative w-32 h-32 rounded-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${c}30, ${c}10)`,border:`3px solid ${c}`,boxShadow:`0 0 40px ${c}50`},children:i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-4xl font-black text-white",children:n}),i.jsx("p",{className:"text-[10px] text-white/50 uppercase tracking-wider",children:"Level"})]})})]}),i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4",children:[i.jsxs("p",{className:"text-xl font-bold text-white",children:[o.rank," ",o.title]}),i.jsxs("p",{className:"text-sm text-white/40 mt-1",children:[s.toLocaleString()," XP gesammelt"]})]})]}),i.jsxs("div",{className:"p-5 rounded-2xl mb-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("span",{className:"text-sm font-bold text-white/70",children:["Fortschritt zu Level ",n+1]}),i.jsxs("span",{className:"text-sm font-bold",style:{color:c},children:[r," / ",a," XP"]})]}),i.jsx("div",{className:"h-4 bg-white/5 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full relative",style:{background:`linear-gradient(90deg, ${c}, ${c}cc)`},initial:{width:0},animate:{width:`${m}%`},transition:{duration:1,ease:"easeOut"},children:i.jsx(U.div,{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5}})})}),i.jsxs("p",{className:"text-[10px] text-white/30 mt-2",children:["Noch ",a-r," XP bis zum nchsten Level"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[i.jsx(ZR,{size:14}),"Meilensteine"]}),i.jsx("div",{className:"space-y-2",children:u.map((g,x)=>i.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+x*.05},className:"flex items-center gap-3 p-3 rounded-xl",style:{background:g.unlocked?`linear-gradient(135deg, ${c}15, ${c}05)`:"rgba(255, 255, 255, 0.02)",border:g.unlocked?`1px solid ${c}30`:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:g.unlocked?`${c}20`:"rgba(255, 255, 255, 0.05)",color:g.unlocked?c:"rgba(255, 255, 255, 0.3)"},children:g.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-bold text-white",children:g.title}),i.jsxs("span",{className:"text-[10px] text-white/30",children:["LV.",g.level]})]}),i.jsx("p",{className:"text-xs text-white/40",children:g.reward})]}),g.unlocked?i.jsx(ft,{size:16,className:"text-green-400"}):g===h?i.jsx(Ms,{size:16,className:"text-white/30"}):i.jsx(Ir,{size:14,className:"text-white/20"})]},g.level))})]}),i.jsxs("div",{className:"p-4 rounded-2xl",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[i.jsx(d_,{size:14}),"So verdienst du XP"]}),i.jsxs("div",{className:"space-y-2 text-xs text-white/50",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" Voice Chat (pro Minute)"}),i.jsx("span",{className:"text-green-400",children:"+5 XP"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" Zuhren (pro Minute)"}),i.jsx("span",{className:"text-green-400",children:"+1 XP"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" Neuen Freund hinzufgen"}),i.jsx("span",{className:"text-green-400",children:"+25 XP"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" Freund einladen"}),i.jsx("span",{className:"text-green-400",children:"+100 XP"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" Aura-Bewertung erhalten"}),i.jsx("span",{className:"text-green-400",children:"+10 XP"})]})]})]})]})]})})},Ote=({level:t,progress:e,currentXP:n,neededXP:r,accentColor:s,onClick:a})=>i.jsxs(U.button,{onClick:a,whileTap:{scale:.98},className:"w-full p-4 rounded-2xl flex items-center gap-4",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 6px 25px rgba(139, 92, 246, 0.5)"},children:[i.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center flex-shrink-0",style:{background:"rgba(255, 255, 255, 0.2)",border:"3px solid white",boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)"},children:i.jsx("span",{className:"text-2xl font-black text-white",children:t})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"text-base font-bold text-white",children:["Level ",t]}),i.jsxs("span",{className:"text-xs text-white/80",children:[n,"/",r," XP"]})]}),i.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #fbbf24, #f59e0b)"},initial:{width:0},animate:{width:`${e}%`}})}),i.jsx("p",{className:"text-xs text-white/70 mt-1.5",children:"Tippe fr Details"})]}),i.jsx(Ms,{size:20,className:"text-white/80 flex-shrink-0"})]}),Cv=({icon:t,value:e,label:n,color:r})=>i.jsxs("div",{className:"flex-1 p-4 rounded-2xl text-center",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl flex items-center justify-center",style:{background:`${r}15`},children:t}),i.jsx("p",{className:"text-xl font-black text-white",children:e}),i.jsx("p",{className:"text-[10px] text-white/40 font-medium",children:n})]});function Vte(){const t=yt(),{user:e}=Bs();Ete({userId:e==null?void 0:e.id});const[n,r]=_.useState(null),[s,a]=_.useState([]),[o,c]=_.useState(!0),[u,h]=_.useState(!1),[m,g]=_.useState(!1),[x,v]=_.useState(!1),[E,j]=_.useState(!1),[S,N]=_.useState(!1),[w,k]=_.useState(""),A=_.useMemo(()=>n?bu(n.xp):{level:1,currentXP:0,neededXP:100},[n==null?void 0:n.xp]),D=_.useMemo(()=>wu(A.level),[A.level]),F=_.useMemo(()=>Math.min(100,A.currentXP/A.neededXP*100),[A]),C=_.useMemo(()=>Ite(n==null?void 0:n.statusEmojiTimestamp),[n==null?void 0:n.statusEmojiTimestamp]),T=_.useMemo(()=>Cte(n==null?void 0:n.statusEmojiTimestamp),[n==null?void 0:n.statusEmojiTimestamp]),P=_.useMemo(()=>Tte(n==null?void 0:n.usernameLastChanged),[n==null?void 0:n.usernameLastChanged]),L=_.useMemo(()=>Ate(n==null?void 0:n.usernameLastChanged),[n==null?void 0:n.usernameLastChanged]),z=n!=null&&n.isFounder?"#fbbf24":"#a855f7";_.useEffect(()=>{if(!(e!=null&&e.id)){c(!1);return}(async()=>{var K,te,ue,Re;try{const ge=await mt(ce(J,"users",e.id));if(ge.exists()){const me=ge.data();r({displayName:me.displayName||me.username||"Anonym",username:me.username||"anonym",photoURL:me.photoURL,bannerURL:me.bannerURL,bio:me.bio||"",statusEmoji:me.statusEmoji,statusEmojiTimestamp:((te=(K=me.statusEmojiTimestamp)==null?void 0:K.toMillis)==null?void 0:te.call(K))||me.statusEmojiTimestamp,usernameLastChanged:((Re=(ue=me.usernameLastChanged)==null?void 0:ue.toMillis)==null?void 0:Re.call(ue))||me.usernameLastChanged,xp:me.xp||me.totalXP||0,isFounder:me.role==="founder"||me.isAdmin===!0,friendsCount:me.friendsCount||0,roomsJoined:me.roomsJoined||0,messagesSent:me.messagesSent||0,daysActive:me.daysActive||1,achievements:me.achievements||[],topLocations:me.topLocations||[],auraRating:me.auraRating||0,auraRatingCount:me.auraRatingCount||0,city:me.city}),k(me.bio||"")}try{const me=Ve(J,"users",e.id,"activity_meta"),at=it(me,Us("timeSpent","desc"),Kr(5)),jt=await Ft(at),Xt=[];jt.forEach(Tn=>{var Ln,Pr;const Qn=Tn.data();Xt.push({name:Tn.id,timeSpent:Qn.timeSpent||0,syncRate:Qn.syncRate||Math.floor(Math.random()*40+60),lastVisit:((Pr=(Ln=Qn.lastVisit)==null?void 0:Ln.toMillis)==null?void 0:Pr.call(Ln))||Date.now()})}),a(Xt)}catch{console.log("No activity data yet")}}catch(ge){console.error("Error fetching profile:",ge)}finally{c(!1)}})()},[e==null?void 0:e.id]);const H=_.useCallback(async oe=>{if(!(!(e!=null&&e.id)||u)){h(!0);try{const K=AE(IE,`banners/${e.id}`);await SE(K,oe);const te=await TE(K);await Ge(ce(J,"users",e.id),{bannerURL:te}),r(ue=>ue?{...ue,bannerURL:te}:null)}catch(K){console.error("Banner upload failed:",K)}finally{h(!1)}}},[e==null?void 0:e.id,u]),B=_.useCallback(async oe=>{if(!(!(e!=null&&e.id)||u)){h(!0);try{const K=AE(IE,`avatars/${e.id}`);await SE(K,oe);const te=await TE(K);await Ge(ce(J,"users",e.id),{photoURL:te}),r(ue=>ue?{...ue,photoURL:te}:null)}catch(K){console.error("Avatar upload failed:",K)}finally{h(!1)}}},[e==null?void 0:e.id,u]),Pe=_.useCallback(async oe=>{if(e!=null&&e.id)try{const K=oe?Date.now():null;await Ge(ce(J,"users",e.id),{statusEmoji:oe||null,statusEmojiTimestamp:K}),r(te=>te?{...te,statusEmoji:oe||void 0,statusEmojiTimestamp:K||void 0}:null)}catch(K){console.error("Emoji update failed:",K)}},[e==null?void 0:e.id]),we=_.useCallback(async()=>{if(e!=null&&e.id)try{await Ge(ce(J,"users",e.id),{bio:w}),r(oe=>oe?{...oe,bio:w}:null),N(!1)}catch(oe){console.error("Bio update failed:",oe)}},[e==null?void 0:e.id,w]);((n==null?void 0:n.daysActive)||0)>=7,((n==null?void 0:n.friendsCount)||0)>=10,((n==null?void 0:n.roomsJoined)||0)>=5,((n==null?void 0:n.messagesSent)||0)>=100,A.level>=10;const je={roomsVisited:(n==null?void 0:n.roomsJoined)||0,talkTimeMinutes:Math.floor(((n==null?void 0:n.xp)||0)/5)};return A.level>=10||((n==null?void 0:n.xp)||0)>=1e3,o?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center",style:{background:"#050505"},children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-10 h-10 border-2 border-violet-500 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen pb-28",style:{background:"#050505"},children:[i.jsx(U.button,{onClick:()=>t(-1),whileHover:{scale:1.1},whileTap:{scale:.9},className:"fixed top-4 left-4 z-[100] w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-white/70"})}),i.jsx(Rte,{bannerURL:n==null?void 0:n.bannerURL,isOwner:!0,onUpload:H}),i.jsxs("div",{className:"relative px-5",children:[i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx(Pte,{photoURL:n==null?void 0:n.photoURL,displayName:(n==null?void 0:n.displayName)||"Anonym",isFounder:(n==null?void 0:n.isFounder)||!1,statusEmoji:n==null?void 0:n.statusEmoji,emojiExpired:C,emojiMinutesLeft:T,isOwner:!0,onAvatarUpload:B,onEmojiClick:()=>g(!0)}),i.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[i.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/settings"),className:"px-4 py-2 rounded-xl flex items-center gap-2",style:{background:`${z}20`,border:`1px solid ${z}40`},children:[i.jsx(XR,{size:14,style:{color:z}}),i.jsx("span",{className:"text-xs font-bold",style:{color:z},children:"Bearbeiten"})]}),i.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)"},children:i.jsx(c_,{size:18,className:"text-white/70"})})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h1",{className:"text-2xl font-black text-white",children:n==null?void 0:n.displayName}),(n==null?void 0:n.isFounder)&&i.jsx("div",{className:"px-2 py-0.5 rounded-full",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.2))",border:"1px solid rgba(251, 191, 36, 0.3)"},children:i.jsx("span",{className:"text-[10px] font-bold text-amber-400",children:"FOUNDER"})})]}),i.jsxs("p",{className:"text-sm text-white/40",children:["@",n==null?void 0:n.username]}),!P&&i.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[i.jsx(Fo,{size:12,className:"text-amber-400"}),i.jsxs("span",{className:"text-[10px] text-amber-400/70",children:["Namensnderung in ",L," Tagen mglich"]})]})]}),i.jsx("div",{className:"mt-4",children:S?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:w,onChange:oe=>k(oe.target.value.slice(0,160)),placeholder:"Schreibe etwas ber dich...",className:"w-full p-3 rounded-xl text-sm text-white/80 resize-none",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(168, 85, 247, 0.3)",outline:"none"},rows:3,autoFocus:!0}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-[10px] text-white/30",children:[w.length,"/160"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(!1),className:"p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)"},children:i.jsx(ln,{size:14,className:"text-white/50"})}),i.jsx("button",{onClick:we,className:"p-2 rounded-lg",style:{background:"rgba(168, 85, 247, 0.2)"},children:i.jsx(ft,{size:14,className:"text-purple-400"})})]})]})]}):i.jsx("button",{onClick:()=>N(!0),className:"w-full text-left",children:i.jsx("p",{className:"text-sm text-white/60 leading-relaxed",children:(n==null?void 0:n.bio)||i.jsx("span",{className:"text-white/30 italic",children:"+ Bio hinzufgen..."})})})})]}),i.jsxs("div",{className:"px-5 mt-6 space-y-3",children:[i.jsx(Ote,{level:A.level,progress:F,currentXP:A.currentXP,neededXP:A.neededXP,accentColor:z,onClick:()=>j(!0)}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>t("/invites"),className:"w-full p-4 rounded-2xl flex items-center gap-4",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 6px 25px rgba(59, 130, 246, 0.5)"},children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)"},children:i.jsx(Dn,{size:22,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-base font-bold text-white",children:"Freunde einladen"}),i.jsx("p",{className:"text-xs text-white/70",children:"+100 XP pro Einladung"})]}),i.jsx(Ms,{size:20,className:"text-white/80 flex-shrink-0"})]})]}),i.jsx("div",{className:"px-5 mt-6",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Cv,{icon:i.jsx(kt,{size:18,className:"text-blue-400"}),value:(n==null?void 0:n.friendsCount)||0,label:"Freunde",color:"#3b82f6"}),i.jsx(Cv,{icon:i.jsx(Nf,{size:18,className:"text-green-400"}),value:(n==null?void 0:n.roomsJoined)||0,label:"Rume",color:"#22c55e"}),i.jsx(Cv,{icon:i.jsx(la,{size:18,className:"text-orange-400"}),value:(n==null?void 0:n.daysActive)||1,label:"Tage",color:"#f97316"})]})}),i.jsxs("div",{className:"px-5 mt-4 space-y-3",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>t("/voice-stats"),className:"w-full p-4 rounded-2xl flex items-center gap-4",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 6px 25px rgba(139, 92, 246, 0.5)"},children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)"},children:i.jsx(li,{size:22,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-base font-bold text-white",children:"Voice Statistik"}),i.jsxs("p",{className:"text-xs text-white/70",children:[je.roomsVisited," Rume  ",je.talkTimeMinutes,"m Talk"]})]}),i.jsx(Ms,{size:20,className:"text-white/80 flex-shrink-0"})]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>t("/streaks"),className:"w-full p-4 rounded-2xl flex items-center gap-4",style:{background:"linear-gradient(135deg, #f97316, #ea580c)",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 6px 25px rgba(249, 115, 22, 0.5)"},children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)"},children:i.jsx(la,{size:22,className:"text-white"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-base font-bold text-white",children:"Tgliche Streaks"}),i.jsxs("p",{className:"text-xs text-white/70",children:[(n==null?void 0:n.daysActive)||0," Tage aktiv"]})]}),i.jsx(Ms,{size:20,className:"text-white/80 flex-shrink-0"})]})]}),i.jsx("div",{className:"h-8"}),i.jsx(Dte,{isOpen:m,onClose:()=>g(!1),onSelect:Pe,currentEmoji:n==null?void 0:n.statusEmoji}),i.jsx(Mte,{isOpen:x,onClose:()=>v(!1),rating:(n==null?void 0:n.auraRating)||0,count:(n==null?void 0:n.auraRatingCount)||0}),i.jsx(Lte,{isOpen:E,onClose:()=>j(!1),level:A.level,currentXP:A.currentXP,totalXP:(n==null?void 0:n.xp)||0,neededXP:A.neededXP,tier:D,accentColor:z}),i.jsx(qt,{children:u&&i.jsxs(U.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-24 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full flex items-center gap-2",style:{background:"rgba(168, 85, 247, 0.9)",backdropFilter:"blur(10px)"},children:[i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),i.jsx("span",{className:"text-xs font-bold text-white",children:"Uploading..."})]})})]})}const Ute="MIbamchs82Ve7y0ecX2TpPyymbw1",Fte={happy:{emoji:"",label:"Happy",color:"#22c55e"},chill:{emoji:"",label:"Chill",color:"#3b82f6"},excited:{emoji:"",label:"Excited",color:"#f59e0b"},tired:{emoji:"",label:"Mde",color:"#6b7280"},focused:{emoji:"",label:"Fokussiert",color:"#a855f7"},party:{emoji:"",label:"Party",color:"#ec4899"},love:{emoji:"",label:"In Love",color:"#ef4444"},gaming:{emoji:"",label:"Gaming",color:"#10b981"}};function ii(t="light"){if(typeof navigator<"u"&&navigator.vibrate){const e={light:10,medium:25,heavy:50};navigator.vibrate(e[t])}}function zte(t){if(t<60)return`${t}m`;const e=Math.floor(t/60),n=t%60;return n>0?`${e}h ${n}m`:`${e}h`}const Bte=({onCreateCloud:t,onDiscover:e})=>i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-16 px-6 text-center z-20",children:[i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{ii("heavy"),t()},className:"relative w-32 h-32 rounded-[32px] flex items-center justify-center mb-8 overflow-hidden",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.05))",border:"2px dashed rgba(168, 85, 247, 0.4)"},children:[i.jsx(U.div,{className:"absolute inset-0",style:{background:"radial-gradient(circle at center, rgba(168, 85, 247, 0.3) 0%, transparent 70%)"},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0}}),i.jsx(jf,{size:56,className:"text-violet-400 relative z-10"})]}),i.jsx(U.h2,{className:"text-xl font-bold text-white mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Neue Menschen treffen"}),i.jsx(U.p,{className:"text-sm text-white/50 max-w-xs mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Starte eine Wolke und verbinde dich mit Menschen in deiner Nhe"}),i.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{ii("medium"),t()},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"w-full py-4 rounded-2xl font-bold text-white flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #a855f7, #7c3aed)",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.4)"},children:[i.jsx(fr,{size:20}),i.jsx("span",{children:"Wlkchen erstellen"})]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{ii("light"),e()},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"w-full py-4 rounded-2xl font-semibold text-violet-400 flex items-center justify-center gap-3",style:{background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[i.jsx(Y0,{size:18}),i.jsx("span",{children:"Entdecken"})]})]})]}),$te=({friends:t,onFriendClick:e})=>{const n=_.useMemo(()=>t.filter(r=>r.isActive&&r.isNearby),[t]);return n.length===0?null:i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6 z-20",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 px-4",children:[i.jsx(_a,{size:14,className:"text-emerald-400"}),i.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wider",children:"In deiner Nhe"}),i.jsx(U.div,{className:"w-1.5 h-1.5 rounded-full bg-emerald-400",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0}})]}),i.jsx("div",{className:"flex gap-3 overflow-x-auto px-4 pb-2 scrollbar-hide",children:n.map((r,s)=>i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{ii("light"),e(r.id)},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:s*.05},className:"flex flex-col items-center flex-shrink-0",children:[i.jsxs("div",{className:"relative",children:[r.isFounder&&i.jsx(U.div,{className:"absolute -inset-1 rounded-full",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)"},animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}}),i.jsx("div",{className:"relative w-16 h-16 rounded-full overflow-hidden",style:{border:r.isFounder?"3px solid #050505":"3px solid rgba(34, 197, 94, 0.3)"},children:r.avatarUrl?i.jsx("img",{src:r.avatarUrl,alt:"",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-emerald-500/20 flex items-center justify-center text-white font-bold text-lg",children:(r.displayName||r.username).charAt(0).toUpperCase()})}),i.jsx(U.div,{className:"absolute bottom-0 right-0 w-4 h-4 rounded-full bg-emerald-500 border-2 border-[#050505] flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:i.jsx(_a,{size:8,className:"text-white"})})]}),i.jsx("p",{className:"text-[10px] text-white/80 mt-2 max-w-[70px] truncate font-medium",children:r.displayName||r.username}),r.statusText&&i.jsx("p",{className:"text-[8px] text-emerald-400 truncate max-w-[70px]",children:r.statusText})]},r.id))})]})},iT=({friend:t,index:e,onClick:n,onMessage:r})=>{const s=t.mood?Fte[t.mood]:null,a=t.isFounder?"#fbbf24":"#a855f7";return i.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03},className:"relative overflow-hidden z-20",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{ii("light"),n()},className:"w-full flex items-center gap-4 p-4 rounded-2xl text-left transition-all",style:{background:t.isActive?"linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(34, 197, 94, 0.02))":"rgba(255, 255, 255, 0.02)",border:t.isActive?"1px solid rgba(34, 197, 94, 0.15)":"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[t.isFounder&&i.jsx(U.div,{className:"absolute -inset-0.5 rounded-full",style:{background:`linear-gradient(135deg, ${a}, #fde047)`},animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"}}),i.jsx("div",{className:"relative w-14 h-14 rounded-full overflow-hidden",style:{border:`2px solid ${t.isActive?"#22c55e":"#1f1f1f"}`},children:t.avatarUrl?i.jsx("img",{src:t.avatarUrl,alt:"",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold",style:{background:`${a}30`},children:(t.displayName||t.username).charAt(0).toUpperCase()})}),t.isActive&&i.jsx(U.div,{className:"absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full bg-emerald-500 border-2 border-[#050505]",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0}})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-semibold text-white truncate",children:t.displayName||t.username}),t.isFounder&&i.jsx(kn,{size:12,className:"text-amber-400 flex-shrink-0"}),s&&i.jsx("span",{className:"text-sm",children:s.emoji})]}),i.jsxs("p",{className:"text-[11px] text-white/40 truncate",children:["@",t.username]}),t.statusText&&i.jsx("p",{className:"text-[10px] mt-1 truncate font-medium",style:{color:t.isActive?"#22c55e":"#a855f7"},children:t.statusText}),t.locationName&&t.isActive&&i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx(_a,{size:10,className:"text-emerald-400"}),i.jsx("span",{className:"text-[9px] text-emerald-400",children:t.locationName})]})]}),i.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[t.streakCount>0&&i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-orange-500/10",children:[i.jsx(la,{size:12,className:"text-orange-400"}),i.jsx("span",{className:"text-[10px] font-bold text-orange-400",children:t.streakCount})]}),t.totalSyncTime>0&&i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-violet-500/10",children:[i.jsx(li,{size:12,className:"text-violet-400"}),i.jsx("span",{className:"text-[10px] font-bold text-violet-400",children:zte(t.totalSyncTime)})]}),i.jsx(Ms,{size:18,className:"text-white/20"})]})]}),i.jsx(U.button,{whileTap:{scale:.9},onClick:o=>{o.stopPropagation(),ii("light"),r()},className:"absolute right-14 top-1/2 -translate-y-1/2 w-10 h-10 rounded-xl flex items-center justify-center z-30",style:{background:"rgba(168, 85, 247, 0.15)",border:"1px solid rgba(168, 85, 247, 0.2)"},children:i.jsx(Nf,{size:16,className:"text-violet-400"})})]})},Wte=({friends:t,onFriendClick:e,onMessage:n})=>{const r=_.useMemo(()=>t.filter(a=>a.isActive),[t]),s=_.useMemo(()=>t.filter(a=>!a.isActive),[t]);return i.jsxs("div",{className:"px-4 space-y-2 z-20",children:[r.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(U.div,{className:"w-2 h-2 rounded-full bg-emerald-500",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0}}),i.jsxs("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wider",children:["Online (",r.length,")"]})]}),i.jsx("div",{className:"space-y-2",children:r.map((a,o)=>i.jsx(iT,{friend:a,index:o,onClick:()=>e(a.id),onMessage:()=>n(a.id)},a.id))})]}),s.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Fo,{size:12,className:"text-white/30"}),i.jsxs("span",{className:"text-[10px] font-black text-white/30 uppercase tracking-wider",children:["Offline (",s.length,")"]})]}),i.jsx("div",{className:"space-y-2",children:s.map((a,o)=>i.jsx(iT,{friend:a,index:o+r.length,onClick:()=>e(a.id),onMessage:()=>n(a.id)},a.id))})]})]})},Hte=({navigate:t})=>i.jsxs("div",{className:"px-4 mt-6 space-y-3 z-20",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{ii("medium"),t("/friends-list")},className:"w-full p-4 rounded-2xl flex items-center justify-between",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(168, 85, 247, 0.03))",border:"1px solid rgba(168, 85, 247, 0.15)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-500/20 flex items-center justify-center",children:i.jsx(kt,{size:18,className:"text-violet-400"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:"text-sm font-semibold text-white",children:"Freundesliste"}),i.jsx("p",{className:"text-[10px] text-white/40",children:"Alle verwalten"})]})]}),i.jsx(Ms,{size:20,className:"text-violet-400"})]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>{ii("medium"),t("/friend-streaks")},className:"w-full p-4 rounded-2xl flex items-center justify-between",style:{background:"linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(249, 115, 22, 0.03))",border:"1px solid rgba(249, 115, 22, 0.15)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/20 flex items-center justify-center",children:i.jsx(la,{size:18,className:"text-orange-400"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:"text-sm font-semibold text-white",children:"Freundesstreaks"}),i.jsx("p",{className:"text-[10px] text-white/40",children:"Streak-Details"})]})]}),i.jsx(Ms,{size:20,className:"text-orange-400"})]})]}),Gte=()=>{const t=yt(),{user:e}=mr(),[n,r]=_.useState([]),[s,a]=_.useState(!0);_.useEffect(()=>{async function h(){var m,g,x,v;if(e!=null&&e.id){a(!0);try{const E=it(Ve(J,"friendships"),$e("userIds","array-contains",e.id),$e("status","==","accepted"),Kr(100)),j=await Ft(E),S=[],N={};j.docs.forEach(k=>{var F,C,T;const A=k.data(),D=A.userIds.find(P=>P!==e.id);D&&(S.push(D),N[D]={streakCount:A.streakCount||0,lastInteraction:(F=A.lastInteraction)==null?void 0:F.toDate(),addedAt:((C=A.createdAt)==null?void 0:C.toDate())||((T=A.addedAt)==null?void 0:T.toDate()),totalSyncTime:A.totalSyncTime||A.totalVoiceMinutes||Math.floor(Math.random()*500)})});const w=[];for(const k of S.slice(0,50))try{const A=await mt(ce(J,"users",k));if(A.exists()){const D=A.data(),F=["Chilling gerade","Auf der Suche nach Vibes","Ready to talk","In einer Wolke","Exploring"],C=["Prenzlauer Berg","Kreuzberg","Mitte","Friedrichshain","Neuklln"],T=["happy","chill","excited","focused","party","gaming"];w.push({id:k,username:D.username||"User",displayName:D.displayName,avatarUrl:D.photoURL||D.avatarUrl,isActive:D.isOnline||!1,streakCount:((m=N[k])==null?void 0:m.streakCount)||0,totalSyncTime:((g=N[k])==null?void 0:g.totalSyncTime)||0,lastInteraction:((x=N[k])==null?void 0:x.lastInteraction)||new Date(Date.now()-Math.random()*864e5*7),addedAt:(v=N[k])==null?void 0:v.addedAt,isFounder:k===Ute,isVerified:D.isVerified||!1,auraColor:D.auraColor||"#a855f7",mood:D.mood||T[Math.floor(Math.random()*T.length)],statusText:D.statusText||F[Math.floor(Math.random()*F.length)],locationName:D.locationName||C[Math.floor(Math.random()*C.length)],isNearby:Math.random()>.6})}}catch(A){console.error("[Friends] Error fetching friend:",k,A)}w.sort((k,A)=>k.isActive!==A.isActive?k.isActive?-1:1:A.streakCount-k.streakCount),r(w)}catch(E){console.error("[Friends] Error fetching friends:",E)}finally{a(!1)}}}h()},[e==null?void 0:e.id]);const o=_.useCallback(h=>{t(`/user/${h}`)},[t]),c=_.useCallback(h=>{t(`/messages?userId=${h}`)},[t]),u=n.filter(h=>h.isActive).length;return i.jsxs("div",{className:"min-h-screen pb-32 relative",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-4 pt-6 pb-4",style:{background:"#050505"},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>{ii("light"),t(-1)},className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:i.jsx(ni,{size:20,className:"text-white/60"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-white",children:"Freunde"}),i.jsxs("p",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:[n.length," Freunde  ",u," online"]})]})]}),i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>{ii("light"),t("/invites")},className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1))",border:"1px solid rgba(168, 85, 247, 0.3)"},children:i.jsx(Dn,{size:18,className:"text-violet-400"})})]})}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 z-20",children:[i.jsx(U.div,{className:"w-12 h-12 rounded-full border-2 border-violet-500 border-t-transparent",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i.jsx("p",{className:"text-sm text-white/40 mt-4",children:"Ldt Freunde..."})]}):n.length===0?i.jsx(Bte,{onCreateCloud:()=>t("/create-room"),onDiscover:()=>t("/discover")}):i.jsxs(i.Fragment,{children:[i.jsx($te,{friends:n,onFriendClick:o}),i.jsx(Wte,{friends:n,onFriendClick:o,onMessage:c}),i.jsx(Hte,{navigate:t})]}),i.jsx(U.button,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},whileTap:{scale:.9},onClick:()=>{ii("medium"),t("/discover")},className:"fixed bottom-28 right-5 w-14 h-14 rounded-2xl flex items-center justify-center z-[100]",style:{background:"linear-gradient(135deg, #a855f7, #7c3aed)",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.4)"},children:i.jsx(Dn,{size:24,className:"text-white"})})]})},aT="MIbamchs82Ve7y0ecX2TpPyymbw1",qte=({type:t,isRead:e})=>{const n={star:{icon:i.jsx(jn,{size:16}),color:"#fbbf24",bg:"rgba(251, 191, 36, 0.15)"},aura:{icon:i.jsx(fr,{size:16}),color:"#f472b6",bg:"rgba(244, 114, 182, 0.15)"},follow:{icon:i.jsx(Dn,{size:16}),color:"#22d3ee",bg:"rgba(34, 211, 238, 0.15)"},mention:{icon:i.jsx(Nf,{size:16}),color:"#34d399",bg:"rgba(52, 211, 153, 0.15)"},lounge:{icon:i.jsx(kt,{size:16}),color:"#a855f7",bg:"rgba(168, 85, 247, 0.15)"},level_up:{icon:i.jsx(d_,{size:16}),color:"#10b981",bg:"rgba(16, 185, 129, 0.15)"},gift:{icon:i.jsx(Ci,{size:16}),color:"#ec4899",bg:"rgba(236, 72, 153, 0.15)"},system:{icon:i.jsx(Tl,{size:16}),color:"#6366f1",bg:"rgba(99, 102, 241, 0.15)"}},r=n[t]||n.system;return i.jsxs(U.div,{className:"relative w-12 h-12 rounded-2xl flex items-center justify-center",style:{background:e?"rgba(255, 255, 255, 0.03)":r.bg,border:`1px solid ${e?"rgba(255, 255, 255, 0.06)":r.color}30`,color:e?"rgba(255, 255, 255, 0.4)":r.color},whileHover:{scale:1.05},children:[!e&&i.jsx(U.div,{className:"absolute inset-0 rounded-2xl",style:{background:`${r.color}10`},animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),r.icon]})},Kte=({request:t,onAccept:e,onDecline:n,processing:r})=>{var a;const s=t.isFounder?"#fbbf24":"#a855f7";return i.jsxs(U.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95,y:-10},layout:!0,className:"relative rounded-3xl p-5 overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01))",border:`1px solid ${t.isFounder?"rgba(251, 191, 36, 0.2)":"rgba(139, 92, 246, 0.15)"}`},children:[i.jsx(U.div,{className:"absolute -top-10 -right-10 w-32 h-32 rounded-full pointer-events-none",style:{background:`radial-gradient(circle, ${s}15 0%, transparent 70%)`},animate:{opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0}}),i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsxs(U.div,{className:"relative flex-shrink-0",whileHover:{scale:1.05},children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden",style:{border:`2px solid ${s}`,boxShadow:`0 0 20px ${s}30`},children:t.fromPhotoURL?i.jsx("img",{src:t.fromPhotoURL,alt:"",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${s}40, ${s}20)`},children:i.jsx("span",{className:"text-xl font-black text-white/80",children:((a=t.fromDisplayName[0])==null?void 0:a.toUpperCase())||"?"})})}),t.isFounder&&i.jsx(U.div,{initial:{scale:0,rotate:-45},animate:{scale:1,rotate:0},className:"absolute -top-2 -right-2 w-7 h-7 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.5)"},children:i.jsx(kn,{size:12,className:"text-black"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-white truncate flex items-center gap-2",children:[t.fromDisplayName,t.isFounder&&i.jsx("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded-full bg-amber-500/20 text-amber-400",children:"FOUNDER"})]}),i.jsxs("p",{className:"text-xs text-white/40 mt-0.5",children:["@",t.fromUsername,"  Level ",t.fromLevel]})]}),i.jsx("span",{className:"text-[10px] text-white/30 whitespace-nowrap",children:U3(t.createdAt)})]}),t.message&&i.jsxs(U.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-white/60 mt-2 p-3 rounded-xl italic",style:{background:"rgba(255, 255, 255, 0.03)"},children:['"',t.message,'"']}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsxs(U.button,{whileTap:{scale:.95},onClick:n,disabled:r,className:"flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 disabled:opacity-50 transition-all",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.6)"},children:[i.jsx(ln,{size:16}),"Ablehnen"]}),i.jsxs(U.button,{whileTap:{scale:.95},onClick:e,disabled:r,className:"flex-1 py-3 rounded-xl text-white font-bold text-sm flex items-center justify-center gap-2 disabled:opacity-50 transition-all",style:{background:`linear-gradient(135deg, ${s}, ${t.isFounder?"#fde047":"#c084fc"})`,boxShadow:`0 4px 20px ${s}40`},children:[r?i.jsx(Nn,{size:16,className:"animate-spin"}):i.jsx(ft,{size:16}),"Annehmen"]})]})]})]})]})},Qte=({notification:t,onClick:e,index:n})=>{var s,a;const r=!t.isRead;return i.jsxs(U.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{delay:n*.03},layout:!0,onClick:e,className:"relative flex items-start gap-4 p-4 rounded-2xl cursor-pointer transition-all group",style:{background:r?"linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(139, 92, 246, 0.02))":"rgba(255, 255, 255, 0.02)",border:r?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(255, 255, 255, 0.04)"},children:[r&&i.jsx(U.div,{className:"absolute -top-5 -left-5 w-20 h-20 rounded-full pointer-events-none",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.2) 0%, transparent 70%)"},initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:n*.03+.1}}),i.jsx(qte,{type:t.type,isRead:!r}),i.jsxs("div",{className:"flex-1 min-w-0 relative z-10",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("h3",{className:"text-sm truncate pr-4",style:{color:r?"white":"rgba(255, 255, 255, 0.7)",fontWeight:r?600:400},children:t.title}),i.jsx("span",{className:"text-[10px] text-white/30 whitespace-nowrap flex-shrink-0",children:U3(t.timestamp)})]}),i.jsx("p",{className:"text-xs text-white/40 mt-1 line-clamp-2",children:t.message}),t.type==="star"&&((s=t.metadata)==null?void 0:s.starCount)&&i.jsxs(U.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-1 mt-2 px-2 py-1 rounded-lg",style:{background:"rgba(251, 191, 36, 0.15)"},children:[i.jsx(jn,{size:12,className:"text-amber-400",fill:"#fbbf24"}),i.jsxs("span",{className:"text-[10px] font-bold text-amber-400",children:["+",t.metadata.starCount]})]}),t.type==="level_up"&&((a=t.metadata)==null?void 0:a.newLevel)&&i.jsxs(U.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-1 mt-2 px-2 py-1 rounded-lg",style:{background:"rgba(16, 185, 129, 0.15)"},children:[i.jsx(d_,{size:12,className:"text-emerald-400"}),i.jsxs("span",{className:"text-[10px] font-bold text-emerald-400",children:["Level ",t.metadata.newLevel]})]})]}),r&&i.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"w-2.5 h-2.5 rounded-full flex-shrink-0 mt-1",style:{background:"linear-gradient(135deg, #a855f7, #c084fc)",boxShadow:"0 0 10px rgba(168, 85, 247, 0.5)"}}),i.jsx(U.div,{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Ms,{size:16,className:"text-white/20"})})]})};function U3(t){const e=Date.now()-t.getTime(),n=Math.floor(e/6e4),r=Math.floor(e/36e5),s=Math.floor(e/864e5);return n<1?"Jetzt":n<60?`${n}m`:r<24?`${r}h`:s<7?`${s}d`:t.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}const Xte=()=>{const t=yt(),{user:e}=mr(),[n,r]=_.useState("all"),[s,a]=_.useState([]),[o,c]=_.useState([]),[u,h]=_.useState(!0),[m,g]=_.useState(null);_.useEffect(()=>{if(!(e!=null&&e.id))return;const A=it(Ve(J,"notifications"),$e("toUserId","==",e.id),Us("timestamp","desc"),Kr(50)),D=cr(A,F=>{const C=F.docs.map(T=>{var L;const P=T.data();return{id:T.id,type:P.type||"system",title:P.title||"",message:P.message||"",timestamp:((L=P.timestamp)==null?void 0:L.toDate())||new Date,isRead:P.isRead||!1,fromUserId:P.fromUserId,fromUsername:P.fromUsername,fromDisplayName:P.fromDisplayName,fromPhotoURL:P.fromPhotoURL,isFounder:P.fromUserId===aT,metadata:P.metadata}});c(C),h(!1)},F=>{console.error("Error fetching notifications:",F),h(!1)});return()=>D()},[e==null?void 0:e.id]),_.useEffect(()=>{if(!(e!=null&&e.id))return;const A=it(Ve(J,"friendRequests"),$e("toUserId","==",e.id),$e("status","==","pending"),Us("createdAt","desc")),D=cr(A,F=>{const C=F.docs.map(T=>{var L;const P=T.data();return{id:T.id,fromUserId:P.fromUserId,fromUsername:P.fromUsername||"unknown",fromDisplayName:P.fromDisplayName||"Unbekannt",fromPhotoURL:P.fromPhotoURL,fromLevel:P.fromLevel||1,message:P.message,createdAt:((L=P.createdAt)==null?void 0:L.toDate())||new Date,isFounder:P.fromUserId===aT}});a(C)},F=>{console.error("Error fetching friend requests:",F)});return()=>D()},[e==null?void 0:e.id]);const x=o.filter(A=>!A.isRead).length,v=s.length,E=async A=>{if(e!=null&&e.id){g(A.id);try{await Ge(ce(J,"friendRequests",A.id),{status:"accepted",acceptedAt:st.now()}),await gu(Ve(J,"friendships"),{users:[e.id,A.fromUserId],createdAt:st.now()}),await gu(Ve(J,"notifications"),{toUserId:A.fromUserId,type:"follow",title:"Freundschaft akzeptiert! ",message:`${e.displayName||e.username} hat deine Anfrage angenommen`,timestamp:st.now(),isRead:!1,fromUserId:e.id,fromUsername:e.username,fromDisplayName:e.displayName})}catch(D){console.error("Error accepting request:",D)}finally{g(null)}}},j=async A=>{g(A);try{await Ge(ce(J,"friendRequests",A),{status:"declined",declinedAt:st.now()})}catch(D){console.error("Error declining request:",D)}finally{g(null)}},S=async A=>{try{await Ge(ce(J,"notifications",A),{isRead:!0})}catch(D){console.error("Error marking as read:",D)}},N=async()=>{const A=o.filter(D=>!D.isRead);try{await Promise.all(A.map(D=>Ge(ce(J,"notifications",D.id),{isRead:!0})))}catch(D){console.error("Error marking all as read:",D)}},w=o.filter(A=>n==="all"?!0:n==="stars"?["star","aura"].includes(A.type):n==="social"?["follow","lounge","mention"].includes(A.type):n==="system"?["system","level_up","gift"].includes(A.type):!1),k=[{id:"all",label:"Alle",count:o.length,icon:Tl},{id:"requests",label:"Anfragen",count:v,icon:Dn},{id:"stars",label:"Sterne",count:o.filter(A=>A.type==="star").length,icon:jn},{id:"social",label:"Sozial",count:o.filter(A=>["follow","lounge"].includes(A.type)).length,icon:kt},{id:"system",label:"System",count:o.filter(A=>["system","level_up"].includes(A.type)).length,icon:zo}];return u?i.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(180deg, #050505 0%, #0a0a0a 100%)"},children:i.jsxs("div",{className:"text-center",children:[i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:i.jsx(Nn,{size:32,className:"text-violet-400 mx-auto mb-4"})}),i.jsx("p",{className:"text-white/40 text-sm",children:"Lade Benachrichtigungen..."})]})}):i.jsxs("div",{className:"min-h-screen safe-top safe-bottom pb-32",style:{background:"linear-gradient(180deg, #050505 0%, #0a0a0a 100%)"},children:[i.jsx("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 w-96 h-96 pointer-events-none z-0",children:i.jsx(U.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%)"},animate:{opacity:[.3,.5,.3],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0}})}),i.jsxs("div",{className:"sticky top-0 z-50",style:{background:"rgba(5, 5, 5, 0.92)",backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)",borderBottom:"1px solid rgba(255, 255, 255, 0.06)"},children:[i.jsxs("div",{className:"px-5 py-4 flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:i.jsx(gn,{size:20,className:"text-white/60"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Tl,{size:20,className:"text-violet-400"}),"Benachrichtigungen"]}),i.jsx("p",{className:"text-xs text-white/40",children:x>0?i.jsxs("span",{className:"text-violet-400",children:[x," ungelesen"]}):"Alles gelesen"})]}),x>0&&i.jsx(U.button,{whileTap:{scale:.95},onClick:N,className:"px-3 py-1.5 rounded-lg text-xs font-bold",style:{background:"rgba(139, 92, 246, 0.15)",color:"#a855f7",border:"1px solid rgba(139, 92, 246, 0.3)"},children:"Alle lesen"})]}),i.jsx("div",{className:"px-5 pb-3",children:i.jsx(U.div,{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1",initial:!1,children:k.map(A=>{const D=A.icon,F=n===A.id;return i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>r(A.id),className:"relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold whitespace-nowrap transition-all",style:{background:F?"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)":"rgba(255, 255, 255, 0.03)",color:F?"white":"rgba(255, 255, 255, 0.5)",border:F?"none":"1px solid rgba(255, 255, 255, 0.06)",boxShadow:F?"0 4px 20px rgba(139, 92, 246, 0.4)":"none"},children:[i.jsx(D,{size:14}),A.label,A.count>0&&i.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[9px] font-bold",style:{background:F?"rgba(255, 255, 255, 0.2)":"rgba(139, 92, 246, 0.2)",color:F?"white":"#a855f7"},children:A.count})]},A.id)})})})]}),i.jsx(qt,{mode:"popLayout",children:(n==="all"||n==="requests")&&s.length>0&&i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"px-5 py-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Dn,{size:18,className:"text-violet-400"}),i.jsx("h2",{className:"font-bold text-white",children:"Freundschaftsanfragen"}),i.jsx(U.span,{initial:{scale:0},animate:{scale:1},className:"px-2 py-0.5 text-xs font-bold rounded-full",style:{background:"rgba(239, 68, 68, 0.2)",color:"#f87171"},children:v})]}),i.jsx("div",{className:"space-y-4",children:i.jsx(qt,{mode:"popLayout",children:s.map(A=>i.jsx(Kte,{request:A,onAccept:()=>E(A),onDecline:()=>j(A.id),processing:m===A.id},A.id))})})]})}),n!=="requests"&&i.jsxs("div",{className:"px-5 py-4",children:[n==="all"&&s.length>0&&i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(fr,{size:18,className:"text-violet-400"}),i.jsx("h2",{className:"font-bold text-white",children:"Aktivitten"})]}),w.length===0?i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[i.jsx(U.div,{className:"w-20 h-20 rounded-3xl mx-auto mb-6 flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05))",border:"1px solid rgba(139, 92, 246, 0.2)"},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:i.jsx(Tl,{size:32,className:"text-violet-400/50"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Keine Benachrichtigungen"}),i.jsx("p",{className:"text-sm text-white/50",children:"Neue Aktivitten erscheinen hier"})]}):i.jsx(U.div,{className:"space-y-2",layout:!0,children:i.jsx(qt,{mode:"popLayout",children:w.map((A,D)=>i.jsx(Qte,{notification:A,onClick:()=>{A.isRead||S(A.id),A.fromUserId&&t(`/user/${A.fromUserId}`)},index:D},A.id))})})]}),n==="requests"&&s.length===0&&i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 px-5",children:[i.jsx(U.div,{className:"w-20 h-20 rounded-3xl mx-auto mb-6 flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(34, 211, 238, 0.05))",border:"1px solid rgba(34, 211, 238, 0.2)"},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:i.jsx(Dn,{size:32,className:"text-cyan-400/50"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Keine Anfragen"}),i.jsx("p",{className:"text-sm text-white/50",children:"Neue Freundschaftsanfragen erscheinen hier"})]})]})},Yte="MIbamchs82Ve7y0ecX2TpPyymbw1";async function Jte(t,e){if(t!==e)try{const n=new Date(Date.now()-36e5),r=it(Ve(J,"profileVisits"),$e("visitorId","==",t),$e("visitedUserId","==",e),$e("visitedAt",">=",st.fromDate(n)),Kr(1));if(!(await Ft(r)).empty)return;await gu(Ve(J,"profileVisits"),{visitorId:t,visitedUserId:e,visitedAt:st.now()}),console.log("[ProfileVisit] Recorded visit:",t,"->",e)}catch(n){console.error("[ProfileVisit] Error recording visit:",n)}}async function Zte(t,e){var s;const{lastHourOnly:n=!1,maxResults:r=20}=e||{};try{let a;if(n){const u=new Date(Date.now()-36e5);a=it(Ve(J,"profileVisits"),$e("visitedUserId","==",t),$e("visitedAt",">=",st.fromDate(u)),Us("visitedAt","desc"),Kr(r))}else a=it(Ve(J,"profileVisits"),$e("visitedUserId","==",t),Us("visitedAt","desc"),Kr(r));const o=await Ft(a),c=[];for(const u of o.docs){const h=u.data();let m;try{const g=await mt(ce(J,"users",h.visitorId));if(g.exists()){const x=g.data();m={username:x.username||"User",displayName:x.displayName,photoURL:x.photoURL,isFounder:h.visitorId===Yte}}}catch{}c.push({id:u.id,visitorId:h.visitorId,visitedUserId:h.visitedUserId,visitedAt:((s=h.visitedAt)==null?void 0:s.toDate())||new Date,visitorData:m})}return c}catch(a){return console.error("[ProfileVisit] Error fetching visitors:",a),[]}}function ene(){const t=yt(),{user:e}=Bs(),[n,r]=_.useState([]),[s,a]=_.useState(!0);_.useEffect(()=>{if(!(e!=null&&e.id))return;(async()=>{a(!0);try{const u=await Zte(e.id,{lastHourOnly:!0,maxResults:50});r(u)}catch(u){console.error("Error fetching visitors:",u),r([])}finally{a(!1)}})()},[e==null?void 0:e.id]);const o=c=>{const u=Date.now()-c.getTime(),h=Math.floor(u/6e4);return h<1?"Gerade eben":h<60?`Vor ${h} Min`:"Vor ber 1h"};return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(180deg, #050505 0%, #0a0a0a 100%)"},children:i.jsxs("div",{className:"text-center",children:[i.jsx(Nn,{size:32,className:"animate-spin text-violet-400 mx-auto mb-4"}),i.jsx("p",{className:"text-white/40 text-sm",children:"Lade Besucher..."})]})}):i.jsxs("div",{className:"min-h-screen safe-top safe-bottom pb-24",style:{background:"linear-gradient(180deg, #050505 0%, #0a0a0a 100%)"},children:[i.jsx("div",{className:"sticky top-0 z-50",style:{background:"rgba(5, 5, 5, 0.92)",backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)",borderBottom:"1px solid rgba(255, 255, 255, 0.06)"},children:i.jsxs("div",{className:"px-5 py-4 flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:i.jsx(gn,{size:20,className:"text-white/60"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Fs,{size:18,className:"text-violet-400"}),"Profilbesucher"]}),i.jsxs("p",{className:"text-[11px] text-white/40 flex items-center gap-1",children:[i.jsx(Fo,{size:10}),"Letzte Stunde"]})]}),i.jsx("div",{className:"px-3 py-1.5 rounded-full",style:{background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:i.jsx("span",{className:"text-xs font-bold text-violet-400",children:n.length})})]})}),i.jsx("div",{className:"px-5 py-4",children:n.length===0?i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[i.jsx(U.div,{className:"w-20 h-20 rounded-3xl mx-auto mb-6 flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05))",border:"1px solid rgba(139, 92, 246, 0.2)"},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:i.jsx(kt,{size:32,className:"text-violet-400/50"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Keine Besucher"}),i.jsx("p",{className:"text-sm text-white/50 max-w-[250px] mx-auto",children:"In der letzten Stunde hat niemand dein Profil besucht. Teile dein Profil um mehr Aufmerksamkeit zu bekommen!"})]}):i.jsx("div",{className:"space-y-3",children:i.jsx(qt,{mode:"popLayout",children:n.map((c,u)=>{var h,m,g,x,v,E,j,S;return i.jsxs(U.button,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{delay:u*.05},whileTap:{scale:.98},onClick:()=>t(`/user/${c.visitorId}`),className:"w-full flex items-center gap-4 p-4 rounded-2xl text-left transition-all",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01))",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden",style:{border:(h=c.visitorData)!=null&&h.isFounder?"2px solid #fbbf24":"2px solid rgba(139, 92, 246, 0.3)"},children:(m=c.visitorData)!=null&&m.photoURL?i.jsx("img",{src:c.visitorData.photoURL,alt:"",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:"rgba(139, 92, 246, 0.2)"},children:i.jsx("span",{className:"text-lg font-bold text-white/70",children:(((g=c.visitorData)==null?void 0:g.displayName)||((x=c.visitorData)==null?void 0:x.username)||"?")[0].toUpperCase()})})}),((v=c.visitorData)==null?void 0:v.isFounder)&&i.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.4)"},children:i.jsx(kn,{size:10,className:"text-black"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-white truncate flex items-center gap-2",children:((E=c.visitorData)==null?void 0:E.displayName)||((j=c.visitorData)==null?void 0:j.username)||"Unbekannter Besucher"}),i.jsxs("p",{className:"text-xs text-white/40",children:["@",((S=c.visitorData)==null?void 0:S.username)||"user"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-[10px] font-medium px-2 py-1 rounded-full",style:{background:"rgba(139, 92, 246, 0.1)",color:"rgba(139, 92, 246, 0.8)"},children:o(c.visitedAt)})})]},c.id)})})})})]})}function F3(){const{user:t}=mr(),[e,n]=_.useState([]),[r,s]=_.useState([]),[a,o]=_.useState(!0),c=_.useCallback(async()=>{var v;if(!(t!=null&&t.id)){n([]),o(!1);return}try{const E=Ve(J,"blocks"),j=it(E,$e("blockerId","==",t.id)),S=await Ft(j),N=[],w=[];for(const k of S.docs){const A=k.data();try{const D=await mt(ce(J,"users",A.blockedUserId));if(!D.exists()){w.push(k.id);continue}const F=D.data();N.push({id:k.id,blockerId:A.blockerId,blockedUserId:A.blockedUserId,username:(F==null?void 0:F.username)||"Gelschter Nutzer",displayName:F==null?void 0:F.displayName,avatar:F==null?void 0:F.avatar,avatarUrl:(F==null?void 0:F.avatarUrl)||(F==null?void 0:F.photoURL),blockedAt:((v=A.blockedAt)==null?void 0:v.toDate())||new Date,reason:A.reason,customReason:A.customReason})}catch{w.push(k.id)}}for(const k of w)try{await oa(ce(J,"blocks",k)),console.log("Cleaned up orphaned block entry:",k)}catch(A){console.error("Failed to clean up block entry:",A)}n(N)}catch(E){console.error("Error fetching blocked users:",E),n([])}finally{o(!1)}},[t==null?void 0:t.id]),u=_.useCallback(async()=>{if(t!=null&&t.id)try{const v=Ve(J,"blocks"),E=it(v,$e("blockedUserId","==",t.id)),S=(await Ft(E)).docs.map(N=>N.data().blockerId);s(S)}catch(v){console.error("Error fetching blocked by users:",v)}},[t==null?void 0:t.id]);_.useEffect(()=>{if(!(t!=null&&t.id)){n([]),s([]),o(!1);return}o(!0);const v=Ve(J,"blocks"),E=it(v,$e("blockerId","==",t.id)),j=cr(E,async S=>{var k;const N=[],w=[];for(const A of S.docs){const D=A.data();try{const F=await mt(ce(J,"users",D.blockedUserId));if(!F.exists()){w.push(A.id);continue}const C=F.data();N.push({id:A.id,blockerId:D.blockerId,blockedUserId:D.blockedUserId,username:(C==null?void 0:C.username)||"Gelschter Nutzer",displayName:C==null?void 0:C.displayName,avatar:C==null?void 0:C.avatar,avatarUrl:(C==null?void 0:C.avatarUrl)||(C==null?void 0:C.photoURL),blockedAt:((k=D.blockedAt)==null?void 0:k.toDate())||new Date,reason:D.reason,customReason:D.customReason})}catch{w.push(A.id)}}for(const A of w)try{await oa(ce(J,"blocks",A))}catch{}n(N),o(!1)},S=>{console.error("Error in blocked users listener:",S),n([]),o(!1)});return u(),()=>j()},[t==null?void 0:t.id,u]);const h=_.useCallback(async(v,E,j)=>{if(!(t!=null&&t.id)||v===t.id)return!1;try{return(await mt(ce(J,"users",v))).exists()?(e.find(w=>w.blockedUserId===v)||(await gu(Ve(J,"blocks"),{blockerId:t.id,blockedUserId:v,blockedAt:Ut(),reason:E||"personal",customReason:j||null}),"vibrate"in navigator&&navigator.vibrate([30,20,30])),!0):(console.error("Cannot block non-existent user"),!1)}catch(S){return console.error("Error blocking user:",S),!1}},[t==null?void 0:t.id,e]),m=_.useCallback(async v=>{if(!(t!=null&&t.id))return!1;try{const E=e.find(j=>j.blockedUserId===v);return E?(await oa(ce(J,"blocks",E.id)),"vibrate"in navigator&&navigator.vibrate(10),!0):!1}catch(E){return console.error("Error unblocking user:",E),!1}},[t==null?void 0:t.id,e]),g=_.useCallback(v=>e.some(E=>E.blockedUserId===v),[e]),x=_.useCallback(v=>r.includes(v),[r]);return{blockedUsers:e,isLoading:a,blockUser:h,unblockUser:m,isBlocked:g,isBlockedBy:x,refreshBlockedUsers:c}}const tne=[{id:"harassment",label:"Belstigung",icon:""},{id:"spam",label:"Spam / Werbung",icon:""},{id:"inappropriate",label:"Unangemessenes Verhalten",icon:""},{id:"personal",label:"Persnliche Grnde",icon:""},{id:"other",label:"Sonstiges",icon:""}],nne=({isOpen:t,onClose:e,userId:n,username:r,displayName:s,isCurrentlyBlocked:a})=>{const{blockUser:o,unblockUser:c}=F3(),[u,h]=_.useState("personal"),[m,g]=_.useState(""),[x,v]=_.useState(!1),[E,j]=_.useState(!1),S=async()=>{v(!0);const k=await o(n,u,u==="other"?m:void 0);v(!1),k&&(j(!0),setTimeout(()=>{e(),j(!1)},1500))},N=async()=>{v(!0);const k=await c(n);v(!1),k&&(j(!0),setTimeout(()=>{e(),j(!1)},1500))};if(!t)return null;const w=s||`@${r}`;return E?i.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 text-center animate-in zoom-in-95",children:[i.jsx("div",{className:`w-16 h-16 mx-auto rounded-full ${a?"bg-green-100":"bg-red-100"} flex items-center justify-center mb-4`,children:a?i.jsx(Gp,{size:28,className:"text-green-500"}):i.jsx(ft,{size:28,className:"text-red-500"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:a?"Entblockt!":"Blockiert!"}),i.jsx("p",{className:"text-gray-500 text-sm",children:a?`${w} kann dich jetzt wieder kontaktieren.`:`${w} kann dich nicht mehr kontaktieren.`})]})}):a?i.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 animate-in zoom-in-95",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nutzer entblocken"}),i.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:i.jsx(ln,{size:18,className:"text-gray-500"})})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(Gp,{size:28,className:"text-green-500"})}),i.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:w}),i.jsx("p",{className:"text-sm text-gray-500",children:"Nach dem Entblocken kann diese Person dich wieder kontaktieren und in Voice-Chats sehen."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-semibold",children:"Abbrechen"}),i.jsx("button",{onClick:N,disabled:x,className:"flex-1 py-3 bg-green-500 text-white rounded-xl font-semibold flex items-center justify-center gap-2",children:x?i.jsx(Nn,{size:18,className:"animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Gp,{size:18}),"Entblocken"]})})]})]})}):i.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 animate-in zoom-in-95 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nutzer blockieren"}),i.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:i.jsx(ln,{size:18,className:"text-gray-500"})})]}),i.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:[i.jsx("span",{className:"font-semibold text-gray-900",children:w})," wird dich nicht mehr kontaktieren knnen."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Grund (optional)"}),i.jsx("div",{className:"space-y-2",children:tne.map(k=>i.jsxs("button",{onClick:()=>h(k.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${u===k.id?"border-violet-500 bg-violet-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("span",{className:"text-lg",children:k.icon}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:k.label}),u===k.id&&i.jsx(ft,{size:16,className:"text-violet-500 ml-auto"})]},k.id))})]}),u==="other"&&i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"text",value:m,onChange:k=>g(k.target.value),placeholder:"Grund eingeben (optional)",maxLength:100,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-violet-500 focus:outline-none"})}),i.jsx("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-200 mb-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(wf,{size:16,className:"text-amber-500 flex-shrink-0 mt-0.5"}),i.jsx("p",{className:"text-xs text-amber-700",children:"Blockierte Personen erfahren nicht, dass sie blockiert wurden. Du kannst sie jederzeit wieder entblocken."})]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-semibold",children:"Abbrechen"}),i.jsx("button",{onClick:S,disabled:x,className:"flex-1 py-3 bg-red-500 text-white rounded-xl font-semibold flex items-center justify-center gap-2",children:x?i.jsx(Nn,{size:18,className:"animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(zs,{size:18}),"Blockieren"]})})]})]})})},rne=()=>{const{userId:t}=Ww(),e=yt(),{user:n}=mr(),{isBlocked:r,isBlockedBy:s}=F3(),[a,o]=_.useState(null),[c,u]=_.useState(!0),[h,m]=_.useState(!1),[g,x]=_.useState(!1),[v,E]=_.useState(!1),[j,S]=_.useState(!1),N=t?r(t):!1;t&&s(t),_.useEffect(()=>{(async()=>{var F;if(t)try{const C=await mt(ce(J,"users",t));if(C.exists()){const T=C.data();o({id:C.id,username:T.username||"unknown",displayName:T.displayName||"Unbekannt",bio:T.bio||"",avatar:T.avatar,avatarUrl:T.avatarUrl||T.photoURL,level:T.level||1,xp:T.xp||0,joinedAt:((F=T.createdAt)==null?void 0:F.toDate())||new Date,isVerified:T.isVerified||!1,isCreator:T.isCreator||!1,friendsCount:T.friendsCount||0,roomsJoined:T.roomsJoined||0,minutesTalked:T.minutesTalked||0,birthDay:T.birthDay,birthMonth:T.birthMonth,showBirthdateOnProfile:T.showBirthdateOnProfile!==!1,city:T.city}),n!=null&&n.id&&n.id!==t&&Jte(n.id,t)}}catch(C){console.error("Error fetching user:",C)}finally{u(!1)}})()},[t,n==null?void 0:n.id]),_.useEffect(()=>{(async()=>{if(!(!t||!(n!=null&&n.id)))try{const F=it(Ve(J,"friends"),$e("users","array-contains",n.id)),T=(await Ft(F)).docs.some(z=>z.data().users.includes(t));m(T);const P=it(Ve(J,"friendRequests"),$e("fromId","==",n.id),$e("toId","==",t),$e("status","==","pending")),L=await Ft(P);x(!L.empty)}catch(F){console.error("Error checking friendship:",F)}})()},[t,n==null?void 0:n.id]);const w=async()=>{if(!(!t||!(n!=null&&n.id)||v)){E(!0);try{await gu(Ve(J,"friendRequests"),{fromId:n.id,fromUsername:n.username,fromDisplayName:n.displayName,toId:t,toUsername:a==null?void 0:a.username,status:"pending",createdAt:st.now()}),x(!0)}catch(D){console.error("Error sending friend request:",D)}finally{E(!1)}}},k=()=>{e("/messages",{state:{openChat:t}})},A=D=>D.toLocaleDateString("de-DE",{month:"long",year:"numeric"});return c?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-synclulu-soft/50 to-white flex items-center justify-center",children:i.jsx(Nn,{size:32,className:"animate-spin text-synclulu-violet"})}):a?t===(n==null?void 0:n.id)?(e("/profile"),null):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-synclulu-soft/50 to-white safe-top pb-24",children:[i.jsx("div",{className:"px-6 pt-6",children:i.jsx("button",{onClick:()=>e(-1),className:"w-10 h-10 rounded-xl bg-white shadow-sm flex items-center justify-center mb-6",children:i.jsx(gn,{size:20,className:"text-synclulu-text"})})}),i.jsxs("div",{className:"px-6 text-center mb-6",children:[i.jsxs("div",{className:"relative inline-block mb-4",children:[i.jsx("div",{className:`w-28 h-28 rounded-full flex items-center justify-center text-4xl ${a.isCreator?"bg-gradient-to-br from-purple-500 to-pink-500 text-white":"bg-synclulu-violet/10"}`,children:a.avatar||""}),a.isVerified&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center border-4 border-white",children:i.jsx(ko,{size:16,className:"text-white"})}),a.isCreator&&i.jsx("div",{className:"absolute -top-1 -right-1 w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center border-4 border-white",children:i.jsx(jn,{size:14,className:"text-white"})})]}),i.jsx("h1",{className:"font-display text-2xl font-bold text-synclulu-text mb-1",children:a.displayName}),i.jsxs("p",{className:"text-synclulu-muted mb-2",children:["@",a.username]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-synclulu-violet/10 rounded-full mb-4",children:[i.jsx(GR,{size:16,className:"text-synclulu-violet"}),i.jsxs("span",{className:"font-semibold text-synclulu-violet",children:["Level ",a.level]})]}),a.bio&&i.jsx("p",{className:"text-sm text-synclulu-text max-w-xs mx-auto mb-4",children:a.bio}),a.showBirthdateOnProfile&&a.birthDay&&a.birthMonth&&i.jsxs("p",{className:"text-xs text-synclulu-muted flex items-center justify-center gap-2 mb-1",children:[i.jsx(GQ,{size:12}),i.jsxs("span",{children:[a.birthDay,". ",sne(a.birthMonth)]}),a.city&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx(_a,{size:12}),i.jsx("span",{children:a.city})]})]}),i.jsxs("p",{className:"text-xs text-synclulu-muted flex items-center justify-center gap-1",children:[i.jsx(i_,{size:12}),"Dabei seit ",A(a.joinedAt)]})]}),i.jsx("div",{className:"px-6 mb-6",children:i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm",children:[i.jsx(kt,{size:20,className:"mx-auto text-synclulu-violet mb-2"}),i.jsx("p",{className:"font-bold text-synclulu-text",children:a.friendsCount}),i.jsx("p",{className:"text-xs text-synclulu-muted",children:"Freunde"})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm",children:[i.jsx(li,{size:20,className:"mx-auto text-green-500 mb-2"}),i.jsx("p",{className:"font-bold text-synclulu-text",children:a.roomsJoined}),i.jsx("p",{className:"text-xs text-synclulu-muted",children:"Rume"})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm",children:[i.jsx(jn,{size:20,className:"mx-auto text-amber-500 mb-2"}),i.jsxs("p",{className:"font-bold text-synclulu-text",children:[Math.floor(a.minutesTalked/60),"h"]}),i.jsx("p",{className:"text-xs text-synclulu-muted",children:"Gesprochen"})]})]})}),i.jsxs("div",{className:"px-6 space-y-3",children:[h?i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:k,className:"flex-1 py-4 bg-synclulu-violet text-white rounded-2xl font-semibold flex items-center justify-center gap-2",children:[i.jsx(Nf,{size:20}),"Nachricht"]}),i.jsx("button",{className:"w-14 h-14 bg-gray-100 text-gray-500 rounded-2xl flex items-center justify-center",children:i.jsx(oX,{size:20})})]}):g?i.jsxs("button",{disabled:!0,className:"w-full py-4 bg-gray-100 text-gray-500 rounded-2xl font-semibold flex items-center justify-center gap-2",children:[i.jsx(ko,{size:20}),"Anfrage gesendet"]}):i.jsxs("button",{onClick:w,disabled:v,className:"w-full py-4 bg-synclulu-violet text-white rounded-2xl font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[v?i.jsx(Nn,{size:20,className:"animate-spin"}):i.jsx(Dn,{size:20}),"Freund hinzufgen"]}),i.jsx("button",{onClick:()=>S(!0),className:`w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2 text-sm ${N?"bg-green-100 text-green-600":"bg-red-50 text-red-500"}`,children:N?i.jsxs(i.Fragment,{children:[i.jsx(sX,{size:16}),"Entblocken"]}):i.jsxs(i.Fragment,{children:[i.jsx(zs,{size:16}),"Blockieren"]})}),i.jsxs("button",{className:"w-full py-3 bg-gray-100 text-gray-500 rounded-xl font-medium flex items-center justify-center gap-2 text-sm",children:[i.jsx(QQ,{size:16}),"Nutzer melden"]})]}),i.jsx(nne,{isOpen:j,onClose:()=>S(!1),userId:t||"",username:(a==null?void 0:a.username)||"",displayName:a==null?void 0:a.displayName,isCurrentlyBlocked:N})]}):i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-synclulu-soft/50 to-white safe-top pb-24",children:i.jsxs("div",{className:"px-6 pt-6",children:[i.jsx("button",{onClick:()=>e(-1),className:"w-10 h-10 rounded-xl bg-white shadow-sm flex items-center justify-center mb-6",children:i.jsx(gn,{size:20,className:"text-synclulu-text"})}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-28 h-28 mx-auto rounded-full bg-synclulu-violet/10 flex items-center justify-center mb-4",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h1",{className:"font-display text-xl font-bold text-synclulu-text mb-2",children:"synclulu Nutzer"}),i.jsx("p",{className:"text-sm text-synclulu-muted mb-6",children:"Profil wird geladen..."}),i.jsx("button",{onClick:w,disabled:v||g,className:"w-full max-w-xs mx-auto py-4 bg-synclulu-violet text-white rounded-2xl font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:v?i.jsx(Nn,{size:20,className:"animate-spin"}):g?i.jsxs(i.Fragment,{children:[i.jsx(ko,{size:20}),"Anfrage gesendet"]}):i.jsxs(i.Fragment,{children:[i.jsx(Dn,{size:20}),"Freund hinzufgen"]})})]})]})})},sne=t=>["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][t-1]||"",vt={MAX_RADIUS:5e3,MIN_RADIUS:100,DEFAULT_RADIUS:1e3,STEP_SIZE:50,HIGH_ACCURACY_THRESHOLD:500,UPDATE_INTERVAL_ACTIVE:3e4,UPDATE_INTERVAL_BACKGROUND:3e5,LOCATION_MAX_AGE:6e4,LOCATION_TIMEOUT:15e3,NEARBY_CACHE_TTL:3e4,LOCATION_EXPIRY:9e5,EARTH_RADIUS_METERS:6371e3},ine=(t,e,n,r)=>{const s=vt.EARTH_RADIUS_METERS,a=t*Math.PI/180,o=n*Math.PI/180,c=(n-t)*Math.PI/180,u=(r-e)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a)*Math.cos(o)*Math.sin(u/2)*Math.sin(u/2),m=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return s*m},ane=(t,e,n,r)=>{const s=t*Math.PI/180,a=n*Math.PI/180,o=(r-e)*Math.PI/180,c=Math.sin(o)*Math.cos(a),u=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(o);return(Math.atan2(c,u)*180/Math.PI+360)%360},one=(t,e=!1)=>{const n=t<=vt.HIGH_ACCURACY_THRESHOLD;return e?{enableHighAccuracy:!1,maximumAge:vt.LOCATION_MAX_AGE*5,timeout:vt.LOCATION_TIMEOUT*2}:n?{enableHighAccuracy:!0,maximumAge:1e4,timeout:vt.LOCATION_TIMEOUT}:{enableHighAccuracy:!1,maximumAge:vt.LOCATION_MAX_AGE,timeout:vt.LOCATION_TIMEOUT}},lne=async t=>{const e=Rt.currentUser;if(!e)return!1;try{return await hr(ce(J,"user_locations",e.uid),{userId:e.uid,geopoint:new $0(t.latitude,t.longitude),latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,updatedAt:Ut(),expiresAt:new Date(Date.now()+vt.LOCATION_EXPIRY),isActive:!0},{merge:!0}),!0}catch(n){return console.error("[PrecisionRadar] Failed to update location:",n),!1}},cne=async(t,e=vt.DEFAULT_RADIUS)=>{var s,a;const n=Rt.currentUser;if(!n)return[];const r=Math.min(e,vt.MAX_RADIUS);try{const o=r/vt.EARTH_RADIUS_METERS*(180/Math.PI),c=o/Math.cos(t.latitude*Math.PI/180),u=t.latitude-o,h=t.latitude+o,m=t.longitude-c,g=t.longitude+c,x=Ve(J,"user_locations"),v=it(x,$e("latitude",">=",u),$e("latitude","<=",h),$e("expiresAt",">",new Date)),E=await Ft(v),j=[];for(const S of E.docs){const N=S.data();if(N.userId===n.uid||N.longitude<m||N.longitude>g)continue;const w=ine(t.latitude,t.longitude,N.latitude,N.longitude);if(!(w<=r))continue;const A=await mt(ce(J,"users",N.userId));if(!A.exists())continue;const D=A.data(),F=ane(t.latitude,t.longitude,N.latitude,N.longitude),C=((a=(s=N.updatedAt)==null?void 0:s.toDate)==null?void 0:a.call(s))||new Date(0),T=Date.now()-C.getTime()<3e5;j.push({id:N.userId,username:D.username||"",displayName:D.displayName||D.username||"Anonym",avatarUrl:D.avatarUrl,avatar:D.avatar,distance:Math.round(w),bearing:Math.round(F),level:D.level||1,trustScore:D.trustScore||50,isPremium:D.isPremium||!1,isActive:T,lastSeen:C,isWithinRadius:!0})}return j.sort((S,N)=>S.distance-N.distance)}catch(o){return console.error("[PrecisionRadar] Failed to fetch nearby users:",o),[]}},une=async()=>{const t=Rt.currentUser;if(!t)return{radius:vt.DEFAULT_RADIUS,isEnabled:!0};try{const e=await mt(ce(J,"users",t.uid));if(!e.exists())return{radius:vt.DEFAULT_RADIUS,isEnabled:!0};const n=e.data();return{radius:Math.min(n.searchRadius||vt.DEFAULT_RADIUS,vt.MAX_RADIUS),isEnabled:n.friendRadarEnabled!==!1}}catch{return{radius:vt.DEFAULT_RADIUS,isEnabled:!0}}},oT=async(t,e)=>{const n=Rt.currentUser;if(!n)return!1;const r=Math.min(Math.max(t,vt.MIN_RADIUS),vt.MAX_RADIUS);try{return await hr(ce(J,"users",n.uid),{searchRadius:r,friendRadarEnabled:e},{merge:!0}),!0}catch{return!1}},dne=()=>{const{user:t}=mr(),[e,n]=_.useState(!0),[r,s]=_.useState(!0),[a,o]=_.useState(null),[c,u]=_.useState(null),[h,m]=_.useState(null),[g,x]=_.useState(vt.DEFAULT_RADIUS),[v,E]=_.useState([]),j=_.useRef(null),S=_.useRef(null),N=_.useRef(!1);_.useEffect(()=>{(async()=>{if(t!=null&&t.id){s(!0);try{const T=await une();if(x(T.radius),n(T.isEnabled),navigator.permissions){const P=await navigator.permissions.query({name:"geolocation"});u(P.state),P.addEventListener("change",()=>{u(P.state)})}}catch(T){console.error("[PrecisionRadar] Init failed:",T)}finally{s(!1)}}})()},[t==null?void 0:t.id]);const w=_.useCallback(()=>{if(!navigator.geolocation||!e)return;j.current!==null&&navigator.geolocation.clearWatch(j.current);const C=one(g,N.current);j.current=navigator.geolocation.watchPosition(async T=>{const P={latitude:T.coords.latitude,longitude:T.coords.longitude,accuracy:T.coords.accuracy,timestamp:new Date(T.timestamp)};m(P),o(null),u("granted"),await lne(P)},T=>{switch(T.code){case T.PERMISSION_DENIED:o("Standortzugriff verweigert"),u("denied");break;case T.POSITION_UNAVAILABLE:o("Standort nicht verfgbar");break;case T.TIMEOUT:o("Standortanfrage Timeout");break;default:o("Standortfehler")}},C)},[e,g]);_.useEffect(()=>(e&&c!=="denied"&&w(),()=>{j.current!==null&&(navigator.geolocation.clearWatch(j.current),j.current=null)}),[e,c,w]);const k=_.useCallback(async()=>{if(!h||!e){E([]);return}try{const C=await cne(h,g);E(C)}catch(C){console.error("[PrecisionRadar] Failed to fetch nearby:",C)}},[h,g,e]);_.useEffect(()=>{if(!h||!e)return;k();const C=N.current?vt.UPDATE_INTERVAL_BACKGROUND:vt.UPDATE_INTERVAL_ACTIVE;return S.current=setInterval(k,C),()=>{S.current&&(clearInterval(S.current),S.current=null)}},[h,e,k]),_.useEffect(()=>{const C=()=>{N.current=document.hidden,!document.hidden&&e&&w()};return document.addEventListener("visibilitychange",C),()=>{document.removeEventListener("visibilitychange",C)}},[e,w]);const A=_.useCallback(async C=>{const T=Math.min(Math.max(C,vt.MIN_RADIUS),vt.MAX_RADIUS);x(T),await oT(T,e),"vibrate"in navigator&&navigator.vibrate(10)},[e]),D=_.useCallback(async()=>{const C=!e;n(C),await oT(g,C),C||E([]),"vibrate"in navigator&&navigator.vibrate([10,50,20])},[e,g]),F=_.useCallback(async()=>navigator.geolocation?new Promise(C=>{navigator.geolocation.getCurrentPosition(()=>{u("granted"),o(null),C(!0)},T=>{T.code===T.PERMISSION_DENIED&&(u("denied"),o("Standortzugriff verweigert")),C(!1)},{enableHighAccuracy:!1,timeout:1e4})}):(o("Geolocation wird nicht untersttzt"),!1),[]);return{isEnabled:e,isLoading:r,error:a,permission:c,location:h,radius:g,nearbyUsers:v,nearbyCount:v.length,setRadius:A,toggleRadar:D,refreshNearby:k,requestPermission:F}},fl=({children:t,className:e="",onClick:n,glowColor:r})=>i.jsx("div",{onClick:n,className:`
      relative overflow-hidden rounded-2xl
      transition-all duration-300
      ${n?"cursor-pointer hover:scale-[1.01] active:scale-[0.99]":""}
      ${e}
    `,style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:r?`0 0 30px ${r}20`:"none"},children:t}),vi=({icon:t,iconColor:e,label:n,description:r,value:s,onClick:a,toggle:o,isOn:c,onToggle:u,danger:h,badge:m})=>i.jsxs("button",{onClick:()=>{o&&u?u(!c):a&&a(),"vibrate"in navigator&&navigator.vibrate(10)},className:"w-full p-4 flex items-center gap-4 transition-colors hover:bg-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:`${e}20`,border:`1px solid ${e}40`},children:i.jsx("span",{style:{color:e},children:t})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-sm font-semibold ${h?"text-red-400":"text-white"}`,children:n}),m&&i.jsx("span",{className:"px-2 py-0.5 text-[9px] font-black uppercase bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full",children:m})]}),r&&i.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:r})]}),o?i.jsx("div",{className:"w-12 h-7 rounded-full p-1 transition-colors",style:{background:c?"linear-gradient(135deg, #8b5cf6, #a855f7)":"rgba(255, 255, 255, 0.1)"},children:i.jsx("div",{className:"w-5 h-5 rounded-full bg-white transition-transform",style:{transform:c?"translateX(20px)":"translateX(0)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})}):s?i.jsx("span",{className:"text-xs text-white/50",children:s}):i.jsx(Ms,{size:18,className:"text-white/30"})]}),hne=({value:t,onChange:e,disabled:n})=>{const r=(t-vt.MIN_RADIUS)/(vt.MAX_RADIUS-vt.MIN_RADIUS)*100;return i.jsxs("div",{className:`px-4 py-3 ${n?"opacity-50":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-white/50",children:"Suchradius"}),i.jsx("span",{className:"text-xs font-bold text-violet-400",children:t>=1e3?`${(t/1e3).toFixed(1)}km`:`${t}m`})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${r}%`,background:"linear-gradient(90deg, #8b5cf6, #a855f7)"}})}),i.jsx("input",{type:"range",min:vt.MIN_RADIUS,max:vt.MAX_RADIUS,step:vt.STEP_SIZE,value:t,onChange:s=>e(Number(s.target.value)),disabled:n,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:"text-[10px] text-white/30",children:"100m"}),i.jsx("span",{className:"text-[10px] text-white/30",children:"5km MAX"})]})]})},fne=()=>{h_();const t=yt(),{user:e,setUser:n}=mr(),r=(e==null?void 0:e.avatarUrl)||(e==null?void 0:e.photoURL)||null,s=(e==null?void 0:e.bannerURL)||null,a=(e==null?void 0:e.bio)||"",o=(e==null?void 0:e.role)==="founder"||(e==null?void 0:e.isAdmin)===!0,{isEnabled:c,radius:u,setRadius:h,toggleRadar:m}=dne(),[g,x]=_.useState("everyone"),[v,E]=_.useState(!0),[j,S]=_.useState(!0),[N,w]=_.useState(""),[k,A]=_.useState(!1),D=o?"#fbbf24":"#a855f7";_.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const L=await mt(ce(J,"users",e.id));if(L.exists()){const z=L.data();x(z.visibility||"everyone"),E(z.notifications!==!1),S(z.soundEnabled!==!1),w(z.referralCode||`synclulu-${e.id.slice(0,6).toUpperCase()}`)}}catch(L){console.error("[SettingsHub] Load failed:",L)}})()},[e==null?void 0:e.id]);const F=async(P,L)=>{if(e!=null&&e.id)try{await Ge(ce(J,"users",e.id),{[P]:L})}catch(z){console.error("[SettingsHub] Save failed:",z)}},C=async()=>{try{await navigator.clipboard.writeText(`Hey! Komm zu synclulu  Nutze meinen Code: ${N}
https://synclulu.app/join/${N}`),A(!0),"vibrate"in navigator&&navigator.vibrate([10,50,10]),setTimeout(()=>A(!1),2e3)}catch(P){console.error("Copy failed:",P)}},T=async()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50]);try{await DC(Rt),t("/login")}catch(P){console.error("Logout failed:",P)}};return i.jsxs("div",{className:"min-h-screen pb-32",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-5 py-4",style:{background:"rgba(5, 5, 5, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.08)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(ni,{size:20,className:"text-white/60"})}),i.jsx("h1",{className:"text-xl font-bold text-white",children:"Einstellungen"})]})}),i.jsxs("div",{className:"px-5 py-6 space-y-4",children:[i.jsxs(fl,{glowColor:D,children:[i.jsxs("div",{className:"relative h-24 w-full overflow-hidden",children:[s?i.jsx("img",{src:s,alt:"Banner",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full",style:{background:"linear-gradient(135deg, #1a0a2e 0%, #16082a 50%, #0d0518 100%)"},children:i.jsx(U.div,{className:"absolute inset-0",style:{background:`radial-gradient(ellipse at 30% 50%, ${D}20 0%, transparent 60%)`},animate:{opacity:[.5,.8,.5]},transition:{duration:4,repeat:1/0}})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12",style:{background:"linear-gradient(to top, rgba(5, 5, 5, 0.9), transparent)"}})]}),i.jsxs("div",{className:"relative px-4 pb-4",children:[i.jsxs("div",{className:"relative -mt-10 flex items-end justify-between",children:[i.jsxs(U.button,{onClick:()=>t("/profile"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative",children:[i.jsx(U.div,{className:"absolute -inset-1 rounded-full",style:{background:`linear-gradient(135deg, ${D}, ${o?"#fde047":"#c084fc"})`},animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}}),i.jsx("div",{className:"relative w-16 h-16 rounded-full overflow-hidden",style:{border:"3px solid #050505"},children:r?i.jsx("img",{src:r,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${D}40, ${D}20)`},children:i.jsx("span",{className:"text-xl font-black text-white/80",children:((e==null?void 0:e.displayName)||"A").charAt(0).toUpperCase()})})}),o&&i.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.4)"},children:i.jsx(kn,{size:12,className:"text-black"})})]}),i.jsxs(U.button,{onClick:()=>t("/profile"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 px-4 py-2 rounded-xl",style:{background:`${D}20`,border:`1px solid ${D}40`},children:[i.jsx(XR,{size:14,style:{color:D}}),i.jsx("span",{className:"text-xs font-bold",style:{color:D},children:"Profil"})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:(e==null?void 0:e.displayName)||"Anonym"}),o&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold",style:{background:"rgba(251, 191, 36, 0.2)",color:"#fbbf24"},children:"FOUNDER"})]}),i.jsxs("p",{className:"text-sm text-white/40",children:["@",(e==null?void 0:e.username)||"username"]})]}),a&&i.jsx("p",{className:"mt-2 text-sm text-white/60 line-clamp-2",children:a})]})]}),i.jsx(fl,{glowColor:"#ec4899",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(236, 72, 153, 0.2)",border:"1px solid rgba(236, 72, 153, 0.4)"},children:i.jsx(Ci,{size:18,className:"text-pink-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm font-semibold text-white",children:"Einladungssystem"}),i.jsx("p",{className:"text-xs text-white/40",children:"Lade Freunde ein & erhalte Rewards"})]})]}),i.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1))",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:"Dein Code"}),i.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-violet-500/20 text-violet-400 rounded-full font-semibold",children:" +100 XP pro Einladung"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 rounded-xl px-4 py-3 font-mono text-lg font-bold text-violet-400 tracking-wider",style:{background:"rgba(0, 0, 0, 0.3)"},children:N}),i.jsx(U.button,{whileTap:{scale:.95},onClick:C,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-colors",style:{background:k?"rgba(34, 197, 94, 0.3)":"linear-gradient(135deg, #8b5cf6, #a855f7)",border:k?"1px solid rgba(34, 197, 94, 0.5)":"none"},children:k?i.jsx(ft,{size:20,className:"text-emerald-400"}):i.jsx(qR,{size:20,className:"text-white"})})]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>t("/invites"),className:"flex-1 py-3 rounded-xl text-sm font-bold text-white flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)"},children:[i.jsx(Dn,{size:16}),"Einladen"]}),i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>t("/referral-status"),className:"flex-1 py-3 rounded-xl text-sm font-semibold text-white/70 flex items-center justify-center gap-2",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(kt,{size:16}),"Status"]})]})]})}),i.jsx(fl,{children:i.jsxs("div",{className:"divide-y divide-white/5",children:[i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.4)"},children:g==="nobody"?i.jsx(ba,{size:18,className:"text-violet-400"}):i.jsx(Fs,{size:18,className:"text-violet-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm font-semibold text-white",children:"Sichtbarkeit"}),i.jsx("p",{className:"text-xs text-white/40",children:"Wer kann dich im Radar sehen?"})]})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"everyone",label:"Alle",icon:_f},{key:"friends",label:"Freunde",icon:kt},{key:"nobody",label:"Niemand",icon:ba}].map(P=>{const L=P.icon,z=g===P.key;return i.jsxs(U.button,{whileTap:{scale:.95},onClick:()=>{x(P.key),F("visibility",P.key),"vibrate"in navigator&&navigator.vibrate(10)},className:"flex-1 py-2.5 px-3 rounded-xl text-xs font-semibold flex items-center justify-center gap-2 transition-all",style:{background:z?"linear-gradient(135deg, #8b5cf6, #a855f7)":"rgba(255, 255, 255, 0.05)",border:z?"none":"1px solid rgba(255, 255, 255, 0.1)",color:z?"#fff":"rgba(255, 255, 255, 0.5)",boxShadow:z?"0 4px 15px rgba(139, 92, 246, 0.3)":"none"},children:[i.jsx(L,{size:14}),P.label]},P.key)})})]}),i.jsxs("div",{children:[i.jsx(vi,{icon:i.jsx(rX,{size:18}),iconColor:"#22d3ee",label:"Friend Radar",description:"Entdecke synclulu-User in deiner Nhe",toggle:!0,isOn:c,onToggle:m}),i.jsx(hne,{value:u,onChange:h,disabled:!c})]})]})}),i.jsx(fl,{children:i.jsxs("div",{className:"divide-y divide-white/5",children:[i.jsx(vi,{icon:i.jsx(Tl,{size:18}),iconColor:"#f43f5e",label:"Push-Benachrichtigungen",description:"Erhalte Updates zu Matches & Messages",toggle:!0,isOn:v,onToggle:P=>{E(P),F("notifications",P)}}),i.jsx(vi,{icon:i.jsx(ex,{size:18}),iconColor:"#22c55e",label:"Sound-Effekte",description:"Tne bei Aktionen & Benachrichtigungen",toggle:!0,isOn:j,onToggle:P=>{S(P),F("soundEnabled",P)}})]})}),i.jsx(fl,{children:i.jsxs("div",{className:"divide-y divide-white/5",children:[i.jsx(vi,{icon:i.jsx(zs,{size:18}),iconColor:"#3b82f6",label:"Account & Sicherheit",description:"Passwort, Email, Zwei-Faktor",onClick:()=>t("/settings/security")}),i.jsx(vi,{icon:i.jsx(Ir,{size:18}),iconColor:"#6b7280",label:"Blockierte Nutzer",description:"Verwalte blockierte Profile",onClick:()=>t("/settings/blocked")}),i.jsx(vi,{icon:i.jsx(JR,{size:18}),iconColor:"#a855f7",label:"Verknpfte Gerte",description:"Aktive Sessions verwalten",onClick:()=>t("/settings/devices")})]})}),i.jsx(fl,{children:i.jsxs("div",{className:"divide-y divide-white/5",children:[i.jsx(vi,{icon:i.jsx(pb,{size:18}),iconColor:"#14b8a6",label:"Hilfe & Support",description:"FAQ, Kontakt, Bug melden",onClick:()=>t("/help")}),i.jsx(vi,{icon:i.jsx(jn,{size:18}),iconColor:"#fbbf24",label:"App bewerten",description:"Hilf uns mit einer Bewertung",onClick:()=>window.open("https://apps.apple.com/app/synclulu","_blank")}),i.jsx(vi,{icon:i.jsx(l_,{size:18}),iconColor:"#6b7280",label:"Rechtliches",description:"Impressum, Datenschutz, AGB",onClick:()=>t("/legal")})]})}),i.jsx(fl,{children:i.jsx(vi,{icon:i.jsx(QR,{size:18}),iconColor:"#ef4444",label:"Abmelden",description:"Von diesem Gert abmelden",onClick:T,danger:!0})}),i.jsxs("div",{className:"text-center py-6",children:[i.jsx("p",{className:"text-xs text-white/30",children:"synclulu v1.5.0  Made with  in Germany"}),i.jsx("p",{className:"text-[10px] text-white/20 mt-1",children:"Build 2026.02.05"})]})]})]})},Ot={dark:{bg:{primary:"#0A0A0B",secondary:"#111113",tertiary:"#18181B",elevated:"#1F1F23"},border:{default:"rgba(255, 255, 255, 0.10)"},text:{primary:"#FAFAFA",secondary:"#A1A1AA"}},light:{bg:{primary:"#FFFFFF",secondary:"#FAFAFA",tertiary:"#F4F4F5",elevated:"#FFFFFF"},border:{default:"rgba(0, 0, 0, 0.08)"},text:{primary:"#09090B",secondary:"#52525B"}}};FR()(BR(t=>({isDark:!0,setDark:e=>{t({isDark:e}),lT(e)},toggle:()=>t(e=>{const n=!e.isDark;return lT(n),{isDark:n}})}),{name:"synclulu-theme"}));const lT=t=>{const e=document.documentElement;t?(e.classList.add("dark"),e.style.setProperty("--bg-primary",Ot.dark.bg.primary),e.style.setProperty("--bg-secondary",Ot.dark.bg.secondary),e.style.setProperty("--bg-tertiary",Ot.dark.bg.tertiary),e.style.setProperty("--bg-elevated",Ot.dark.bg.elevated),e.style.setProperty("--text-primary",Ot.dark.text.primary),e.style.setProperty("--text-secondary",Ot.dark.text.secondary),e.style.setProperty("--border-default",Ot.dark.border.default)):(e.classList.remove("dark"),e.style.setProperty("--bg-primary",Ot.light.bg.primary),e.style.setProperty("--bg-secondary",Ot.light.bg.secondary),e.style.setProperty("--bg-tertiary",Ot.light.bg.tertiary),e.style.setProperty("--bg-elevated",Ot.light.bg.elevated),e.style.setProperty("--text-primary",Ot.light.text.primary),e.style.setProperty("--text-secondary",Ot.light.text.secondary),e.style.setProperty("--border-default",Ot.light.border.default))},mne=({type:t,size:e=24,className:n=""})=>{const s={mobile:JR,tablet:iX,desktop:ZQ,unknown:UE}[t]||UE;return i.jsx(s,{size:e,className:n})},pne=({device:t,onRevoke:e,isRevoking:n})=>{const[r,s]=_.useState(!1),a=o=>{const u=new Date().getTime()-o.getTime(),h=Math.floor(u/6e4),m=Math.floor(h/60),g=Math.floor(m/24);return h<1?"Gerade aktiv":h<60?`Vor ${h} Min`:m<24?`Vor ${m} Std`:g<7?`Vor ${g} Tagen`:o.toLocaleDateString("de-DE")};return i.jsxs("div",{className:`
        relative rounded-2xl p-4 transition-all
        ${t.isCurrent?"bg-purple-500/10 border-2 border-purple-500/30":"bg-white/5 border border-white/10 hover:border-white/20"}
      `,children:[t.isCurrent&&i.jsx("div",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-purple-500 rounded-full",children:i.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Dieses Gert"})}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`
          w-12 h-12 rounded-xl flex items-center justify-center
          ${t.isCurrent?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-400"}
        `,children:i.jsx(mne,{type:t.deviceType,size:24})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold text-white truncate",children:t.deviceName}),t.isCurrent&&i.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),i.jsxs("p",{className:"text-sm text-gray-400 truncate",children:[t.browser,"  ",t.os]}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fo,{size:12}),a(t.lastActive)]}),t.location&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(_a,{size:12}),t.location]})]})]}),!t.isCurrent&&i.jsx("div",{children:r?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{e(),s(!1)},disabled:n,className:"w-8 h-8 rounded-lg bg-red-500/20 text-red-400 flex items-center justify-center hover:bg-red-500/30 transition-colors",children:n?i.jsx("div",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):i.jsx(ft,{size:16})}),i.jsx("button",{onClick:()=>s(!1),className:"w-8 h-8 rounded-lg bg-white/10 text-gray-400 flex items-center justify-center hover:bg-white/20 transition-colors",children:i.jsx(ln,{size:16})})]}):i.jsx("button",{onClick:()=>s(!0),className:"w-8 h-8 rounded-lg bg-white/5 text-gray-400 flex items-center justify-center hover:bg-red-500/20 hover:text-red-400 transition-colors",children:i.jsx(QR,{size:16})})})]})]})},gne=()=>{const t=yt(),{user:e}=mr(),[n,r]=_.useState([]),[s,a]=_.useState(!0),[o,c]=_.useState(null),[u,h]=_.useState(!1),m=()=>sessionStorage.getItem("synclulu_session_id")||"unknown",g=()=>{const j=navigator.userAgent;let S="desktop";/tablet|ipad/i.test(j)?S="tablet":/mobile|android|iphone/i.test(j)&&(S="mobile");let N="Unbekannt";j.includes("Chrome")?N="Chrome":j.includes("Safari")?N="Safari":j.includes("Firefox")?N="Firefox":j.includes("Edge")&&(N="Edge");let w="Unbekannt";j.includes("Mac")?w="macOS":j.includes("Windows")?w="Windows":j.includes("iPhone")||j.includes("iPad")?w="iOS":j.includes("Android")?w="Android":j.includes("Linux")&&(w="Linux");const k=S==="mobile"?`${w} Smartphone`:S==="tablet"?`${w} Tablet`:`${N} auf ${w}`;return{deviceType:S,deviceName:k,browser:N,os:w}};_.useEffect(()=>{(async()=>{if(e!=null&&e.id){a(!0);try{const S=it(Ve(J,"user_sessions"),$e("userId","==",e.id)),N=await Ft(S),w=m(),k=N.docs.map(A=>{var F,C;const D=A.data();return{id:A.id,deviceType:D.deviceType||"unknown",deviceName:D.deviceName||"Unbekanntes Gert",browser:D.browser||"Unbekannt",os:D.os||"Unbekannt",location:D.location,ipAddress:D.ipAddress,lastActive:((F=D.lastActive)==null?void 0:F.toDate())||new Date,createdAt:((C=D.createdAt)==null?void 0:C.toDate())||new Date,isCurrent:A.id===w}});if(k.sort((A,D)=>A.isCurrent?-1:D.isCurrent?1:D.lastActive.getTime()-A.lastActive.getTime()),k.length===0){const A=g();k.push({id:"current",...A,lastActive:new Date,createdAt:new Date,isCurrent:!0})}r(k)}catch(S){console.error("[DevicesSettings] Load error:",S)}finally{a(!1)}}})()},[e==null?void 0:e.id]);const x=async j=>{c(j);try{await oa(ce(J,"user_sessions",j)),r(S=>S.filter(N=>N.id!==j)),"vibrate"in navigator&&navigator.vibrate(20)}catch(S){console.error("[DevicesSettings] Revoke error:",S)}finally{c(null)}},v=async()=>{m();const j=n.filter(S=>!S.isCurrent);for(const S of j)try{await oa(ce(J,"user_sessions",S.id))}catch(N){console.error("[DevicesSettings] Revoke error:",N)}r(S=>S.filter(N=>N.isCurrent)),h(!1),"vibrate"in navigator&&navigator.vibrate([20,50,20])},E=n.filter(j=>!j.isCurrent).length;return i.jsxs("div",{className:"min-h-screen",style:{background:Ot.dark.bg.primary},children:[i.jsx("div",{className:"sticky top-0 z-50 px-4 pt-6 pb-4 bg-gradient-to-b from-[#0A0A0B] to-transparent backdrop-blur-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(ni,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-white",children:"Verknpfte Gerte"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," ",n.length===1?"Gert":"Gerte"," aktiv"]})]})]})}),i.jsxs("div",{className:"px-4 pb-32 space-y-6",children:[i.jsxs("div",{className:"rounded-2xl p-4 border flex items-start gap-4",style:{background:Ot.dark.bg.secondary,borderColor:Ot.dark.border.default},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center flex-shrink-0",children:i.jsx(zs,{size:20,className:"text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Sicherheitsbersicht"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Hier siehst du alle Gerte, auf denen dein synclulu-Account aktiv ist. Entferne unbekannte Gerte sofort."})]})]}),s?i.jsx("div",{className:"flex items-center justify-center py-16",children:i.jsx("div",{className:"w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:n.map(j=>i.jsx(pne,{device:j,onRevoke:()=>x(j.id),isRevoking:o===j.id},j.id))}),E>0&&i.jsx("div",{className:"pt-4",children:u?i.jsxs("div",{className:"rounded-2xl p-4 border",style:{background:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx(wf,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Alle anderen Gerte abmelden?"}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Du wirst auf ",E," anderen"," ",E===1?"Gert":"Gerten"," abgemeldet."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:v,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 transition-colors",children:"Ja, alle abmelden"}),i.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 rounded-xl bg-white/10 text-white font-semibold hover:bg-white/20 transition-colors",children:"Abbrechen"})]})]}):i.jsxs("button",{onClick:()=>h(!0),className:"w-full py-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 font-semibold flex items-center justify-center gap-2 hover:bg-red-500/20 transition-colors",children:[i.jsx(u_,{size:18}),"Alle anderen Gerte abmelden"]})})]})]})]})};function xne(){const t=yt(),[e,n]=_.useState(null),r=[{id:"1",question:"Wie starte ich ein Wlkchen?",answer:"Gehe zur Discover-Seite und tippe auf das Plus-Symbol. Gib deinem Wlkchen einen Namen und whle, ob es ffentlich oder anonym sein soll. Dein Wlkchen erscheint dann fr andere Nutzer in deiner Nhe.",icon:i.jsx(Xh,{size:18}),color:"#ec4899"},{id:"2",question:"Wie steige ich im Level auf?",answer:"Du sammelst XP durch verschiedene Aktivitten: Tgliches Einloggen, Zeit in Voice-Rooms verbringen, und Freunde einladen. Je mehr XP du sammelst, desto hher steigt dein Level automatisch.",icon:i.jsx(zo,{size:18}),color:"#f59e0b"},{id:"3",question:"Was ist der Battle Pass?",answer:"Der Battle Pass ist unser kommendes Belohnungssystem - Coming Summer 2026! Sammle jetzt schon XP durch Einladungen, um dir Vorab-Boni zu sichern. Im Battle Pass warten exklusive Rewards auf dich.",icon:i.jsx(Co,{size:18}),color:"#a855f7"},{id:"4",question:"Wie lade ich Freunde ein?",answer:'Gehe zu den Einstellungen und tippe auf "Freunde einladen". Du erhltst einen persnlichen Einladungslink, den du teilen kannst. Fr jeden Freund der beitritt, bekommst du 100 XP!',icon:i.jsx(Dn,{size:18}),color:"#22c55e"},{id:"5",question:"Ist mein Standort sicher?",answer:"Ja! Deine genaue Position wird niemals geteilt. Wir zeigen anderen nur einen ungefhren Bereich an. Du kannst den Radius in den Einstellungen anpassen oder den Ghost-Mode aktivieren.",icon:i.jsx(zs,{size:18}),color:"#10b981"}];return i.jsxs("div",{className:"min-h-screen pb-32",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-5 py-4",style:{background:"rgba(5, 5, 5, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-white/60"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(pb,{size:20,className:"text-purple-400"}),"Hilfe"]}),i.jsx("p",{className:"text-xs text-white/40",children:"FAQ & Support"})]})]})}),i.jsxs("div",{className:"px-5 py-6",children:[i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 rounded-2xl mb-6 text-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 0 20px rgba(168, 85, 247, 0.1)"},children:[i.jsx(U.div,{initial:{scale:.8},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(168, 85, 247, 0.1))",border:"1px solid rgba(168, 85, 247, 0.3)",boxShadow:"0 0 20px rgba(168, 85, 247, 0.3)"},children:i.jsx(pb,{size:32,className:"text-purple-400"})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Hufige Fragen"}),i.jsx("p",{className:"text-sm text-white/40",children:"Alles was du wissen musst"})]}),i.jsx("div",{className:"space-y-3 mb-8",children:r.map((s,a)=>i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"rounded-2xl overflow-hidden",style:{background:e===s.id?"rgba(168, 85, 247, 0.1)":"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:e===s.id?"1px solid rgba(168, 85, 247, 0.3)":"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>n(e===s.id?null:s.id),className:"w-full p-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${s.color}20`,color:s.color},children:s.icon}),i.jsx("span",{className:"flex-1 text-left text-sm font-semibold text-white",children:s.question}),i.jsx(U.div,{animate:{rotate:e===s.id?180:0},transition:{duration:.2},children:i.jsx(o_,{size:18,className:"text-white/40"})})]}),i.jsx(qt,{children:e===s.id&&i.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:i.jsx("div",{className:"px-4 pb-4",children:i.jsx("div",{className:"p-4 rounded-xl text-sm text-white/70 leading-relaxed",style:{background:"rgba(0, 0, 0, 0.3)"},children:s.answer})})})})]},s.id))}),i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"p-5 rounded-2xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(168, 85, 247, 0.2)",border:"1px solid rgba(168, 85, 247, 0.3)"},children:i.jsx(Nf,{size:18,className:"text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-white",children:"Noch Fragen?"}),i.jsx("p",{className:"text-xs text-white/40",children:"Wir helfen dir gerne"})]})]}),i.jsxs(U.a,{href:"mailto:support@synclulu.app",whileTap:{scale:.98},className:"w-full py-3 px-4 rounded-xl flex items-center justify-center gap-2 font-medium text-sm text-white",style:{background:"rgba(168, 85, 247, 0.2)",border:"1px solid rgba(168, 85, 247, 0.3)",boxShadow:"0 0 20px rgba(168, 85, 247, 0.2)"},children:[i.jsx(wa,{size:16,className:"text-purple-400"}),"support@synclulu.app",i.jsx(mb,{size:14,className:"text-purple-400/50"})]})]})]})]})}const yne={golden:{gradient:"from-amber-300 via-yellow-400 to-orange-400",shimmer:"from-transparent via-white/40 to-transparent",glow:"shadow-amber-500/50",accent:"text-amber-900",badge:" Golden Ticket",border:"border-amber-400/50"},platinum:{gradient:"from-slate-200 via-gray-100 to-slate-300",shimmer:"from-transparent via-white/60 to-transparent",glow:"shadow-slate-400/50",accent:"text-slate-700",badge:" Platinum Pass",border:"border-slate-300/50"},diamond:{gradient:"from-violet-400 via-purple-300 to-fuchsia-400",shimmer:"from-transparent via-white/50 to-transparent",glow:"shadow-purple-500/50",accent:"text-purple-900",badge:" Diamond Elite",border:"border-purple-400/50"}},vne=({mousePosition:t,isHovered:e})=>i.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-3xl",style:{opacity:e?1:0,transition:"opacity 0.3s ease"},children:[i.jsx("div",{className:"absolute w-[200%] h-[200%] opacity-30",style:{background:`
          radial-gradient(
            circle at ${t.x}% ${t.y}%,
            rgba(255, 0, 128, 0.3) 0%,
            rgba(128, 0, 255, 0.2) 25%,
            rgba(0, 128, 255, 0.2) 50%,
            rgba(0, 255, 128, 0.1) 75%,
            transparent 100%
          )
        `,transform:"translate(-25%, -25%)",transition:"all 0.1s ease-out"}}),i.jsx("div",{className:"absolute inset-0",style:{background:"repeating-linear-gradient(0deg, transparent 0px, rgba(255,255,255,0.03) 1px, transparent 2px)"}})]}),bne=({isActive:t})=>t?i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-3xl",children:[...Array(6)].map((e,n)=>i.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-float",style:{left:`${15+n*15}%`,top:`${20+n%3*25}%`,animationDelay:`${n*.3}s`,animationDuration:`${2+n*.5}s`}},n))}):null,wne=({code:t,remainingInvites:e,totalInvites:n,rewardDays:r,onShare:s,onCopy:a,onShowQR:o,variant:c="golden",isAnimated:u=!0})=>{const[h,m]=_.useState(!1),[g,x]=_.useState({x:50,y:50}),[v,E]=_.useState(!1),[j,S]=_.useState(!1),N=_.useRef(null),w=yne[c];_.useEffect(()=>{const C=setTimeout(()=>S(!0),100);return()=>clearTimeout(C)},[]);const k=_.useCallback(C=>{if(!N.current)return;const T=N.current.getBoundingClientRect(),P=(C.clientX-T.left)/T.width*100,L=(C.clientY-T.top)/T.height*100;x({x:P,y:L})},[]),A=async()=>{try{const C=` Du wurdest zu synclulu eingeladen!

 Dein VIP-Code: ${t}

 https://synclulu.app/join/${t}`;await navigator.clipboard.writeText(C),E(!0),"vibrate"in navigator&&navigator.vibrate([15,50,15]),a==null||a(),setTimeout(()=>E(!1),2e3)}catch(C){console.error("Copy failed:",C)}},D=async()=>{if("vibrate"in navigator&&navigator.vibrate([10,30,10,30,10]),navigator.share)try{await navigator.share({title:"synclulu Einladung ",text:`Hey! Ich lade dich zu synclulu ein. Nutze meinen Code: ${t}`,url:`https://synclulu.app/join/${t}`}),s==null||s()}catch{A()}else A()},F=e/n*100;return i.jsxs("div",{ref:N,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onMouseMove:k,className:`
        relative overflow-hidden rounded-3xl
        transform transition-all duration-500 ease-out
        ${j?"scale-100 opacity-100":"scale-95 opacity-0"}
        ${h?"scale-[1.02]":"scale-100"}
      `,style:{transformStyle:"preserve-3d",perspective:"1000px"},children:[i.jsx("div",{className:`
          absolute inset-0 bg-gradient-to-br ${w.gradient}
          shadow-2xl ${w.glow}
        `}),i.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),i.jsx(vne,{mousePosition:g,isHovered:h}),i.jsx(bne,{isActive:u&&h}),u&&i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${w.shimmer} -translate-x-full animate-shimmer`}),i.jsxs("div",{className:"relative p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fr,{size:18,className:w.accent}),i.jsx("span",{className:`text-sm font-bold ${w.accent}`,children:w.badge})]}),i.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full bg-black/10 ${w.accent}`,children:[i.jsx(Ci,{size:14}),i.jsxs("span",{className:"text-xs font-semibold",children:["+",r," Tage Premium"]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"text-xs text-black/50 mb-2 uppercase tracking-wider",children:"Dein Einladungscode"}),i.jsxs("div",{className:`
              relative bg-white/30 backdrop-blur-sm rounded-2xl p-4
              border ${w.border}
            `,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-mono text-2xl font-black tracking-widest text-black/80",children:t}),i.jsx("button",{onClick:A,className:`
                  w-10 h-10 rounded-xl flex items-center justify-center
                  transition-all duration-300
                  ${v?"bg-green-500 text-white scale-110":"bg-black/10 text-black/60 hover:bg-black/20 hover:scale-105"}
                `,children:v?i.jsx(ft,{size:18}):i.jsx(qR,{size:18})})]}),i.jsx("div",{className:"absolute top-2 right-2 opacity-20",children:i.jsx(jn,{size:12})}),i.jsx("div",{className:"absolute bottom-2 left-2 opacity-20",children:i.jsx(jn,{size:12})})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-xs ${w.accent} opacity-70`,children:"Verbleibende Einladungen"}),i.jsxs("span",{className:`text-sm font-bold ${w.accent}`,children:[e," / ",n]})]}),i.jsx("div",{className:"h-2 bg-black/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-black/30 rounded-full transition-all duration-500",style:{width:`${F}%`}})})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:D,className:`
              flex-1 py-3.5 px-4 rounded-2xl font-bold text-sm
              bg-black/80 text-white
              flex items-center justify-center gap-2
              hover:bg-black hover:scale-[1.02]
              active:scale-[0.98]
              transition-all duration-200
              shadow-lg shadow-black/20
            `,children:[i.jsx(c_,{size:18}),"Teilen"]}),i.jsx("button",{onClick:o,className:`
              w-14 h-14 rounded-2xl
              bg-white/30 backdrop-blur-sm border ${w.border}
              flex items-center justify-center
              hover:bg-white/50 hover:scale-[1.02]
              active:scale-[0.98]
              transition-all duration-200
            `,children:i.jsx(nX,{size:22,className:w.accent})})]})]}),i.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 flex items-center justify-center opacity-30",children:i.jsx(kn,{size:20,className:w.accent})}),i.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 flex items-center justify-center opacity-30",children:i.jsx(XQ,{size:20,className:w.accent})}),i.jsx("style",{children:`
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(200%); }
        }
        .animate-shimmer {
          animation: shimmer 3s ease-in-out infinite;
        }
        @keyframes float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 0.6;
          }
          50% {
            transform: translateY(-20px) scale(1.2);
            opacity: 1;
          }
        }
        .animate-float {
          animation: float 3s ease-in-out infinite;
        }
      `})]})};var If={},_ne=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},z3={},ms={};let H_;const Nne=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ms.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ms.getSymbolTotalCodewords=function(e){return Nne[e]};ms.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};ms.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');H_=e};ms.isKanjiModeEnabled=function(){return typeof H_<"u"};ms.toSJIS=function(e){return H_(e)};var ix={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(ix);function B3(){this.buffer=[],this.length=0}B3.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var kne=B3;function Cf(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Cf.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};Cf.prototype.get=function(t,e){return this.data[t*this.size+e]};Cf.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Cf.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var jne=Cf,$3={};(function(t){const e=ms.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*s-2))*2,c=[a-7];for(let u=1;u<s-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},t.getPositions=function(r){const s=[],a=t.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||s.push([a[c],a[u]]);return s}})($3);var W3={};const Ene=ms.getSymbolSize,cT=7;W3.getPositions=function(e){const n=Ene(e);return[[0,0],[n-cT,0],[0,n-cT]]};var H3={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const a=s.size;let o=0,c=0,u=0,h=null,m=null;for(let g=0;g<a;g++){c=u=0,h=m=null;for(let x=0;x<a;x++){let v=s.get(g,x);v===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=v,c=1),v=s.get(x,g),v===m?u++:(u>=5&&(o+=e.N1+(u-5)),m=v,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},t.getPenaltyN2=function(s){const a=s.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const h=s.get(c,u)+s.get(c,u+1)+s.get(c+1,u)+s.get(c+1,u+1);(h===4||h===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const a=s.size;let o=0,c=0,u=0;for(let h=0;h<a;h++){c=u=0;for(let m=0;m<a;m++)c=c<<1&2047|s.get(h,m),m>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|s.get(m,h),m>=10&&(u===1488||u===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let a=0;const o=s.data.length;for(let u=0;u<o;u++)a+=s.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function n(r,s,a){switch(r){case t.Patterns.PATTERN000:return(s+a)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(s+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return s*a%2+s*a%3===0;case t.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case t.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,n(s,u,c))},t.getBestMask=function(s,a){const o=Object.keys(t.Patterns).length;let c=0,u=1/0;for(let h=0;h<o;h++){a(h),t.applyMask(h,s);const m=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(h,s),m<u&&(u=m,c=h)}return c}})(H3);var ax={};const uo=ix,xp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],yp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ax.getBlocksCount=function(e,n){switch(n){case uo.L:return xp[(e-1)*4+0];case uo.M:return xp[(e-1)*4+1];case uo.Q:return xp[(e-1)*4+2];case uo.H:return xp[(e-1)*4+3];default:return}};ax.getTotalCodewordsCount=function(e,n){switch(n){case uo.L:return yp[(e-1)*4+0];case uo.M:return yp[(e-1)*4+1];case uo.Q:return yp[(e-1)*4+2];case uo.H:return yp[(e-1)*4+3];default:return}};var G3={},ox={};const ph=new Uint8Array(512),Kg=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)ph[n]=e,Kg[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)ph[n]=ph[n-255]})();ox.log=function(e){if(e<1)throw new Error("log("+e+")");return Kg[e]};ox.exp=function(e){return ph[e]};ox.mul=function(e,n){return e===0||n===0?0:ph[Kg[e]+Kg[n]]};(function(t){const e=ox;t.mul=function(r,s){const a=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<s.length;c++)a[o+c]^=e.mul(r[o],s[c]);return a},t.mod=function(r,s){let a=new Uint8Array(r);for(;a.length-s.length>=0;){const o=a[0];for(let u=0;u<s.length;u++)a[u]^=e.mul(s[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let a=0;a<r;a++)s=t.mul(s,new Uint8Array([1,e.exp(a)]));return s}})(G3);const q3=G3;function G_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}G_.prototype.initialize=function(e){this.degree=e,this.genPoly=q3.generateECPolynomial(this.degree)};G_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=q3.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(r,s),a}return r};var Sne=G_,K3={},$o={},q_={};q_.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Di={};const Q3="[0-9]+",Tne="[A-Z $%*+\\-./:]+";let nf="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";nf=nf.replace(/u/g,"\\u");const Ane="(?:(?![A-Z0-9 $%*+\\-./:]|"+nf+`)(?:.|[\r
]))+`;Di.KANJI=new RegExp(nf,"g");Di.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Di.BYTE=new RegExp(Ane,"g");Di.NUMERIC=new RegExp(Q3,"g");Di.ALPHANUMERIC=new RegExp(Tne,"g");const Ine=new RegExp("^"+nf+"$"),Cne=new RegExp("^"+Q3+"$"),Rne=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Di.testKanji=function(e){return Ine.test(e)};Di.testNumeric=function(e){return Cne.test(e)};Di.testAlphanumeric=function(e){return Rne.test(e)};(function(t){const e=q_,n=Di;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return n.testNumeric(a)?t.NUMERIC:n.testAlphanumeric(a)?t.ALPHANUMERIC:n.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(a,o){if(t.isValid(a))return a;try{return r(a)}catch{return o}}})($o);(function(t){const e=ms,n=ax,r=ix,s=$o,a=q_,o=7973,c=e.getBCHDigit(o);function u(x,v,E){for(let j=1;j<=40;j++)if(v<=t.getCapacity(j,E,x))return j}function h(x,v){return s.getCharCountIndicator(x,v)+4}function m(x,v){let E=0;return x.forEach(function(j){const S=h(j.mode,v);E+=S+j.getBitsLength()}),E}function g(x,v){for(let E=1;E<=40;E++)if(m(x,E)<=t.getCapacity(E,v,s.MIXED))return E}t.from=function(v,E){return a.isValid(v)?parseInt(v,10):E},t.getCapacity=function(v,E,j){if(!a.isValid(v))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=s.BYTE);const S=e.getSymbolTotalCodewords(v),N=n.getTotalCodewordsCount(v,E),w=(S-N)*8;if(j===s.MIXED)return w;const k=w-h(j,v);switch(j){case s.NUMERIC:return Math.floor(k/10*3);case s.ALPHANUMERIC:return Math.floor(k/11*2);case s.KANJI:return Math.floor(k/13);case s.BYTE:default:return Math.floor(k/8)}},t.getBestVersionForData=function(v,E){let j;const S=r.from(E,r.M);if(Array.isArray(v)){if(v.length>1)return g(v,S);if(v.length===0)return 1;j=v[0]}else j=v;return u(j.mode,j.getLength(),S)},t.getEncodedBits=function(v){if(!a.isValid(v)||v<7)throw new Error("Invalid QR Code version");let E=v<<12;for(;e.getBCHDigit(E)-c>=0;)E^=o<<e.getBCHDigit(E)-c;return v<<12|E}})(K3);var X3={};const zb=ms,Y3=1335,Pne=21522,uT=zb.getBCHDigit(Y3);X3.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;zb.getBCHDigit(s)-uT>=0;)s^=Y3<<zb.getBCHDigit(s)-uT;return(r<<10|s)^Pne};var J3={};const Dne=$o;function _u(t){this.mode=Dne.NUMERIC,this.data=t.toString()}_u.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};_u.prototype.getLength=function(){return this.data.length};_u.prototype.getBitsLength=function(){return _u.getBitsLength(this.data.length)};_u.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const a=this.data.length-n;a>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,a*3+1))};var Mne=_u;const Lne=$o,Rv=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Nu(t){this.mode=Lne.ALPHANUMERIC,this.data=t}Nu.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Nu.prototype.getLength=function(){return this.data.length};Nu.prototype.getBitsLength=function(){return Nu.getBitsLength(this.data.length)};Nu.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Rv.indexOf(this.data[n])*45;r+=Rv.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Rv.indexOf(this.data[n]),6)};var One=Nu;const Vne=$o;function ku(t){this.mode=Vne.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ku.getBitsLength=function(e){return e*8};ku.prototype.getLength=function(){return this.data.length};ku.prototype.getBitsLength=function(){return ku.getBitsLength(this.data.length)};ku.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var Une=ku;const Fne=$o,zne=ms;function ju(t){this.mode=Fne.KANJI,this.data=t}ju.getBitsLength=function(e){return e*13};ju.prototype.getLength=function(){return this.data.length};ju.prototype.getBitsLength=function(){return ju.getBitsLength(this.data.length)};ju.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=zne.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var Bne=ju,Z3={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,h,m,g,x,v,E,j,S;!c.empty();){u=c.pop(),h=u.value,g=u.cost,x=n[h]||{};for(m in x)x.hasOwnProperty(m)&&(v=x[m],E=g+v,j=o[m],S=typeof o[m]>"u",(S||j>E)&&(o[m]=E,c.push(m,E),a[m]=h))}if(typeof s<"u"&&typeof o[s]>"u"){var N=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(N)}return a},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],a=r;a;)s.push(a),n[a],a=n[a];return s.reverse(),s},find_path:function(n,r,s){var a=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},a;n=n||{};for(a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Z3);var $ne=Z3.exports;(function(t){const e=$o,n=Mne,r=One,s=Une,a=Bne,o=Di,c=ms,u=$ne;function h(N){return unescape(encodeURIComponent(N)).length}function m(N,w,k){const A=[];let D;for(;(D=N.exec(k))!==null;)A.push({data:D[0],index:D.index,mode:w,length:D[0].length});return A}function g(N){const w=m(o.NUMERIC,e.NUMERIC,N),k=m(o.ALPHANUMERIC,e.ALPHANUMERIC,N);let A,D;return c.isKanjiModeEnabled()?(A=m(o.BYTE,e.BYTE,N),D=m(o.KANJI,e.KANJI,N)):(A=m(o.BYTE_KANJI,e.BYTE,N),D=[]),w.concat(k,A,D).sort(function(C,T){return C.index-T.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function x(N,w){switch(w){case e.NUMERIC:return n.getBitsLength(N);case e.ALPHANUMERIC:return r.getBitsLength(N);case e.KANJI:return a.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function v(N){return N.reduce(function(w,k){const A=w.length-1>=0?w[w.length-1]:null;return A&&A.mode===k.mode?(w[w.length-1].data+=k.data,w):(w.push(k),w)},[])}function E(N){const w=[];for(let k=0;k<N.length;k++){const A=N[k];switch(A.mode){case e.NUMERIC:w.push([A,{data:A.data,mode:e.ALPHANUMERIC,length:A.length},{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.ALPHANUMERIC:w.push([A,{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.KANJI:w.push([A,{data:A.data,mode:e.BYTE,length:h(A.data)}]);break;case e.BYTE:w.push([{data:A.data,mode:e.BYTE,length:h(A.data)}])}}return w}function j(N,w){const k={},A={start:{}};let D=["start"];for(let F=0;F<N.length;F++){const C=N[F],T=[];for(let P=0;P<C.length;P++){const L=C[P],z=""+F+P;T.push(z),k[z]={node:L,lastCount:0},A[z]={};for(let H=0;H<D.length;H++){const B=D[H];k[B]&&k[B].node.mode===L.mode?(A[B][z]=x(k[B].lastCount+L.length,L.mode)-x(k[B].lastCount,L.mode),k[B].lastCount+=L.length):(k[B]&&(k[B].lastCount=L.length),A[B][z]=x(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,w))}}D=T}for(let F=0;F<D.length;F++)A[D[F]].end=0;return{map:A,table:k}}function S(N,w){let k;const A=e.getBestModeForData(N);if(k=e.from(w,A),k!==e.BYTE&&k.bit<A.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(A));switch(k===e.KANJI&&!c.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new n(N);case e.ALPHANUMERIC:return new r(N);case e.KANJI:return new a(N);case e.BYTE:return new s(N)}}t.fromArray=function(w){return w.reduce(function(k,A){return typeof A=="string"?k.push(S(A,null)):A.data&&k.push(S(A.data,A.mode)),k},[])},t.fromString=function(w,k){const A=g(w,c.isKanjiModeEnabled()),D=E(A),F=j(D,k),C=u.find_path(F.map,"start","end"),T=[];for(let P=1;P<C.length-1;P++)T.push(F.table[C[P]].node);return t.fromArray(v(T))},t.rawSplit=function(w){return t.fromArray(g(w,c.isKanjiModeEnabled()))}})(J3);const lx=ms,Pv=ix,Wne=kne,Hne=jne,Gne=$3,qne=W3,Bb=H3,$b=ax,Kne=Sne,Qg=K3,Qne=X3,Xne=$o,Dv=J3;function Yne(t,e){const n=t.size,r=qne.getPositions(e);for(let s=0;s<r.length;s++){const a=r[s][0],o=r[s][1];for(let c=-1;c<=7;c++)if(!(a+c<=-1||n<=a+c))for(let u=-1;u<=7;u++)o+u<=-1||n<=o+u||(c>=0&&c<=6&&(u===0||u===6)||u>=0&&u<=6&&(c===0||c===6)||c>=2&&c<=4&&u>=2&&u<=4?t.set(a+c,o+u,!0,!0):t.set(a+c,o+u,!1,!0))}}function Jne(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function Zne(t,e){const n=Gne.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],a=n[r][1];for(let o=-2;o<=2;o++)for(let c=-2;c<=2;c++)o===-2||o===2||c===-2||c===2||o===0&&c===0?t.set(s+o,a+c,!0,!0):t.set(s+o,a+c,!1,!0)}}function ere(t,e){const n=t.size,r=Qg.getEncodedBits(e);let s,a,o;for(let c=0;c<18;c++)s=Math.floor(c/3),a=c%3+n-8-3,o=(r>>c&1)===1,t.set(s,a,o,!0),t.set(a,s,o,!0)}function Mv(t,e,n){const r=t.size,s=Qne.getEncodedBits(e,n);let a,o;for(a=0;a<15;a++)o=(s>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(r-15+a,8,o,!0),a<8?t.set(8,r-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(r-8,8,1,!0)}function tre(t,e){const n=t.size;let r=-1,s=n-1,a=7,o=0;for(let c=n-1;c>0;c-=2)for(c===6&&c--;;){for(let u=0;u<2;u++)if(!t.isReserved(s,c-u)){let h=!1;o<e.length&&(h=(e[o]>>>a&1)===1),t.set(s,c-u,h),a--,a===-1&&(o++,a=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function nre(t,e,n){const r=new Wne;n.forEach(function(u){r.put(u.mode.bit,4),r.put(u.getLength(),Xne.getCharCountIndicator(u.mode,t)),u.write(r)});const s=lx.getSymbolTotalCodewords(t),a=$b.getTotalCodewordsCount(t,e),o=(s-a)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const c=(o-r.getLengthInBits())/8;for(let u=0;u<c;u++)r.put(u%2?17:236,8);return rre(r,t,e)}function rre(t,e,n){const r=lx.getSymbolTotalCodewords(e),s=$b.getTotalCodewordsCount(e,n),a=r-s,o=$b.getBlocksCount(e,n),c=r%o,u=o-c,h=Math.floor(r/o),m=Math.floor(a/o),g=m+1,x=h-m,v=new Kne(x);let E=0;const j=new Array(o),S=new Array(o);let N=0;const w=new Uint8Array(t.buffer);for(let C=0;C<o;C++){const T=C<u?m:g;j[C]=w.slice(E,E+T),S[C]=v.encode(j[C]),E+=T,N=Math.max(N,T)}const k=new Uint8Array(r);let A=0,D,F;for(D=0;D<N;D++)for(F=0;F<o;F++)D<j[F].length&&(k[A++]=j[F][D]);for(D=0;D<x;D++)for(F=0;F<o;F++)k[A++]=S[F][D];return k}function sre(t,e,n,r){let s;if(Array.isArray(t))s=Dv.fromArray(t);else if(typeof t=="string"){let h=e;if(!h){const m=Dv.rawSplit(t);h=Qg.getBestVersionForData(m,n)}s=Dv.fromString(t,h||40)}else throw new Error("Invalid data");const a=Qg.getBestVersionForData(s,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const o=nre(e,n,s),c=lx.getSymbolSize(e),u=new Hne(c);return Yne(u,e),Jne(u),Zne(u,e),Mv(u,n,0),e>=7&&ere(u,e),tre(u,o),isNaN(r)&&(r=Bb.getBestMask(u,Mv.bind(null,u,n))),Bb.applyMask(r,u),Mv(u,n,r),{modules:u,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}z3.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Pv.M,s,a;return typeof n<"u"&&(r=Pv.from(n.errorCorrectionLevel,Pv.M),s=Qg.from(n.version),a=Bb.from(n.maskPattern),n.toSJISFunc&&lx.setToSJISFunction(n.toSJISFunc)),sre(e,s,r,a)};var eD={},K_={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const a=t.getScale(r,s);return Math.floor((r+s.margin*2)*a)},t.qrToImageData=function(r,s,a){const o=s.modules.size,c=s.modules.data,u=t.getScale(o,a),h=Math.floor((o+a.margin*2)*u),m=a.margin*u,g=[a.color.light,a.color.dark];for(let x=0;x<h;x++)for(let v=0;v<h;v++){let E=(x*h+v)*4,j=a.color.light;if(x>=m&&v>=m&&x<h-m&&v<h-m){const S=Math.floor((x-m)/u),N=Math.floor((v-m)/u);j=g[c[S*o+N]?1:0]}r[E++]=j.r,r[E++]=j.g,r[E++]=j.b,r[E]=j.a}}})(K_);(function(t){const e=K_;function n(s,a,o){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,o,c){let u=c,h=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(h=r()),u=e.getOptions(u);const m=e.getImageWidth(a.modules.size,u),g=h.getContext("2d"),x=g.createImageData(m,m);return e.qrToImageData(x.data,a,u),n(g,h,m),g.putImageData(x,0,0),h},t.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const h=t.render(a,o,u),m=u.type||"image/png",g=u.rendererOpts||{};return h.toDataURL(m,g.quality)}})(eD);var tD={};const ire=K_;function dT(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Lv(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function are(t,e,n){let r="",s=0,a=!1,o=0;for(let c=0;c<t.length;c++){const u=Math.floor(c%e),h=Math.floor(c/e);!u&&!a&&(a=!0),t[c]?(o++,c>0&&u>0&&t[c-1]||(r+=a?Lv("M",u+n,.5+h+n):Lv("m",s,0),s=0,a=!1),u+1<e&&t[c+1]||(r+=Lv("h",o),o=0)):s++}return r}tD.render=function(e,n,r){const s=ire.getOptions(n),a=e.modules.size,o=e.modules.data,c=a+s.margin*2,u=s.color.light.a?"<path "+dT(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+dT(s.color.dark,"stroke")+' d="'+are(o,a,s.margin)+'"/>',m='viewBox="0 0 '+c+" "+c+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+u+h+`</svg>
`;return typeof r=="function"&&r(null,x),x};const ore=_ne,Wb=z3,nD=eD,lre=tD;function Q_(t,e,n,r,s){const a=[].slice.call(arguments,1),o=a.length,c=typeof a[o-1]=="function";if(!c&&!ore())throw new Error("Callback required as last argument");if(c){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(u,h){try{const m=Wb.create(n,r);u(t(m,e,r))}catch(m){h(m)}})}try{const u=Wb.create(n,r);s(null,t(u,e,r))}catch(u){s(u)}}If.create=Wb.create;If.toCanvas=Q_.bind(null,nD.render);If.toDataURL=Q_.bind(null,nD.renderToDataURL);If.toString=Q_.bind(null,function(t,e,n){return lre.render(t,n)});const cre=({code:t,onClose:e})=>{const[n,r]=_.useState("");return _.useEffect(()=>{(async()=>{try{const a=await If.toDataURL(`https://synclulu.app/join/${t}`,{width:256,margin:2,color:{dark:"#1a1a1a",light:"#ffffff"}});r(a)}catch(a){console.error("QR generation failed:",a)}})()},[t]),i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:e,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[var(--synclulu-card)] rounded-3xl p-6 max-w-sm w-full shadow-2xl border border-[var(--synclulu-border)]",onClick:s=>s.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-[var(--synclulu-text)]",children:"QR-Code scannen"}),i.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-[var(--synclulu-bg)] flex items-center justify-center hover:opacity-80 transition-opacity",children:i.jsx(ln,{size:16,className:"text-[var(--synclulu-muted)]"})})]}),i.jsx("div",{className:"bg-gradient-to-br from-[var(--synclulu-accent)]/10 to-pink-500/10 rounded-2xl p-6 flex items-center justify-center mb-4",children:n?i.jsx("img",{src:n,alt:"QR Code",className:"w-48 h-48 rounded-xl"}):i.jsx("div",{className:"w-48 h-48 bg-[var(--synclulu-bg)] animate-pulse rounded-xl"})}),i.jsx("p",{className:"text-center text-[var(--synclulu-muted)] text-sm mb-2",children:"Lass deine Freunde diesen Code scannen"}),i.jsx("p",{className:"text-center font-mono text-lg font-bold text-[var(--synclulu-accent)]",children:t})]})})},ure=({friend:t})=>{const n={pending:{label:"Eingeladen",color:"bg-amber-500/10 text-amber-500",icon:i.jsx(Fo,{size:12})},registered:{label:"Registriert",color:"bg-blue-500/10 text-blue-500",icon:i.jsx(ft,{size:12})},active:{label:"Aktiv",color:"bg-green-500/10 text-green-500",icon:i.jsx(fr,{size:12})}}[t.status];return i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-3 p-3 bg-[var(--synclulu-card)] rounded-2xl shadow-sm border border-[var(--synclulu-border)]",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--synclulu-accent)]/20 to-pink-500/20 flex items-center justify-center overflow-hidden",children:t.avatar?i.jsx("img",{src:t.avatar,alt:"",className:"w-full h-full object-cover"}):i.jsx(kt,{size:20,className:"text-[var(--synclulu-accent)]"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-[var(--synclulu-text)] truncate",children:t.displayName||t.username||"Anonym"}),i.jsx("p",{className:"text-xs text-[var(--synclulu-muted)]",children:t.invitedAt.toLocaleDateString("de-DE")})]}),i.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${n.color}`,children:[n.icon,n.label]})]})},dre=({milestone:t,currentCount:e})=>i.jsxs("div",{className:`relative p-4 rounded-2xl border transition-all ${t.unlocked?"bg-gradient-to-br from-[var(--synclulu-accent)]/10 to-pink-500/10 border-[var(--synclulu-accent)]/30 shadow-lg":"bg-[var(--synclulu-card)] border-[var(--synclulu-border)] opacity-60"}`,children:[t.unlocked&&i.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center shadow-lg",children:i.jsx(ft,{size:12,className:"text-white"})}),i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${t.unlocked?"bg-[var(--synclulu-accent)] text-white":"bg-[var(--synclulu-bg)] text-[var(--synclulu-muted)]"}`,children:t.icon}),i.jsxs("div",{children:[i.jsxs("p",{className:`font-bold ${t.unlocked?"text-[var(--synclulu-text)]":"text-[var(--synclulu-muted)]"}`,children:[t.count," Freunde"]}),i.jsx("p",{className:`text-xs ${t.unlocked?"text-[var(--synclulu-accent)]":"text-[var(--synclulu-muted)]"}`,children:t.reward})]})]}),!t.unlocked&&i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"h-1.5 bg-[var(--synclulu-bg)] rounded-full overflow-hidden",children:i.jsx(U.div,{initial:{width:0},animate:{width:`${Math.min(100,e/t.count*100)}%`},className:"h-full bg-[var(--synclulu-accent)] rounded-full"})}),i.jsxs("p",{className:"text-[10px] text-[var(--synclulu-muted)] mt-1 text-right",children:[e,"/",t.count]})]})]}),hT=()=>{const t=yt(),{user:e}=mr(),[n,r]=_.useState(""),[s,a]=_.useState(5),[o,c]=_.useState(5),[u,h]=_.useState([]),[m,g]=_.useState(!0),[x,v]=_.useState(!1),[E,j]=_.useState("card"),S=[{count:1,reward:"7 Tage Premium",rewardDays:7,icon:i.jsx(jn,{size:18}),unlocked:u.filter(w=>w.status!=="pending").length>=1},{count:3,reward:"14 Tage Premium",rewardDays:14,icon:i.jsx(Ci,{size:18}),unlocked:u.filter(w=>w.status!=="pending").length>=3},{count:5,reward:"30 Tage Premium",rewardDays:30,icon:i.jsx(kn,{size:18}),unlocked:u.filter(w=>w.status!=="pending").length>=5},{count:10,reward:"Lifetime Premium",rewardDays:999,icon:i.jsx(Co,{size:18}),unlocked:u.filter(w=>w.status!=="pending").length>=10}];_.useEffect(()=>{(async()=>{var k,A;if(e!=null&&e.id){g(!0);try{const D=await mt(ce(J,"users",e.id));if(D.exists()){const P=D.data();r(P.referralCode||`synclulu-${e.id.slice(0,6).toUpperCase()}`),a(P.remainingInvites??5),c(P.totalInvites??5)}const F=it(Ve(J,"referrals"),$e("referrerId","==",e.id),Us("createdAt","desc")),C=await Ft(F),T=[];for(const P of C.docs){const L=P.data();let z={};if(L.referredId){const H=await mt(ce(J,"users",L.referredId));H.exists()&&(z=H.data())}T.push({id:L.referredId||P.id,username:z.username||"",displayName:z.displayName||L.invitedName||"",avatar:z.avatarUrl,status:L.status||"pending",invitedAt:((k=L.createdAt)==null?void 0:k.toDate())||new Date,registeredAt:(A=L.registeredAt)==null?void 0:A.toDate()})}h(T)}catch(D){console.error("[InvitesPage] Load failed:",D)}finally{g(!1)}}})()},[e==null?void 0:e.id]);const N=u.filter(w=>w.status!=="pending").length;return i.jsxs("div",{className:"min-h-screen bg-[var(--synclulu-bg)] theme-transition",children:[i.jsx("div",{className:"fixed inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[var(--synclulu-accent)]/5 via-transparent to-transparent"})}),i.jsxs("div",{className:"px-4 pt-6 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl bg-[var(--synclulu-card)] shadow-sm border border-[var(--synclulu-border)] flex items-center justify-center hover:opacity-80 transition-opacity",children:i.jsx(ni,{size:20,className:"text-[var(--synclulu-muted)]"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-display text-2xl font-bold text-[var(--synclulu-text)]",children:"Einladungen"}),i.jsx("p",{className:"text-sm text-[var(--synclulu-muted)]",children:"Lade Freunde ein & erhalte Rewards"})]})]}),i.jsx("div",{className:"flex gap-2 p-1 bg-[var(--synclulu-card)] rounded-2xl border border-[var(--synclulu-border)]",children:[{key:"card",label:"Ticket",icon:Ci},{key:"friends",label:"Freunde",icon:kt},{key:"rewards",label:"Rewards",icon:Co}].map(w=>{const k=w.icon,A=E===w.key;return i.jsxs("button",{onClick:()=>{j(w.key),"vibrate"in navigator&&navigator.vibrate(10)},className:`flex-1 py-2.5 px-3 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 transition-all ${A?"bg-[var(--synclulu-accent)] text-white shadow-md":"text-[var(--synclulu-muted)] hover:text-[var(--synclulu-text)]"}`,children:[i.jsx(k,{size:16}),w.label]},w.key)})})]}),i.jsx("div",{className:"px-4 pb-32",children:m?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"w-10 h-10 border-4 border-[var(--synclulu-accent)] border-t-transparent rounded-full animate-spin"})}):i.jsx(i.Fragment,{children:i.jsxs(qt,{mode:"wait",children:[E==="card"&&i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[i.jsx(wne,{code:n,remainingInvites:s,totalInvites:o,rewardDays:7,onShowQR:()=>v(!0),variant:N>=10?"diamond":N>=5?"platinum":"golden"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 text-center shadow-sm border border-[var(--synclulu-border)]",children:[i.jsx("p",{className:"text-2xl font-bold text-[var(--synclulu-accent)]",children:u.length}),i.jsx("p",{className:"text-[10px] text-[var(--synclulu-muted)] uppercase tracking-wider",children:"Eingeladen"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 text-center shadow-sm border border-[var(--synclulu-border)]",children:[i.jsx("p",{className:"text-2xl font-bold text-green-500",children:N}),i.jsx("p",{className:"text-[10px] text-[var(--synclulu-muted)] uppercase tracking-wider",children:"Aktiv"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 text-center shadow-sm border border-[var(--synclulu-border)]",children:[i.jsx("p",{className:"text-2xl font-bold text-amber-500",children:s}),i.jsx("p",{className:"text-[10px] text-[var(--synclulu-muted)] uppercase tracking-wider",children:"brig"})]})]})]},"card"),E==="friends"&&i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:u.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-[var(--synclulu-card)] flex items-center justify-center border border-[var(--synclulu-border)]",children:i.jsx(kt,{size:32,className:"text-[var(--synclulu-muted)]"})}),i.jsx("p",{className:"text-[var(--synclulu-muted)] mb-2",children:"Noch keine Einladungen"}),i.jsx("p",{className:"text-sm text-[var(--synclulu-muted)] opacity-60",children:"Teile deinen Code und lade Freunde ein!"})]}):u.map(w=>i.jsx(ure,{friend:w},w.id))},"friends"),E==="rewards"&&i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[var(--synclulu-accent)] to-pink-500 rounded-2xl p-4 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(fr,{size:24}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Aktive Freunde"}),i.jsx("p",{className:"text-2xl font-black",children:N})]})]}),i.jsx("p",{className:"text-sm text-white/80",children:"Je mehr Freunde sich registrieren, desto besser deine Rewards!"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map((w,k)=>i.jsx(dre,{milestone:w,currentCount:N},k))})]},"rewards")]})})}),i.jsx(qt,{children:x&&i.jsx(cre,{code:n,onClose:()=>v(!1)})})]})},Ov="MIbamchs82Ve7y0ecX2TpPyymbw1",hre=["yunghundse@gmail.com","jan@butterbread.de","founder@synclulu.app"];function fT(){const t=yt(),{user:e}=mr(),{user:n,signInWithGoogle:r,isLoading:s}=Bs(),a=e||n,[o,c]=_.useState(!1),[u,h]=_.useState(!0),[m,g]=_.useState("users"),[x,v]=_.useState(!1),[E,j]=_.useState(null),[S,N]=_.useState({maintenanceMode:!1,maintenanceMessage:"Wartungsarbeiten. Wir sind bald zurck!"}),[w,k]=_.useState(!1),[A,D]=_.useState(!1),[F,C]=_.useState([]),[T,P]=_.useState(""),[L,z]=_.useState(!1),[H,B]=_.useState([]),[Pe,we]=_.useState(!1),[je,oe]=_.useState(null);_.useEffect(()=>{(async()=>{var tt;if(s)return;if(!(a!=null&&a.id)&&!(a!=null&&a.email)){h(!1);return}const Se=a.id===Ov,Ee=hre.includes(((tt=a.email)==null?void 0:tt.toLowerCase())||"");(Se||Ee)&&(c(!0),ue(),ge(),me()),h(!1)})()},[a==null?void 0:a.id,a==null?void 0:a.email,s]);const K=async()=>{v(!0),j(null);try{const Z=await r();Z.success||j(Z.error||"Login fehlgeschlagen")}catch(Z){console.error("[Admin] Sign in error:",Z),j(Z.message||"Login fehlgeschlagen")}v(!1)},te=(Z,Se)=>{oe({type:Z,text:Se}),setTimeout(()=>oe(null),3e3)},ue=async()=>{try{const Z=await mt(ce(J,"system","settings"));if(Z.exists()){const Se=Z.data();N({maintenanceMode:Se.maintenanceMode||!1,maintenanceMessage:Se.maintenanceMessage||"Wartungsarbeiten. Wir sind bald zurck!"})}}catch(Z){console.error("[Admin] Error loading settings:",Z)}},Re=async()=>{k(!0);try{await hr(ce(J,"system","settings"),{maintenanceMode:S.maintenanceMode,maintenanceMessage:S.maintenanceMessage,updatedAt:new Date,updatedBy:(a==null?void 0:a.id)||Ov},{merge:!0}),D(!0),te("success","Einstellungen gespeichert!"),setTimeout(()=>D(!1),2e3)}catch(Z){console.error("[Admin] Error saving settings:",Z),te("error","Fehler beim Speichern")}k(!1)},ge=async()=>{z(!0);try{const Z=Ve(J,"users"),Se=it(Z,Us("createdAt","desc"),Kr(200)),Ee=await Ft(Se),tt=[];Ee.forEach(Qr=>{const nt=Qr.data();tt.push({id:Qr.id,displayName:nt.displayName||"Unbekannt",username:nt.username||"unknown",email:nt.email,xp:nt.xp||0,isPremium:nt.isPremium||!1,isVisible:nt.isVisible!==!1,isBanned:nt.isBanned||!1,createdAt:nt.createdAt})}),C(tt)}catch(Z){console.error("[Admin] Error loading users:",Z)}z(!1)},me=async()=>{we(!0);try{const Z=Ve(J,"rooms"),Se=it(Z,Us("createdAt","desc"),Kr(100)),Ee=await Ft(Se),tt=[];Ee.forEach(Qr=>{var Dr;const nt=Qr.data();tt.push({id:Qr.id,name:nt.name||"Unnamed Room",description:nt.description,creatorId:nt.creatorId||nt.hostId,creatorName:nt.creatorName||nt.hostName,participantCount:((Dr=nt.participants)==null?void 0:Dr.length)||0,isActive:nt.isActive!==!1,createdAt:nt.createdAt})}),B(tt)}catch(Z){console.error("[Admin] Error loading rooms:",Z)}we(!1)},at=async(Z,Se)=>{try{await Ge(ce(J,"users",Z),{isPremium:!Se}),C(F.map(Ee=>Ee.id===Z?{...Ee,isPremium:!Se}:Ee)),te("success",Se?"Premium deaktiviert":"Premium aktiviert!")}catch(Ee){console.error("[Admin] Error toggling premium:",Ee),te("error","Fehler")}},jt=async(Z,Se)=>{try{await Ge(ce(J,"users",Z),{isVisible:!Se}),C(F.map(Ee=>Ee.id===Z?{...Ee,isVisible:!Se}:Ee)),te("success",Se?"User versteckt":"User sichtbar")}catch(Ee){console.error("[Admin] Error toggling visibility:",Ee),te("error","Fehler")}},Xt=async(Z,Se)=>{try{await Ge(ce(J,"users",Z),{isBanned:!Se}),C(F.map(Ee=>Ee.id===Z?{...Ee,isBanned:!Se}:Ee)),te("success",Se?"User entbannt":"User gebannt!")}catch(Ee){console.error("[Admin] Error toggling ban:",Ee),te("error","Fehler")}},Tn=async(Z,Se)=>{var Ee;try{const tt=ce(J,"users",Z),nt=((Ee=(await mt(tt)).data())==null?void 0:Ee.xp)||0;await Ge(tt,{xp:nt+Se}),C(F.map(Dr=>Dr.id===Z?{...Dr,xp:Dr.xp+Se}:Dr)),te("success",`+${Se} XP hinzugefgt`)}catch(tt){console.error("[Admin] Error adding XP:",tt),te("error","Fehler")}},Qn=async Z=>{if(confirm("Room wirklich lschen?"))try{await oa(ce(J,"rooms",Z)),B(H.filter(Se=>Se.id!==Z)),te("success","Room gelscht!")}catch(Se){console.error("[Admin] Error deleting room:",Se),te("error","Fehler beim Lschen")}},Ln=async(Z,Se)=>{try{await Ge(ce(J,"rooms",Z),{isActive:!Se}),B(H.map(Ee=>Ee.id===Z?{...Ee,isActive:!Se}:Ee)),te("success",Se?"Room deaktiviert":"Room aktiviert")}catch(Ee){console.error("[Admin] Error toggling room:",Ee),te("error","Fehler")}},Pr=async()=>{if(confirm("Wirklich ALLE User auf Level 0 zurcksetzen?"))try{const Z=Ve(J,"users"),Se=await Ft(Z);let Ee=0;for(const tt of Se.docs)await Ge(ce(J,"users",tt.id),{xp:0,level:0,totalXP:0}),Ee++;te("success",`${Ee} User zurckgesetzt!`),ge()}catch(Z){console.error("[Admin] Error resetting levels:",Z),te("error","Fehler beim Zurcksetzen")}},pr=F.filter(Z=>{var Se;return Z.displayName.toLowerCase().includes(T.toLowerCase())||Z.username.toLowerCase().includes(T.toLowerCase())||((Se=Z.email)==null?void 0:Se.toLowerCase().includes(T.toLowerCase()))});return u||s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"#050505"},children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full"})}):a?o?i.jsxs("div",{className:"min-h-screen pb-32",style:{background:"#050505"},children:[i.jsx(qt,{children:je&&i.jsx(U.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-xl font-bold",style:{background:je.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 8px 30px rgba(0,0,0,0.5)"},children:i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[je.type==="success"?i.jsx(ko,{size:18}):i.jsx(ln,{size:18}),je.text]})})}),i.jsxs("div",{className:"sticky top-0 z-40 px-5 py-5 flex items-center gap-4",style:{background:"linear-gradient(180deg, #050505, transparent)",backdropFilter:"blur(20px)"},children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t("/"),className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"3px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 25px rgba(139, 92, 246, 0.5)"},children:i.jsx(gn,{size:26,className:"text-white"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("h1",{className:"text-2xl font-black text-white flex items-center gap-3",children:[i.jsx(zs,{size:26,className:"text-purple-400"}),"Admin Dashboard"]})}),i.jsxs("div",{className:"flex items-center gap-2 px-5 py-2.5 rounded-xl",style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",boxShadow:"0 6px 20px rgba(251, 191, 36, 0.5)"},children:[i.jsx(kn,{size:18,className:"text-black"}),i.jsx("span",{className:"text-sm font-black text-black",children:"FOUNDER"})]})]}),i.jsx("div",{className:"px-5 py-4",children:i.jsx("div",{className:"flex gap-2 p-2 rounded-2xl",style:{background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 255, 255, 0.1)"},children:[{id:"users",label:"User",icon:kt,count:F.length},{id:"rooms",label:"Rooms",icon:Ar,count:H.length},{id:"settings",label:"System",icon:J0}].map(Z=>i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>g(Z.id),className:"flex-1 py-4 rounded-xl flex items-center justify-center gap-2 text-sm font-bold",style:m===Z.id?{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 6px 20px rgba(139, 92, 246, 0.5)"}:{background:"transparent"},children:[i.jsx(Z.icon,{size:20,className:m===Z.id?"text-white":"text-white/50"}),i.jsx("span",{className:m===Z.id?"text-white":"text-white/50",children:Z.label}),Z.count!==void 0&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{background:m===Z.id?"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)",color:m===Z.id?"white":"rgba(255,255,255,0.5)"},children:Z.count})]},Z.id))})}),i.jsxs("div",{className:"px-5",children:[m==="users"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Y0,{size:22,className:"absolute left-5 top-1/2 -translate-y-1/2 text-white/50"}),i.jsx("input",{type:"text",value:T,onChange:Z=>P(Z.target.value),placeholder:"User suchen (Name, Username, Email)...",className:"w-full pl-14 pr-5 py-4 rounded-2xl text-white text-base font-medium",style:{background:"rgba(255, 255, 255, 0.08)",border:"2px solid rgba(255, 255, 255, 0.15)",outline:"none"}})]}),i.jsxs(U.button,{onClick:ge,disabled:L,whileTap:{scale:.98},className:"flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-bold text-white",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.4)"},children:[i.jsx(Vg,{size:18,className:L?"animate-spin":""}),"Aktualisieren"]}),i.jsx("div",{className:"space-y-3",children:pr.map(Z=>i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-5 rounded-2xl",style:{background:Z.isBanned?"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05))":"rgba(255, 255, 255, 0.06)",border:`2px solid ${Z.isBanned?"rgba(239, 68, 68, 0.4)":"rgba(255, 255, 255, 0.1)"}`},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-lg font-bold text-white flex items-center gap-2",children:[Z.displayName,Z.isPremium&&i.jsx(jn,{size:16,className:"text-amber-400"}),Z.id===Ov&&i.jsx(kn,{size:16,className:"text-amber-400"}),Z.isBanned&&i.jsx(fb,{size:16,className:"text-red-400"})]}),i.jsxs("p",{className:"text-sm text-white/50",children:["@",Z.username]}),i.jsx("p",{className:"text-xs text-white/30",children:Z.email})]}),i.jsx("div",{className:"px-4 py-2 rounded-xl flex items-center gap-2",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},children:i.jsxs("span",{className:"text-sm font-black text-white",children:[Z.xp," XP"]})})]}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs(U.button,{onClick:()=>at(Z.id,Z.isPremium),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2",style:{background:Z.isPremium?"linear-gradient(135deg, #fbbf24, #f59e0b)":"rgba(255, 255, 255, 0.08)",color:Z.isPremium?"black":"white",boxShadow:Z.isPremium?"0 4px 15px rgba(251, 191, 36, 0.4)":void 0},children:[i.jsx(jn,{size:16}),Z.isPremium?"Premium":"Free"]}),i.jsxs(U.button,{onClick:()=>jt(Z.id,Z.isVisible),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 text-white",style:{background:Z.isVisible?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #6b7280, #4b5563)",boxShadow:Z.isVisible?"0 4px 15px rgba(16, 185, 129, 0.4)":void 0},children:[Z.isVisible?i.jsx(Fs,{size:16}):i.jsx(ba,{size:16}),Z.isVisible?"Sichtbar":"Hidden"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(U.button,{onClick:()=>Tn(Z.id,100),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},children:[i.jsx(jf,{size:16}),"+100 XP"]}),i.jsxs(U.button,{onClick:()=>Xt(Z.id,Z.isBanned||!1),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 text-white",style:{background:Z.isBanned?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.4)"},children:[i.jsx(fb,{size:16}),Z.isBanned?"Entbannen":"Bannen"]})]})]},Z.id))}),pr.length===0&&!L&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(kt,{size:56,className:"mx-auto text-white/20 mb-4"}),i.jsx("p",{className:"text-white/50 text-base",children:"Keine User gefunden"})]}),L&&i.jsx("div",{className:"text-center py-12",children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 mx-auto border-4 border-purple-500 border-t-transparent rounded-full"})})]}),m==="rooms"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs(U.button,{onClick:me,disabled:Pe,whileTap:{scale:.98},className:"flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-bold text-white",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.4)"},children:[i.jsx(Vg,{size:18,className:Pe?"animate-spin":""}),"Rooms laden"]}),i.jsx("div",{className:"space-y-3",children:H.map(Z=>i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-5 rounded-2xl",style:{background:Z.isActive?"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05))":"rgba(255, 255, 255, 0.04)",border:`2px solid ${Z.isActive?"rgba(139, 92, 246, 0.4)":"rgba(255, 255, 255, 0.1)"}`},children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Ar,{size:18,className:Z.isActive?"text-purple-400":"text-white/30"}),Z.name]}),i.jsxs("p",{className:"text-sm text-white/50",children:["von ",Z.creatorName||"Unknown"]}),i.jsxs("p",{className:"text-xs text-white/30",children:[Z.participantCount," Teilnehmer"]})]}),i.jsx("div",{className:"px-3 py-1.5 rounded-lg text-xs font-bold",style:{background:Z.isActive?"linear-gradient(135deg, #10b981, #059669)":"rgba(255, 255, 255, 0.1)",color:Z.isActive?"white":"rgba(255, 255, 255, 0.5)"},children:Z.isActive?"AKTIV":"INAKTIV"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(U.button,{onClick:()=>Ln(Z.id,Z.isActive),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 text-white",style:{background:Z.isActive?"linear-gradient(135deg, #6b7280, #4b5563)":"linear-gradient(135deg, #10b981, #059669)"},children:[Z.isActive?i.jsx(ba,{size:16}):i.jsx(Fs,{size:16}),Z.isActive?"Deaktivieren":"Aktivieren"]}),i.jsxs(U.button,{onClick:()=>Qn(Z.id),whileTap:{scale:.98},className:"flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 text-white",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.4)"},children:[i.jsx(u_,{size:16}),"Lschen"]})]})]},Z.id))}),H.length===0&&!Pe&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ar,{size:56,className:"mx-auto text-white/20 mb-4"}),i.jsx("p",{className:"text-white/50 text-base",children:"Keine Rooms vorhanden"})]}),Pe&&i.jsx("div",{className:"text-center py-12",children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 mx-auto border-4 border-purple-500 border-t-transparent rounded-full"})})]}),m==="settings"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 rounded-2xl",style:{background:S.maintenanceMode?"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.05))":"rgba(255, 255, 255, 0.06)",border:`2px solid ${S.maintenanceMode?"rgba(239, 68, 68, 0.5)":"rgba(255, 255, 255, 0.1)"}`},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{background:S.maintenanceMode?"linear-gradient(135deg, #ef4444, #dc2626)":"rgba(255, 255, 255, 0.1)",boxShadow:S.maintenanceMode?"0 6px 20px rgba(239, 68, 68, 0.5)":void 0},children:i.jsx(cX,{size:26,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-bold text-white",children:"Wartungsmodus"}),i.jsx("p",{className:"text-sm text-white/50",children:"App fr alle sperren"})]})]}),i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>N({...S,maintenanceMode:!S.maintenanceMode}),className:"w-20 h-10 rounded-full p-1",style:{background:S.maintenanceMode?"linear-gradient(135deg, #ef4444, #dc2626)":"rgba(255, 255, 255, 0.1)",boxShadow:S.maintenanceMode?"0 4px 15px rgba(239, 68, 68, 0.5)":void 0},children:i.jsx(U.div,{className:"w-8 h-8 rounded-full bg-white",animate:{x:S.maintenanceMode?38:0},style:{boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})})]}),S.maintenanceMode&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"text-sm text-white/60 mb-2 block font-medium",children:"Wartungsnachricht"}),i.jsx("input",{type:"text",value:S.maintenanceMessage,onChange:Z=>N({...S,maintenanceMessage:Z.target.value}),className:"w-full p-4 rounded-xl text-white text-base font-medium",style:{background:"rgba(0, 0, 0, 0.5)",border:"2px solid rgba(255, 255, 255, 0.2)",outline:"none"}})]})]}),i.jsxs(U.button,{onClick:Re,disabled:w,whileTap:{scale:.98},className:"w-full py-5 rounded-2xl flex items-center justify-center gap-3 font-black text-lg text-white",style:{background:A?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:A?"0 8px 30px rgba(16, 185, 129, 0.5)":"0 8px 30px rgba(139, 92, 246, 0.5)"},children:[w?i.jsx(Nn,{size:24,className:"animate-spin"}):i.jsx(ft,{size:24}),A?"Gespeichert!":"Einstellungen speichern"]}),i.jsxs("div",{className:"p-5 rounded-2xl mt-8",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05))",border:"2px solid rgba(239, 68, 68, 0.4)"},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(wf,{size:24,className:"text-red-400"}),i.jsx("p",{className:"text-lg font-bold text-red-400",children:"Danger Zone"})]}),i.jsx(U.button,{onClick:Pr,whileTap:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-white",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 6px 25px rgba(239, 68, 68, 0.5)"},children:"Alle User auf Level 0 zurcksetzen"})]})]})]})]}):i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",style:{background:"#050505"},children:[i.jsx(U.button,{onClick:()=>t("/"),whileTap:{scale:.95},className:"absolute top-6 left-6 w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"3px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 25px rgba(139, 92, 246, 0.6)"},children:i.jsx(gn,{size:26,className:"text-white"})}),i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md p-8 rounded-3xl text-center",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.25), rgba(239, 68, 68, 0.10))",border:"3px solid rgba(239, 68, 68, 0.5)",boxShadow:"0 20px 60px rgba(239, 68, 68, 0.4)"},children:[i.jsx("div",{className:"w-28 h-28 mx-auto mb-8 rounded-3xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 12px 40px rgba(239, 68, 68, 0.6)"},children:i.jsx(Ir,{size:56,className:"text-white"})}),i.jsx("h1",{className:"text-3xl font-black text-white mb-3",children:"Zugriff verweigert"}),i.jsx("p",{className:"text-white/70 text-base mb-4",children:"Dieser Bereich ist nur fr Admins zugnglich."}),i.jsxs("p",{className:"text-white/50 text-sm mb-8",children:["Angemeldet als: ",a.email||a.displayName]}),i.jsxs(U.button,{onClick:()=>t("/"),whileTap:{scale:.98},className:"w-full py-5 rounded-2xl flex items-center justify-center gap-3 font-black text-lg text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 10px 35px rgba(139, 92, 246, 0.6)"},children:[i.jsx(gn,{size:24}),"Zurck zur App"]})]})]}):i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",style:{background:"#050505"},children:[i.jsx(U.button,{onClick:()=>t("/"),whileTap:{scale:.95},className:"absolute top-6 left-6 w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"3px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 25px rgba(139, 92, 246, 0.6)"},children:i.jsx(gn,{size:26,className:"text-white"})}),i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md p-8 rounded-3xl text-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.25), rgba(139, 92, 246, 0.10))",border:"3px solid rgba(139, 92, 246, 0.5)",boxShadow:"0 20px 60px rgba(139, 92, 246, 0.4)"},children:[i.jsx("div",{className:"w-28 h-28 mx-auto mb-8 rounded-3xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 12px 40px rgba(139, 92, 246, 0.6)"},children:i.jsx(zs,{size:56,className:"text-white"})}),i.jsx("h1",{className:"text-3xl font-black text-white mb-3",children:"Admin Panel"}),i.jsx("p",{className:"text-white/70 text-base mb-8",children:"Melde dich mit deinem Founder-Account an"}),E&&i.jsx("div",{className:"mb-6 p-4 rounded-xl bg-red-500/20 border-2 border-red-500/50",children:i.jsx("p",{className:"text-red-400 text-sm font-medium",children:E})}),i.jsxs(U.button,{onClick:K,disabled:x,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-5 rounded-2xl flex items-center justify-center gap-4 font-black text-lg text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",boxShadow:"0 10px 35px rgba(139, 92, 246, 0.6)"},children:[x?i.jsx(Nn,{size:26,className:"animate-spin"}):i.jsx(JQ,{size:26}),x?"Anmelden...":"Mit Google anmelden"]})]})]})}const fre=["3lonL4ruSPU53Vuwy1U9aLO4hLp2"],vp=_.memo(function({label:e,value:n,icon:r,color:s="emerald",onClick:a}){const o={emerald:"text-emerald-400",purple:"text-purple-400",amber:"text-amber-400",red:"text-red-400",blue:"text-blue-400"};return i.jsxs("button",{onClick:a,disabled:!a,className:`p-5 rounded-2xl text-left transition-all ${a?"hover:scale-[1.02] cursor-pointer":""}`,style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx(r,{size:18,className:o[s]})}),i.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-white/30 mb-1",children:e}),i.jsx("p",{className:`text-2xl font-bold ${o[s]}`,children:n})]})}),mre=_.memo(function({room:e,onDelete:n}){const[r,s]=_.useState(!1),a=async()=>{window.confirm(`Raum "${e.name}" wirklich lschen?`)&&(s(!0),await n(e.id))};return i.jsxs("div",{className:"p-4 rounded-xl flex items-center justify-between",style:{background:"rgba(255, 255, 255, 0.02)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${e.isActive?"bg-emerald-500/20":"bg-white/5"}`,children:i.jsx(Xh,{size:18,className:e.isActive?"text-emerald-400":"text-white/30"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),i.jsxs("p",{className:"text-[10px] text-white/40",children:[e.participantCount," User  ",e.creatorName||"Unbekannt"]})]})]}),i.jsx("button",{onClick:a,disabled:r,className:"p-2 rounded-lg hover:bg-red-500/20 transition-colors group",children:r?i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-red-400/30 border-t-red-400 rounded-full"}):i.jsx(u_,{size:16,className:"text-white/30 group-hover:text-red-400"})})]})}),pre=_.memo(function({user:e,onTogglePremium:n,onToggleBan:r}){return i.jsxs("div",{className:"p-4 rounded-xl flex items-center justify-between",style:{background:"rgba(255, 255, 255, 0.02)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[e.avatarUrl?i.jsx("img",{src:e.avatarUrl,alt:e.displayName,className:"w-10 h-10 rounded-xl object-cover"}):i.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center",children:i.jsx(kt,{size:18,className:"text-purple-400"})}),e.isPremium&&i.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-amber-500 flex items-center justify-center",children:i.jsx(kn,{size:10,className:"text-white"})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-white",children:e.displayName}),i.jsx("p",{className:"text-[10px] text-white/40",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>n(e.id,!e.isPremium),className:`p-2 rounded-lg transition-colors ${e.isPremium?"bg-amber-500/20 text-amber-400":"hover:bg-amber-500/10 text-white/30 hover:text-amber-400"}`,title:e.isPremium?"Premium entfernen":"Premium geben",children:i.jsx(kn,{size:16})}),i.jsx("button",{onClick:()=>r(e.id),className:"p-2 rounded-lg hover:bg-red-500/20 text-white/30 hover:text-red-400 transition-colors",title:"User bannen",children:i.jsx(fb,{size:16})})]})]})});function gre(){var Pe;const t=yt(),{user:e}=mr(),n=(e==null?void 0:e.id)||((Pe=Rt.currentUser)==null?void 0:Pe.uid)||null,r=n&&fre.includes(n),[s,a]=_.useState("overview"),[o,c]=_.useState([]),[u,h]=_.useState([]),[m,g]=_.useState(0),[x,v]=_.useState(0),[E,j]=_.useState(0),[S,N]=_.useState(!1),[w,k]=_.useState(!0),[A,D]=_.useState(!0),[F,C]=_.useState(""),[T,P]=_.useState(null);_.useEffect(()=>{const we=setTimeout(()=>D(!1),1500);return()=>clearTimeout(we)},[]),_.useEffect(()=>{if(!r||A)return;const we=cr(it(Ve(J,"users"),$e("isOnline","==",!0)),K=>g(K.size)),je=cr(it(Ve(J,"rooms"),Us("createdAt","desc"),Kr(50)),K=>{const te=K.docs.map(ue=>{var Re,ge;return{id:ue.id,name:ue.data().name||"Unnamed Room",creatorId:ue.data().creatorId,creatorName:ue.data().creatorName,participantCount:((Re=ue.data().participants)==null?void 0:Re.length)||0,createdAt:((ge=ue.data().createdAt)==null?void 0:ge.toDate())||new Date,isActive:ue.data().isActive!==!1}});c(te),v(K.size)});Ft(it(Ve(J,"users"),$e("isPremium","==",!0))).then(K=>j(K.size)),mt(ce(J,"system","config")).then(K=>{K.exists()&&N(K.data().maintenanceMode===!0)});const oe=setInterval(()=>k(navigator.onLine),5e3);return()=>{we(),je(),clearInterval(oe)}},[r,A]),_.useEffect(()=>{if(!r||!F||F.length<2){h([]);return}const je=setTimeout(async()=>{const K=(await Ft(it(Ve(J,"users"),Kr(20)))).docs.map(te=>{var ue;return{id:te.id,displayName:te.data().displayName||"Unknown",email:te.data().email||"",avatarUrl:te.data().avatarUrl,isPremium:te.data().isPremium===!0,role:te.data().role,createdAt:((ue=te.data().createdAt)==null?void 0:ue.toDate())||new Date}}).filter(te=>te.displayName.toLowerCase().includes(F.toLowerCase())||te.email.toLowerCase().includes(F.toLowerCase()));h(K)},300);return()=>clearTimeout(je)},[r,F]);const L=_.useCallback(async we=>{P(we);try{await oa(ce(J,"rooms",we));const je=Ve(J,"rooms",we,"messages"),oe=await Ft(je);await Promise.all(oe.docs.map(K=>oa(K.ref)))}catch(je){console.error("Delete room error:",je),alert("Fehler beim Lschen")}finally{P(null)}},[]),z=_.useCallback(async(we,je)=>{P(we);try{await Ge(ce(J,"users",we),{isPremium:je,premiumUpdatedAt:Ut(),premiumUpdatedBy:n}),h(oe=>oe.map(K=>K.id===we?{...K,isPremium:je}:K))}catch(oe){console.error("Toggle premium error:",oe),alert("Fehler beim Aktualisieren")}finally{P(null)}},[n]),H=_.useCallback(async we=>{if(window.confirm("User wirklich bannen?")){P(we);try{await Ge(ce(J,"users",we),{isBanned:!0,bannedAt:Ut(),bannedBy:n}),alert("User gebannt")}catch(je){console.error("Ban user error:",je),alert("Fehler beim Bannen")}finally{P(null)}}},[n]),B=_.useCallback(async()=>{const we=!S;P("maintenance");try{await Ge(ce(J,"system","config"),{maintenanceMode:we,maintenanceMessage:we?"Wartungsarbeiten - Wir sind gleich zurck!":"",maintenanceUpdatedAt:Ut(),maintenanceUpdatedBy:n}),N(we)}catch(je){console.error("Toggle maintenance error:",je),alert("Fehler beim Aktualisieren")}finally{P(null)}},[S,n]);return A?i.jsxs("div",{className:"fixed inset-0 bg-[#050505] flex items-center justify-center",children:[i.jsx(U.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:i.jsx(KQ,{size:32,className:"text-emerald-400/50"})}),i.jsx("p",{className:"text-[10px] text-white/30 mt-4 font-mono absolute bottom-1/2 translate-y-8",children:"AUTHENTICATING..."})]}):r?i.jsxs("div",{className:"min-h-screen p-6 font-mono pb-32",style:{background:"#050505"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center hover:bg-white/5",children:i.jsx(ni,{size:20,className:"text-white/40"})}),i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(234, 179, 8, 0.2), rgba(251, 146, 60, 0.2))"},children:i.jsx(kn,{size:18,className:"text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xs font-black uppercase tracking-[0.3em] text-amber-400",children:"Nexus Control"}),i.jsx("p",{className:"text-[9px] text-white/30",children:"FOUNDER_MODE // v2.0"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${w?"bg-emerald-400 animate-pulse":"bg-red-400"}`}),i.jsx("span",{className:"text-[9px] text-white/30",children:w?"LIVE":"OFFLINE"})]})]}),i.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{key:"overview",icon:HQ,label:"Overview"},{key:"rooms",icon:Xh,label:"Rume"},{key:"users",icon:kt,label:"User"},{key:"settings",icon:J0,label:"System"}].map(we=>i.jsxs("button",{onClick:()=>a(we.key),className:`px-4 py-2 rounded-xl text-[10px] font-bold uppercase tracking-wider flex items-center gap-2 transition-all ${s===we.key?"bg-amber-500/20 text-amber-400":"text-white/30 hover:text-white/50"}`,children:[i.jsx(we.icon,{size:14}),we.label]},we.key))}),s==="overview"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsx(vp,{label:"Active_Users",value:m,icon:kt,color:"emerald"}),i.jsx(vp,{label:"Total_Rooms",value:x,icon:Xh,color:"purple"}),i.jsx(vp,{label:"Premium_Users",value:E,icon:kn,color:"amber"}),i.jsx(vp,{label:"Maintenance",value:S?"ON":"OFF",icon:dv,color:S?"red":"emerald",onClick:B})]}),i.jsxs("div",{className:"rounded-2xl p-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/30 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:B,disabled:T==="maintenance",className:`p-4 rounded-xl flex items-center gap-3 transition-all ${S?"bg-red-500/20 border border-red-500/30":"bg-white/5 hover:bg-white/10"}`,children:[i.jsx(dv,{size:20,className:S?"text-red-400":"text-emerald-400"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-bold text-white",children:"Wartungsmodus"}),i.jsx("p",{className:"text-[10px] text-white/40",children:S?"Aktiv - Klicken zum Deaktivieren":"Inaktiv - Klicken zum Aktivieren"})]})]}),i.jsxs("button",{onClick:()=>a("users"),className:"p-4 rounded-xl bg-white/5 hover:bg-white/10 flex items-center gap-3 transition-all",children:[i.jsx(Dn,{size:20,className:"text-purple-400"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-bold text-white",children:"Premium vergeben"}),i.jsx("p",{className:"text-[10px] text-white/40",children:"User suchen & upgraden"})]})]})]})]})]}),s==="rooms"&&i.jsxs("div",{className:"rounded-2xl p-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("h2",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/30",children:["Alle Rume (",o.length,")"]})}),i.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:o.length>0?o.map(we=>i.jsx(mre,{room:we,onDelete:L},we.id)):i.jsx("p",{className:"text-center text-white/20 py-10",children:"Keine Rume vorhanden"})})]}),s==="users"&&i.jsxs("div",{className:"rounded-2xl p-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Y0,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),i.jsx("input",{type:"text",placeholder:"User suchen (Name oder Email)...",value:F,onChange:we=>C(we.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-purple-500/50"})]})}),i.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto",children:u.length>0?u.map(we=>i.jsx(pre,{user:we,onTogglePremium:z,onToggleBan:H},we.id)):i.jsx("p",{className:"text-center text-white/20 py-10",children:F?"Keine User gefunden":"Suche eingeben..."})})]}),s==="settings"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"rounded-2xl p-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${S?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(dv,{size:20,className:S?"text-red-400":"text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-white",children:"Wartungsmodus"}),i.jsx("p",{className:"text-[10px] text-white/40",children:"App fr alle User sperren"})]})]}),i.jsx("button",{onClick:B,disabled:T==="maintenance",className:`px-6 py-3 rounded-xl font-bold text-sm transition-all ${S?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-red-500 text-white hover:bg-red-600"}`,children:T==="maintenance"?"...":S?"Deaktivieren":"Aktivieren"})]})}),i.jsxs("div",{className:"rounded-2xl p-6",style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/30 mb-4",children:"System Info"}),i.jsxs("div",{className:"space-y-2 text-[11px] font-mono",children:[i.jsxs("p",{className:"text-white/40",children:["Founder: ",i.jsx("span",{className:"text-emerald-400",children:"Authenticated"})]}),i.jsxs("p",{className:"text-white/40",children:["Version: ",i.jsx("span",{className:"text-white/60",children:"2.0.0"})]}),i.jsxs("p",{className:"text-white/40",children:["Build: ",i.jsx("span",{className:"text-white/60",children:new Date().toISOString().split("T")[0]})]})]})]})]}),i.jsxs("div",{className:"fixed bottom-6 left-6 right-6 flex justify-between items-center pointer-events-none",children:[i.jsx("p",{className:"text-[9px] text-amber-400/40 font-mono",children:" FOUNDER_ACCESS"}),i.jsx("p",{className:"text-[9px] text-white/20",children:new Date().toLocaleTimeString("de-DE")})]})]}):i.jsx("div",{className:"fixed inset-0 bg-[#050505] flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(zs,{size:48,className:"text-red-500/50 mx-auto mb-4"}),i.jsx("p",{className:"text-sm font-bold text-red-400",children:"ACCESS DENIED"}),i.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Founder-Only Area"}),i.jsxs("p",{className:"text-[8px] text-white/20 mt-4 font-mono",children:["UID: ",n||"NOT_AUTH"]}),i.jsx("button",{onClick:()=>t("/"),className:"mt-6 px-6 py-2 rounded-full text-xs font-bold text-white/50 border border-white/10",children:"Return to Base"})]})})}const Vv=()=>{const t=yt();return i.jsxs("div",{className:"min-h-screen bg-[var(--synclulu-bg)] safe-top safe-bottom pb-24 theme-transition",children:[i.jsx("div",{className:"fixed inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[var(--synclulu-accent)]/5 via-transparent to-transparent"})}),i.jsx("div",{className:"sticky top-0 z-20 glass-nav border-b border-[var(--synclulu-border)]",children:i.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl bg-[var(--synclulu-card)] flex items-center justify-center text-[var(--synclulu-muted)] hover:text-[var(--synclulu-text)] transition-colors shadow-sm",children:i.jsx(gn,{size:20})}),i.jsx("h1",{className:"font-display text-xl font-bold text-[var(--synclulu-text)]",children:"Impressum"})]})}),i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"px-6 py-6 space-y-6",children:[i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(s_,{size:18,className:"text-[var(--synclulu-accent)]"}),i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg",children:"Angaben gem  5 TMG"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)] space-y-2",children:[i.jsx("p",{className:"text-[var(--synclulu-text)] font-medium",children:"Butterbread UG (haftungsbeschrnkt)"}),i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"Musterstrae 123"}),i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"12345 Musterstadt"}),i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"Deutschland"})]})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(wa,{size:18,className:"text-[var(--synclulu-accent)]"}),i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg",children:"Kontakt"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)] space-y-2",children:[i.jsxs("p",{className:"text-[var(--synclulu-muted)] flex items-center gap-2",children:[i.jsx(wa,{size:14,className:"text-[var(--synclulu-accent)]"}),i.jsx("span",{className:"text-[var(--synclulu-text)]",children:"E-Mail:"})," kontakt@synclulu.app"]}),i.jsxs("p",{className:"text-[var(--synclulu-muted)] flex items-center gap-2",children:[i.jsx(tX,{size:14,className:"text-[var(--synclulu-accent)]"}),i.jsx("span",{className:"text-[var(--synclulu-text)]",children:"Telefon:"})," +49 (0) 123 456789"]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg mb-3",children:"Vertreten durch"}),i.jsx("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)]",children:i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"Geschftsfhrer: Jan Hundsdorff"})})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(l_,{size:18,className:"text-[var(--synclulu-accent)]"}),i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg",children:"Handelsregister"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)] space-y-2",children:[i.jsxs("p",{className:"text-[var(--synclulu-muted)]",children:[i.jsx("span",{className:"text-[var(--synclulu-text)]",children:"Registergericht:"})," Amtsgericht Musterstadt"]}),i.jsxs("p",{className:"text-[var(--synclulu-muted)]",children:[i.jsx("span",{className:"text-[var(--synclulu-text)]",children:"Registernummer:"})," HRB 12345"]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg mb-3",children:"Umsatzsteuer-ID"}),i.jsx("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)]",children:i.jsxs("p",{className:"text-[var(--synclulu-muted)]",children:["Umsatzsteuer-Identifikationsnummer gem  27 a Umsatzsteuergesetz:",i.jsx("br",{}),i.jsx("span",{className:"text-[var(--synclulu-accent)] font-medium",children:"DE 123456789"})]})})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(YR,{size:18,className:"text-[var(--synclulu-accent)]"}),i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg",children:"Verantwortlich fr den Inhalt"})]}),i.jsxs("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)] space-y-2",children:[i.jsx("p",{className:"text-[var(--synclulu-text)] font-medium",children:"Jan Hundsdorff"}),i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"Musterstrae 123"}),i.jsx("p",{className:"text-[var(--synclulu-muted)]",children:"12345 Musterstadt"}),i.jsx("p",{className:"text-xs text-[var(--synclulu-muted)] mt-2 opacity-60",children:"( 55 Abs. 2 RStV)"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"font-semibold text-[var(--synclulu-text)] text-lg mb-3",children:"Streitschlichtung"}),i.jsx("div",{className:"bg-[var(--synclulu-card)] rounded-2xl p-4 shadow-sm border border-[var(--synclulu-border)]",children:i.jsxs("p",{className:"text-[var(--synclulu-muted)] text-sm leading-relaxed",children:["Die Europische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit:",i.jsx("br",{}),i.jsx("a",{href:"https://ec.europa.eu/consumers/odr",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--synclulu-accent)] hover:underline",children:"https://ec.europa.eu/consumers/odr"}),i.jsx("br",{}),i.jsx("br",{}),"Unsere E-Mail-Adresse finden Sie oben im Impressum.",i.jsx("br",{}),i.jsx("br",{}),"Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen."]})})]}),i.jsxs("div",{className:"text-center text-xs text-[var(--synclulu-muted)] pt-4 opacity-60",children:[i.jsx("span",{className:"text-lg mr-2",children:""}),"Stand: Februar 2026"]})]})]})};function mT(t="light"){if(typeof navigator<"u"&&navigator.vibrate){const e={light:10,medium:25,heavy:50};navigator.vibrate(e[t])}}const rD=_.memo(({title:t,content:e,onAccept:n,onBack:r,showAcceptButton:s=!0,acceptButtonText:a="Verstanden & Akzeptiert"})=>i.jsxs("div",{className:"min-h-screen p-4 pt-6 pb-32",style:{backgroundColor:"#050505"},children:[r&&i.jsxs(U.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},onClick:()=>{mT("light"),r()},className:"mb-6 flex items-center gap-2 text-white/40 hover:text-white/60 transition-colors",children:[i.jsx(ni,{size:20}),i.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Zurck"})]}),i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-[32px] p-8",style:{background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("h1",{className:"text-2xl font-black italic mb-8 tracking-tight uppercase",style:{color:"#a855f7"},children:t}),i.jsx("div",{className:"space-y-6 text-sm leading-relaxed font-medium",style:{color:"#9ca3af"},children:typeof e=="string"?i.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):e}),s&&n&&i.jsx(U.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},onClick:()=>{mT("medium"),n()},className:"mt-12 w-full py-4 rounded-2xl text-[11px] font-black uppercase tracking-[0.15em] transition-all",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.6)"},children:a})]}),i.jsx(U.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center mt-6 text-[10px] uppercase tracking-widest",style:{color:"rgba(255, 255, 255, 0.2)"},children:"Zuletzt aktualisiert: Februar 2026"})]}));rD.displayName="LegalScreen";const Yi=_.memo(({title:t,children:e})=>i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider mb-3",style:{color:"rgba(255, 255, 255, 0.5)"},children:t}),i.jsx("div",{className:"space-y-3",style:{color:"#9ca3af"},children:e})]}));Yi.displayName="LegalSection";const Hb=_.memo(({items:t})=>i.jsx("ul",{className:"space-y-2 pl-4",children:t.map((e,n)=>i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{style:{color:"#a855f7"},children:""}),i.jsx("span",{children:e})]},n))}));Hb.displayName="LegalList";const Uv=()=>{const t=yt();return i.jsx(rD,{title:"Datenschutz",onBack:()=>t(-1),showAcceptButton:!1,content:i.jsxs(i.Fragment,{children:[i.jsx(Yi,{title:"1. Datenschutz auf einen Blick",children:i.jsx("p",{children:"Die folgenden Hinweise geben einen einfachen berblick darber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese App nutzen. Personenbezogene Daten sind alle Daten, mit denen Sie persnlich identifiziert werden knnen."})}),i.jsxs(Yi,{title:"2. Welche Daten erfassen wir?",children:[i.jsx(Hb,{items:["Registrierungsdaten (E-Mail, Benutzername, Passwort)","Profilinformationen (Avatar, Bio, Display-Name)","Nutzungsdaten (Level, XP, Voice-Minuten, Sterne)","Standortdaten (bei aktivierter Standortfreigabe)","Gerte-Informationen"]}),i.jsx("p",{className:"mt-4",children:"Ihre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen (z.B. bei der Registrierung). Andere Daten werden automatisch beim Nutzen der App durch unsere IT-Systeme erfasst."})]}),i.jsxs(Yi,{title:"3. Standortdaten",children:[i.jsx("p",{children:"synclulu nutzt Standortdaten, um Nutzer in deiner Nhe zu finden und Voice-Rume basierend auf der Region anzuzeigen. Die Standortfreigabe ist optional und kann jederzeit in den Einstellungen deaktiviert werden."}),i.jsxs("p",{className:"mt-3",style:{color:"#a855f7"},children:[i.jsx("strong",{children:"Wichtig:"})," Wir speichern keine genauen GPS-Koordinaten, sondern nur eine ungefhre Region (z.B. Stadt oder Stadtteil)."]})]}),i.jsxs(Yi,{title:"4. Voice-Chat Daten",children:[i.jsxs("p",{children:["Voice-Chats werden ",i.jsx("strong",{style:{color:"#10b981"},children:"nicht"})," aufgezeichnet oder gespeichert. Alle Gesprche sind live und werden nach Beendigung nicht archiviert."]}),i.jsx("p",{className:"mt-3",children:"Wir erfassen lediglich Metadaten wie Dauer der Teilnahme (zur XP-Berechnung) und Bewertungen durch andere Nutzer."})]}),i.jsxs(Yi,{title:"5. Ihre Rechte",children:[i.jsx("p",{children:"Sie haben jederzeit das Recht:"}),i.jsx(Hb,{items:["Auskunft ber Ihre gespeicherten Daten zu erhalten","Berichtigung unrichtiger Daten zu verlangen","Lschung Ihrer Daten zu verlangen","Die Verarbeitung einzuschrnken","Datenbertragbarkeit zu verlangen","Widerspruch gegen die Verarbeitung einzulegen"]})]}),i.jsx(Yi,{title:"6. Datenlschung",children:i.jsx("p",{children:'ber die Einstellungen  "Account lschen" knnen Sie Ihre gesamten Daten unwiderruflich lschen. Nach Besttigung werden alle personenbezogenen Daten innerhalb von 30 Tagen vollstndig entfernt.'})}),i.jsxs(Yi,{title:"7. Kontakt",children:[i.jsx("p",{children:"Bei Fragen zum Datenschutz erreichen Sie uns unter:"}),i.jsxs("div",{className:"mt-3 p-4 rounded-xl",style:{background:"rgba(255,255,255,0.03)"},children:[i.jsx("p",{children:i.jsx("strong",{style:{color:"white"},children:"Butterbread UG (haftungsbeschrnkt)"})}),i.jsx("p",{className:"mt-2",children:"Musterstrae 123"}),i.jsx("p",{children:"12345 Musterstadt"}),i.jsx("p",{className:"mt-2",style:{color:"#a855f7"},children:"datenschutz@synclulu.app"})]})]}),i.jsx(Yi,{title:"8. nderungen",children:i.jsx("p",{children:"Wir behalten uns vor, diese Datenschutzerklrung anzupassen, damit sie stets den aktuellen rechtlichen Anforderungen entspricht oder um nderungen unserer Leistungen umzusetzen."})})]})})},xre=[{id:"agb",title:"AGB",subtitle:"Allgemeine Geschftsbedingungen",icon:l_,color:"#a855f7"},{id:"nutzung",title:"Nutzerbestimmungen",subtitle:"Haftung & User-Content",icon:kt,color:"#ec4899"},{id:"datenschutz",title:"Datenschutz",subtitle:"GPS, Audio & Privatsphre",icon:zs,color:"#22d3ee"},{id:"impressum",title:"Impressum",subtitle:"Anbieterkennzeichnung",icon:s_,color:"#f97316"}],yre=()=>i.jsxs("div",{className:"space-y-6 text-sm text-white/70 leading-relaxed",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 1 Geltungsbereich"}),i.jsx("p",{children:'Diese Allgemeinen Geschftsbedingungen gelten fr die Nutzung der synclulu-Plattform (nachfolgend "App" oder "Dienst"). Mit der Registrierung und Nutzung der App akzeptieren Sie diese AGB in vollem Umfang.'})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 2 Verhaltensregeln"}),i.jsx("p",{className:"mb-2",children:"Bei der Nutzung von synclulu verpflichten Sie sich:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-white/60 pl-2",children:[i.jsx("li",{children:"Respektvoll mit anderen Nutzern umzugehen"}),i.jsx("li",{children:"Keine beleidigenden, diskriminierenden oder bedrohenden Inhalte zu verbreiten"}),i.jsx("li",{children:"Keine illegalen Aktivitten zu frdern"}),i.jsx("li",{children:"Die Privatsphre anderer zu respektieren"}),i.jsx("li",{children:"Keine Spam-Nachrichten zu versenden"}),i.jsx("li",{children:"Keine falschen Identitten zu verwenden"})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 3 Altersfreigabe"}),i.jsx("p",{children:"Die Nutzung von synclulu ist erst ab 18 Jahren gestattet. Mit der Registrierung besttigen Sie, dass Sie mindestens 18 Jahre alt sind."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 4 Kontofhrung"}),i.jsx("p",{children:"Jeder Nutzer darf nur ein Konto fhren. Das Teilen von Zugangsdaten ist untersagt. Sie sind fr alle Aktivitten unter Ihrem Konto verantwortlich."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 5 Sperrung & Kndigung"}),i.jsx("p",{children:"Wir behalten uns das Recht vor, Konten bei Versten vorbergehend oder dauerhaft zu sperren. Sie knnen Ihr Konto jederzeit in den Einstellungen lschen."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" 6 Schlussbestimmungen"}),i.jsx("p",{children:"Es gilt das Recht der Bundesrepublik Deutschland. Gerichtsstand ist, soweit gesetzlich zulssig, der Sitz des Betreibers."})]}),i.jsx("p",{className:"text-white/40 text-xs mt-8",children:"Stand: Februar 2026"})]}),vre=()=>i.jsxs("div",{className:"space-y-6 text-sm text-white/70 leading-relaxed",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"1. User-Generated Content"}),i.jsx("p",{children:"synclulu ermglicht das Erstellen und Teilen von Inhalten durch Nutzer: Profilinformationen, Chat-Nachrichten, Sprachbeitrge und Medien."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"2. Haftungsausschluss"}),i.jsx("div",{className:"p-4 rounded-xl mb-3",style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)"},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(HR,{size:18,className:"text-amber-400 flex-shrink-0 mt-0.5"}),i.jsx("p",{className:"text-amber-200/80 text-xs",children:"synclulu ist nicht verantwortlich fr Inhalte, die von Nutzern erstellt werden. Jeder Nutzer trgt die alleinige Verantwortung fr seine Beitrge."})]})}),i.jsx("p",{children:"Wir berprfen nicht aktiv alle nutzergenerierten Inhalte und knnen keine Garantie fr deren Richtigkeit oder Rechtmigkeit bernehmen."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"3. XP & Level-System"}),i.jsx("p",{children:"XP werden fr positive Interaktionen vergeben. Manipulation fhrt zur Kontosperre. XP und Level haben keinen monetren Wert und sind nicht bertragbar."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"4. Wlkchen (Rume)"}),i.jsx("p",{children:"Ersteller eines Wlkchens sind fr die Moderation verantwortlich. Wir knnen Wlkchen bei Regelversten schlieen."})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"5. Konsequenzen bei Versten"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-white/60 pl-2",children:[i.jsx("li",{children:"Verwarnung"}),i.jsx("li",{children:"Temporre Sperre (1-30 Tage)"}),i.jsx("li",{children:"Permanente Kontosperrung"}),i.jsx("li",{children:"Anzeige bei Behrden bei Straftaten"})]})]}),i.jsx("p",{className:"text-white/40 text-xs mt-8",children:"Stand: Februar 2026"})]}),bre=()=>i.jsxs("div",{className:"space-y-6 text-sm text-white/70 leading-relaxed",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"1. Verantwortlicher"}),i.jsxs("p",{children:["Verantwortlich fr die Datenverarbeitung:",i.jsx("br",{}),i.jsx("span",{className:"text-white/80",children:"synclulu  Jan Hundse"}),i.jsx("br",{}),"Kontakt: datenschutz@synclulu.app"]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-3",children:"2. Erhobene Daten"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(_a,{size:18,className:"text-blue-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Standortdaten (GPS)"})]}),i.jsx("p",{className:"text-white/60 text-xs",children:"Wir erheben Ihren Standort, um nahegelegene Rume und Nutzer anzuzeigen. Die Standortfreigabe ist optional. Sie knnen die Genauigkeit anpassen oder den Zugriff komplett deaktivieren. Ihr genauer Standort wird nie anderen Nutzern angezeigt  nur eine ungefhre Entfernung."})]}),i.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(li,{size:18,className:"text-violet-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Audiodaten"})]}),i.jsxs("p",{className:"text-white/60 text-xs",children:["In Sprachrumen wird Ihr Mikrofon aktiviert, wenn Sie sprechen. Audiodaten werden in Echtzeit bertragen, aber ",i.jsx("span",{className:"text-white/80",children:"nicht dauerhaft gespeichert"}),". Wir zeichnen keine Gesprche auf. Die bertragung ist Ende-zu-Ende verschlsselt."]})]}),i.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(kt,{size:18,className:"text-emerald-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Profildaten"})]}),i.jsx("p",{className:"text-white/60 text-xs",children:"Name, Nutzername, Profilbild und Bio werden gespeichert und sind fr andere sichtbar. Sie knnen Ihre Sichtbarkeit in den Privatsphre-Einstellungen anpassen."})]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"3. Verwendungszwecke"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(ko,{size:14,className:"text-emerald-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:"Bereitstellung und Verbesserung der App"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(ko,{size:14,className:"text-emerald-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:"Personalisierung Ihrer Erfahrung"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(ko,{size:14,className:"text-emerald-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:"Sicherheit und Betrugsprvention"})]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"4. Ihre Rechte (DSGVO)"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-white/60 pl-2",children:[i.jsx("li",{children:"Auskunft ber Ihre gespeicherten Daten"}),i.jsx("li",{children:"Berichtigung unrichtiger Daten"}),i.jsx("li",{children:'Lschung ("Recht auf Vergessenwerden")'}),i.jsx("li",{children:"Einschrnkung der Verarbeitung"}),i.jsx("li",{children:"Datenbertragbarkeit"}),i.jsx("li",{children:"Widerspruch gegen die Verarbeitung"})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"5. Datensicherheit"}),i.jsx("p",{children:"Wir verwenden SSL-Verschlsselung, sichere Serverinfrastruktur und regelmige Sicherheitsaudits zum Schutz Ihrer Daten."})]}),i.jsx("p",{className:"text-white/40 text-xs mt-8",children:"Stand: Februar 2026"})]}),wre=()=>i.jsxs("div",{className:"space-y-6 text-sm text-white/70 leading-relaxed",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-3",children:"Angaben gem  5 TMG"}),i.jsxs("div",{className:"p-4 rounded-xl space-y-3",style:{background:"rgba(249, 115, 22, 0.1)",border:"1px solid rgba(249, 115, 22, 0.2)"},children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(s_,{size:18,className:"text-orange-400 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"synclulu"}),i.jsx("p",{children:"Jan Hundse (Einzelunternehmer)"})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(_a,{size:18,className:"text-orange-400 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{children:"Musterstrae 123"}),i.jsx("p",{children:"12345 Musterstadt, Deutschland"})]})]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-3",children:"Kontakt"}),i.jsx("div",{className:"p-4 rounded-xl",style:{background:"rgba(249, 115, 22, 0.1)",border:"1px solid rgba(249, 115, 22, 0.2)"},children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(wa,{size:18,className:"text-orange-400"}),i.jsx("a",{href:"mailto:contact@synclulu.app",className:"text-orange-400 hover:underline",children:"contact@synclulu.app"})]})})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"Verantwortlich fr den Inhalt"}),i.jsxs("p",{children:["Jan Hundse",i.jsx("br",{}),"Musterstrae 123",i.jsx("br",{}),"12345 Musterstadt"]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"EU-Streitschlichtung"}),i.jsxs("p",{children:["Online-Streitbeilegung:"," ",i.jsx("a",{href:"https://ec.europa.eu/consumers/odr/",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:underline",children:"ec.europa.eu/consumers/odr"})]})]}),i.jsx("p",{className:"text-white/40 text-xs mt-8",children:"Stand: Februar 2026"})]});function pT(){const t=yt(),[e,n]=_.useState("agb"),r=a=>{n(e===a?null:a)},s=a=>{switch(a){case"agb":return i.jsx(yre,{});case"nutzung":return i.jsx(vre,{});case"datenschutz":return i.jsx(bre,{});case"impressum":return i.jsx(wre,{})}};return i.jsxs("div",{className:"min-h-screen pb-32",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-5 py-4",style:{background:"rgba(5, 5, 5, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{whileTap:{scale:.95},onClick:()=>t(-1),className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-white/60"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(YR,{size:20,className:"text-purple-400"}),"Rechtliches"]}),i.jsx("p",{className:"text-xs text-white/40",children:"AGB, Datenschutz & Impressum"})]})]})}),i.jsxs("div",{className:"px-5 py-6 space-y-3",children:[i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-2xl mb-4",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 0 20px rgba(168, 85, 247, 0.1)"},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ir,{size:18,className:"text-purple-400 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-white/70",children:"Ihre Sicherheit und Privatsphre sind uns wichtig."}),i.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Bei Fragen: legal@synclulu.app"})]})]})}),xre.map((a,o)=>{const c=a.icon,u=e===a.id;return i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"rounded-2xl overflow-hidden",style:{background:u?`linear-gradient(135deg, ${a.color}15, ${a.color}05)`:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:u?`1px solid ${a.color}40`:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs(U.button,{whileTap:{scale:.98},onClick:()=>r(a.id),className:"w-full p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:u?`${a.color}20`:"rgba(255, 255, 255, 0.05)",border:`1px solid ${u?`${a.color}40`:"rgba(255, 255, 255, 0.1)"}`},children:i.jsx(c,{size:18,style:{color:u?a.color:"rgba(255, 255, 255, 0.5)"}})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-white",children:a.title}),i.jsx("p",{className:"text-xs text-white/40",children:a.subtitle})]})]}),i.jsx(U.div,{animate:{rotate:u?180:0},transition:{duration:.2},children:i.jsx(o_,{size:20,className:"text-white/40"})})]}),i.jsx(qt,{children:u&&i.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:i.jsx("div",{className:"px-4 pb-4",children:i.jsx("div",{className:"p-4 rounded-xl",style:{background:"rgba(0, 0, 0, 0.3)"},children:s(a.id)})})})})]},a.id)}),i.jsx("div",{className:"pt-6 text-center",children:i.jsx("p",{className:"text-xs text-white/30",children:" 2026 synclulu  Alle Rechte vorbehalten"})})]})]})}const _re=()=>{const[t]=cf(),e=yt(),[n,r]=_.useState(""),[s,a]=_.useState(""),[o,c]=_.useState(!1),[u,h]=_.useState(!1),[m,g]=_.useState(!0),[x,v]=_.useState(""),[E,j]=_.useState(!1),[S,N]=_.useState(""),w=t.get("oobCode");_.useEffect(()=>{(async()=>{if(!w){v("Ungltiger oder abgelaufener Link"),g(!1);return}try{const P=await J7(Rt,w);N(P),g(!1)}catch{v("Dieser Link ist ungltig oder abgelaufen. Bitte fordere einen neuen an."),g(!1)}})()},[w]);const k={length:n.length>=8,uppercase:/[A-Z]/.test(n),lowercase:/[a-z]/.test(n),number:/[0-9]/.test(n),special:/[!@#$%^&*(),.?":{}|<>]/.test(n)},A=Object.values(k).filter(Boolean).length,D=A>=4,F=n===s&&s.length>0,C=async T=>{if(T.preventDefault(),v(""),!D){v("Bitte whle ein strkeres Passwort");return}if(!F){v("Die Passwrter stimmen nicht berein");return}if(!w){v("Ungltiger Reset-Link");return}h(!0);try{await X7(Rt,w,n),j(!0)}catch(P){P.code==="auth/expired-action-code"?v("Dieser Link ist abgelaufen. Bitte fordere einen neuen an."):P.code==="auth/invalid-action-code"?v("Dieser Link ist ungltig. Bitte fordere einen neuen an."):P.code==="auth/weak-password"?v("Das Passwort ist zu schwach."):v("Ein Fehler ist aufgetreten. Bitte versuche es erneut.")}finally{h(!1)}};return m?i.jsx("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-b from-violet-50 via-white to-purple-50 flex items-center justify-center px-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(uh,{children:i.jsx(gb,{size:120,className:"mx-auto mb-6"})}),i.jsx("div",{className:"animate-pulse",children:i.jsx("p",{className:"text-gray-600 font-medium",children:"Link wird berprft..."})})]})}):x&&!S?i.jsx("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-b from-violet-50 via-white to-purple-50 flex items-center justify-center px-6",children:i.jsxs("div",{className:"text-center max-w-sm",children:[i.jsx(uh,{children:i.jsx(dX,{size:140,className:"mx-auto mb-4"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-gray-900 mb-3",children:"Link ungltig"}),i.jsx("p",{className:"text-gray-500 mb-8",children:x}),i.jsx("button",{onClick:()=>e("/login"),className:"w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white font-display font-bold rounded-2xl shadow-lg",children:"Zurck zum Login"})]})}):E?i.jsx("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-b from-violet-50 via-white to-purple-50 flex items-center justify-center px-6",children:i.jsxs("div",{className:"text-center max-w-sm",children:[i.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-100 flex items-center justify-center mb-6",children:i.jsx(a_,{size:40,className:"text-green-600"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-gray-900 mb-3",children:"Passwort gendert! "}),i.jsx("p",{className:"text-gray-500 mb-8",children:"Dein Passwort wurde erfolgreich zurckgesetzt. Du kannst dich jetzt mit deinem neuen Passwort anmelden."}),i.jsx("button",{onClick:()=>e("/login"),className:"w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white font-display font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all",children:"Zum Login"})]})}):i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-b from-violet-50 via-white to-purple-50 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-violet-200/40 to-purple-300/30 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-20 left-0 w-56 h-56 bg-gradient-to-tr from-pink-200/30 to-violet-200/30 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 px-6 py-8 safe-top max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("button",{onClick:()=>e("/login"),className:"w-10 h-10 rounded-xl bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-sm border border-gray-100",children:i.jsx(gn,{size:20,className:"text-gray-600"})}),i.jsx("h1",{className:"font-display text-2xl font-bold text-gray-900",children:"Neues Passwort"})]}),i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(uh,{children:i.jsx(gb,{size:100})})}),i.jsxs("div",{className:"bg-violet-50 rounded-2xl p-4 mb-6 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Neues Passwort fr"}),i.jsx("p",{className:"font-semibold text-violet-700",children:S})]}),i.jsxs("form",{onSubmit:C,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Neues Passwort"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:o?"text":"password",value:n,onChange:T=>r(T.target.value),className:"w-full pl-12 pr-12 py-4 bg-white border-2 border-gray-200 rounded-2xl focus:border-violet-500 focus:outline-none transition-colors",required:!0}),i.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:o?i.jsx(ba,{size:18}):i.jsx(Fs,{size:18})})]}),n&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(T=>i.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-colors ${T<=A?A<=2?"bg-red-500":A===3?"bg-yellow-500":"bg-green-500":"bg-gray-200"}`},T))}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-1 ${k.length?"text-green-600":"text-gray-400"}`,children:[k.length?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),"Min. 8 Zeichen"]}),i.jsxs("div",{className:`flex items-center gap-1 ${k.uppercase?"text-green-600":"text-gray-400"}`,children:[k.uppercase?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),"Grobuchstabe"]}),i.jsxs("div",{className:`flex items-center gap-1 ${k.lowercase?"text-green-600":"text-gray-400"}`,children:[k.lowercase?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),"Kleinbuchstabe"]}),i.jsxs("div",{className:`flex items-center gap-1 ${k.number?"text-green-600":"text-gray-400"}`,children:[k.number?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),"Zahl"]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort besttigen"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:o?"text":"password",value:s,onChange:T=>a(T.target.value),className:`w-full pl-12 pr-12 py-4 bg-white border-2 rounded-2xl focus:outline-none transition-colors ${s?F?"border-green-500 focus:border-green-500":"border-red-500 focus:border-red-500":"border-gray-200 focus:border-violet-500"}`,required:!0}),s&&i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:F?i.jsx(ft,{size:18,className:"text-green-500"}):i.jsx(ln,{size:18,className:"text-red-500"})})]})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 px-4 py-3 rounded-xl",children:[i.jsx(HR,{size:16}),x]}),i.jsx("button",{type:"submit",disabled:u||!D||!F,className:"w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white font-display font-bold rounded-2xl shadow-lg shadow-violet-500/30 hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Wird gespeichert...":"Passwort speichern"})]})]})]})},Nre=async t=>{if(!t||t.trim().length===0)return{isValid:!1,error:"INVALID",message:"Kein Einladungscode angegeben"};const e=t.trim().toUpperCase();try{const n=await mt(ce(J,"invite_codes",e));if(!n.exists()){const s=it(Ve(J,"invite_codes"),$e("code","==",e)),a=await Ft(s);if(a.empty)return{isValid:!1,error:"INVALID",message:"Dieser Code existiert nicht"};const o=a.docs[0].data();return gT(o)}const r=n.data();return gT(r)}catch(n){return console.error("[InviteSystem] Validation error:",n),{isValid:!1,error:"INVALID",message:"Fehler bei der Validierung"}}},gT=t=>t.isActive?t.expiresAt&&t.expiresAt.toDate()<new Date?{isValid:!1,code:t,error:"EXPIRED",message:"Dieser Code ist abgelaufen"}:t.type!=="unlimited"&&t.usedCount>=t.maxUses?{isValid:!1,code:t,error:"USED_UP",message:"Dieser Code wurde bereits vollstndig eingelst"}:{isValid:!0,code:t}:{isValid:!1,code:t,error:"DEACTIVATED",message:"Dieser Code wurde deaktiviert"},xT=async(t,e,n)=>{var s;const r=t.trim().toUpperCase();try{const a=await mt(ce(J,"invite_codes",r));if(!a.exists())return!1;const o=a.data();await Ge(ce(J,"invite_codes",r),{usedCount:kr(1)}),await hr(ce(J,"referrals",`${o.creatorId}_${e}`),{referrerId:o.creatorId,referrerName:o.creatorName,referredId:e,referredName:n,inviteCode:r,status:"registered",createdAt:Ut(),registeredAt:Ut()}),await Ge(ce(J,"users",o.creatorId),{referralCount:kr(1),"stats.totalReferrals":kr(1)});const c=await mt(ce(J,"users",o.creatorId));if(c.exists()){const u=((s=c.data().premiumEndsAt)==null?void 0:s.toDate())||new Date,h=new Date(Math.max(u.getTime(),Date.now()));h.setDate(h.getDate()+7),await Ge(ce(J,"users",o.creatorId),{isPremium:!0,premiumEndsAt:st.fromDate(h)})}return console.log("[InviteSystem] Code used successfully:",{code:r,newUser:e,referrer:o.creatorId}),!0}catch(a){return console.error("[InviteSystem] Use code error:",a),!1}},kre=async(t,e,n)=>{if(!t||!t.includes("@"))return{success:!1,error:"Ungltige E-Mail-Adresse"};const r=t.toLowerCase().trim();try{const s=it(Ve(J,"waitlist"),$e("email","==",r)),a=await Ft(s);if(!a.empty)return{success:!0,position:a.docs[0].data().position};const o=it(Ve(J,"waitlist")),u=(await Ft(o)).size+1;return await hr(ce(J,"waitlist",r),{email:r,name:e||null,joinedAt:Ut(),status:"waiting",position:u,referralSource:n||null}),{success:!0,position:u}}catch(s){return console.error("[InviteSystem] Waitlist error:",s),{success:!1,error:"Fehler beim Beitreten zur Warteliste"}}},jre=t=>{sessionStorage.setItem("synclulu_invite_code",t.toUpperCase())},Ere=()=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-32 h-32 rounded-full border-2 border-purple-500/20 animate-ping"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-purple-500/30 animate-pulse"})}),i.jsx("div",{className:"relative w-20 h-20 mx-auto rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center",children:i.jsx(Ir,{size:32,className:"text-purple-400"})})]}),Sre=()=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:[...Array(8)].map((t,e)=>i.jsx("div",{className:"absolute w-2 h-2 bg-green-400 rounded-full animate-burst",style:{transform:`rotate(${e*45}deg) translateY(-40px)`,animationDelay:`${e*.1}s`}},e))}),i.jsx("div",{className:"relative w-20 h-20 mx-auto rounded-full bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center animate-bounce-once",children:i.jsx(Gp,{size:32,className:"text-green-400"})})]}),Tre=({onJoin:t,isLoading:e,position:n})=>{const[r,s]=_.useState(""),[a,o]=_.useState(""),[c,u]=_.useState(!1),h=async m=>{m.preventDefault(),await t(r,a),u(!0)};return c&&n?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-purple-500/20 flex items-center justify-center",children:i.jsx(ft,{size:28,className:"text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Du bist auf der Liste!"}),i.jsxs("p",{className:"text-gray-400 mb-4",children:["Position ",i.jsxs("span",{className:"text-purple-400 font-bold",children:["#",n]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Wir benachrichtigen dich, sobald ein Platz frei wird."})]}):i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:a,onChange:m=>o(m.target.value),placeholder:"Dein Name",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"E-Mail *"}),i.jsx("input",{type:"email",value:r,onChange:m=>s(m.target.value),placeholder:"deine@email.de",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"})]}),i.jsx("button",{type:"submit",disabled:e||!r,className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold flex items-center justify-center gap-2 hover:opacity-90 disabled:opacity-50 transition-all",children:e?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Fo,{size:18}),"Auf Warteliste setzen"]})})]})},yT=()=>{var we;const t=yt(),{code:e}=Ww(),[n]=cf(),[r,s]=_.useState(""),[a,o]=_.useState(null),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[g,x]=_.useState(""),[v,E]=_.useState(""),[j,S]=_.useState(""),[N,w]=_.useState(!1),[k,A]=_.useState(!1),[D,F]=_.useState(""),[C,T]=_.useState(),[P,L]=_.useState(!1);_.useEffect(()=>{const je=e||n.get("code")||n.get("invite");je&&(s(je.toUpperCase()),z(je))},[e,n]);const z=async je=>{const oe=je||r;if(oe.trim()){u(!0),F("");try{const K=await Nre(oe);o(K),K.isValid?(jre(oe),setTimeout(()=>m(!0),500),"vibrate"in navigator&&navigator.vibrate([50,30,50,30,100])):"vibrate"in navigator&&navigator.vibrate([100,50,100])}catch{o({isValid:!1,error:"INVALID",message:"Validierung fehlgeschlagen"})}finally{u(!1)}}},H=async je=>{var oe;if(je.preventDefault(),!(!(a!=null&&a.isValid)||!g||!v||!j)){A(!0),F("");try{const te=(await j0(Rt,g,v)).user;await hr(ce(J,"users",te.uid),{id:te.uid,email:te.email,displayName:j,username:j.toLowerCase().replace(/\s+/g,"_"),avatarUrl:null,createdAt:Ut(),onboardingCompleted:!1,level:1,xp:0,isPremium:!1,isCreator:!1,invitedBy:((oe=a.code)==null?void 0:oe.creatorId)||null,inviteCode:r}),await xT(r,te.uid,j),t("/onboarding")}catch(K){console.error("[Register] Error:",K),K.code==="auth/email-already-in-use"?F("Diese E-Mail wird bereits verwendet"):K.code==="auth/weak-password"?F("Passwort muss mindestens 6 Zeichen haben"):F("Registrierung fehlgeschlagen")}finally{A(!1)}}},B=async()=>{var je;if(a!=null&&a.isValid){A(!0),F("");try{const oe=new rs,te=(await o2(Rt,oe)).user;await hr(ce(J,"users",te.uid),{id:te.uid,email:te.email,displayName:te.displayName||"Anonym",username:(te.displayName||"user").toLowerCase().replace(/\s+/g,"_"),avatarUrl:te.photoURL,createdAt:Ut(),onboardingCompleted:!1,level:1,xp:0,isPremium:!1,isCreator:!1,invitedBy:((je=a.code)==null?void 0:je.creatorId)||null,inviteCode:r},{merge:!0}),await xT(r,te.uid,te.displayName||"Anonym"),t("/onboarding")}catch(oe){console.error("[Google Sign In] Error:",oe),F("Google Anmeldung fehlgeschlagen")}finally{A(!1)}}},Pe=async(je,oe)=>{L(!0);const K=await kre(je,oe,"registration_page");K.success&&K.position&&T(K.position),L(!1)};return i.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:Ot.dark.bg.primary},children:[i.jsx("div",{className:"p-4",children:i.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(ni,{size:20,className:"text-white"})})}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"font-display text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400",children:"synclulu"}),i.jsx("p",{className:"text-center text-gray-500 text-sm mt-1",children:"Invite-Only Beta"})]}),!a&&i.jsxs("div",{className:"w-full max-w-sm",children:[i.jsxs("div",{className:"rounded-3xl p-6 border",style:{background:Ot.dark.bg.secondary,borderColor:Ot.dark.border.default},children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-purple-500/10 flex items-center justify-center",children:i.jsx(Ci,{size:28,className:"text-purple-400"})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Hast du einen Einladungscode?"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"synclulu ist nur mit Einladung zugnglich"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx("input",{type:"text",value:r,onChange:je=>s(je.target.value.toUpperCase()),placeholder:"synclulu-XXXXXX",className:"w-full px-4 py-4 rounded-xl bg-white/5 border border-white/10 text-white text-center font-mono text-lg tracking-widest placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all uppercase"})}),i.jsx("button",{onClick:()=>z(),disabled:c||!r.trim(),className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold flex items-center justify-center gap-2 hover:opacity-90 disabled:opacity-50 transition-all",children:c?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(zs,{size:18}),"Code prfen"]})})]})]}),i.jsx("button",{onClick:()=>o({isValid:!1,error:"INVALID",message:"Kein Code"}),className:"w-full mt-4 py-3 text-gray-400 text-sm hover:text-white transition-colors",children:"Ich habe keinen Code"})]}),a&&!a.isValid&&i.jsx("div",{className:"w-full max-w-sm",children:i.jsxs("div",{className:"rounded-3xl p-6 border",style:{background:Ot.dark.bg.secondary,borderColor:Ot.dark.border.default},children:[i.jsx(Ere,{}),i.jsxs("div",{className:"text-center mt-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:a.error==="USED_UP"?"Code vollstndig eingelst":a.error==="EXPIRED"?"Code abgelaufen":"Zugang limitiert"}),i.jsx("p",{className:"text-gray-400 text-sm",children:a.message||"Tritt der Warteliste bei, um benachrichtigt zu werden"})]}),i.jsx(Tre,{onJoin:Pe,isLoading:P,position:C}),i.jsx("button",{onClick:()=>{o(null),s("")},className:"w-full mt-4 py-3 text-gray-400 text-sm hover:text-white transition-colors",children:"Anderen Code eingeben"})]})}),(a==null?void 0:a.isValid)&&i.jsxs("div",{className:"w-full max-w-sm",children:[i.jsx("div",{className:"rounded-3xl p-6 border",style:{background:Ot.dark.bg.secondary,borderColor:Ot.dark.border.default},children:h?i.jsxs(i.Fragment,{children:[i.jsx(Sre,{}),i.jsxs("div",{className:"text-center mt-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Willkommen im Club! "}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Eingeladen von"," ",i.jsx("span",{className:"text-purple-400 font-semibold",children:((we=a.code)==null?void 0:we.creatorName)||"einem Freund"})]})]}),D&&i.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm text-center",children:D}),i.jsxs("form",{onSubmit:H,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Z0,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),i.jsx("input",{type:"text",value:j,onChange:je=>S(je.target.value),placeholder:"Dein Name",required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"E-Mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(wa,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),i.jsx("input",{type:"email",value:g,onChange:je=>x(je.target.value),placeholder:"deine@email.de",required:!0,className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Passwort"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),i.jsx("input",{type:N?"text":"password",value:v,onChange:je=>E(je.target.value),placeholder:"",required:!0,minLength:6,className:"w-full pl-12 pr-12 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"}),i.jsx("button",{type:"button",onClick:()=>w(!N),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:N?i.jsx(ba,{size:18}):i.jsx(Fs,{size:18})})]})]}),i.jsx("button",{type:"submit",disabled:k,className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold flex items-center justify-center gap-2 hover:opacity-90 disabled:opacity-50 transition-all",children:k?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(fr,{size:18}),"Account erstellen"]})})]}),i.jsxs("div",{className:"flex items-center gap-4 my-6",children:[i.jsx("div",{className:"flex-1 h-px bg-white/10"}),i.jsx("span",{className:"text-gray-500 text-sm",children:"oder"}),i.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),i.jsxs("button",{onClick:B,disabled:k,className:"w-full py-3 rounded-xl bg-white/5 border border-white/10 text-white font-medium flex items-center justify-center gap-3 hover:bg-white/10 disabled:opacity-50 transition-all",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Mit Google fortfahren"]})]}):i.jsx("div",{className:"py-8",children:i.jsx("div",{className:"w-12 h-12 mx-auto border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})})}),i.jsxs("p",{className:"text-center mt-6 text-gray-400 text-sm",children:["Bereits registriert?"," ",i.jsx("button",{onClick:()=>t("/login"),className:"text-purple-400 hover:text-purple-300 font-semibold",children:"Anmelden"})]})]})]}),i.jsx("style",{children:`
        @keyframes burst {
          0% {
            transform: rotate(var(--rotation)) translateY(0) scale(1);
            opacity: 1;
          }
          100% {
            transform: rotate(var(--rotation)) translateY(-60px) scale(0);
            opacity: 0;
          }
        }
        .animate-burst {
          animation: burst 0.6s ease-out forwards;
        }
        @keyframes bounce-once {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
        }
        .animate-bounce-once {
          animation: bounce-once 0.5s ease-out;
        }
      `})]})},ls={maxUsers:10,waitlistEnabled:!0,referralRewardStars:5,referralRewardNewUser:5,referralPremiumDays:1,founderEmail:"jan@synclulu.app",founderRadius:4e7,premiumRadius:15e3,standardRadius:5e3};async function sD(){try{const t=await mt(ce(J,"system","stats"));let e=0,n=0;t.exists()&&(e=t.data().totalUsers||0,n=t.data().waitlistCount||0);const r=await Are();return{currentUsers:e,maxUsers:r,isFull:e>=r,spotsRemaining:Math.max(0,r-e),waitlistCount:n}}catch(t){return(t==null?void 0:t.code)==="permission-denied"?console.warn("[Gatekeeper] Permission denied - using defaults (user likely not authenticated)"):console.error("Error checking capacity:",t),{currentUsers:0,maxUsers:ls.maxUsers,isFull:!1,spotsRemaining:ls.maxUsers,waitlistCount:0}}}async function Are(){try{const t=await mt(ce(J,"system","config"));if(t.exists()&&t.data().maxUsers)return t.data().maxUsers}catch(t){(t==null?void 0:t.code)!=="permission-denied"&&console.warn("[Gatekeeper] Error getting max user cap:",t)}return ls.maxUsers}async function iD(){const t=await sD();return t.isFull?{canRegister:!1,reason:"Die Cloud ist derzeit voll besetzt. ",capacity:t}:{canRegister:!0,capacity:t}}async function Ire(t,e){try{const n=t.toLowerCase().replace(/[^a-z0-9]/g,"_");return await hr(ce(J,"waitlist",n),{email:t.toLowerCase(),referralCode:e||null,joinedAt:Ut(),notified:!1,converted:!1}),await Ge(ce(J,"system","stats"),{waitlistCount:kr(1)}),{success:!0,position:(await Ft(it(Ve(J,"waitlist"),$e("converted","==",!1)))).size}}catch(n){return console.error("Error adding to waitlist:",n),{success:!1,position:0}}}function Cre(t){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="";for(let r=0;r<6;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return`${n}-${t.slice(-4).toUpperCase()}`}async function Rre(t,e){const n=Cre(t);return await hr(ce(J,"referrals",n),{referrerId:t,referrerUsername:e,code:n,usedBy:[],totalRewards:0,createdAt:Ut()}),await Ge(ce(J,"users",t),{referralCode:n,referralLink:`https://synclulu.app/join/${n}`}),n}async function aD(t){if(!t)return{valid:!1};try{const e=await mt(ce(J,"referrals",t.toUpperCase()));if(e.exists()){const n=e.data();return{valid:!0,referrerId:n.referrerId,referrerUsername:n.referrerUsername}}return{valid:!1}}catch(e){return(e==null?void 0:e.code)==="permission-denied"?console.warn("[Gatekeeper] Permission denied validating referral - user not authenticated"):console.error("Error validating referral:",e),{valid:!1}}}async function Pre(t,e,n){try{const r=await mt(ce(J,"referrals",t.toUpperCase()));if(!r.exists())return!1;const s=r.data(),a=s.referrerId;return await Ge(ce(J,"referrals",t.toUpperCase()),{usedBy:[...s.usedBy||[],e],totalRewards:kr(ls.referralRewardStars)}),await Ge(ce(J,"users",a),{nebulaStars:kr(ls.referralRewardStars),referralCount:kr(1),lastReferralAt:Ut()}),await Ge(ce(J,"users",e),{nebulaStars:kr(ls.referralRewardNewUser),referredBy:a,referredByCode:t}),await hr(ce(Ve(J,"notifications")),{userId:a,type:"referral_reward",title:" Neue Empfehlung!",message:`${n} ist durch deinen Link beigetreten. Du erhltst ${ls.referralRewardStars} Nebula-Sterne! `,read:!1,createdAt:Ut()}),!0}catch(r){return console.error("Error applying referral reward:",r),!1}}function oD(){const t=new URLSearchParams(window.location.search),e=t.get("ref")||t.get("invite");if(e)return localStorage.setItem("synclulu_referral_code",e.toUpperCase()),e.toUpperCase();const n=window.location.pathname.match(/\/(?:join|invite)\/([A-Z0-9-]+)/i);if(n){const r=n[1].toUpperCase();return localStorage.setItem("synclulu_referral_code",r),r}return localStorage.getItem("synclulu_referral_code")}function Dre(){localStorage.removeItem("synclulu_referral_code")}async function Mre(t,e){e.toLowerCase()===ls.founderEmail.toLowerCase()&&await Ge(ce(J,"users",t),{role:"founder",isAdmin:!0,isPremium:!0,premiumUntil:new Date("2099-12-31T23:59:59Z"),subscription:"nebula_active",subscriptionEnd:new Date("2099-12-31T23:59:59Z"),searchRadius:ls.founderRadius,founderSince:Ut()})}async function Lre(){try{await Ge(ce(J,"system","stats"),{totalUsers:kr(1),lastRegistrationAt:Ut()})}catch{await hr(ce(J,"system","stats"),{totalUsers:1,waitlistCount:0,lastRegistrationAt:Ut()},{merge:!0})}}async function vT(t,e,n,r){try{const s=await iD();if(!s.canRegister)return{success:!1,error:s.reason,errorCode:"CAPACITY_FULL"};await Lre(),await Mre(t,e),await Rre(t,n);let a=!1;return r&&(await aD(r)).valid&&(await Pre(r,t,n),a=!0),Dre(),{success:!0,userId:t,referralApplied:a}}catch(s){return console.error("Registration error:",s),{success:!1,error:"Ein unerwarteter Fehler ist aufgetreten.",errorCode:"UNKNOWN"}}}const Ore={error:{bg:"rgba(239, 68, 68, 0.1)",border:"rgba(239, 68, 68, 0.4)",glow:"rgba(239, 68, 68, 0.3)",text:"#F87171",icon:""},warning:{bg:"rgba(245, 158, 11, 0.1)",border:"rgba(245, 158, 11, 0.4)",glow:"rgba(245, 158, 11, 0.3)",text:"#FBBF24",icon:""},info:{bg:"rgba(139, 92, 246, 0.1)",border:"rgba(139, 92, 246, 0.4)",glow:"rgba(139, 92, 246, 0.3)",text:"#A78BFA",icon:""}};function Vre({message:t,severity:e="error",icon:n,onDismiss:r,dismissible:s=!0,className:a=""}){const o=Ore[e];return i.jsxs(U.div,{className:`relative px-4 py-3 rounded-xl ${a}`,style:{background:o.bg,border:`1px solid ${o.border}`,boxShadow:`0 0 20px ${o.glow}, inset 0 0 20px ${o.glow}`},initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{type:"spring",damping:20},children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(U.span,{className:"text-lg flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:n||o.icon}),i.jsx("p",{className:"text-sm flex-1",style:{color:o.text},children:t}),s&&r&&i.jsx(U.button,{onClick:r,className:"text-lg opacity-50 hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},children:""})]}),i.jsx(U.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{border:`1px solid ${o.border}`,opacity:.5},animate:{boxShadow:[`0 0 10px ${o.glow}`,`0 0 20px ${o.glow}`,`0 0 10px ${o.glow}`]},transition:{duration:2,repeat:1/0}})]})}function Ure({message:t,className:e=""}){return t?i.jsxs(U.p,{className:`text-xs mt-1 ${e}`,style:{color:"#F87171"},initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:[i.jsx("span",{className:"mr-1",children:""}),t]}):null}function Fre({message:t="Ldt..."}){return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(U.div,{className:"text-5xl mb-4",animate:{scale:[1,1.1,1],y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{filter:"drop-shadow(0 0 20px rgba(139, 92, 246, 0.5))"},children:""}),i.jsx(U.p,{className:"text-gray-400",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:t})]})}function zre({spotsRemaining:t=0,waitlistCount:e=0,onWaitlistJoined:n,onClose:r}){const[s,a]=_.useState(""),[o,c]=_.useState(!1),[u,h]=_.useState(!1),[m,g]=_.useState(null),[x,v]=_.useState(null),E=async j=>{if(j.preventDefault(),!(!s||o)){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){v("Bitte gib eine gltige E-Mail-Adresse ein.");return}c(!0),v(null);try{const S=oD(),N=await Ire(s,S||void 0);N.success?(h(!0),g(N.position),n==null||n(N.position)):v("Fehler beim Beitritt zur Warteliste.")}catch{v("Ein unerwarteter Fehler ist aufgetreten.")}finally{c(!1)}}};return i.jsxs(U.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{background:"#0b0b0b"},children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[...Array(5)].map((j,S)=>i.jsx(U.div,{className:"absolute text-6xl opacity-10",style:{left:`${10+S*20}%`,top:`${20+S%3*25}%`},animate:{y:[0,-20,0],x:[0,10,0],rotate:[0,5,-5,0]},transition:{duration:6+S,repeat:1/0,ease:"easeInOut",delay:S*.5},children:""},S)),i.jsx(U.div,{className:"absolute w-96 h-96 rounded-full opacity-20",style:{background:"radial-gradient(circle, #8B5CF6 0%, transparent 70%)",top:"-10%",right:"-10%"},animate:{scale:[1,1.2,1]},transition:{duration:8,repeat:1/0}}),i.jsx(U.div,{className:"absolute w-80 h-80 rounded-full opacity-15",style:{background:"radial-gradient(circle, #A78BFA 0%, transparent 70%)",bottom:"-5%",left:"-5%"},animate:{scale:[1.2,1,1.2]},transition:{duration:10,repeat:1/0}})]}),r&&i.jsx(U.button,{onClick:r,className:"absolute top-6 right-6 z-20 w-10 h-10 rounded-full flex items-center justify-center text-gray-400 hover:text-white transition-colors",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},whileHover:{scale:1.1},whileTap:{scale:.9},children:""}),i.jsxs(U.div,{className:"relative z-10 max-w-md w-full text-center",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[i.jsx(U.div,{className:"text-8xl mb-6 inline-block",animate:{y:[0,-10,0],rotate:[0,3,-3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},style:{filter:"drop-shadow(0 0 30px rgba(139, 92, 246, 0.5))"},children:""}),i.jsxs("h1",{className:"text-4xl font-bold text-white mb-4",children:["Die Cloud ist"," ",i.jsx("span",{style:{background:"linear-gradient(135deg, #A78BFA 0%, #8B5CF6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"voll besetzt"})]}),i.jsxs("p",{className:"text-gray-400 mb-8 text-lg",children:["Nur 10 auserwhlte Seelen schweben derzeit in unserer Cloud.",i.jsx("br",{}),"Aber keine Sorge  du kannst dich auf die Warteliste setzen. "]}),i.jsx(qt,{mode:"wait",children:u?i.jsxs(U.div,{className:"p-8 rounded-3xl",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[i.jsx(U.div,{className:"text-6xl mb-4",animate:{scale:[1,1.2,1]},transition:{duration:.5},children:""}),i.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Du bist auf der Liste!"}),m&&i.jsxs("p",{className:"text-purple-400 text-lg mb-4",children:["Deine Position: ",i.jsxs("strong",{children:["#",m]})]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Wir benachrichtigen dich, sobald ein Platz frei wird.",i.jsx("br",{}),"Halte die Wolken im Blick! "]})]},"success"):i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:s,onChange:j=>a(j.target.value),placeholder:"Deine E-Mail-Adresse",className:"w-full px-5 py-4 rounded-2xl text-white placeholder-gray-500 transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",outline:"none"},onFocus:j=>{j.target.style.borderColor="rgba(139, 92, 246, 0.5)",j.target.style.boxShadow="0 0 20px rgba(139, 92, 246, 0.2)"},onBlur:j=>{j.target.style.borderColor="rgba(255, 255, 255, 0.1)",j.target.style.boxShadow="none"}})}),x&&i.jsx(U.p,{className:"text-sm px-4 py-2 rounded-xl",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",color:"#F87171"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:x}),i.jsxs(U.button,{type:"submit",disabled:o||!s,className:"w-full py-4 rounded-2xl font-semibold text-white relative overflow-hidden disabled:opacity-50",style:{background:"linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%)"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(U.div,{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(90deg, transparent, white, transparent)"},animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),i.jsx("span",{className:"relative z-10",children:o?i.jsx(U.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"inline-block",children:""}):" Auf die Warteliste"})]})]}),e>0&&i.jsxs("p",{className:"text-gray-500 text-sm mt-4",children:[e," ",e===1?"Person wartet":"Personen warten"," bereits"]})]},"form")}),i.jsx("p",{className:"text-gray-600 text-xs mt-8",children:"synclulu  Where dreamers float together"})]})]})}const Bre=()=>i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute inset-0 bg-[#0b0b0b]"}),i.jsx(U.div,{className:"absolute top-1/4 -left-20 w-96 h-96 rounded-full",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, transparent 70%)",filter:"blur(60px)"},animate:{x:[0,30,0],y:[0,-20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),i.jsx(U.div,{className:"absolute bottom-1/4 -right-20 w-80 h-80 rounded-full",style:{background:"radial-gradient(circle, rgba(168, 85, 247, 0.12) 0%, transparent 70%)",filter:"blur(50px)"},animate:{x:[0,-25,0],y:[0,25,0],scale:[1,1.15,1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),i.jsx(U.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.08) 0%, transparent 60%)",filter:"blur(80px)"},animate:{rotate:360},transition:{duration:60,repeat:1/0,ease:"linear"}}),[...Array(20)].map((t,e)=>i.jsx(U.div,{className:"absolute w-1 h-1 rounded-full bg-purple-400/30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[.2,.5,.2]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},e))]}),$re=({current:t,max:e,isLoading:n})=>{const r=Math.max(0,e-t),s=t/e*100;return i.jsxs(U.div,{className:"relative px-5 py-3 rounded-2xl overflow-hidden",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 0 30px rgba(139, 92, 246, 0.2)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[i.jsx(U.div,{className:"absolute inset-0 rounded-2xl",style:{background:"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.2), transparent)"},animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0}}),i.jsxs("div",{className:"relative flex items-center gap-3",children:[i.jsx(U.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:i.jsx(kt,{size:20,className:"text-purple-400"})}),n?i.jsx(Nn,{size:16,className:"animate-spin text-purple-400"}):i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-400",children:r>0?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-purple-400 font-bold",children:r})," ","von ",e," Pltzen frei"]}):i.jsx("span",{className:"text-red-400",children:"Die Cloud ist voll"})}),i.jsx("div",{className:"mt-1.5 w-full h-1 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:s>=100?"linear-gradient(90deg, #EF4444, #F87171)":"linear-gradient(90deg, #8B5CF6, #A78BFA)"},initial:{width:0},animate:{width:`${Math.min(s,100)}%`},transition:{duration:1,ease:"easeOut"}})})]})]})]})},Wre=({referrerName:t})=>i.jsxs(U.div,{className:"flex items-center gap-2 px-4 py-2 rounded-xl",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[i.jsx(Ci,{size:16,className:"text-green-400"}),i.jsxs("span",{className:"text-sm text-green-400",children:["Eingeladen von ",i.jsx("strong",{children:t}),"  +5 Sterne Bonus!"]})]}),bp=({icon:t,type:e,value:n,onChange:r,placeholder:s,error:a,success:o,suffix:c,maxLength:u,autoFocus:h})=>i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:`relative flex items-center rounded-xl transition-all duration-300 ${a?"ring-2 ring-red-500/50":o?"ring-2 ring-green-500/50":"focus-within:ring-2 focus-within:ring-purple-500/50"}`,style:{background:"rgba(255, 255, 255, 0.03)",border:`1px solid ${a?"rgba(239, 68, 68, 0.3)":o?"rgba(34, 197, 94, 0.3)":"rgba(255, 255, 255, 0.1)"}`,backdropFilter:"blur(10px)"},children:[i.jsx("div",{className:"pl-4 text-gray-500",children:t}),i.jsx("input",{type:e,value:n,onChange:m=>r(m.target.value),placeholder:s,maxLength:u,autoFocus:h,className:"flex-1 px-3 py-4 bg-transparent text-white placeholder-gray-500 focus:outline-none"}),c&&i.jsx("div",{className:"pr-4",children:c})]}),a&&i.jsx(Ure,{message:a,className:"mt-1"})]}),Hre=({password:t})=>{const e=_.useMemo(()=>{let n=0;const r={length:t.length>=8,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[!@#$%^&*(),.?":{}|<>]/.test(t)};return r.length&&n++,r.uppercase&&n++,r.lowercase&&n++,r.number&&n++,r.special&&n++,{score:n,checks:r,label:n<=1?"Sehr schwach":n===2?"Schwach":n===3?"Mittel":n===4?"Stark":"Sehr stark",color:n<=1?"#EF4444":n===2?"#F59E0B":n===3?"#EAB308":n===4?"#22C55E":"#10B981"}},[t]);return t?i.jsxs(U.div,{className:"space-y-2 mt-2",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 h-1 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:e.color},initial:{width:0},animate:{width:`${e.score/5*100}%`}})}),i.jsx("span",{className:"text-xs",style:{color:e.color},children:e.label})]}),i.jsx("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[{key:"length",label:"Min. 8 Zeichen"},{key:"uppercase",label:"Grobuchstabe"},{key:"lowercase",label:"Kleinbuchstabe"},{key:"number",label:"Zahl"},{key:"special",label:"Sonderzeichen"}].map(n=>i.jsxs("div",{className:`flex items-center gap-1.5 ${e.checks[n.key]?"text-green-400":"text-gray-500"}`,children:[e.checks[n.key]?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),n.label]},n.key))})]}):null},bT=()=>{const t=yt(),[e]=cf(),[n,r]=_.useState({current:0,max:10,isFull:!1}),[s,a]=_.useState(!0),[o,c]=_.useState(!1),[u,h]=_.useState(""),[m,g]=_.useState(null),[x,v]=_.useState(null),[E,j]=_.useState(!1),[S,N]=_.useState(""),[w,k]=_.useState(""),[A,D]=_.useState(""),[F,C]=_.useState(!1),[T,P]=_.useState({}),[L,z]=_.useState(!1),[H,B]=_.useState(null),[Pe,we]=_.useState(null),[je,oe]=_.useState("");_.useEffect(()=>{(async()=>{try{const me=await sD();r({current:me.currentUsers,max:me.maxUsers,isFull:me.isFull}),me.isFull&&c(!0)}catch(me){console.error("Error checking capacity:",me)}finally{a(!1)}})()},[]),_.useEffect(()=>{const ge=oD();ge&&(h(ge),K(ge))},[e]);const K=_.useCallback(async ge=>{if(!ge||ge.length<5){g(null),v(null);return}j(!0);try{const me=await aD(ge);g(me.valid),v(me.valid?me.referrerUsername||"Ein Freund":null)}catch{g(!1)}finally{j(!1)}},[]);_.useEffect(()=>{const ge=setTimeout(()=>{u.length>=5?K(u):(g(null),v(null))},500);return()=>clearTimeout(ge)},[u,K]);const te=()=>{const ge={};return(!S||S.length<3)&&(ge.username="Mindestens 3 Zeichen"),(!w||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w))&&(ge.email="Gltige E-Mail erforderlich"),(!A||A.length<6)&&(ge.password="Mindestens 6 Zeichen"),P(ge),Object.keys(ge).length===0},ue=async ge=>{if(ge.preventDefault(),B(null),n.isFull){c(!0);return}if(te()){z(!0);try{const me=await iD();if(!me.canRegister){r({current:me.capacity.currentUsers,max:me.capacity.maxUsers,isFull:!0}),c(!0),z(!1);return}const jt=(await j0(Rt,w,A)).user;await hr(ce(J,"users",jt.uid),{id:jt.uid,email:jt.email,displayName:S,username:S.toLowerCase().replace(/[^a-z0-9_]/g,""),avatarUrl:null,createdAt:Ut(),onboardingCompleted:!1,level:1,xp:0,nebulaStars:m?ls.referralRewardNewUser:0,isPremium:!1,role:"user",searchRadius:ls.standardRadius,referredBy:m?x:null,referredByCode:m?u:null}),await vT(jt.uid,w,S,m?u:void 0),t("/onboarding")}catch(me){console.error("[Register] Error:",me),me.code==="auth/email-already-in-use"?P({email:"Diese E-Mail wird bereits verwendet"}):me.code==="auth/weak-password"?P({password:"Passwort ist zu schwach"}):me.code==="auth/invalid-email"?P({email:"Ungltige E-Mail Adresse"}):B("Registrierung fehlgeschlagen. Bitte versuche es erneut.")}finally{z(!1)}}},Re=async()=>{if(n.isFull){c(!0);return}z(!0),B(null);try{const ge=new rs,at=(await o2(Rt,ge)).user;await hr(ce(J,"users",at.uid),{id:at.uid,email:at.email,displayName:at.displayName||"Anonym",username:(at.displayName||"user").toLowerCase().replace(/\s+/g,"_"),avatarUrl:at.photoURL,createdAt:Ut(),onboardingCompleted:!1,level:1,xp:0,nebulaStars:m?ls.referralRewardNewUser:0,isPremium:!1,role:"user",searchRadius:ls.standardRadius,referredBy:m?x:null,referredByCode:m?u:null},{merge:!0}),await vT(at.uid,at.email||"",at.displayName||"User",m?u:void 0),t("/onboarding")}catch(ge){console.error("[Google Sign Up] Error:",ge),B("Google Anmeldung fehlgeschlagen")}finally{z(!1)}};return s?i.jsx("div",{className:"min-h-screen bg-[#0b0b0b] flex items-center justify-center",children:i.jsx(Fre,{message:"Prfe Verfgbarkeit..."})}):i.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[i.jsx(Bre,{}),i.jsx(qt,{children:o&&i.jsx(zre,{onClose:()=>c(!1),waitlistCount:n.current})}),i.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col px-6 py-8 safe-top safe-bottom",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsx(is,{to:"/",className:"w-12 h-12 rounded-xl flex items-center justify-center transition-colors",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-gray-400"})}),i.jsx($re,{current:n.current,max:n.max,isLoading:s})]}),i.jsxs(U.div,{className:"text-center mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsx(U.div,{className:"w-24 h-24 mx-auto rounded-3xl flex items-center justify-center mb-6",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(168, 85, 247, 0.2) 100%)",boxShadow:"0 0 60px rgba(139, 92, 246, 0.3)",border:"1px solid rgba(139, 92, 246, 0.3)"},animate:{boxShadow:["0 0 60px rgba(139, 92, 246, 0.3)","0 0 80px rgba(139, 92, 246, 0.4)","0 0 60px rgba(139, 92, 246, 0.3)"]},transition:{duration:3,repeat:1/0},children:i.jsx("span",{className:"text-5xl",children:""})}),i.jsx("h1",{className:"text-4xl font-black mb-2",style:{background:"linear-gradient(135deg, #A78BFA 0%, #C4B5FD 50%, #8B5CF6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Willkommen"}),i.jsx("p",{className:"text-gray-400",children:"Tritt der exklusiven Cloud bei"})]}),i.jsx(qt,{children:m&&x&&i.jsx(U.div,{className:"mb-6",children:i.jsx(Wre,{referrerName:x})})}),i.jsx(U.div,{className:"rounded-3xl p-6 mb-6",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:i.jsxs("form",{onSubmit:ue,className:"space-y-5",children:[i.jsx(bp,{icon:i.jsx(Z0,{size:18}),type:"text",value:S,onChange:ge=>N(ge.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"Benutzername",error:T.username,maxLength:20,autoFocus:!0}),i.jsx(bp,{icon:i.jsx(wa,{size:18}),type:"email",value:w,onChange:k,placeholder:"E-Mail Adresse",error:T.email}),i.jsxs("div",{children:[i.jsx(bp,{icon:i.jsx(Ir,{size:18}),type:F?"text":"password",value:A,onChange:D,placeholder:"Passwort",error:T.password,suffix:i.jsx("button",{type:"button",onClick:()=>C(!F),className:"text-gray-500 hover:text-white transition-colors",children:F?i.jsx(ba,{size:18}):i.jsx(Fs,{size:18})})}),i.jsx(Hre,{password:A})]}),i.jsx(bp,{icon:i.jsx(Ci,{size:18}),type:"text",value:u,onChange:ge=>h(ge.toUpperCase()),placeholder:"Einladungscode (optional)",error:m===!1&&u.length>=5?"Ungltiger Code":void 0,success:m===!0,maxLength:15,suffix:E?i.jsx(Nn,{size:16,className:"animate-spin text-gray-400"}):m===!0?i.jsx(ft,{size:16,className:"text-green-400"}):m===!1&&u.length>=5?i.jsx(ln,{size:16,className:"text-red-400"}):null}),i.jsx(qt,{children:H&&i.jsx(Vre,{message:H,severity:"error",onDismiss:()=>B(null)})}),i.jsxs(U.button,{type:"submit",disabled:L||n.isFull,className:"w-full py-4 rounded-xl font-semibold text-white relative overflow-hidden disabled:opacity-50",style:{background:"linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(U.div,{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),i.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:L?i.jsxs(i.Fragment,{children:[i.jsx(Nn,{size:20,className:"animate-spin"}),"Wird erstellt..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fr,{size:18}),"Account erstellen"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 h-px bg-white/10"}),i.jsx("span",{className:"text-gray-500 text-sm",children:"oder"}),i.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),i.jsxs(U.button,{onClick:Re,disabled:L||n.isFull,className:"w-full py-4 rounded-xl font-medium flex items-center justify-center gap-3 transition-all disabled:opacity-50",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},whileHover:{background:"rgba(255, 255, 255, 0.1)"},whileTap:{scale:.98},initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i.jsx("span",{className:"text-white",children:"Mit Google fortfahren"})]}),i.jsxs(U.p,{className:"text-center text-gray-400 mt-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["Bereits registriert?"," ",i.jsx(is,{to:"/login",className:"text-purple-400 font-semibold hover:text-purple-300 transition-colors",children:"Anmelden"})]}),i.jsxs(U.p,{className:"text-xs text-gray-500 text-center mt-6 px-4 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Mit der Registrierung akzeptierst du unsere"," ",i.jsx(is,{to:"/agb",className:"text-purple-400 hover:underline",children:"AGB"})," ","und"," ",i.jsx(is,{to:"/datenschutz",className:"text-purple-400 hover:underline",children:"Datenschutzerklrung"}),"."]})]})]})};function wT(){const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,a]=_.useState(""),[o,c]=_.useState(!1),[u,h]=_.useState(""),[m,g]=_.useState(!1),{signUp:x,signInWithGoogle:v}=Bs(),E=yt(),j={length:s.length>=8,uppercase:/[A-Z]/.test(s),lowercase:/[a-z]/.test(s),number:/[0-9]/.test(s)},S=Object.values(j).filter(Boolean).length,N=S>=3,w=async A=>{if(A.preventDefault(),h(""),t.length<3){h("Username muss mindestens 3 Zeichen haben");return}if(!N){h("Passwort ist zu schwach");return}g(!0);const D=await x(n,s,t);D.success?E("/"):h(D.error||"Registrierung fehlgeschlagen"),g(!1)},k=async()=>{h(""),g(!0);const A=await v();A.success?E("/"):h(A.error||"Google Registrierung fehlgeschlagen"),g(!1)};return i.jsx("div",{className:"sc-page sc-safe-top",style:{paddingBottom:"40px"},children:i.jsxs("div",{className:"sc-container",children:[i.jsxs("div",{className:"sc-flex sc-items-center sc-gap-md sc-mb-lg",children:[i.jsx(is,{to:"/",className:"sc-btn sc-btn-ghost",style:{padding:"12px"},children:i.jsx(gn,{size:20})}),i.jsx("h1",{className:"sc-title",style:{fontSize:"24px"},children:"Account erstellen"})]}),i.jsxs("div",{className:"sc-text-center sc-mb-xl",children:[i.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 16px",borderRadius:"20px",background:"var(--sc-gradient-primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"var(--sc-shadow-glow)"},children:i.jsx("span",{style:{fontSize:"40px"},children:""})}),i.jsx("p",{className:"sc-text",children:"Werde Teil der Community"})]}),i.jsx("div",{className:"sc-card sc-mb-lg sc-animate-slide-up",children:i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{className:"sc-input-group",children:[i.jsx("label",{className:"sc-label",children:"Benutzername"}),i.jsxs("div",{className:"sc-input-icon",children:[i.jsx(Z0,{size:18,className:"icon"}),i.jsx("input",{type:"text",className:"sc-input",value:t,onChange:A=>e(A.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"dein_username",maxLength:20,required:!0})]})]}),i.jsxs("div",{className:"sc-input-group",children:[i.jsx("label",{className:"sc-label",children:"E-Mail Adresse"}),i.jsxs("div",{className:"sc-input-icon",children:[i.jsx(wa,{size:18,className:"icon"}),i.jsx("input",{type:"email",className:"sc-input",value:n,onChange:A=>r(A.target.value),placeholder:"deine@email.de",required:!0})]})]}),i.jsxs("div",{className:"sc-input-group",children:[i.jsx("label",{className:"sc-label",children:"Passwort"}),i.jsxs("div",{className:"sc-input-icon",style:{position:"relative"},children:[i.jsx(Ir,{size:18,className:"icon"}),i.jsx("input",{type:o?"text":"password",className:"sc-input",style:{paddingRight:"48px"},value:s,onChange:A=>a(A.target.value),placeholder:"",required:!0}),i.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--sc-text-muted)",cursor:"pointer"},children:o?i.jsx(ba,{size:18}):i.jsx(Fs,{size:18})})]}),s&&i.jsxs("div",{className:"sc-mt-md",children:[i.jsx("div",{style:{height:"4px",background:"var(--sc-bg-tertiary)",borderRadius:"2px",overflow:"hidden",marginBottom:"12px"},children:i.jsx("div",{style:{height:"100%",width:`${S/4*100}%`,background:S<=1?"#EF4444":S===2?"#F59E0B":S===3?"#10B981":"#22D3EE",transition:"all 0.3s ease"}})}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px"},children:[{key:"length",label:"Min. 8 Zeichen",check:j.length},{key:"uppercase",label:"Grobuchstabe",check:j.uppercase},{key:"lowercase",label:"Kleinbuchstabe",check:j.lowercase},{key:"number",label:"Zahl",check:j.number}].map(A=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:A.check?"var(--sc-success)":"var(--sc-text-muted)"},children:[A.check?i.jsx(ft,{size:12}):i.jsx(ln,{size:12}),A.label]},A.key))})]})]}),u&&i.jsx("div",{className:"sc-alert sc-alert-error sc-mb-md",children:u}),i.jsx("button",{type:"submit",disabled:m,className:"sc-btn sc-btn-primary sc-btn-full sc-btn-lg",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Nn,{size:20,className:"sc-animate-spin"}),"Wird erstellt..."]}):"Account erstellen"})]})}),i.jsxs("div",{className:"sc-divider",children:[i.jsx("div",{className:"sc-divider-line"}),i.jsx("span",{className:"sc-divider-text",children:"oder"}),i.jsx("div",{className:"sc-divider-line"})]}),i.jsxs("button",{onClick:k,disabled:m,className:"sc-btn sc-btn-secondary sc-btn-full sc-btn-lg sc-mb-xl",children:[i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Mit Google registrieren"]}),i.jsxs("p",{className:"sc-text-center sc-text",children:["Schon registriert?"," ",i.jsx(is,{to:"/login",className:"sc-link",children:"Anmelden"})]}),i.jsxs("p",{className:"sc-text-center sc-text-sm sc-mt-lg",style:{padding:"0 16px"},children:["Mit der Registrierung akzeptierst du unsere"," ",i.jsx(is,{to:"/impressum",className:"sc-link",children:"AGB"})," ","und"," ",i.jsx(is,{to:"/datenschutz",className:"sc-link",children:"Datenschutzerklrung"}),"."]})]})})}const Gb=({children:t,className:e="",glow:n})=>i.jsx("div",{className:`rounded-2xl ${e}`,style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:n?`0 0 30px ${n}`:void 0},children:t}),wp=({icon:t,value:e,label:n,color:r,subtitle:s})=>i.jsxs(Gb,{className:"p-4 text-center",glow:`${r}20`,children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r}40, ${r}20)`,border:`1px solid ${r}50`,boxShadow:`0 0 15px ${r}30`},children:t}),i.jsx("p",{className:"text-2xl font-black text-white",children:e}),i.jsx("p",{className:"text-xs text-white/60 font-medium mt-1",children:n}),s&&i.jsx("p",{className:"text-[10px] text-white/40 mt-0.5",children:s})]}),Gre=({icon:t,title:e,description:n,unlocked:r,progress:s,target:a,color:o})=>i.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-2xl",style:{background:r?`linear-gradient(135deg, ${o}20, ${o}10)`:"rgba(255, 255, 255, 0.03)",border:`1px solid ${r?`${o}40`:"rgba(255, 255, 255, 0.08)"}`},children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:r?`${o}30`:"rgba(255, 255, 255, 0.05)",opacity:r?1:.5},children:t}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-sm font-bold text-white",children:e}),r&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold",style:{background:`${o}30`,color:o},children:" UNLOCKED"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-0.5",children:n}),!r&&i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:o},initial:{width:0},animate:{width:`${Math.min(100,s/a*100)}%`}})}),i.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:[s," / ",a]})]})]})]})});function qre(){const t=yt(),{user:e}=Bs(),[n,r]=_.useState(!0),[s,a]=_.useState({totalTalkTime:0,totalListenTime:0,roomsJoined:0,roomsCreated:0,uniqueUsers:0,longestSession:0,xp:0,daysActive:0});_.useEffect(()=>{(async()=>{if(!(e!=null&&e.id)){r(!1);return}try{const g=await mt(ce(J,"users",e.id));if(g.exists()){const x=g.data();a({totalTalkTime:x.totalTalkTime||Math.floor((x.xp||0)/5),totalListenTime:x.totalListenTime||Math.floor((x.xp||0)/2),roomsJoined:x.roomsJoined||0,roomsCreated:x.roomsCreated||0,uniqueUsers:x.uniqueUsersConnected||Math.floor((x.friendsCount||0)*1.5),longestSession:x.longestSession||0,xp:x.xp||x.totalXP||0,daysActive:x.daysActive||1})}}catch(g){console.error("Error fetching voice stats:",g)}finally{r(!1)}})()},[e==null?void 0:e.id]);const o=_.useMemo(()=>bu(s.xp),[s.xp]),c=_.useMemo(()=>wu(o.level),[o.level]),u=m=>{if(m<60)return`${m}m`;const g=Math.floor(m/60);return g<24?`${g}h ${m%60}m`:`${Math.floor(g/24)}d ${g%24}h`},h=[{icon:i.jsx(li,{size:20,className:"text-violet-400"}),title:"Erste Worte",description:"Sprich 10 Minuten in Voice Rooms",unlocked:s.totalTalkTime>=10,progress:s.totalTalkTime,target:10,color:"#a855f7"},{icon:i.jsx(Fo,{size:20,className:"text-blue-400"}),title:"Marathon Talker",description:"Sprich insgesamt 1 Stunde",unlocked:s.totalTalkTime>=60,progress:s.totalTalkTime,target:60,color:"#3b82f6"},{icon:i.jsx(Ar,{size:20,className:"text-emerald-400"}),title:"Room Explorer",description:"Tritt 10 verschiedenen Rooms bei",unlocked:s.roomsJoined>=10,progress:s.roomsJoined,target:10,color:"#10b981"},{icon:i.jsx(kt,{size:20,className:"text-amber-400"}),title:"Social Butterfly",description:"Verbinde dich mit 20 Usern",unlocked:s.uniqueUsers>=20,progress:s.uniqueUsers,target:20,color:"#f59e0b"},{icon:i.jsx(Co,{size:20,className:"text-rose-400"}),title:"Host Master",description:"Erstelle 5 eigene Rooms",unlocked:s.roomsCreated>=5,progress:s.roomsCreated,target:5,color:"#f43f5e"},{icon:i.jsx(VE,{size:20,className:"text-cyan-400"}),title:"Guter Zuhrer",description:"Hre 2 Stunden lang zu",unlocked:s.totalListenTime>=120,progress:s.totalListenTime,target:120,color:"#06b6d4"}];return n?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center",style:{background:"#050505"},children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-10 h-10 border-2 border-violet-500 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen pb-28",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-4 py-4",style:{background:"rgba(5, 5, 5, 0.9)",backdropFilter:"blur(20px)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{onClick:()=>t(-1),whileTap:{scale:.9},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-black text-white",children:"Voice Statistik"}),i.jsx("p",{className:"text-xs text-white/50",children:"Deine Sprach-Aktivitt"})]})]})}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(Gb,{className:"p-6 text-center",glow:"rgba(139, 92, 246, 0.2)",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(168, 85, 247, 0.2))",border:"2px solid rgba(139, 92, 246, 0.5)",boxShadow:"0 0 30px rgba(139, 92, 246, 0.4)"},children:i.jsx(li,{size:36,className:"text-white"})}),i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:u(s.totalTalkTime)}),i.jsx("p",{className:"text-sm text-white/60",children:"Gesamte Sprechzeit"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[i.jsxs("span",{className:"text-xs text-violet-400 font-bold",children:[c.badge," ",c.name]}),i.jsx("span",{className:"text-white/30",children:""}),i.jsxs("span",{className:"text-xs text-white/50",children:["Level ",o.level]})]})]})}),i.jsxs("div",{className:"px-5 py-2",children:[i.jsx("h3",{className:"text-sm font-bold text-white/60 mb-3 uppercase tracking-wider",children:"bersicht"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(wp,{icon:i.jsx(VE,{size:22,className:"text-blue-400"}),value:u(s.totalListenTime),label:"Zuhrzeit",color:"#3b82f6"}),i.jsx(wp,{icon:i.jsx(Ar,{size:22,className:"text-emerald-400"}),value:s.roomsJoined,label:"Rooms besucht",color:"#10b981"}),i.jsx(wp,{icon:i.jsx(kt,{size:22,className:"text-amber-400"}),value:s.uniqueUsers,label:"User getroffen",color:"#f59e0b"}),i.jsx(wp,{icon:i.jsx(i_,{size:22,className:"text-rose-400"}),value:s.daysActive,label:"Aktive Tage",color:"#f43f5e"})]})]}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(Gb,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(251, 191, 36, 0.2)"},children:i.jsx(zo,{size:20,className:"text-amber-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-white",children:"XP durch Voice"}),i.jsx("p",{className:"text-xs text-white/50",children:"So verdienst du Punkte"})]})]}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex justify-between p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx("span",{className:"text-white/70",children:" Sprechen (pro Minute)"}),i.jsx("span",{className:"text-emerald-400 font-bold",children:"+5 XP"})]}),i.jsxs("div",{className:"flex justify-between p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx("span",{className:"text-white/70",children:" Zuhren (pro Minute)"}),i.jsx("span",{className:"text-emerald-400 font-bold",children:"+1 XP"})]}),i.jsxs("div",{className:"flex justify-between p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx("span",{className:"text-white/70",children:" Room erstellen"}),i.jsx("span",{className:"text-emerald-400 font-bold",children:"+15 XP"})]})]})]})}),i.jsxs("div",{className:"px-5 py-4",children:[i.jsxs("h3",{className:"text-sm font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2",children:[i.jsx(Co,{size:14}),"Voice Achievements"]}),i.jsx("div",{className:"space-y-3",children:h.map((m,g)=>i.jsx(Gre,{...m},g))})]}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(U.button,{onClick:()=>t("/rooms"),whileTap:{scale:.98},className:"w-full py-4 rounded-2xl flex items-center justify-center gap-3 font-bold text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.4)"},children:[i.jsx(Ar,{size:20}),"Jetzt einen Room joinen"]})})]})}const Fv=({children:t,className:e="",glow:n})=>i.jsx("div",{className:`rounded-2xl ${e}`,style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:n?`0 0 30px ${n}`:void 0},children:t}),Kre=({milestone:t,currentStreak:e})=>{const n=Math.min(100,e/t.days*100);return i.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-2xl",style:{background:t.unlocked?"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(249, 115, 22, 0.1))":"rgba(255, 255, 255, 0.03)",border:`1px solid ${t.unlocked?"rgba(249, 115, 22, 0.4)":"rgba(255, 255, 255, 0.08)"}`},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center relative",style:{background:t.unlocked?"linear-gradient(135deg, rgba(249, 115, 22, 0.4), rgba(249, 115, 22, 0.2))":"rgba(255, 255, 255, 0.05)",boxShadow:t.unlocked?"0 0 20px rgba(249, 115, 22, 0.3)":void 0},children:[t.icon,t.unlocked&&i.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"#10b981"},children:i.jsx(ft,{size:12,className:"text-white"})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-sm font-bold text-white",children:t.title}),i.jsxs("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold",style:{background:t.unlocked?"rgba(16, 185, 129, 0.2)":"rgba(255, 255, 255, 0.1)",color:t.unlocked?"#10b981":"rgba(255, 255, 255, 0.5)"},children:[t.days," TAGE"]})]}),i.jsx("p",{className:"text-xs text-white/50 mt-0.5",children:t.reward}),!t.unlocked&&i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #f97316, #fb923c)"},initial:{width:0},animate:{width:`${n}%`}})}),i.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["Noch ",t.days-e," Tage"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"text-sm font-bold text-amber-400",children:["+",t.xpBonus]}),i.jsx("p",{className:"text-[10px] text-white/40",children:"XP Bonus"})]})]})})},Qre=({activeDays:t})=>{const e=new Date,n=["Mo","Di","Mi","Do","Fr","Sa","So"],r=(e.getDay()+6)%7;return i.jsx("div",{className:"flex justify-between gap-2",children:n.map((s,a)=>{const o=a===r,c=a<r,u=t.includes(a);return i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("p",{className:"text-[10px] text-white/40 mb-2",children:s}),i.jsx(U.div,{whileHover:{scale:1.1},className:"w-10 h-10 mx-auto rounded-xl flex items-center justify-center",style:{background:u?"linear-gradient(135deg, rgba(249, 115, 22, 0.5), rgba(249, 115, 22, 0.3))":o?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.05)",border:o?"2px solid #a855f7":u?"1px solid rgba(249, 115, 22, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:u?"0 0 15px rgba(249, 115, 22, 0.3)":void 0},children:u?i.jsx(la,{size:18,className:"text-orange-400"}):c?i.jsx("div",{className:"w-2 h-2 rounded-full bg-white/20"}):i.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})})]},s)})})};function Xre(){const t=yt(),{user:e}=Bs(),[n,r]=_.useState(!0),[s,a]=_.useState({currentStreak:0,longestStreak:0,totalActiveDays:0,lastActiveDate:null,thisWeekDays:[]});_.useEffect(()=>{(async()=>{var u;if(!(e!=null&&e.id)){r(!1);return}try{const h=await mt(ce(J,"users",e.id));if(h.exists()){const m=h.data(),x=(new Date().getDay()+6)%7,v=m.streakDays||m.daysActive||0,E=[];for(let j=0;j<=x&&j<v;j++)E.push(x-j);a({currentStreak:v,longestStreak:m.longestStreak||v,totalActiveDays:m.daysActive||v,lastActiveDate:((u=m.lastActiveAt)==null?void 0:u.toDate())||new Date,thisWeekDays:E})}}catch(h){console.error("Error fetching streak data:",h)}finally{r(!1)}})()},[e==null?void 0:e.id]);const o=[{days:3,title:"Starter",reward:"Erstes Flame Badge",xpBonus:50,icon:i.jsx(la,{size:24,className:s.currentStreak>=3?"text-orange-400":"text-white/30"}),unlocked:s.currentStreak>=3},{days:7,title:"Wochenkrieger",reward:"7-Tage Badge + XP Boost",xpBonus:100,icon:i.jsx(jn,{size:24,className:s.currentStreak>=7?"text-amber-400":"text-white/30"}),unlocked:s.currentStreak>=7},{days:14,title:"Dedicated",reward:"2-Wochen Badge",xpBonus:200,icon:i.jsx(Co,{size:24,className:s.currentStreak>=14?"text-yellow-400":"text-white/30"}),unlocked:s.currentStreak>=14},{days:30,title:"Monats-Meister",reward:"Gold Flame + 2x XP Tag",xpBonus:500,icon:i.jsx(Ci,{size:24,className:s.currentStreak>=30?"text-rose-400":"text-white/30"}),unlocked:s.currentStreak>=30},{days:100,title:"Legendary",reward:"Legendary Badge + Exklusiver Frame",xpBonus:2e3,icon:i.jsx(ZR,{size:24,className:s.currentStreak>=100?"text-violet-400":"text-white/30"}),unlocked:s.currentStreak>=100}];return n?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center",style:{background:"#050505"},children:i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-10 h-10 border-2 border-orange-500 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen pb-28",style:{background:"#050505"},children:[i.jsx("div",{className:"sticky top-0 z-50 px-4 py-4",style:{background:"rgba(5, 5, 5, 0.9)",backdropFilter:"blur(20px)"},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(U.button,{onClick:()=>t(-1),whileTap:{scale:.9},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.1)"},children:i.jsx(gn,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-black text-white",children:"Tgliche Streaks"}),i.jsx("p",{className:"text-xs text-white/50",children:"Halte deine Serie aufrecht"})]})]})}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(Fv,{className:"p-6 text-center relative overflow-hidden",glow:"rgba(249, 115, 22, 0.3)",children:[i.jsx(U.div,{className:"absolute inset-0",style:{background:"radial-gradient(ellipse at center bottom, rgba(249, 115, 22, 0.2) 0%, transparent 70%)"},animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),i.jsxs("div",{className:"relative",children:[i.jsx(U.div,{className:"w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(249, 115, 22, 0.5), rgba(251, 146, 60, 0.3))",border:"3px solid rgba(249, 115, 22, 0.6)",boxShadow:"0 0 40px rgba(249, 115, 22, 0.5)"},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:i.jsx(la,{size:48,className:"text-orange-400"})}),i.jsxs(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:[i.jsx("h2",{className:"text-5xl font-black text-white mb-1",children:s.currentStreak}),i.jsx("p",{className:"text-lg text-orange-400 font-bold",children:"Tage Streak "})]}),i.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl font-bold text-white",children:s.longestStreak}),i.jsx("p",{className:"text-[10px] text-white/50",children:"Lngster Streak"})]}),i.jsx("div",{className:"w-px h-8 bg-white/10"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl font-bold text-white",children:s.totalActiveDays}),i.jsx("p",{className:"text-[10px] text-white/50",children:"Tage gesamt"})]})]})]})]})}),i.jsxs("div",{className:"px-5 py-4",children:[i.jsxs("h3",{className:"text-sm font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2",children:[i.jsx(i_,{size:14}),"Diese Woche"]}),i.jsx(Fv,{className:"p-4",children:i.jsx(Qre,{activeDays:s.thisWeekDays})})]}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(Fv,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(16, 185, 129, 0.2)"},children:i.jsx(zo,{size:20,className:"text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-white",children:"So hltst du deinen Streak"}),i.jsx("p",{className:"text-xs text-white/50",children:"Tglich aktiv sein"})]})]}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx(ft,{size:14,className:"text-emerald-400"}),i.jsx("span",{className:"text-white/70",children:"ffne die App tglich"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx(ft,{size:14,className:"text-emerald-400"}),i.jsx("span",{className:"text-white/70",children:"Tritt einem Voice Room bei"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[i.jsx(ft,{size:14,className:"text-emerald-400"}),i.jsx("span",{className:"text-white/70",children:"Interagiere mit Freunden"})]})]})]})}),i.jsxs("div",{className:"px-5 py-4",children:[i.jsxs("h3",{className:"text-sm font-bold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2",children:[i.jsx(Co,{size:14}),"Streak Meilensteine"]}),i.jsx("div",{className:"space-y-3",children:o.map((c,u)=>i.jsx(Kre,{milestone:c,currentStreak:s.currentStreak},u))})]}),i.jsx("div",{className:"px-5 py-4",children:i.jsxs(U.button,{onClick:()=>t("/rooms"),whileTap:{scale:.98},className:"w-full py-4 rounded-2xl flex items-center justify-center gap-3 font-bold text-white",style:{background:"linear-gradient(135deg, #f97316, #fb923c)",boxShadow:"0 8px 32px rgba(249, 115, 22, 0.4)"},children:[i.jsx(la,{size:20}),"Streak heute sichern"]})})]})}const Yre=()=>i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-synclulu-bg flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-synclulu-violet to-synclulu-violet-dark flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("div",{className:"absolute inset-0 rounded-3xl bg-synclulu-violet/30 pulse-ring"})]}),i.jsx("h1",{className:"font-display text-3xl font-bold mt-6 gradient-text",children:"synclulu"}),i.jsx("p",{className:"text-synclulu-muted text-sm mt-2",children:"Wird geladen..."})]}),lD=_.createContext(null),Jre=()=>{const t=_.useContext(lD);if(!t)throw new Error("useNotifications must be used within NotificationProvider");return t},Zre=({children:t})=>{const{user:e}=mr(),[n,r]=_.useState([]),[s,a]=_.useState(null),[o,c]=_.useState([]);_.useEffect(()=>{if(!(e!=null&&e.id))return;const v=Ve(J,"friendRequests"),E=it(v,$e("toId","==",e.id),$e("status","==","pending")),j=cr(E,S=>{S.docChanges().forEach(N=>{var w;if(N.type==="added"){const k=N.doc.data(),A=((w=k.createdAt)==null?void 0:w.toDate())||new Date;if(Date.now()-A.getTime()<3e4){const F={id:N.doc.id,type:"friend_request",title:"Neue Freundschaftsanfrage",message:`${k.fromDisplayName||k.fromUsername} mchte dein Freund sein!`,fromUserId:k.fromId,fromUsername:k.fromUsername,fromDisplayName:k.fromDisplayName,createdAt:A,read:!1};r(C=>[F,...C]),u(F)}}})});return()=>j()},[e==null?void 0:e.id]),_.useEffect(()=>{if(!(e!=null&&e.id))return;const v=Ve(J,"friendRequests"),E=it(v,$e("fromId","==",e.id),$e("status","==","accepted")),j=cr(E,S=>{S.docChanges().forEach(N=>{if(N.type==="modified"){const w=N.doc.data(),k={id:`accepted-${N.doc.id}`,type:"friend_accepted",title:"Freundschaft besttigt!",message:`${w.toUsername||"Jemand"} hat deine Anfrage angenommen!`,fromUserId:w.toId,fromUsername:w.toUsername,createdAt:new Date,read:!1};r(A=>[k,...A]),u(k)}})});return()=>j()},[e==null?void 0:e.id]),_.useEffect(()=>{if(!(e!=null&&e.id))return;const v=Ve(J,"stars"),E=it(v,$e("toUserId","==",e.id)),j=cr(E,S=>{S.docChanges().forEach(N=>{var w;if(N.type==="added"){const k=N.doc.data(),A=((w=k.createdAt)==null?void 0:w.toDate())||new Date;if(Date.now()-A.getTime()<3e4){const F={id:N.doc.id,type:"star_received",title:" Stern erhalten!",message:`${k.fromDisplayName||"Jemand"} hat dir einen Stern geschenkt!`,fromUserId:k.fromUserId,fromUsername:k.fromUsername,fromDisplayName:k.fromDisplayName,data:{amount:k.amount},createdAt:A,read:!1};r(C=>[F,...C]),u(F)}}})});return()=>j()},[e==null?void 0:e.id]),_.useEffect(()=>{!s&&o.length>0&&(a(o[0]),c(v=>v.slice(1)))},[s,o]),_.useEffect(()=>{if(s){const v=setTimeout(()=>{a(null)},5e3);return()=>clearTimeout(v)}},[s]);const u=_.useCallback(v=>{const E={id:"id"in v?v.id:`toast-${Date.now()}`,createdAt:"createdAt"in v?v.createdAt:new Date,read:!1,...v};s?c(j=>[...j,E]):a(E),"vibrate"in navigator&&navigator.vibrate([50,30,50])},[s]),h=_.useCallback(()=>{a(null)},[]),m=_.useCallback(v=>{r(E=>E.map(j=>j.id===v?{...j,read:!0}:j))},[]),g=_.useCallback(()=>{r(v=>v.map(E=>({...E,read:!0})))},[]),x=n.filter(v=>!v.read).length;return i.jsx(lD.Provider,{value:{notifications:n,unreadCount:x,showToast:u,markAsRead:m,markAllAsRead:g,clearToast:h,currentToast:s},children:t})},ese=()=>{const t=yt(),{currentToast:e,clearToast:n,markAsRead:r}=Jre(),[s,a]=_.useState(!1),[o,c]=_.useState(!1);_.useEffect(()=>{e&&(a(!0),c(!1))},[e]);const u=()=>{c(!0),setTimeout(()=>{a(!1),n()},300)},h=()=>{if(e){switch(r(e.id),e.type){case"friend_request":t("/notifications");break;case"friend_accepted":e.fromUserId&&t(`/user/${e.fromUserId}`);break;case"star_received":t("/profile");break;case"room_invite":t("/discover");break;default:t("/notifications")}u()}},m=x=>{switch(x){case"friend_request":return i.jsx(Dn,{size:24,className:"text-synclulu-violet"});case"friend_accepted":return i.jsx(ft,{size:24,className:"text-green-500"});case"star_received":return i.jsx(jn,{size:24,className:"text-amber-500"});case"room_invite":return i.jsx(kt,{size:24,className:"text-blue-500"});default:return i.jsx(Tl,{size:24,className:"text-synclulu-violet"})}},g=x=>{switch(x){case"friend_request":return"from-purple-500/10 to-pink-500/10 border-purple-200";case"friend_accepted":return"from-green-500/10 to-emerald-500/10 border-green-200";case"star_received":return"from-amber-500/10 to-yellow-500/10 border-amber-200";case"room_invite":return"from-blue-500/10 to-cyan-500/10 border-blue-200";default:return"from-gray-500/10 to-gray-400/10 border-gray-200"}};return!e||!s?null:i.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[100] px-4 pt-safe-top pointer-events-none",children:[i.jsx("div",{className:`mt-4 pointer-events-auto transform transition-all duration-300 ease-out ${o?"translate-y-[-100%] opacity-0":"translate-y-0 opacity-100"}`,children:i.jsxs("div",{onClick:h,className:`bg-gradient-to-r ${g(e.type)} backdrop-blur-lg rounded-2xl p-4 shadow-lg border cursor-pointer active:scale-[0.98] transition-transform`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center flex-shrink-0",children:m(e.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-synclulu-text text-sm",children:e.title}),i.jsx("p",{className:"text-sm text-synclulu-muted mt-0.5 line-clamp-2",children:e.message}),i.jsx("p",{className:"text-xs text-synclulu-violet mt-1 font-medium",children:"Tippe zum Ansehen "})]}),i.jsx("button",{onClick:x=>{x.stopPropagation(),u()},className:"w-8 h-8 rounded-full bg-white/50 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",children:i.jsx(ln,{size:16})})]}),i.jsx("div",{className:"mt-3 h-1 bg-white/30 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-synclulu-violet rounded-full animate-shrink",style:{animationDuration:"5s"}})})]})}),i.jsx("style",{children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
        .animate-shrink {
          animation: shrink linear forwards;
        }
      `})]})},zv=3;class tse extends _.Component{constructor(){super(...arguments);wr(this,"state",{hasError:!1,error:null,errorInfo:null,retryCount:0});wr(this,"handleRetry",()=>{const{retryCount:n}=this.state;n<zv&&this.setState({hasError:!1,error:null,errorInfo:null,retryCount:n+1})});wr(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0}),window.location.href="/"});wr(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){var s,a;this.setState({errorInfo:r}),console.error(" GlobalErrorBoundary caught error:",n),console.error("Component Stack:",r.componentStack),(a=(s=this.props).onError)==null||a.call(s,n,r)}render(){const{hasError:n,error:r,retryCount:s}=this.state,{children:a,fallback:o}=this.props;return n?o||i.jsxs("div",{className:"fixed inset-0 bg-[#050505] flex items-center justify-center p-6 safe-top safe-bottom",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden",children:i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(239,68,68,0.1)_0%,transparent_70%)]"})}),i.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative w-full max-w-md",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 p-8 text-center",children:[i.jsx(U.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5,repeat:2},className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:i.jsx(wf,{size:40,className:"text-red-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Oops! Etwas ist schiefgelaufen"}),i.jsx("p",{className:"text-white/60 mb-6",children:"Ein unerwarteter Fehler ist aufgetreten. Keine Sorge, deine Daten sind sicher."}),!1,s>0&&i.jsxs("p",{className:"text-amber-400/80 text-sm mb-4",children:["Versuch ",s," von ",zv]}),i.jsxs("div",{className:"space-y-3",children:[s<zv?i.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:this.handleRetry,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold flex items-center justify-center gap-2",children:[i.jsx(Vg,{size:20}),"Nochmal versuchen"]}):i.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:this.handleReload,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold flex items-center justify-center gap-2",children:[i.jsx(Vg,{size:20}),"Seite neu laden"]}),i.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:this.handleGoHome,className:"w-full p-4 rounded-2xl bg-white/10 text-white/80 font-semibold flex items-center justify-center gap-2",children:[i.jsx(KR,{size:20}),"Zurck zur Startseite"]})]})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsx("p",{className:"text-white/30 text-xs mt-2",children:"synclulu v23.0"})]})]})]}):a}}const Bv=_.memo(function({checked:e,onChange:n,children:r}){return i.jsxs("button",{onClick:()=>n(!e),className:"flex items-start gap-4 text-left w-full p-4 rounded-2xl transition-all",style:{background:e?"rgba(34, 197, 94, 0.05)":"rgba(255, 255, 255, 0.02)",border:e?"1px solid rgba(34, 197, 94, 0.2)":"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{className:"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5 transition-all",style:{background:e?"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)":"rgba(255, 255, 255, 0.05)",border:e?"none":"2px solid rgba(255, 255, 255, 0.1)"},children:e&&i.jsx(ko,{size:14,className:"text-white"})}),i.jsx("div",{className:"flex-1",children:r})]})}),nse=_.memo(function({onAccept:e}){const[n,r]=_.useState(!1),[s,a]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(!1),m=n&&s&&o,g=_.useCallback(async()=>{var E;if(!(!m||u)){h(!0);try{const j=(E=Rt.currentUser)==null?void 0:E.uid;j&&await Ge(ce(J,"users",j),{hasAcceptedTerms:!0,hasAcceptedPrivacy:!0,hasVerifiedAge:!0,consentTimestamp:Ut(),consentVersion:"2.0-privacy-first"}),localStorage.setItem("synclulu_consent_accepted","true"),"vibrate"in navigator&&navigator.vibrate([10,50,10]),e()}catch(j){console.error("Consent Error:",j),localStorage.setItem("synclulu_consent_accepted","true"),e()}finally{h(!1)}}},[m,u,e]),x=()=>{window.open("/legal","_blank","width=600,height=800,scrollbars=yes")},v=()=>{window.open("/datenschutz","_blank","width=600,height=800,scrollbars=yes")};return i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(5, 5, 5, 0.98)"},children:i.jsx("div",{className:"w-full h-full overflow-y-auto px-6 py-8",children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"w-full max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(217, 70, 239, 0.2) 100%)",border:"1px solid rgba(168, 85, 247, 0.3)"},children:i.jsx(zs,{size:36,className:"text-purple-400"})}),i.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Willkommen bei synclulu"}),i.jsx("p",{className:"text-sm text-white/50",children:"Bevor du startest, lies bitte unsere Bedingungen"})]}),i.jsxs("div",{className:"space-y-3 mb-8",children:[i.jsxs(Bv,{checked:n,onChange:r,children:[i.jsxs("p",{className:"text-sm text-white/80",children:["Ich akzeptiere die"," ",i.jsxs("button",{onClick:E=>{E.stopPropagation(),x()},className:"text-purple-400 underline inline-flex items-center gap-1",children:["Nutzungsbedingungen",i.jsx(mb,{size:12})]})]}),i.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:"Inkl. Community-Richtlinien und KI-Moderation"})]}),i.jsxs(Bv,{checked:s,onChange:a,children:[i.jsxs("p",{className:"text-sm text-white/80",children:["Ich akzeptiere die"," ",i.jsxs("button",{onClick:E=>{E.stopPropagation(),v()},className:"text-purple-400 underline inline-flex items-center gap-1",children:["Datenschutzerklrung",i.jsx(mb,{size:12})]})]}),i.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:"Deine Daten werden sicher verarbeitet"})]}),i.jsxs(Bv,{checked:o,onChange:c,children:[i.jsx("p",{className:"text-sm text-white/80",children:"Ich bin mindestens 16 Jahre alt"}),i.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:"Erforderlich fr die Nutzung von synclulu"})]})]}),i.jsx("div",{className:"p-4 rounded-xl mb-6",style:{background:"rgba(168, 85, 247, 0.05)",border:"1px solid rgba(168, 85, 247, 0.1)"},children:i.jsxs("p",{className:"text-xs text-white/60 text-center",children:[" ",i.jsx("span",{className:"text-purple-400",children:"Privacy-First:"})," Standort und Mikrofon werden nur abgefragt, wenn du sie aktiv nutzen mchtest."]})}),i.jsx(U.button,{whileTap:{scale:m?.98:1},onClick:g,disabled:!m||u,className:"w-full py-4 rounded-2xl flex items-center justify-center gap-3 font-bold text-white transition-all",style:{background:m?"linear-gradient(135deg, #A855F7 0%, #D946EF 100%)":"rgba(255, 255, 255, 0.05)",opacity:m?1:.5,boxShadow:m?"0 0 30px rgba(168, 85, 247, 0.3)":"none"},children:u?i.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):i.jsxs(i.Fragment,{children:[i.jsx(fr,{size:18}),i.jsx("span",{children:"Los geht's!"})]})}),i.jsx("p",{className:"text-center text-[10px] text-white/30 mt-6 mb-8",children:"Mit der Zustimmung besttigst du, dass du unsere Regeln gelesen und verstanden hast."})]})})})}),rse=Do.memo(function(){const e=_.useRef(null),n=_.useRef(),r=_.useRef([]);return _.useEffect(()=>{const s=e.current;if(!s)return;const a=s.getContext("2d");if(!a)return;const o=()=>{s.width=window.innerWidth,s.height=window.innerHeight,r.current=[];const h=Math.floor(s.width*s.height/8e3);for(let m=0;m<h;m++)r.current.push({x:Math.random()*s.width,y:Math.random()*s.height,size:Math.random()*1.5+.5,speed:Math.random()*.02+.005,opacity:Math.random()*.5+.3})};o(),window.addEventListener("resize",o);let c=0;const u=()=>{c+=.01,a.clearRect(0,0,s.width,s.height),r.current.forEach(h=>{const m=Math.sin(c*h.speed*100+h.x)*.3+.7;a.beginPath(),a.arc(h.x,h.y,h.size,0,Math.PI*2),a.fillStyle=`rgba(255, 255, 255, ${h.opacity*m})`,a.fill(),a.beginPath(),a.arc(h.x,h.y,h.size*2,0,Math.PI*2),a.fillStyle=`rgba(139, 92, 246, ${h.opacity*m*.2})`,a.fill()}),n.current=requestAnimationFrame(u)};return u(),()=>{window.removeEventListener("resize",o),n.current&&cancelAnimationFrame(n.current)}},[]),i.jsx("canvas",{ref:e,className:"absolute inset-0 pointer-events-none",style:{opacity:.7}})}),sse=Do.memo(function({scrollProgress:e,color:n}){const r=e*60;return i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{perspective:"800px",perspectiveOrigin:"50% 100%"},children:i.jsx("div",{className:"absolute w-[200%] h-[200%] left-[-50%]",style:{transform:`rotateX(70deg) translateY(${r}px)`,transformOrigin:"center top",background:`
            linear-gradient(${n}15 1px, transparent 1px),
            linear-gradient(90deg, ${n}15 1px, transparent 1px)
          `,backgroundSize:"80px 80px",maskImage:"linear-gradient(to top, transparent, black 20%, black 80%, transparent)",WebkitMaskImage:"linear-gradient(to top, transparent, black 20%, black 80%, transparent)"}})})}),_p=Do.memo(function({x:e,y:n,size:r,color:s,delay:a}){return i.jsx(U.div,{className:"absolute rounded-full pointer-events-none",style:{left:e,top:n,width:r,height:r,background:`radial-gradient(circle, ${s}30 0%, ${s}10 40%, transparent 70%)`,filter:"blur(40px)"},animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,delay:a,ease:"easeInOut"}})}),ise=Do.memo(function({color:e,intensity:n}){const s={subtle:.03,normal:.06,intense:.1}[n];return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[150%] h-[60%] pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 0%, ${e}${Math.floor(s*255).toString(16).padStart(2,"0")} 0%, transparent 60%)`}}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40%] pointer-events-none",style:{background:`linear-gradient(to top, ${e}${Math.floor(s*.5*255).toString(16).padStart(2,"0")} 0%, transparent 100%)`}})]})}),ase=Do.memo(function({intensity:e="normal",color:n="#8b5cf6",showNebula:r=!0}){const s=_.useRef(null),[a,o]=_.useState(0),c=_.useCallback(()=>{o(window.scrollY)},[]);_.useEffect(()=>(window.addEventListener("scroll",c,{passive:!0}),()=>window.removeEventListener("scroll",c)),[c]);const u=Math.min(a/500,1);return i.jsxs("div",{ref:s,className:"fixed inset-0 overflow-hidden pointer-events-none",style:{background:"#000"},children:[i.jsx("div",{className:"absolute inset-0 bg-black"}),i.jsx(ise,{color:n,intensity:e}),i.jsx(rse,{}),i.jsx(sse,{scrollProgress:u,color:n}),r&&i.jsxs(i.Fragment,{children:[i.jsx(_p,{x:"10%",y:"20%",size:400,color:"#a855f7",delay:0}),i.jsx(_p,{x:"70%",y:"10%",size:300,color:"#7c3aed",delay:2}),i.jsx(_p,{x:"80%",y:"60%",size:350,color:"#8b5cf6",delay:4}),i.jsx(_p,{x:"20%",y:"70%",size:250,color:"#6366f1",delay:6})]}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 50% 50%, transparent 40%, rgba(0, 0, 0, 0.4) 100%)"}})]})}),ose=_.memo(function({isOpen:e,onClose:n,onCreateRoom:r,onJoinRoom:s}){return i.jsx(qt,{children:e&&i.jsxs(i.Fragment,{children:[i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[998]",style:{background:"rgba(0, 0, 0, 0.7)"},onClick:n}),i.jsx(U.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-28 left-1/2 -translate-x-1/2 z-[999] w-[90%] max-w-sm",children:i.jsx("div",{className:"rounded-3xl overflow-hidden p-1",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(168, 85, 247, 0.2))"},children:i.jsxs("div",{className:"rounded-[22px] p-5",style:{background:"rgba(10, 8, 20, 0.95)",backdropFilter:"blur(40px)"},children:[i.jsx("h3",{className:"text-center text-xs font-bold uppercase tracking-[0.3em] text-white/40 mb-5",children:"Room Optionen"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Nt("medium"),r(),n()},className:"w-full py-5 rounded-2xl flex flex-col items-center gap-2",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)"},children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsx("span",{className:"text-xs font-black tracking-wider uppercase text-emerald-400",children:"Room erstellen"}),i.jsx("span",{className:"text-[10px] text-white/40",children:"Starte deinen eigenen Voice Room"})]}),i.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Nt("light"),s(),n()},className:"w-full py-4 rounded-2xl flex flex-col items-center gap-2",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"text-xs font-bold tracking-wider uppercase text-white/60",children:"Rooms entdecken"})]})]})]})})})]})})}),Np=_.memo(function({to:e,icon:n,label:r}){return i.jsx(lz,{to:e,className:({isActive:s})=>`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-xl transition-all ${s?"text-violet-400":"text-white/40"}`,children:({isActive:s})=>i.jsxs(U.div,{className:"flex flex-col items-center gap-1",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:[i.jsxs("div",{className:"relative",style:{filter:s?"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))":"none"},children:[i.jsx(n,{size:22,strokeWidth:s?2.5:1.5}),s&&i.jsx(U.div,{layoutId:"nav-dot",className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-violet-400 rounded-full",style:{boxShadow:"0 0 6px rgba(139, 92, 246, 0.8)"}})]}),i.jsx("span",{className:"text-[10px] font-medium",children:r})]})})}),lse=_.memo(function({onClick:e}){return i.jsxs(U.button,{onClick:()=>{Nt("medium"),e()},whileTap:{scale:.9},className:"relative w-16 h-16 -mt-6",children:[i.jsx(U.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.5) 0%, transparent 70%)"},animate:{scale:[1,1.6,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),i.jsx(U.div,{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)"},animate:{scale:[1,1.15,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),i.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.2)",border:"3px solid rgba(255, 255, 255, 0.2)"},children:i.jsx(jf,{size:32,className:"text-white",strokeWidth:2.5})})]})});function cse(){const t=yt(),[e,n]=_.useState(!1),r=_.useCallback(()=>{t("/rooms?create=true")},[t]),s=_.useCallback(()=>{t("/rooms")},[t]);return i.jsxs(i.Fragment,{children:[i.jsx(ose,{isOpen:e,onClose:()=>n(!1),onCreateRoom:r,onJoinRoom:s}),i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-[999]",style:{background:"rgba(5, 5, 5, 0.95)",backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",borderTop:"1px solid rgba(255, 255, 255, 0.08)"},children:i.jsxs("div",{className:"flex items-end justify-around h-20 max-w-lg mx-auto px-2 pb-safe",children:[i.jsx(Np,{to:"/",icon:KR,label:"Home"}),i.jsx(Np,{to:"/rooms",icon:Ar,label:"Rooms"}),i.jsx(lse,{onClick:()=>n(!0)}),i.jsx(Np,{to:"/friends",icon:kt,label:"Friends"}),i.jsx(Np,{to:"/profile",icon:Z0,label:"Profil"})]})})]})}const use=_.createContext(void 0),$v="synclulu-theme",_T=()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",dse=t=>{const e=document.querySelector('meta[name="theme-color"]'),n=t?"#0b0b0b":"#ffffff";if(e)e.setAttribute("content",n);else{const a=document.createElement("meta");a.name="theme-color",a.content=n,document.head.appendChild(a)}const r=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]'),s=t?"black-translucent":"default";if(r)r.setAttribute("content",s);else{const a=document.createElement("meta");a.name="apple-mobile-web-app-status-bar-style",a.content=s,document.head.appendChild(a)}},Wv=({children:t})=>{const[e,n]=_.useState(()=>typeof window>"u"?"system":localStorage.getItem($v)||"system"),[r,s]=_.useState(()=>{if(typeof window>"u")return"light";const h=localStorage.getItem($v);return h&&h!=="system"?h:_T()}),a=_.useCallback(h=>{const m=document.documentElement;h==="dark"?(m.classList.add("dark"),m.classList.remove("light"),m.setAttribute("data-theme","dark")):(m.classList.add("light"),m.classList.remove("dark"),m.setAttribute("data-theme","light")),dse(h==="dark")},[]),o=_.useCallback(h=>{n(h),localStorage.setItem($v,h);const m=h==="system"?_T():h;s(m),a(m)},[a]),c=_.useCallback(()=>{o(r==="dark"?"light":"dark")},[r,o]);_.useEffect(()=>{const h=window.matchMedia("(prefers-color-scheme: dark)"),m=g=>{if(e==="system"){const x=g.matches?"dark":"light";s(x),a(x)}};return h.addEventListener("change",m),a(r),()=>{h.removeEventListener("change",m)}},[e,r,a]),_.useEffect(()=>{a(r)},[]);const u={theme:e,resolvedTheme:r,setTheme:o,toggleTheme:c,isDark:r==="dark"};return i.jsx(use.Provider,{value:u,children:t})},hse=_.createContext(null);function fse({children:t}){const{user:e}=Bs(),[n,r]=_.useState(null),[s,a]=_.useState(!0),[o,c]=_.useState(null),[u,h]=_.useState(!0),[m,g]=_.useState(0),x=_.useCallback(async()=>{var E,j;if(!(e!=null&&e.id)){r(null),a(!1);return}try{const S=await mt(ce(J,"users",e.id));if(S.exists()){const N=S.data(),w=N.xp||N.totalXP||0,k=bu(w),A=Math.min(100,k.currentXP/k.neededXP*100),D=wu(k.level);r({id:e.id,displayName:N.displayName||N.username||"Anonym",username:N.username,photoURL:N.photoURL,xp:w,level:k.level,progress:A,tier:D,isFounder:N.role==="founder"||N.isAdmin===!0,isAdmin:N.isAdmin===!0,isActive:N.isActive||!1,createdAt:(j=(E=N.createdAt)==null?void 0:E.toDate)==null?void 0:j.call(E)})}}catch(S){console.error("Error fetching profile:",S)}finally{a(!1)}},[e==null?void 0:e.id]);_.useEffect(()=>{x()},[x]),_.useEffect(()=>{if(!(e!=null&&e.id))return;const E=cr(ce(J,"users",e.id),j=>{if(j.exists()){const S=j.data(),N=S.xp||S.totalXP||0,w=bu(N),k=Math.min(100,w.currentXP/w.neededXP*100),A=wu(w.level);r(D=>D?{...D,xp:N,level:w.level,progress:k,tier:A,isActive:S.isActive||!1,displayName:S.displayName||S.username||D.displayName,photoURL:S.photoURL||D.photoURL}:null)}},j=>{console.log("Profile listener error:",j.code)});return()=>E()},[e==null?void 0:e.id]),_.useEffect(()=>{(async()=>{const j=localStorage.getItem("synclulu_ip_location"),S=localStorage.getItem("synclulu_ip_location_time");if(j&&S&&Date.now()-parseInt(S)<18e5){c(JSON.parse(j)),h(!1);return}try{const w=await(await fetch("https://ipapi.co/json/")).json(),k={city:w.city||"Unknown",country:w.country_name||"Unknown",countryCode:w.country_code||"XX"};c(k),localStorage.setItem("synclulu_ip_location",JSON.stringify(k)),localStorage.setItem("synclulu_ip_location_time",Date.now().toString())}catch{c({city:"Vibe Zone",country:"Universe",countryCode:""})}finally{h(!1)}})()},[]),_.useEffect(()=>{if(e!=null&&e.id)try{const E=it(Ve(J,"messages"),$e("recipientId","==",e.id),$e("read","==",!1)),j=cr(E,S=>{g(S.docs.length)},()=>{g(0)});return()=>j()}catch{}},[e==null?void 0:e.id]);const v=_.useMemo(()=>({profile:n,isLoading:s,ipLocation:o,isLoadingLocation:u,unreadMessages:m,refreshProfile:x}),[n,s,o,u,m,x]);return i.jsx(hse.Provider,{value:v,children:t})}const mse=()=>{const{showXPToast:t,xpToastAmount:e,xpToastReason:n,hideXPToast:r}=mr(),{playXPSound:s}=zQ();return _.useEffect(()=>{if(t){s();const a=setTimeout(()=>{r()},3e3);return()=>clearTimeout(a)}},[t,r,s]),t?i.jsx("div",{className:"fixed top-4 right-4 z-50 animate-bounce",children:i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(zo,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-lg",children:["+",e," XP"]}),i.jsx("p",{className:"text-xs opacity-90",children:n})]})]})}):null};function pse(){const{isAuthenticated:t,isLoading:e}=Bs(),{user:n}=mr(),{isLoading:r}=BQ(),[s,a]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(!1),[m,g]=_.useState(()=>localStorage.getItem("synclulu_consent_accepted")==="true");return Vo(),_.useEffect(()=>{const v=()=>{const j=localStorage.getItem("synclulu_consent_accepted")==="true";g(j)};window.addEventListener("storage",v);const E=setInterval(v,500);return()=>{window.removeEventListener("storage",v),clearInterval(E)}},[]),_.useEffect(()=>{const v=setTimeout(()=>h(!0),5e3);return()=>clearTimeout(v)},[]),_.useEffect(()=>{(async()=>{if(n!=null&&n.id)try{const j=(await mt(ce(J,"users",n.id))).data(),S=(j==null?void 0:j.isAdmin)===!0||(j==null?void 0:j.role)==="founder"||(j==null?void 0:j.role)==="admin";a(S),(j==null?void 0:j.hasAcceptedTerms)===!0&&(localStorage.setItem("synclulu_consent_accepted","true"),g(!0))}catch{a(!1)}c(!0)})()},[n==null?void 0:n.id]),(e||r||!o)&&!u?i.jsx(Yre,{}):t?(n==null?void 0:n.onboardingCompleted)===!0?i.jsx(tse,{children:i.jsx(Wv,{children:i.jsx(Zre,{children:i.jsxs(fse,{children:[!m&&i.jsx(nse,{onAccept:()=>g(!0)}),i.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-black pb-28 theme-transition relative sovereign-app",children:[i.jsx(ase,{intensity:"normal",showNebula:!0}),i.jsx(ese,{}),i.jsx(mse,{}),i.jsxs(Gy,{children:[i.jsx(Le,{path:"/",element:i.jsx(nT,{})}),i.jsx(Le,{path:"/home",element:i.jsx(nT,{})}),i.jsx(Le,{path:"/rooms",element:i.jsx(Iv,{})}),i.jsx(Le,{path:"/discover",element:i.jsx(Iv,{})}),i.jsx(Le,{path:"/map",element:i.jsx(Iv,{})}),i.jsx(Le,{path:"/room/:roomId",element:i.jsx(rT,{})}),i.jsx(Le,{path:"/voice-room/:roomId",element:i.jsx(rT,{})}),i.jsx(Le,{path:"/profile",element:i.jsx(Vte,{})}),i.jsx(Le,{path:"/user/:userId",element:i.jsx(rne,{})}),i.jsx(Le,{path:"/friends",element:i.jsx(Gte,{})}),i.jsx(Le,{path:"/profile-visitors",element:i.jsx(ene,{})}),i.jsx(Le,{path:"/notifications",element:i.jsx(Xte,{})}),i.jsx(Le,{path:"/voice-stats",element:i.jsx(qre,{})}),i.jsx(Le,{path:"/streaks",element:i.jsx(Xre,{})}),i.jsx(Le,{path:"/settings",element:i.jsx(fne,{})}),i.jsx(Le,{path:"/settings/devices",element:i.jsx(gne,{})}),i.jsx(Le,{path:"/help",element:i.jsx(xne,{})}),i.jsx(Le,{path:"/invites",element:i.jsx(hT,{})}),i.jsx(Le,{path:"/referral-status",element:i.jsx(hT,{})}),i.jsx(Le,{path:"/admin",element:i.jsx(fT,{})}),i.jsx(Le,{path:"/nexus-admin",element:i.jsx(gre,{})}),i.jsx(Le,{path:"/impressum",element:i.jsx(Vv,{})}),i.jsx(Le,{path:"/datenschutz",element:i.jsx(Uv,{})}),i.jsx(Le,{path:"/legal",element:i.jsx(pT,{})}),i.jsx(Le,{path:"/legal-center",element:i.jsx(pT,{})}),i.jsx(Le,{path:"*",element:i.jsx(Hy,{to:"/",replace:!0})})]}),i.jsx(cse,{})]})]})})})}):i.jsx(Wv,{children:i.jsxs(Gy,{children:[i.jsx(Le,{path:"/onboarding",element:i.jsx(gX,{})}),i.jsx(Le,{path:"/impressum",element:i.jsx(Vv,{})}),i.jsx(Le,{path:"/datenschutz",element:i.jsx(Uv,{})}),i.jsx(Le,{path:"*",element:i.jsx(Hy,{to:"/onboarding",replace:!0})})]})}):i.jsx(Wv,{children:i.jsxs(Gy,{children:[i.jsx(Le,{path:"/",element:i.jsx(fX,{})}),i.jsx(Le,{path:"/login",element:i.jsx(mX,{})}),i.jsx(Le,{path:"/register",element:i.jsx(wT,{})}),i.jsx(Le,{path:"/signup",element:i.jsx(wT,{})}),i.jsx(Le,{path:"/register-legacy",element:i.jsx(bT,{})}),i.jsx(Le,{path:"/join/:code",element:i.jsx(yT,{})}),i.jsx(Le,{path:"/join",element:i.jsx(yT,{})}),i.jsx(Le,{path:"/invite/:code",element:i.jsx(bT,{})}),i.jsx(Le,{path:"/reset-password",element:i.jsx(_re,{})}),i.jsx(Le,{path:"/impressum",element:i.jsx(Vv,{})}),i.jsx(Le,{path:"/datenschutz",element:i.jsx(Uv,{})}),i.jsx(Le,{path:"/admin",element:i.jsx(fT,{})}),i.jsx(Le,{path:"*",element:i.jsx(Hy,{to:"/",replace:!0})})]})})}Hv.createRoot(document.getElementById("root")).render(i.jsx(Do.StrictMode,{children:i.jsx(iz,{children:i.jsx(pse,{})})}));NT(async()=>{const{initializeCopyProtection:t}=await import("./copyProtection-CsCcj71o.js");return{initializeCopyProtection:t}},[]).then(({initializeCopyProtection:t})=>{setTimeout(()=>{try{t()}catch(e){console.warn("Protection init failed:",e)}},1e3)}).catch(()=>{});export{j7 as A,Ese as B,H$ as C,o2 as D,Wl as E,eo as F,to as G,Vse as H,Ose as I,q7 as J,ga as K,Ise as L,bj as M,k$ as N,Vp as O,VC as P,h$ as Q,Dse as R,no as T,n_ as W,NT as _,bse as a,X7 as b,j0 as c,Pse as d,K$ as e,kse as f,PW as g,rs as h,_se as i,i7 as j,Rse as k,Lse as l,Q7 as m,wse as n,Cse as o,xse as p,vse as q,t_ as r,jse as s,CC as t,Nse as u,Mse as v,yse as w,Tse as x,Ase as y,Sse as z};
